const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/inquiry/index-s1qy8HYY.js","assets/inquiry/vendor-BXBPYTiD.js","assets/inquiry/assets-BVfUIR9_.js","assets/inquiry/libphonenumber-js-Cce9jLod.js","assets/inquiry/lottie-D2s2cz97.js","assets/inquiry/inquiry-fog-C1sbmCWC.js","assets/inquiry/sentry-1iq0NFBa.js","assets/inquiry/redux-form-6G56-1-b.js","assets/inquiry/amplitude-js-Dr22cH67.js","assets/inquiry/fingerprintjs-Ct6Kfj79.js","assets/inquiry/luxon-C6v2iUrG.js","assets/inquiry/assets-icons-C4dKbXoA.js","assets/inquiry/react-select-BTklhJ9n.js","assets/inquiry/handlebars-D0mYST3F.js","assets/inquiry/faceapi-B9LXjYUE.js","assets/inquiry/translation.en-US.json-CvyTMKHp.js","assets/inquiry/index-CXfDlW41.js","assets/inquiry/index-Dd1Uj_i2.js","assets/inquiry/AllowedOrigins-C_vQOylw.js","assets/inquiry/index-zOWLkdpI.js","assets/inquiry/EidEasyPopup-t1zY4PWH.js","assets/inquiry/index-C_uQq4aA.js","assets/inquiry/index-BVTFAfH8.js","assets/inquiry/index-DzIvZXYR.js","assets/inquiry/jitteredBackoff-CoWazkrz.js","assets/inquiry/index-DbaTprQo.js","assets/inquiry/xstate-CGiBVXiM.js","assets/inquiry/mediapipe-BrT72MQi.js","assets/inquiry/index-D5Y5rR4G.css"])))=>i.map(i=>d[i]);
import{M as s0,N as c0,O as Vh,P as l0,Q as di,R as zo,S as d0,T as i,V as Bh,W as Ke,$ as va,X as I,Y as u0,Z as qn,a0 as W,a1 as mi,r as f,a2 as C,a3 as Ol,a4 as qh,a5 as m0,a6 as Uh,a7 as h0,a8 as Ll,a9 as p0,aa as tt,ab as ya,ac as Sn,ad as f0,ae as g0,af as gu,ag as sl,ah as uo,ai as bu,aj as js,ak as Hh,al as zt,am as jt,an as yn,ao as Li,ap as b0,aq as C0,ar as $h,as as ti,at as Vr,au as x0,av as vt,aw as Ps,ax as Gn,ay as Cu,az as v0,aA as Fl,aB as Gh,aC as K,aD as Wh,aE as zh,aF as ke,aG as Dt,h as y0,aH as Ia,aI as I0,aJ as ls,aK as S0,aL as w0,aM as Yh,aN as ai,aO as Kh,aP as _0,aQ as R0,aR as A0,aS as xu,aT as T0,aU as Ml,aV as E0,aW as k0,aX as N0,aY as j0,aZ as Ds,a_ as ds,a$ as us,b0 as Qh,b1 as P0,b2 as D0,b3 as Vl,b4 as Zh,b5 as Ti,b6 as Bn,b7 as Bl,b8 as O0,b9 as cl,ba as L0,bb as Os,bc as ro,x as F0,bd as M0,be as V0,bf as B0,bg as q0,bh as U0,bi as Jh,bj as H0,bk as $0,bl as Sa,bm as wa,bn as G0,bo as j,bp as X,bq as De,br as W0,bs as z0,bt as Y0,bu as yc,bv as K0,bw as vu,bx as Q0,by as Z0,bz as yu,bA as _r,bB as ei,bC as J0,bD as X0,bE as e1,bF as t1,bG as n1,bH as i1,bI as r1,bJ as o1,bK as a1,bL as Xh,bM as ep,bN as s1,bO as P,bP as oe,bQ as Ge,bR as c1,bS as l1,bT as Ic,bU as d1,bV as Iu,bW as u1,bX as Mo,bY as m1,bZ as h1,b_ as Su,b$ as wu,c0 as p1,c1 as _u,c2 as f1,c3 as g1,c4 as tp,c5 as np,c6 as b1,c7 as C1,c8 as x1,c9 as ip,ca as v1,cb as xe,cc as rp,cd as y1,ce as I1,cf as S1,cg as w1,ch as _1,ci as R1,cj as A1,ck as T1,cl as E1,cm as k1,cn as N1,co as j1,cp as P1,cq as D1,cr as O1,cs as L1,ct as F1,cu as M1,cv as V1,cw as B1,cx as q1}from"./vendor-BXBPYTiD.js";import{S as U1,b as ql,c as H1,d as $1,e as G1,f as W1,h as z1,i as Y1,j as K1,k as Q1,l as Z1,m as J1,n as X1,o as eC,P as tC,p as nC,C as iC,q as rC,r as oC,s as aC,t as sC,u as cC,v as lC,w as dC,x as uC,y as mC,z as hC,A as Ul,B as Hl,D as $l,E as op,F as Gl,G as ap,H as pC,I as fC,J as sp,K as gC,L as bC,M as Wl,N as CC,O as xC,Q as vC,R as yC,T as IC,U as SC,V as wC,W as _C,X as Ls,Y as RC,Z as Fn,_ as AC,$ as TC,a0 as EC,a1 as Ru,a2 as kC,a3 as NC,a4 as jC,a5 as Fs,a6 as cp,a7 as PC,a8 as lp,a9 as DC,aa as dp,ab as up,ac as OC,ad as LC,ae as FC,af as MC,ag as VC,ah as mp,ai as ms,aj as ki,ak as Rr,al as BC,am as hp,an as pp,ao as fp,ap as gp,aq as kn,ar as qC,as as UC,at as HC,au as $C,av as bp,aw as ll,ax as Cp,ay as GC}from"./assets-BVfUIR9_.js";import{A as pt,a as Ct,c as Z,s as ni,i as xp,b as _a,d as WC,e as mt,f as Nn,g as zC,h as YC,j as KC,k as QC,l as ZC,U as tn,m as JC,n as XC,o as zl,p as mr,q as Ms,r as Ci,B as Br,t as ex,u as Yl,D as vp,v as yp,w as Ip,x as Sp,y as wp,z as mo,C as tx,E as nx,F as ix,G as Vs,H as Sc,I as oa,J as Au,K as Kl,L as rx,M as ox,N as dl,O as ax,P as sx,Q as _p,R as cx,S as lx,T as dx,V as xr}from"./inquiry-fog-C1sbmCWC.js";import{b as Ir,c as ux,a as rr,d as mx,e as hx,g as px,w as fx,i as gx}from"./sentry-1iq0NFBa.js";import{r as Te}from"./redux-form-6G56-1-b.js";import{n as Hi}from"./amplitude-js-Dr22cH67.js";import{i as bx,V as Cx,k as xx,f as vx}from"./fingerprintjs-Ct6Kfj79.js";import{D as Mn}from"./luxon-C6v2iUrG.js";import{S as Rp,a as Ql,b as Zl,c as Ap,d as Tp,e as Ep,f as kp,g as Bs,h as Np,i as qr,j as yx,k as hs,l as ps,m as fs,n as Ix,o as Sx}from"./assets-icons-C4dKbXoA.js";import{A as Tu,c as wx}from"./react-select-BTklhJ9n.js";import{H as jp}from"./handlebars-D0mYST3F.js";import{q as _x,z as tr,Y as Rx,Q as Ax,G as Tx,p as Ex,a as kx,m as Pp}from"./faceapi-B9LXjYUE.js";import Nx from"./translation.en-US.json-CvyTMKHp.js";import"./libphonenumber-js-Cce9jLod.js";import"./lottie-D2s2cz97.js";function kq(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ebd2c45e-9ba7-45f1-a3cf-850f3e3bad1f",e._sentryDebugIdIdentifier="sentry-dbid-ebd2c45e-9ba7-45f1-a3cf-850f3e3bad1f")}catch{}})();const un={base:"1px",rounded:"4px",circle:"100px"},Be={green100:"#62D284",red100:"#FF645A",gray100:"#1E1B17",gray50:"#9394A1",gray20:"#D2D1D1",gray4:"#F6F6F7",black:"#000000",white:"#FFFFFF"},Dp={base:"rgba(0, 0, 0, 0.4)"},Yt={h2:"24px",h3:"18px",h4:"16px",input:"16px",p:"16px",small:"14px"},pn={regular:"400",medium:"500",semiBold:"500"},Yn={h2:1.45,h3:1.44,input:1.5,p:1.5,small:1.5},Ua={mobile:568},wc={mobileSmall:576,tablet:769},Vo=.02,xt={isSmallVertical:`(max-height: ${Ua.mobile-Vo}px)`,isMobileSmall:`(max-width: ${wc.mobileSmall-Vo}px), (max-height: ${Ua.mobile-Vo}px)`,isMobile:`(max-width: ${wc.tablet-Vo}px), (max-height: ${Ua.mobile-Vo}px)`,isNotMobile:`(min-width: ${wc.tablet}px) and (min-height: ${Ua.mobile}px)`},F={base:8,widgetPadding:"24px",inputPadding:"16px"},Vi={input:"48px",textArea:"96px"},Ra={fast:"0.2s",medium:"0.4s"};class Jl extends Error{constructor({method:t,uri:n}){super(`${t} ${n}`),this.name="ApiCanceledError",Object.setPrototypeOf(this,new.target.prototype),this.message=[t,n].filter(Boolean).join(" "),this.method=t,this.uri=n}}class qs extends Error{constructor({method:t,uri:n}){super(`${t} ${n}`),this.name="ApiRequestError",Object.setPrototypeOf(this,new.target.prototype),this.message=`${t} ${n}`,this.method=t,this.uri=n}}function ar({error:e,method:t,uri:n}){var o;if(!(e instanceof s0))throw e;const r=e;throw r instanceof c0?new Jl({method:t,uri:n}):r.response?new pt({method:t,status:r.response.status,uri:n,errors:(o=r.response.data)==null?void 0:o.errors,code:r.code}):r.request||r.message==="Network Error"?new Ct({method:t,uri:n,code:r.code}):new qs({method:t,uri:n})}var S=(e=>(e.CurrentUser="current-user",e.CurrentInquirySession="current-inquiry-session",e.Organization="organization",e.Organizations="organizations",e.Account="accounts",e.AccountAction="account-actions",e.AccountComment="account-comments",e.AccountStatus="account-statuses",e.AccountType="account-types",e.AccountTypeGridLayout="account-type-grid-layouts",e.AccountVariableDefinition="account-variable-definitions",e.Agent="agents",e.AgentConversation="agent-conversations",e.AgentConversationMessage="agent-conversation-messages",e.AgentVersion="agent-versions",e.AnalyticsQueryTemplates="analytics-query-templates",e.ApiKey="api-keys",e.ApiLog="api-logs",e.Blueprint="blueprints",e.Case="cases",e.CaseAssignmentPolicy="case-assignment-policies",e.CaseComment="case-comments",e.CaseMessage="case-messages",e.CaseQueue="case-queues",e.CaseQuery="case-queries",e.CaseQueryResult="case-query-results",e.CaseTemplate="case-templates",e.CaseVariableDefinition="case-variable-definitions",e.ComplianceRule="compliance-rules",e.CurrentEnterpriseUser="current-enterprise-user",e.Device="devices",e.Environment="environments",e.Event="events",e.Exporter="exporters",e.ExternalIntegration="external-integrations",e.ExternalIntegrationCall="external-integration-calls",e.ExternalIntegrationConfig="external-integration-configs",e.ExternalIntegrationDataSource="external-integration/data-sources",e.ExternalIntegrationLog="external-integration-logs",e.ExternalIntegrationVendor="external-integration-vendors",e.YardstikIframeModule="vendor/yardstik/iframe-module",e.Filing="filings",e.File="files",e.FilingTemplate="filing-templates",e.FilingCredential="filing-credentials",e.Graph="graphs",e.GraphDatumType="graph-datum-types",e.GraphNodeConfig="graph-node-configs",e.GraphNode="graph-nodes",e.GraphQuery="graph-queries",e.GraphQueryTemplate="graph-query-templates",e.GraphSnapshot="graph-snapshots",e.ImporterPipeline="importer-pipelines",e.ImporterRun="importer-pipeline-runs",e.InboxChannel="inbox-channels",e.InboxDomain="inbox-domains",e.Inquiry="inquiries",e.InquirySession="inquiry-sessions",e.InquiryTemplate="inquiry-templates",e.InquiryTemplateModule="inquiry-template-modules",e.InquiryTemplateVersion="inquiry-template-versions",e.InsightQuery="insight-queries",e.InsightQuerySessions="insight-query-sessions",e.Invoice="invoices",e.List="lists",e.ListItem="list-items",e.ListMatch="list-match",e.OrganizationEmailAddress="organization-email-addresses",e.OrganizationsSSO="organizations/sso",e.OnboardingFlowV1="onboarding-flow-v1s",e.OrganizationPlan="organization-plans",e.OrganizationPlanMigration="organization-plan-migrations",e.PasswordReset="password-resets",e.Persona="personas",e.PlatformSchema="platform-schemas",e.PlatformNode="platform-nodes",e.ProductTour="product-tours",e.ReviewQueue="review-queues",e.ReviewQueueTask="review-queue-tasks",e.Role="roles",e.SAR="sars",e.SARConfiguration="sar-configurations",e.Selfie="selfie",e.SimulatePreset="simulate-presets",e.TableView="table-views",e.Tag="tags",e.Team="teams",e.Template="templates",e.Theme="themes",e.ThemeSet="theme-sets",e.ThemeVariable="theme-variables",e.Transaction="transactions",e.TransactionLabel="transaction-labels",e.TransactionStatus="transaction-statuses",e.TransactionType="transaction-types",e.TransactionTypeFilters="transaction-types/basics",e.TransactionTypeGridLayout="transaction-type-grid-layouts",e.TransactionVariableDefinition="transaction-variable-definitions",e.Translations="translations",e.SentinelSession="sentinel-sessions",e.Trigger="triggers",e.FeatureFlag="feature-flags",e.User="users",e.UserAuditLog="user-audit-logs",e.UserAuthentication="user-authentications",e.UserNotification="user-notifications",e.UserSession="user-sessions",e.Verification="verifications",e.VerificationTemplate="verification-templates",e.VerificationTemplateVersion="verification-template-versions",e.Webhook="webhooks",e.WebhookEvent="webhook-events",e.Workflow="workflows",e.WorkflowBlock="workflow-blocks",e.WorkflowDeployment="workflow-deployments",e.WorkflowModule="workflow-modules",e.WorkflowRun="workflow-runs",e.WorkflowRunStep="workflow-steps",e.WorkflowSchemaFullOld="workflows/schema",e.WorkflowSchema="workflow-schemas",e.WorkflowSchemaCriteriaVariableSchemas="workflow-schemas/criteria-variable-schemas",e.WorkflowSchemaOperators="workflow-schemas/operators",e.WorkflowSchemaRedactableFieldConfigs="workflow-schemas/redactable-field-configs",e.WorkflowSchemaFilterFieldConfigs="workflow-schemas/filter-field-configs",e.WorkflowSchemaWorkflowActions="workflow-schemas/workflow-actions",e.WorkflowSchemaJsonSchema="workflow-schemas/json-schema",e.WorkflowSchemaPrimitives="workflow-schemas/primitives",e.WorkflowVersion="workflow-versions",e.ExporterAccount="exporter/accounts",e.ExporterCase="exporter/cases",e.ExporterCustomFiles="exporter/custom-files",e.ExporterDataset="exporter/dataset",e.ExporterMetricsVerificationVolume="exporter/metrics/verifications/volume",e.ExporterMetricsVerificationChecks="exporter/metrics/verifications/checks",e.ExporterGraph="exporter/graphs",e.ExporterInquiry="exporter/inquiries",e.ExporterInsightQueries="exporter/insight-queries",e.ExporterMetricsInquiry="exporter/metrics/inquiry",e.ExporterReport="exporter/reports",e.ExporterReviewQueueTask="exporter/review-queue-tasks",e.ExporterTransactions="exporter/txns",e.Importer="importers",e.ImporterReportAddressLookup="importer/report/address-lookups",e.ImporterReportAdverseMedia="importer/report/adverse-media",e.ImporterReportBusinessAdverseMedia="importer/report/business-adverse-media",e.ImporterReportBusinessLookup="importer/report/business-lookups",e.ImporterReportBusinessWatchlist="importer/report/business-watchlists",e.ImporterReportEmailAddress="importer/report/email-addresses",e.ImporterReportPhoneNumber="importer/report/phone-numbers",e.ImporterReportPoliticallyExposedPerson="importer/report/politically-exposed-people",e.ImporterReportProfileNonAuthoritative="importer/report/profile-non-authoritatives",e.ImporterReportSocialMedia="importer/report/social-media",e.ImporterReportWatchlist="importer/report/watchlists",e.SelfieCenterOnly="selfie/center-onlies",e.SelfieProfileAndCenter="selfie/profile-and-centers",e.VerificationAamva="verification/aamvas",e.VerificationBusinessWebsite="verification/business-websites",e.VerificationCertificateKorea="verification/certificate-koreas",e.VerificationDatabase="verification/databases",e.VerificationDatabaseAadhaar="verification/database-aadhaars",e.VerificationDatabaseBusiness="verification/database-businesses",e.VerificationDatabaseBusinessFootprint="verification/database-business-footprints",e.VerificationDatabaseEcbsv="verification/database-ecbsvs",e.VerificationDatabasePhoneCarrier="verification/database-phone-carriers",e.VerificationDatabaseSerpro="verification/database-serpros",e.VerificationDatabaseStandard="verification/database-standards",e.VerificationDatabaseTin="verification/database-tins",e.VerificationDatabaseVatNumber="verification/database-vat-numbers",e.VerificationDigitalIdFinnishTrustNetwork="verification/digital-id-finnish-trust-networks",e.VerificationDigitalIdMitId="verification/digital-id-mit-ids",e.VerificationDigitalIdOneId="verification/digital-id-one-id",e.VerificationDigitalIdPhilsys="verification/digital-id-philsys",e.VerificationDigitalIdSerpro="verification/digital-id-serpros",e.VerificationDigitalIdSingpass="verification/digital-id-singpasses",e.VerificationDigitalIdUkSharecode="verification/digital-id-uk-sharecodes",e.VerificationDocument="verification/documents",e.VerificationEmailAddress="verification/email-addresses",e.VerificationGovernmentId="verification/government-ids",e.VerificationGovernmentIdNfc="verification/government-id-nfcs",e.VerificationMobileDriversLicense="verification/mobile-drivers-license",e.VerificationPhoneNumber="verification/phone-numbers",e.VerificationSelfie="verification/selfies",e.Report="reports",e.ReportAddressLookup="report/address-lookups",e.ReportAdverseMedia="report/adverse-media",e.ReportBusinessAdverseMedia="report/business-adverse-media",e.ReportBusinessAssociatedPersons="report/business-associated-persons",e.ReportBusinessClassification="report/business-classifications",e.ReportBusinessIndustryClassification="report/business-industry-classifications",e.ReportBusinessLiensLookup="report/business-liens-lookup",e.ReportBusinessLookup="report/business-lookups",e.ReportBusinessNonprofit="report/business-nonprofits",e.ReportBusinessOnlinePresence="report/business-online-presences",e.ReportBusinessRegistrationsLookup="report/business-registrations-lookup",e.ReportBusinessSocialMedia="report/business-social-media",e.ReportBusinessWatchlist="report/business-watchlists",e.ReportBusinessWebsite="report/business-websites",e.ReportChainalysisAddressScreening="report/integration/chainalysis-address-screening",e.ReportClearbitBusinessLookup="report/integration/clearbit-business-lookup",e.ReportCoinbaseCheckCryptoRisk="report/integration/coinbase-check-crypto-risk",e.ReportCryptoAddressWatchlist="report/crypto-address-watchlists",e.ReportCustomList="report/custom-lists",e.ReportEmailAddress="report/email-addresses",e.ReportEquifaxOneview="report/integration/equifax-oneview",e.ReportFinraBrokerCheck="report/finra-broker-checks",e.ReportKyckrBusinessLookup="report/integration/kyckr-business-lookup",e.ReportMiddeskBusinessLookup="report/integration/middesk-business-lookup",e.ReportMxAccount="report/integration/mx-account",e.ReportPhoneNumber="report/phone-numbers",e.ReportPoliticallyExposedPerson="report/politically-exposed-people",e.ReportProfile="report/profiles",e.ReportProfileNonAuthoritative="report/profile-non-authoritatives",e.ReportScreening="report/screenings",e.ReportSecActionLookup="report/sec-action-lookups",e.ReportSentilinkApplicationRisk="report/integration/sentilink-application-risk",e.ReportSentilinkScores="report/integration/sentilink-scores",e.ReportSocialMedia="report/social-media",e.ReportSynthetic="report/synthetics",e.ReportTrmWalletScreening="report/integration/trm-wallet-screening",e.ReportWatchlist="report/watchlists",e.ReportRunsCustomList="report-run/custom-lists",e.ReportSnapshot="report-snapshot",e.ReportTemplate="report-templates",e.ReportTemplateAddressLookup="report-template/address-lookups",e.ReportTemplateAdverseMedia="report-template/adverse-media",e.ReportTemplateBusinessAdverseMedia="report-template/business-adverse-media",e.ReportTemplateBusinessAssociatedPersons="report-template/business-associated-persons",e.ReportTemplateBusinessClassification="report-template/business-classifications",e.ReportTemplateBusinessIndustryClassification="report-template/business-industry-classifications",e.ReportTemplateBusinessLookup="report-template/business-lookups",e.ReportTemplateBusinessLiensLookup="report-template/business-liens-lookup",e.ReportTemplateBusinessNonprofit="report-template/business-nonprofits",e.ReportTemplateBusinessOnlinePresence="report-template/business-online-presences",e.ReportTemplateBusinessRegistrationsLookup="report-template/business-registrations-lookups",e.ReportTemplateBusinessSocialMedia="report-template/business-social-media",e.ReportTemplateBusinessWatchlist="report-template/business-watchlists",e.ReportTemplateBusinessWebsite="report-template/business-websites",e.ReportTemplateCreateable="report-templates/createable",e.ReportTemplateChainalysisAddressScreening="report-template/integration/chainalysis-address-screenings",e.ReportTemplateClearbitBusinessLookup="report-template/integration/clearbit-business-lookup",e.ReportTemplateCoinbaseCheckCryptoRisk="report-template/integration/coinbase-check-crypto-risk",e.ReportTemplateCryptoAddressWatchlist="report-template/crypto-address-watchlists",e.ReportTemplateCustomList="report-template/custom-lists",e.ReportTemplateEmailAddress="report-template/email-addresses",e.ReportTemplateEquifaxOneview="report-template/integration/equifax-oneview",e.ReportTemplateFilters="report-templates/basics",e.ReportTemplateFinraBrokerCheck="report-template/finra-broker-checks",e.ReportTemplateKyckrBusinessLookup="report-template/integration/kyckr-business-lookups",e.ReportTemplateNovaCreditCashAtlas="report-template/integration/nova-credit-cash-atlas",e.ReportTemplateMiddeskBusinessLookup="report-template/integration/middesk-business-lookups",e.ReportTemplateMxAccount="report-template/integration/mx-accounts",e.ReportTemplateNovaCreditCreditPassport="report-template/integration/nova-credit-credit-passport",e.ReportTemplatePhoneNumber="report-template/phone-numbers",e.ReportTemplatePoliticallyExposedPerson="report-template/politically-exposed-people",e.ReportTemplateProfile="report-template/profiles",e.ReportTemplateProfileNonAuthoritative="report-template/profile-non-authoritatives",e.ReportTemplateScreening="report-template/screening",e.ReportTemplateSecActionLookup="report-template/sec-action-lookups",e.ReportTemplateSentilinkApplicationRisk="report-template/integration/sentilink-application-risk",e.ReportTemplateSentilinkScores="report-template/integration/sentilink-scores",e.ReportTemplateSocialMedia="report-template/social-media",e.ReportTemplateSynthetic="report-template/synthetics",e.ReportTemplateTrmWalletScreening="report-template/integration/trm-wallet-screening",e.ReportTemplateWatchlist="report-template/watchlists",e.ReportTemplateVersion="report-template-versions",e.ReportTemplateVersionCustomList="report-template-version/custom-lists",e.MetricsApiLogsPaths="metrics/api-logs/paths",e.MetricsApiLogsVolumeOverTime="metrics/api-logs/volume-over-time",e.MetricsCases="metrics/cases",e.MetricsCasesStatusOverTime="metrics/cases/status-over-time",e.MetricsCasesResolutionTimes="metrics/cases/resolution-times",e.MetricsCasesAssignmentDistribution="metrics/cases/assignment-distribution",e.MetricsCasesResolutionDistribution="metrics/cases/resolution-distribution",e.MetricsCasesTagDistribution="metrics/cases/tag-distribution",e.MetricsCasesResolutionsByTag="metrics/cases/resolutions-by-tag",e.MetricsCasesStatusDistributionCurrentUser="metrics/cases/status-distribution-current-user",e.MetricsCasesAvailabilityAggregatedOverTime="metrics/cases/availability-aggregated-over-time",e.MetricsCasesAvailabilityByAgent="metrics/cases/availability-by-agent",e.MetricsInquiries="metrics/inquiries",e.MetricsInquiriesFunnelConversionOverTime="metrics/inquiries/conversion-over-time",e.MetricsInquiriesFunnelFlow="metrics/inquiries/funnel-flow",e.MetricsInquiriesMedianCompletionVolume="metrics/inquiries/median-completion",e.MetricsInquiriesRecentActivity="metrics/inquiries/recent-activity",e.MetricsInquiriesRiskDistribution="metrics/inquiries/risk-distribution",e.MetricsInquiriesVolume="metrics/inquiries/volume",e.MetricsInquiriesVolumeOverTime="metrics/inquiries/volume-over-time",e.MetricsTransactions="metrics/txns",e.MetricsTransactionsVolumeOverTime="metrics/txns/volume-over-time",e.MetricsVerifications="metrics/verifications",e.MetricsVerificationsFilteredVolume="metrics/verifications/volume-with-filters",e.MetricsVerificationsVolumeOverTime="metrics/verifications/volume-over-time",e.MetricsVerificationsFilteredChecksOverTime="metrics/verifications/checks-over-time-filters",e.MetricsReportsSummary="metrics/reports/reports-summary",e.MetricsReportsOverTime="metrics/reports/reports-over-time",e.MetricsWorkflowRuns="metrics/workflow-runs",e.Document="documents",e.DocumentGeneric="document/generics",e.DocumentGovernmentId="document/government-ids",e.DocumentFileTest="document-file-tests",e.DocumentFile="document-files",e.DataSourceS3Config="data-source/s3/config",e.DataSourceS3ListObjects="data-source/s3/list-objects",e.Omnisearch="omnisearch/search",e.HelpCenterArticles="article_search",e.WorkrampInstantAuth="academy/workramp_instant_auth",e.TrackingEvents="t",e.SimulatePresetVerification="simulate/preset/verification",e))(S||{}),w=(e=>(e.Account="account",e.AccountAction="account-action",e.AccountComment="account-comment",e.AccountStatus="account-status",e.AccountType="account-type",e.AccountTypeGridLayout="account-type-grid-layout",e.AccountVariableDefinition="account-variable-definition",e.Agent="agent",e.AgentVersion="agent-version",e.AgentConversation="agent-conversation",e.AgentConversationMessage="agent-conversation-message",e.AnalyticsQueryTemplate="analytics-query-template",e.Blueprint="blueprint",e.Case="case",e.CaseAssignmentPolicy="case-assignment-policy",e.CaseComment="case-comment",e.CaseMessage="case-message",e.CaseQueue="case-queue",e.CaseQuery="case-query",e.CaseQueryResult="case-query-result",e.CaseTemplate="case-template",e.CaseVariableDefinition="case-variable-definition",e.ComplianceRule="compliance-rule",e.CurrentInquirySession="current-inquiry-session",e.CurrentUser="current-user",e.CurrentEnterpriseUser="current-enterprise-user",e.Device="device",e.Environment="environment",e.EnvironmentProduction="environment/production",e.EnvironmentSandbox="environment/sandbox",e.Event="event",e.GraphVisualization="graph-visualization",e.Filing="filing",e.FilingFintracSTR="filing/fintrac/str",e.FilingTemplate="filing-template",e.FilingTemplateFintracSTR="filing-template/fintrac/str",e.FilingCredential="filing-credential",e.Graph="graph",e.GraphDatumType="graph-datum-type",e.GraphNode="graph-node",e.GraphNodeConfig="graph-node-config",e.GraphQuery="graph-query",e.GraphQueryTemplate="graph-query-template",e.GraphSnapshot="graph-snapshot",e.ImporterPipelineCsv="importer-pipeline/csv-external-integration-importer-pipeline",e.ImporterPipelineMysql="importer-pipeline/mysql-external-integration-importer-pipeline",e.ImporterPipelineSnowflake="importer-pipeline/snowflake-external-integration-importer-pipeline",e.ImporterPipelineRedshift="importer-pipeline/redshift-external-integration-importer-pipeline",e.ImporterPipelineS3="importer-pipeline/s3-external-integration-importer-pipeline",e.ImporterPipelineGoogleSheets="importer-pipeline/google-sheets-external-integration-importer-pipeline",e.ImporterPipelineGcs="importer-pipeline/gcs-external-integration-importer-pipeline",e.ImporterRun="importer-pipeline-run",e.InboxChannel="inbox-channel",e.InboxDomain="inbox-domain",e.Inquiry="inquiry",e.InquirySession="inquiry-session",e.InquiryTemplate="inquiry-template",e.InquiryTemplateModule="inquiry-template-module",e.InquiryTemplateVersion="inquiry-template-version",e.InquiryTemplateVersionDiff="inquiry-template-version-diff",e.InsightQuery="insight-query",e.InsightQuerySession="insight-query-session",e.Invoice="invoice",e.OnboardingFlowV1="onboarding-flow/v1",e.Organization="organization",e.OrganizationPlan="organization-plan",e.OrganizationPlanMigration="organization-plan-migration",e.PartialInquiryTemplateVersion="partial-inquiry-template-version",e.PasswordResetEmail="password-reset/email",e.PlatformNode="platform-node",e.PlatformSchema="platform-schema",e.ProductTour="product-tour",e.Role="role",e.SAR="sar",e.SARConfiguration="sar-configurations",e.TableView="table-view",e.Team="team",e.Template="template",e.Theme="theme",e.ThemeSet="theme-set",e.ThemeVariable="theme-variable",e.ThemeVariableAsset="theme-variable/asset",e.ThemeVariableFont="theme-variable/font",e.Transaction="transaction",e.TransactionLabel="transaction-label",e.TransactionStatus="transaction-status",e.TransactionType="transaction-type",e.TransactionTypeGridLayout="transaction-type-grid-layout",e.TransactionVariableDefinition="transaction-variable-definition",e.TriggerAccount="trigger-account",e.TriggerEvent="trigger-event",e.TriggerSchedule="trigger-schedule",e.TriggerRecurring="trigger-recurring",e.TriggerApi="trigger-api",e.TriggerCase="trigger-case",e.TriggerDirect="trigger-direct",e.User="user",e.UserAuditLog="user-audit-log",e.UserAuthentication="user-authentication",e.UserNotification="user-notification",e.UserSession="user-session",e.Webhook="webhook",e.WebhookEvent="webhook-event",e.List="list",e.ListGovernmentIdNumber="list/government-id-number",e.ListIpAddress="list/ip-address",e.ListName="list/name",e.ListPhoneNumber="list/phone-number",e.ListEmailAddress="list/email-address",e.ListGeolocation="list/geolocation",e.ListBrowserFingerprint="list/browser-fingerprint",e.ListDeviceFingerprint="list/device-fingerprint",e.ListFace="list/face",e.ListCountry="list/country",e.ListField="list/field",e.ListString="list/string",e.ListSelfieBackground="list/selfie-background",e.ListItem="list-item",e.ListItemGovernmentIdNumber="list-item/government-id-number",e.ListItemIpAddress="list-item/ip-address",e.ListItemName="list-item/name",e.ListItemPhoneNumber="list-item/phone-number",e.ListItemEmailAddress="list-item/email-address",e.ListItemGeolocation="list-item/geolocation",e.ListItemBrowserFingerprint="list-item/browser-fingerprint",e.ListItemDeviceFingerprint="list-item/device-fingerprint",e.ListItemFace="list-item/face",e.ListItemCountry="list-item/country",e.ListItemField="list-item/field",e.ListItemString="list-item/string",e.ListItemSelfieBackground="list-item/selfie-background",e.ListMatch="list-match",e.ReviewQueue="review-queue",e.ReviewQueueTask="review-queue-task",e.Workflow="workflow",e.WorkflowBlock="workflow-block",e.WorkflowDeployment="workflow-deployment",e.WorkflowModule="workflow-module",e.WorkflowRun="workflow-run",e.WorkflowRunSimulated="workflow-run/simulated",e.WorkflowVersion="workflow-version",e.WorkflowRunStep="workflow-step",e.WorkflowRunStepAction="workflow-step/action",e.WorkflowRunStepConditional="workflow-step/conditional",e.WorkflowRunStepLoop="workflow-step/loop",e.WorkflowRunStepModule="workflow-step/module",e.WorkflowRunStepParallel="workflow-step/parallel",e.WorkflowRunStepWait="workflow-step/wait",e.WorkflowRunVariablePersonaObject="workflow-run/variable-store/persona-object-variable",e.WorkflowRunVariablePlatformIntegration="workflow-run/variable-store/platform-integration-variable",e.WorkflowRunVariableOutput="workflow-run/variable-store/output-variable",e.WorkflowRunVariableTriggerParams="workflow-run/variable-store/trigger-params-variable",e.WorkflowRunVariableLoop="workflow-run/variable-store/loop-variable",e.Report="report",e.ReportAddressLookup="report/address-lookup",e.ReportAdverseMedia="report/adverse-media",e.ReportBusinessAdverseMedia="report/business-adverse-media",e.ReportBusinessAssociatedPersons="report/business-associated-persons",e.ReportBusinessClassification="report/business-classification",e.ReportBusinessIndustryClassification="report/business-industry-classification",e.ReportBusinessLiensLookup="report/business-liens-lookup",e.ReportBusinessLookup="report/business-lookup",e.ReportBusinessNonprofit="report/business-nonprofit",e.ReportBusinessOnlinePresence="report/business-online-presence",e.ReportBusinessRegistrationsLookup="report/business-registrations-lookup",e.ReportBusinessSocialMedia="report/business-social-media",e.ReportBusinessWatchlist="report/business-watchlist",e.ReportBusinessWebsite="report/business-website",e.ReportCryptoAddressWatchlist="report/crypto-address-watchlist",e.ReportCustomList="report/custom-list",e.ReportEmailAddress="report/email-address",e.ReportFinraBrokerCheck="report/finra-broker-check",e.ReportPhoneNumber="report/phone-number",e.ReportPoliticallyExposedPerson="report/politically-exposed-person",e.ReportProfile="report/profile",e.ReportProfileNonAuthoritative="report/profile-non-authoritative",e.ReportScreening="report/screening",e.ReportSecActionLookup="report/sec-action-lookup",e.ReportSocialMedia="report/social-media",e.ReportSynthetic="report/synthetic",e.ReportWatchlist="report/watchlist",e.ReportSnapshotAdverseMedia="report-snapshot/adverse-media",e.ReportSnapshotBusinessNonprofit="report-snapshot/business-nonprofit",e.ReportSnapshotScreening="report-snapshot/screening",e.ReportSnapshotWatchlist="report-snapshot/watchlist",e.ReportChainalysisAddressScreening="report/integration/chainalysis-address-screening",e.ReportClearbitBusinessLookup="report/integration/clearbit-business-lookup",e.ReportCoinbaseCheckCryptoRisk="report/integration/coinbase-check-crypto-risk",e.ReportEquifaxOneview="report/integration/equifax-oneview",e.ReportKyckrBusinessLookup="report/integration/kyckr-business-lookup",e.ReportMiddeskBusinessLookup="report/integration/middesk-business-lookup",e.ReportMxAccount="report/integration/mx-account",e.ReportSentilinkApplicationRisk="report/integration/sentilink-application-risk",e.ReportSentilinkScores="report/integration/sentilink-scores",e.ReportTrmWalletScreening="report/integration/trm-wallet-screening",e.ReportTemplate="report-template",e.ReportTemplateAddressLookup="report-template/address-lookup",e.ReportTemplateAdverseMedia="report-template/adverse-media",e.ReportTemplateBusinessAdverseMedia="report-template/business-adverse-media",e.ReportTemplateBusinessAssociatedPersons="report-template/business-associated-persons",e.ReportTemplateBusinessClassification="report-template/business-classification",e.ReportTemplateBusinessIndustryClassification="report-template/business-industry-classification",e.ReportTemplateBusinessLiensLookup="report-template/business-liens-lookup",e.ReportTemplateBusinessLookup="report-template/business-lookup",e.ReportTemplateBusinessNonprofit="report-template/business-nonprofit",e.ReportTemplateBusinessOnlinePresence="report-template/business-online-presence",e.ReportTemplateBusinessRegistrationsLookup="report-template/business-registrations-lookup",e.ReportTemplateBusinessSocialMedia="report-template/business-social-media",e.ReportTemplateBusinessWatchlist="report-template/business-watchlist",e.ReportTemplateBusinessWebsite="report-template/business-website",e.ReportTemplateCryptoAddressWatchlist="report-template/crypto-address-watchlist",e.ReportTemplateCustomList="report-template/custom-list",e.ReportTemplateEmailAddress="report-template/email-address",e.ReportTemplateFinraBrokerCheck="report-template/finra-broker-check",e.ReportTemplatePhoneNumber="report-template/phone-number",e.ReportTemplatePoliticallyExposedPerson="report-template/politically-exposed-person",e.ReportTemplateProfile="report-template/profile",e.ReportTemplateProfileNonAuthoritative="report-template/profile-non-authoritative",e.ReportTemplateScreening="report-template/screening",e.ReportTemplateSecActionLookup="report-template/sec-action-lookup",e.ReportTemplateSocialMedia="report-template/social-media",e.ReportTemplateSynthetic="report-template/synthetic",e.ReportTemplateWatchlist="report-template/watchlist",e.ReportTemplateClearbitBusinessLookup="report-template/integration/clearbit-business-lookup",e.ReportTemplateChainalysisAddressScreening="report-template/integration/chainalysis-address-screening",e.ReportTemplateCoinbaseCheckCryptoRisk="report-template/integration/coinbase-check-crypto-risk",e.ReportTemplateEquifaxOneview="report-template/integration/equifax-oneview",e.ReportTemplateKyckrBusinessLookup="report-template/integration/kyckr-business-lookup",e.ReportTemplateMiddeskBusinessLookup="report-template/integration/middesk-business-lookup",e.ReportTemplateMxAccount="report-template/integration/mx-account",e.ReportTemplateNovaCreditCashAtlas="report-template/integration/nova-credit-cash-atlas",e.ReportTemplateNovaCreditCreditPassport="report-template/integration/nova-credit-credit-passport",e.ReportTemplateSentilinkApplicationRisk="report-template/integration/sentilink-application-risk",e.ReportTemplateSentilinkScores="report-template/integration/sentilink-scores",e.ReportTemplateTrmWalletScreening="report-template/integration/trm-wallet-screening",e.ReportTemplateVersionAddressLookup="report-template-version/address-lookup",e.ReportTemplateVersionAdverseMedia="report-template-version/adverse-media",e.ReportTemplateVersionBusinessAdverseMedia="report-template-version/business-adverse-media",e.ReportTemplateVersionBusinessAssociatedPersons="report-template-version/business-associated-persons",e.ReportTemplateVersionBusinessClassification="report-template-version/business-classification",e.ReportTemplateVersionBusinessIndustryClassification="report-template-version/business-industry-classification",e.ReportTemplateVersionBusinessLiensLookup="report-template-version/business-liens-lookup",e.ReportTemplateVersionBusinessLookup="report-template-version/business-lookup",e.ReportTemplateVersionBusinessNonprofit="report-template-version/business-nonprofit",e.ReportTemplateVersionBusinessOnlinePresence="report-template-version/business-online-presence",e.ReportTemplateVersionBusinessRegistrationsLookup="report-template-version/business-registrations-lookup",e.ReportTemplateVersionBusinessSocialMedia="report-template-version/business-social-media",e.ReportTemplateVersionBusinessWatchlist="report-template-version/business-watchlist",e.ReportTemplateVersionBusinessWebsite="report-template-version/business-website",e.ReportTemplateVersionCryptoAddressWatchlist="report-template-version/crypto-address-watchlist",e.ReportTemplateVersionCustomList="report-template-version/custom-list",e.ReportTemplateVersionEmailAddress="report-template-version/email-address",e.ReportTemplateVersionFinraBrokerCheck="report-template-version/finra-broker-check",e.ReportTemplateVersionPhoneNumber="report-template-version/phone-number",e.ReportTemplateVersionPoliticallyExposedPerson="report-template-version/politically-exposed-person",e.ReportTemplateVersionProfile="report-template-version/profile",e.ReportTemplateVersionProfileNonAuthoritative="report-template-version/profile-non-authoritative",e.ReportTemplateVersionScreening="report-template-version/screening",e.ReportTemplateVersionSecActionLookup="report-template-version/sec-action-lookup",e.ReportTemplateVersionSocialMedia="report-template-version/social-media",e.ReportTemplateVersionSynthetic="report-template-version/synthetic",e.ReportTemplateVersionWatchlist="report-template-version/watchlist",e.ReportTemplateVersionChainalysisAddressScreening="report-template-version/integration/chainalysis-address-screening",e.ReportTemplateVersionClearbitBusinessLookup="report-template-version/integration/clearbit-business-lookup",e.ReportTemplateVersionEquifaxOneview="report-template-version/integration/equifax-oneview",e.ReportTemplateVersionKyckrBusinessLookup="report-template-version/integration/kyckr-business-lookup",e.ReportTemplateVersionMiddeskBusinessLookup="report-template-version/integration/middesk-business-lookup",e.ReportTemplateVersionMxAccount="report-template-version/integration/mx-account",e.ReportTemplateVersionSentilinkApplicationRisk="report-template-version/sentilink-application-risk",e.ReportTemplateVersionSentilinkScores="report-template-version/sentilink-scores",e.ReportTemplateVersionTrmWalletScreening="report-template-version/integration/trm-wallet-screening",e.ReportSnapshot="report-snapshot",e.ReportRun="report-run",e.ReportRunCustomList="report-run/custom-list",e.SelfieCenterOnly="selfie/center-only",e.SelfieProfileAndCenter="selfie/profile-and-center",e.SentinelSession="sentinel-session",e.Tag="tag",e.Translations="translations",e.Exporter="exporter",e.ExporterAccount="exporter/account",e.ExporterCase="exporter/case",e.ExporterCustomFile="exporter/custom-file",e.ExporterInsightQuery="exporter/insight-query",e.ExporterDataset="exporter/dataset",e.ExporterGraph="exporter/graph",e.ExporterInquiry="exporter/inquiry",e.ExporterMetricsVerificationVolume="exporter/metrics/verifications/volume",e.ExporterMetricsInquiry="exporter/metrics/inquiry",e.ExporterMetricsVerificationChecks="exporter/metrics/verifications/checks",e.ExporterReport="exporter/report",e.ExporterReviewQueueTask="exporter/review-queue-task",e.ExporterTransaction="exporter/txn",e.Importer="importer",e.ImporterReportAddressLookup="importer/report/address-lookup",e.ImporterReportAdverseMedia="importer/report/adverse-media",e.ImporterReportBusinessAdverseMedia="importer/report/business-adverse-media",e.ImporterReportBusinessLookup="importer/report/business-lookup",e.ImporterReportBusinessWatchlist="importer/report/business-watchlist",e.ImporterReportEmailAddress="importer/report/email-address",e.ImporterReportPhoneNumber="importer/report/phone-number",e.ImporterReportPoliticallyExposedPerson="importer/report/politically-exposed-person",e.ImporterReportProfileNonAuthoritative="importer/report/profile-non-authoritative",e.ImporterReportSocialMedia="importer/report/social-media",e.ImporterReportWatchlist="importer/report/watchlist",e.Verification="verification",e.VerificationAamva="verification/aamva",e.VerificationBusinessWebsite="verification/business-website",e.VerificationCertificateKorea="verification/certificate-korea",e.VerificationDatabase="verification/database",e.VerificationDatabaseAadhaar="verification/database-aadhaar",e.VerificationDatabaseStandard="verification/database-standard",e.VerificationDatabaseBusiness="verification/database-business",e.VerificationDatabaseBusinessFootprint="verification/database-business-footprint",e.VerificationDatabaseEcbsv="verification/database-ecbsv",e.VerificationDatabasePhoneCarrier="verification/database-phone-carrier",e.VerificationDatabaseSerpro="verification/database-serpro",e.VerificationDatabaseTin="verification/database-tin",e.VerificationDatabaseVatNumber="verification/database-vat-number",e.VerificationDigitalIdFinnishTrustNetwork="verification/digital-id-finnish-trust-network",e.VerificationDigitalIdMitId="verification/digital-id-mit-id",e.VerificationDigitalIdOneId="verification/digital-id-one-id",e.VerificationDigitalIdPhilsys="verification/digital-id-philsys",e.VerificationDigitalIdSerpro="verification/digital-id-serpro",e.VerificationDigitalIdSingpass="verification/digital-id-singpass",e.VerificationDigitalIdUkSharecode="verification/digital-id-uk-sharecode",e.VerificationDocument="verification/document",e.VerificationEmailAddress="verification/email-address",e.VerificationGovernmentId="verification/government-id",e.VerificationGovernmentIdNfc="verification/government-id-nfc",e.VerificationMobileDriversLicense="verification/mobile-drivers-license",e.VerificationPhoneNumber="verification/phone-number",e.VerificationSelfie="verification/selfie",e.VerificationTemplate="verification-template",e.VerificationTemplateAamva="verification-template/aamva",e.VerificationTemplateBusinessWebsite="verification-template/business-website",e.VerificationTemplateCertificateKorea="verification-template/certificate-korea",e.VerificationTemplateDatabase="verification-template/database",e.VerificationTemplateDatabaseAadhaar="verification-template/database-aadhaar",e.VerificationTemplateDatabaseStandard="verification-template/database-standard",e.VerificationTemplateDatabaseBusiness="verification-template/database-business",e.VerificationTemplateDatabaseBusinessFootprint="verification-template/database-business-footprint",e.VerificationTemplateDatabaseEcbsv="verification-template/database-ecbsv",e.VerificationTemplateDatabasePhoneCarrier="verification-template/database-phone-carrier",e.VerificationTemplateDatabaseSerpro="verification-template/database-serpro",e.VerificationTemplateDatabaseTin="verification-template/database-tin",e.VerificationTemplateDatabaseVatNumber="verification-template/database-vat-number",e.VerificationTemplateDigitalIdFinnishTrustNetwork="verification-template/digital-id-finnish-trust-network",e.VerificationTemplateDigitalIdMitId="verification-template/digital-id-mit-id",e.VerificationTemplateDigitalIdOneId="verification-template/digital-id-one-id",e.VerificationTemplateDigitalIdPhilsys="verification-template/digital-id-philsys",e.VerificationTemplateDigitalIdSerpro="verification-template/digital-id-serpro",e.VerificationTemplateDigitalIdSingpass="verification-template/digital-id-singpass",e.VerificationTemplateDigitalIdUkSharecode="verification-template/digital-id-uk-sharecode",e.VerificationTemplateDocument="verification-template/document",e.VerificationTemplateEmailAddress="verification-template/email-address",e.VerificationTemplateGovernmentId="verification-template/government-id",e.VerificationTemplateGovernmentIdNfc="verification-template/government-id-nfc",e.VerificationTemplateMobileDriversLicense="verification-template/mobile-drivers-license",e.VerificationTemplatePhoneNumber="verification-template/phone-number",e.VerificationTemplateSelfie="verification-template/selfie",e.VerificationTemplateVersion="verification-template-version",e.VerificationTemplateVersionAamva="verification-template-version/aamva",e.VerificationTemplateVersionBusinessWebsite="verification-template-version/business-website",e.VerificationTemplateVersionCertificateKorea="verification-template-version/certificate-korea",e.VerificationTemplateVersionDatabase="verification-template-version/database",e.VerificationTemplateVersionDatabaseAadhaar="verification-template-version/database-aadhaar",e.VerificationTemplateVersionDatabaseStandard="verification-template-version/database-standard",e.VerificationTemplateVersionDatabaseBusiness="verification-template-version/database-business",e.VerificationTemplateVersionDatabaseBusinessFootprint="verification-template-version/database-business-footprint",e.VerificationTemplateVersionDatabaseEcbsv="verification-template-version/database-ecbsv",e.VerificationTemplateVersionDatabasePhoneCarrier="verification-template-version/database-phone-carrier",e.VerificationTemplateVersionDatabaseSerpro="verification-template-version/database-serpro",e.VerificationTemplateVersionDatabaseTin="verification-template-version/database-tin",e.VerificationTemplateVersionDatabaseVatNumber="verification-template-version/database-vat-number",e.VerificationTemplateVersionDigitalIdFinnishTrustNetwork="verification-template-version/digital-id-finnish-trust-network",e.VerificationTemplateVersionDigitalIdMitId="verification-template-version/digital-id-mit-id",e.VerificationTemplateVersionDigitalIdOneId="verification-template-version/digital-id-one-id",e.VerificationTemplateVersionDigitalIdPhilsys="verification-template-version/digital-id-philsys",e.VerificationTemplateVersionDigitalIdSerpro="verification-template-version/digital-id-serpro",e.VerificationTemplateVersionDigitalIdSingpass="verification-template-version/digital-id-singpass",e.VerificationTemplateVersionDigitalIdUkSharecode="verification-template-version/digital-id-uk-sharecode",e.VerificationTemplateVersionDocument="verification-template-version/document",e.VerificationTemplateVersionEmailAddress="verification-template-version/email-address",e.VerificationTemplateVersionGovernmentId="verification-template-version/government-id",e.VerificationTemplateVersionGovernmentIdNfc="verification-template-version/government-id-nfc",e.VerificationTemplateVersionMobileDriversLicense="verification-template-version/mobile-drivers-license",e.VerificationTemplateVersionPhoneNumber="verification-template-version/phone-number",e.VerificationTemplateVersionSelfie="verification-template-version/selfie",e.Document="document",e.DocumentGeneric="document/generic",e.DocumentGovernmentId="document/government-id",e.DocumentFileTest="document-file-tests",e.DocumentFile="document-file",e.ApiKey="api-key",e.ApiLog="api-log",e.ExternalIntegration="external-integrations",e.ExternalIntegrationCall="external-integration-call",e.ExternalIntegrationConfig="external-integration-config",e.ExternalIntegrationConfigCredentialApiKey="external-integration-config/http-credential/api-key-scheme",e.ExternalIntegrationConfigCredentialBearer="external-integration-config/http-credential/bearer-scheme",e.ExternalIntegrationConfigCredentialBasic="external-integration-config/http-credential/basic-scheme",e.ExternalIntegrationConfigCredentialOauth2Password="external-integration-config/http-credential/oauth2/password-scheme",e.ExternalIntegrationConfigCredentialOauth2AuthorizationCode="external-integration-config/http-credential/oauth2/authorization-code-scheme",e.ExternalIntegrationConfigCredentialOauth2TenantSpecificAuthorizationCode="external-integration-config/http-credential/oauth2/tenant-specific-authorization-code-scheme",e.ExternalIntegrationConfigCredentialWebhook="external-integration-config/webhook",e.ExternalIntegrationConfigCredentialHmac="external-integration-config/http-credential/hmac-scheme",e.ExternalIntegrationDataSource="external-integration/data-source",e.ExternalIntegrationDataSourceCsv="external-integration/data-source/csv",e.ExternalIntegrationDataSourceGcs="external-integration/data-source/gcs",e.ExternalIntegrationDataSourceGoogleSheets="external-integration/data-source/google-sheets",e.ExternalIntegrationDataSourceMongodb="external-integration/data-source/mongodb",e.ExternalIntegrationDataSourceMysql="external-integration/data-source/mysql",e.ExternalIntegrationDataSourcePostgres="external-integration/data-source/postgres",e.ExternalIntegrationDataSourceRedshift="external-integration/data-source/redshift",e.ExternalIntegrationDataSourceS3="external-integration/data-source/s3",e.ExternalIntegrationDataSourceSnowflake="external-integration/data-source/snowflake",e.ExternalIntegrationEnrichmentChainalysis="external-integration/enrichment/chainalysis",e.ExternalIntegrationEnrichmentEquifaxOneview="external-integration/enrichment/equifax/oneview",e.ExternalIntegrationEnrichmentKyckr="external-integration/enrichment/kyckr",e.ExternalIntegrationEnrichmentMiddesk="external-integration/enrichment/middesk",e.ExternalIntegrationEnrichmentMx="external-integration/enrichment/mx",e.ExternalIntegrationEnrichmentSentilink="external-integration/enrichment/sentilink",e.ExternalIntegrationEnrichmentTrm="external-integration/enrichment/trm",e.ExternalIntegrationLog="integration-log",e.ExternalIntegrationProductivity="external-integration/productivity",e.ExternalIntegrationProductivityHubspotOAuth="external-integration/productivity/hubspot-oauth",e.ExternalIntegrationProductivityOpenAi="external-integration/productivity/openai",e.ExternalIntegrationProductivitySalesforceOAuth="external-integration/productivity/salesforce-oauth",e.ExternalIntegrationProductivitySlackOAuth="external-integration/productivity/slack-oauth",e.ExternalIntegrationProductivityZendeskOAuth="external-integration/productivity/zendesk-oauth",e.ExternalIntegrationVendor="external-integration-vendor",e.SimulatePreset="simulate/preset",e.SimulatePresetVerification="simulate/preset/verification",e.WorkrampInstantAuth="workramp-instant-auth",e.YardstikIframeModule="vendor/yardstik/iframe-module",e))(w||{});const jx={[w.Account]:S.Account,[w.AccountAction]:S.AccountAction,[w.AccountStatus]:S.AccountStatus,[w.AccountType]:S.AccountType,[w.AccountTypeGridLayout]:S.AccountTypeGridLayout,[w.AccountVariableDefinition]:S.AccountVariableDefinition,[w.Agent]:S.Agent,[w.AgentConversation]:S.AgentConversation,[w.AgentConversationMessage]:S.AgentConversationMessage,[w.AgentVersion]:S.AgentVersion,[w.AnalyticsQueryTemplate]:S.AnalyticsQueryTemplates,[w.ApiKey]:S.ApiKey,[w.Blueprint]:S.Blueprint,[w.Case]:S.Case,[w.CaseAssignmentPolicy]:S.CaseAssignmentPolicy,[w.AccountComment]:S.AccountComment,[w.CaseComment]:S.CaseComment,[w.CaseMessage]:S.CaseMessage,[w.CaseQueue]:S.CaseQueue,[w.CaseQuery]:S.CaseQuery,[w.CaseQueryResult]:S.CaseQueryResult,[w.CaseTemplate]:S.CaseTemplate,[w.CaseVariableDefinition]:S.CaseVariableDefinition,[w.ComplianceRule]:S.ComplianceRule,[w.Device]:S.Device,[w.Document]:S.Document,[w.DocumentGeneric]:S.DocumentGeneric,[w.DocumentGovernmentId]:S.DocumentGovernmentId,[w.DocumentFileTest]:S.DocumentFileTest,[w.DocumentFile]:S.DocumentFile,[w.CurrentEnterpriseUser]:S.CurrentEnterpriseUser,[w.Filing]:S.Filing,[w.FilingFintracSTR]:S.Filing,[w.FilingTemplate]:S.FilingTemplate,[w.FilingTemplateFintracSTR]:S.FilingTemplate,[w.FilingCredential]:S.FilingCredential,[w.Inquiry]:S.Inquiry,[w.CurrentInquirySession]:S.CurrentInquirySession,[w.Graph]:S.Graph,[w.GraphDatumType]:S.GraphDatumType,[w.GraphNodeConfig]:S.GraphNodeConfig,[w.GraphNode]:S.GraphNode,[w.GraphQuery]:S.GraphQuery,[w.GraphQueryTemplate]:S.GraphQueryTemplate,[w.GraphSnapshot]:S.GraphSnapshot,[w.GraphVisualization]:S.Inquiry,[w.InquirySession]:S.InquirySession,[w.Template]:S.Template,[w.InquiryTemplate]:S.InquiryTemplate,[w.InquiryTemplateVersion]:S.InquiryTemplateVersion,[w.InquiryTemplateVersionDiff]:S.InquiryTemplateVersion,[w.InquiryTemplateModule]:S.InquiryTemplateModule,[w.InsightQuery]:S.InsightQuery,[w.InsightQuerySession]:S.InsightQuerySessions,[w.PartialInquiryTemplateVersion]:S.InquiryTemplateVersion,[w.Importer]:S.Importer,[w.ImporterPipelineCsv]:S.ImporterPipeline,[w.ImporterPipelineMysql]:S.ImporterPipeline,[w.ImporterPipelineSnowflake]:S.ImporterPipeline,[w.ImporterPipelineRedshift]:S.ImporterPipeline,[w.ImporterPipelineS3]:S.ImporterPipeline,[w.ImporterPipelineGoogleSheets]:S.ImporterPipeline,[w.ImporterPipelineGcs]:S.ImporterPipeline,[w.ImporterRun]:S.ImporterRun,[w.ImporterReportAddressLookup]:S.ImporterReportAddressLookup,[w.ImporterReportAdverseMedia]:S.ImporterReportAdverseMedia,[w.ImporterReportBusinessAdverseMedia]:S.ImporterReportBusinessAdverseMedia,[w.ImporterReportBusinessLookup]:S.ImporterReportBusinessLookup,[w.ImporterReportBusinessWatchlist]:S.ImporterReportBusinessWatchlist,[w.ImporterReportEmailAddress]:S.ImporterReportEmailAddress,[w.ImporterReportPhoneNumber]:S.ImporterReportPhoneNumber,[w.ImporterReportPoliticallyExposedPerson]:S.ImporterReportPoliticallyExposedPerson,[w.ImporterReportProfileNonAuthoritative]:S.ImporterReportProfileNonAuthoritative,[w.ImporterReportSocialMedia]:S.ImporterReportSocialMedia,[w.ImporterReportWatchlist]:S.ImporterReportWatchlist,[w.InboxChannel]:S.InboxChannel,[w.InboxDomain]:S.InboxDomain,[w.PlatformNode]:S.PlatformNode,[w.ProductTour]:S.ProductTour,[w.Report]:S.Report,[w.ReportAddressLookup]:S.ReportAddressLookup,[w.ReportAdverseMedia]:S.ReportAdverseMedia,[w.ReportBusinessAdverseMedia]:S.ReportBusinessAdverseMedia,[w.ReportBusinessAssociatedPersons]:S.ReportBusinessAssociatedPersons,[w.ReportBusinessClassification]:S.ReportBusinessClassification,[w.ReportBusinessIndustryClassification]:S.ReportBusinessIndustryClassification,[w.ReportBusinessLiensLookup]:S.ReportBusinessLiensLookup,[w.ReportBusinessLookup]:S.ReportBusinessLookup,[w.ReportBusinessNonprofit]:S.ReportBusinessNonprofit,[w.ReportBusinessOnlinePresence]:S.ReportBusinessOnlinePresence,[w.ReportBusinessRegistrationsLookup]:S.ReportBusinessRegistrationsLookup,[w.ReportBusinessSocialMedia]:S.ReportBusinessSocialMedia,[w.ReportBusinessWatchlist]:S.ReportBusinessWatchlist,[w.ReportBusinessWebsite]:S.ReportBusinessWebsite,[w.ReportChainalysisAddressScreening]:S.ReportChainalysisAddressScreening,[w.ReportClearbitBusinessLookup]:S.ReportClearbitBusinessLookup,[w.ReportCoinbaseCheckCryptoRisk]:S.ReportCoinbaseCheckCryptoRisk,[w.ReportCryptoAddressWatchlist]:S.ReportCryptoAddressWatchlist,[w.ReportCustomList]:S.ReportCustomList,[w.ReportEmailAddress]:S.ReportEmailAddress,[w.ReportEquifaxOneview]:S.ReportEquifaxOneview,[w.ReportFinraBrokerCheck]:S.ReportFinraBrokerCheck,[w.ReportKyckrBusinessLookup]:S.ReportKyckrBusinessLookup,[w.ReportMiddeskBusinessLookup]:S.ReportMiddeskBusinessLookup,[w.ReportMxAccount]:S.ReportMxAccount,[w.ReportPhoneNumber]:S.ReportPhoneNumber,[w.ReportPoliticallyExposedPerson]:S.ReportPoliticallyExposedPerson,[w.ReportProfile]:S.ReportProfile,[w.ReportProfileNonAuthoritative]:S.ReportProfileNonAuthoritative,[w.ReportScreening]:S.ReportScreening,[w.ReportSecActionLookup]:S.ReportSecActionLookup,[w.ReportSentilinkApplicationRisk]:S.ReportSentilinkApplicationRisk,[w.ReportSentilinkScores]:S.ReportSentilinkScores,[w.ReportSocialMedia]:S.ReportSocialMedia,[w.ReportSynthetic]:S.ReportSynthetic,[w.ReportTrmWalletScreening]:S.ReportTrmWalletScreening,[w.ReportWatchlist]:S.ReportWatchlist,[w.ReportSnapshotAdverseMedia]:S.ReportSnapshot,[w.ReportSnapshotBusinessNonprofit]:S.ReportSnapshot,[w.ReportSnapshotScreening]:S.ReportSnapshot,[w.ReportSnapshotWatchlist]:S.ReportSnapshot,[w.ReportSnapshot]:S.ReportSnapshot,[w.ReportTemplate]:S.ReportTemplate,[w.ReportTemplateAddressLookup]:S.ReportTemplateAddressLookup,[w.ReportTemplateAdverseMedia]:S.ReportTemplateAdverseMedia,[w.ReportTemplateBusinessAdverseMedia]:S.ReportTemplateBusinessAdverseMedia,[w.ReportTemplateBusinessAssociatedPersons]:S.ReportTemplateBusinessAssociatedPersons,[w.ReportTemplateBusinessClassification]:S.ReportTemplateBusinessClassification,[w.ReportTemplateBusinessIndustryClassification]:S.ReportTemplateBusinessIndustryClassification,[w.ReportTemplateBusinessLiensLookup]:S.ReportTemplateBusinessLiensLookup,[w.ReportTemplateBusinessLookup]:S.ReportTemplateBusinessLookup,[w.ReportTemplateBusinessNonprofit]:S.ReportTemplateBusinessNonprofit,[w.ReportTemplateBusinessOnlinePresence]:S.ReportTemplateBusinessOnlinePresence,[w.ReportTemplateBusinessRegistrationsLookup]:S.ReportTemplateBusinessRegistrationsLookup,[w.ReportTemplateBusinessSocialMedia]:S.ReportTemplateBusinessSocialMedia,[w.ReportTemplateBusinessWatchlist]:S.ReportTemplateBusinessWatchlist,[w.ReportTemplateBusinessWebsite]:S.ReportTemplateBusinessWebsite,[w.ReportTemplateChainalysisAddressScreening]:S.ReportTemplateChainalysisAddressScreening,[w.ReportTemplateClearbitBusinessLookup]:S.ReportTemplateClearbitBusinessLookup,[w.ReportTemplateCoinbaseCheckCryptoRisk]:S.ReportTemplateCoinbaseCheckCryptoRisk,[w.ReportTemplateCryptoAddressWatchlist]:S.ReportTemplateCryptoAddressWatchlist,[w.ReportTemplateCustomList]:S.ReportTemplateCustomList,[w.ReportTemplateEmailAddress]:S.ReportTemplateEmailAddress,[w.ReportTemplateEquifaxOneview]:S.ReportTemplateEquifaxOneview,[w.ReportTemplateFinraBrokerCheck]:S.ReportTemplateFinraBrokerCheck,[w.ReportTemplateKyckrBusinessLookup]:S.ReportTemplateKyckrBusinessLookup,[w.ReportTemplateMiddeskBusinessLookup]:S.ReportTemplateMiddeskBusinessLookup,[w.ReportTemplateMxAccount]:S.ReportTemplateMxAccount,[w.ReportTemplateNovaCreditCashAtlas]:S.ReportTemplateNovaCreditCashAtlas,[w.ReportTemplateNovaCreditCreditPassport]:S.ReportTemplateNovaCreditCreditPassport,[w.ReportTemplatePhoneNumber]:S.ReportTemplatePhoneNumber,[w.ReportTemplatePoliticallyExposedPerson]:S.ReportTemplatePoliticallyExposedPerson,[w.ReportTemplateProfile]:S.ReportTemplateProfile,[w.ReportTemplateProfileNonAuthoritative]:S.ReportTemplateProfileNonAuthoritative,[w.ReportTemplateScreening]:S.ReportTemplateScreening,[w.ReportTemplateSecActionLookup]:S.ReportTemplateSecActionLookup,[w.ReportTemplateSentilinkApplicationRisk]:S.ReportTemplateSentilinkApplicationRisk,[w.ReportTemplateSentilinkScores]:S.ReportTemplateSentilinkScores,[w.ReportTemplateSocialMedia]:S.ReportTemplateSocialMedia,[w.ReportTemplateSynthetic]:S.ReportTemplateSynthetic,[w.ReportTemplateTrmWalletScreening]:S.ReportTemplateTrmWalletScreening,[w.ReportTemplateWatchlist]:S.ReportTemplateWatchlist,[w.ReportTemplateVersionAddressLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionAdverseMedia]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessAdverseMedia]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessAssociatedPersons]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessClassification]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessIndustryClassification]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessLiensLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessNonprofit]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessOnlinePresence]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessRegistrationsLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessSocialMedia]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessWatchlist]:S.ReportTemplateVersion,[w.ReportTemplateVersionBusinessWebsite]:S.ReportTemplateVersion,[w.ReportTemplateVersionClearbitBusinessLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionChainalysisAddressScreening]:S.ReportTemplateVersion,[w.ReportTemplateVersionCryptoAddressWatchlist]:S.ReportTemplateVersion,[w.ReportTemplateVersionCustomList]:S.ReportTemplateVersionCustomList,[w.ReportTemplateVersionEmailAddress]:S.ReportTemplateVersion,[w.ReportTemplateVersionEquifaxOneview]:S.ReportTemplateVersion,[w.ReportTemplateVersionFinraBrokerCheck]:S.ReportTemplateVersion,[w.ReportTemplateVersionKyckrBusinessLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionMiddeskBusinessLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionMxAccount]:S.ReportTemplateVersion,[w.ReportTemplateVersionPhoneNumber]:S.ReportTemplateVersion,[w.ReportTemplateVersionPoliticallyExposedPerson]:S.ReportTemplateVersion,[w.ReportTemplateVersionProfile]:S.ReportTemplateVersion,[w.ReportTemplateVersionProfileNonAuthoritative]:S.ReportTemplateVersion,[w.ReportTemplateVersionScreening]:S.ReportTemplateVersion,[w.ReportTemplateVersionSecActionLookup]:S.ReportTemplateVersion,[w.ReportTemplateVersionSentilinkApplicationRisk]:S.ReportTemplateVersion,[w.ReportTemplateVersionSentilinkScores]:S.ReportTemplateVersion,[w.ReportTemplateVersionSocialMedia]:S.ReportTemplateVersion,[w.ReportTemplateVersionSynthetic]:S.ReportTemplateVersion,[w.ReportTemplateVersionTrmWalletScreening]:S.ReportTemplateVersion,[w.ReportTemplateVersionWatchlist]:S.ReportTemplateVersion,[w.ReportRun]:S.ReportRunsCustomList,[w.ReportRunCustomList]:S.ReportRunsCustomList,[w.SAR]:S.SAR,[w.SARConfiguration]:S.SARConfiguration,[w.SelfieCenterOnly]:S.SelfieCenterOnly,[w.SelfieProfileAndCenter]:S.SelfieProfileAndCenter,[w.Verification]:S.Verification,[w.VerificationAamva]:S.VerificationAamva,[w.VerificationBusinessWebsite]:S.VerificationBusinessWebsite,[w.VerificationCertificateKorea]:S.VerificationCertificateKorea,[w.VerificationDatabase]:S.VerificationDatabase,[w.VerificationDatabaseAadhaar]:S.VerificationDatabaseAadhaar,[w.VerificationDatabaseBusiness]:S.VerificationDatabaseBusiness,[w.VerificationDatabaseBusinessFootprint]:S.VerificationDatabaseBusinessFootprint,[w.VerificationDatabaseEcbsv]:S.VerificationDatabaseEcbsv,[w.VerificationDatabasePhoneCarrier]:S.VerificationDatabasePhoneCarrier,[w.VerificationDatabaseSerpro]:S.VerificationDatabaseSerpro,[w.VerificationDatabaseStandard]:S.VerificationDatabaseStandard,[w.VerificationDatabaseTin]:S.VerificationDatabaseTin,[w.VerificationDatabaseVatNumber]:S.VerificationDatabaseVatNumber,[w.VerificationDigitalIdFinnishTrustNetwork]:S.VerificationDigitalIdFinnishTrustNetwork,[w.VerificationDigitalIdMitId]:S.VerificationDigitalIdMitId,[w.VerificationDigitalIdOneId]:S.VerificationDigitalIdOneId,[w.VerificationDigitalIdPhilsys]:S.VerificationDigitalIdPhilsys,[w.VerificationDigitalIdSerpro]:S.VerificationDigitalIdSerpro,[w.VerificationDigitalIdSingpass]:S.VerificationDigitalIdSingpass,[w.VerificationDigitalIdUkSharecode]:S.VerificationDigitalIdUkSharecode,[w.VerificationDocument]:S.VerificationDocument,[w.VerificationEmailAddress]:S.VerificationEmailAddress,[w.VerificationGovernmentId]:S.VerificationGovernmentId,[w.VerificationGovernmentIdNfc]:S.VerificationGovernmentIdNfc,[w.VerificationMobileDriversLicense]:S.VerificationMobileDriversLicense,[w.VerificationPhoneNumber]:S.VerificationPhoneNumber,[w.VerificationSelfie]:S.VerificationSelfie,[w.VerificationTemplate]:S.VerificationTemplate,[w.VerificationTemplateAamva]:S.VerificationTemplate,[w.VerificationTemplateBusinessWebsite]:S.VerificationTemplate,[w.VerificationTemplateCertificateKorea]:S.VerificationTemplate,[w.VerificationTemplateDatabase]:S.VerificationTemplate,[w.VerificationTemplateDatabaseAadhaar]:S.VerificationTemplate,[w.VerificationTemplateDatabaseEcbsv]:S.VerificationTemplate,[w.VerificationTemplateDatabaseBusiness]:S.VerificationTemplate,[w.VerificationTemplateDatabaseBusinessFootprint]:S.VerificationTemplate,[w.VerificationTemplateDatabasePhoneCarrier]:S.VerificationTemplate,[w.VerificationTemplateDatabaseSerpro]:S.VerificationTemplate,[w.VerificationTemplateDatabaseStandard]:S.VerificationTemplate,[w.VerificationTemplateDatabaseTin]:S.VerificationTemplate,[w.VerificationTemplateDatabaseVatNumber]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdFinnishTrustNetwork]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdMitId]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdOneId]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdPhilsys]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdSerpro]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdSingpass]:S.VerificationTemplate,[w.VerificationTemplateDigitalIdUkSharecode]:S.VerificationTemplate,[w.VerificationTemplateDocument]:S.VerificationTemplate,[w.VerificationTemplateEmailAddress]:S.VerificationTemplate,[w.VerificationTemplateGovernmentId]:S.VerificationTemplate,[w.VerificationTemplateGovernmentIdNfc]:S.VerificationTemplate,[w.VerificationTemplateMobileDriversLicense]:S.VerificationTemplate,[w.VerificationTemplatePhoneNumber]:S.VerificationTemplate,[w.VerificationTemplateSelfie]:S.VerificationTemplate,[w.VerificationTemplateVersion]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionAamva]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionBusinessWebsite]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionCertificateKorea]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabase]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseAadhaar]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseStandard]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseBusiness]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseBusinessFootprint]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseEcbsv]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabasePhoneCarrier]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseSerpro]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseTin]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDatabaseVatNumber]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdFinnishTrustNetwork]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdMitId]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdOneId]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdPhilsys]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdSerpro]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdSingpass]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDigitalIdUkSharecode]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionDocument]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionEmailAddress]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionGovernmentId]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionGovernmentIdNfc]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionMobileDriversLicense]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionPhoneNumber]:S.VerificationTemplateVersion,[w.VerificationTemplateVersionSelfie]:S.VerificationTemplateVersion,[w.Organization]:S.Organization,[w.OrganizationPlan]:S.OrganizationPlan,[w.OrganizationPlanMigration]:S.OrganizationPlanMigration,[w.OnboardingFlowV1]:S.OnboardingFlowV1,[w.Invoice]:S.Invoice,[w.CurrentUser]:S.CurrentUser,[w.User]:S.User,[w.UserAuditLog]:S.UserAuditLog,[w.UserAuthentication]:S.UserAuthentication,[w.UserNotification]:S.UserNotification,[w.UserSession]:S.UserSession,[w.Event]:S.Event,[w.ApiLog]:S.ApiLog,[w.Environment]:S.Environment,[w.EnvironmentProduction]:S.Environment,[w.EnvironmentSandbox]:S.Environment,[w.Exporter]:S.Exporter,[w.ExporterAccount]:S.ExporterAccount,[w.ExporterInquiry]:S.ExporterInquiry,[w.ExporterMetricsInquiry]:S.ExporterMetricsInquiry,[w.ExporterCase]:S.ExporterCase,[w.ExporterCustomFile]:S.ExporterCustomFiles,[w.ExporterInsightQuery]:S.ExporterInsightQueries,[w.ExporterDataset]:S.ExporterDataset,[w.ExporterGraph]:S.ExporterGraph,[w.ExporterMetricsVerificationVolume]:S.ExporterMetricsVerificationVolume,[w.ExporterMetricsVerificationChecks]:S.ExporterMetricsVerificationChecks,[w.ExporterReport]:S.ExporterReport,[w.ExporterReviewQueueTask]:S.ExporterReviewQueueTask,[w.ExporterTransaction]:S.ExporterTransactions,[w.ExternalIntegration]:S.ExternalIntegration,[w.ExternalIntegrationCall]:S.ExternalIntegrationCall,[w.ExternalIntegrationConfig]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialApiKey]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialBearer]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialBasic]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialOauth2AuthorizationCode]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialOauth2Password]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialOauth2TenantSpecificAuthorizationCode]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialWebhook]:S.ExternalIntegrationConfig,[w.ExternalIntegrationConfigCredentialHmac]:S.ExternalIntegrationConfig,[w.ExternalIntegrationDataSource]:S.ExternalIntegrationDataSource,[w.ExternalIntegrationDataSourceCsv]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceMongodb]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceMysql]:S.ExternalIntegration,[w.ExternalIntegrationDataSourcePostgres]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceRedshift]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceGcs]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceGoogleSheets]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceSnowflake]:S.ExternalIntegration,[w.ExternalIntegrationDataSourceS3]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentChainalysis]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentEquifaxOneview]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentKyckr]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentMiddesk]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentMx]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentSentilink]:S.ExternalIntegration,[w.ExternalIntegrationEnrichmentTrm]:S.ExternalIntegration,[w.ExternalIntegrationLog]:S.ExternalIntegrationLog,[w.ExternalIntegrationProductivity]:S.ExternalIntegration,[w.ExternalIntegrationProductivityHubspotOAuth]:S.ExternalIntegration,[w.ExternalIntegrationProductivityOpenAi]:S.ExternalIntegration,[w.ExternalIntegrationProductivitySalesforceOAuth]:S.ExternalIntegration,[w.ExternalIntegrationProductivitySlackOAuth]:S.ExternalIntegration,[w.ExternalIntegrationProductivityZendeskOAuth]:S.ExternalIntegration,[w.ExternalIntegrationVendor]:S.ExternalIntegrationVendor,[w.PasswordResetEmail]:S.PasswordReset,[w.SentinelSession]:S.SentinelSession,[w.SimulatePreset]:S.SimulatePreset,[w.SimulatePresetVerification]:S.SimulatePreset,[w.TableView]:S.TableView,[w.Theme]:S.Theme,[w.ThemeSet]:S.ThemeSet,[w.ThemeVariable]:S.ThemeVariable,[w.ThemeVariableAsset]:S.ThemeVariable,[w.ThemeVariableFont]:S.ThemeVariable,[w.Transaction]:S.Transaction,[w.TransactionLabel]:S.TransactionLabel,[w.TransactionStatus]:S.TransactionStatus,[w.TransactionType]:S.TransactionType,[w.TransactionTypeGridLayout]:S.TransactionTypeGridLayout,[w.TransactionVariableDefinition]:S.TransactionVariableDefinition,[w.Translations]:S.Translations,[w.TriggerEvent]:S.Trigger,[w.TriggerSchedule]:S.Trigger,[w.TriggerRecurring]:S.Trigger,[w.TriggerAccount]:S.Trigger,[w.TriggerApi]:S.Trigger,[w.TriggerCase]:S.Trigger,[w.TriggerDirect]:S.Trigger,[w.Webhook]:S.Webhook,[w.Workflow]:S.Workflow,[w.WorkflowBlock]:S.WorkflowBlock,[w.WorkflowDeployment]:S.WorkflowDeployment,[w.WorkflowModule]:S.WorkflowModule,[w.WorkflowRun]:S.WorkflowRun,[w.WorkflowRunSimulated]:S.WorkflowRun,[w.WorkflowRunStep]:S.WorkflowRunStep,[w.WorkflowRunStepAction]:S.WorkflowRunStep,[w.WorkflowRunStepConditional]:S.WorkflowRunStep,[w.WorkflowRunStepParallel]:S.WorkflowRunStep,[w.WorkflowRunStepLoop]:S.WorkflowRunStep,[w.WorkflowRunStepModule]:S.WorkflowRunStep,[w.WorkflowRunStepWait]:S.WorkflowRunStep,[w.WorkflowRunVariablePersonaObject]:S.WorkflowRunStep,[w.WorkflowRunVariablePlatformIntegration]:S.WorkflowRunStep,[w.WorkflowRunVariableOutput]:S.WorkflowRunStep,[w.WorkflowRunVariableTriggerParams]:S.WorkflowRunStep,[w.WorkflowRunVariableLoop]:S.WorkflowRunStep,[w.WorkflowVersion]:S.WorkflowVersion,[w.PlatformSchema]:S.PlatformSchema,[w.List]:S.List,[w.ListGovernmentIdNumber]:S.List,[w.ListIpAddress]:S.List,[w.ListName]:S.List,[w.ListPhoneNumber]:S.List,[w.ListEmailAddress]:S.List,[w.ListGeolocation]:S.List,[w.ListBrowserFingerprint]:S.List,[w.ListDeviceFingerprint]:S.List,[w.ListString]:S.List,[w.ListFace]:S.List,[w.ListCountry]:S.List,[w.ListField]:S.List,[w.ListSelfieBackground]:S.List,[w.ListItem]:S.ListItem,[w.ListItemGovernmentIdNumber]:S.ListItem,[w.ListItemIpAddress]:S.ListItem,[w.ListItemName]:S.ListItem,[w.ListItemPhoneNumber]:S.ListItem,[w.ListItemEmailAddress]:S.ListItem,[w.ListItemGeolocation]:S.ListItem,[w.ListItemBrowserFingerprint]:S.ListItem,[w.ListItemDeviceFingerprint]:S.ListItem,[w.ListItemFace]:S.ListItem,[w.ListItemCountry]:S.ListItem,[w.ListItemField]:S.ListItem,[w.ListItemString]:S.ListItem,[w.ListItemSelfieBackground]:S.ListItem,[w.ListMatch]:S.ListMatch,[w.WebhookEvent]:S.WebhookEvent,[w.ReviewQueue]:S.ReviewQueue,[w.ReviewQueueTask]:S.ReviewQueueTask,[w.Tag]:S.Tag,[w.Role]:S.Role,[w.Team]:S.Team,[w.WorkrampInstantAuth]:S.WorkrampInstantAuth,[w.YardstikIframeModule]:S.ExternalIntegrationConfig},Zt=e=>jx[e];class Px{constructor(t){this.apiRoot=t}listResource(t,n={}){return this.makeRequest(t,"GET",n)}getResource(t,n,r={}){return this.makeRequest(`${t}/${n}`,"GET",r)}getResourceMeta(t,n,r={}){return this.makeRequest(`${t}/${n}`,"GET",r)}getResourceMetaTyped(t,n={}){return this.makeRequest(`${t}`,"GET",n)}getResourceSingleton(t,n={}){return this.makeRequest(t,"GET",n)}get(t,n,r,o={}){return this.makeRequest(`${t}/${n}/${r}`,"GET",o)}getEndpoint(t,n={}){return this.makeRequest(t,"GET",n)}getBlob(t,n,r,o={}){return this.makeRequest(Vh([t,n,r]).join("/"),"GET",{...o,responseType:"blob"})}postResourceCreate(t,n={}){const r=t.type,o=n.parent,s=(o&&`${Zt(o.type)}/${o.id}/`||"")+Zt(r);return this.makeRequestWithBody(s,"POST",t,n)}postMultiResourceCreate(t,n,r={}){const{parent:o,additionalData:a}=r,c=(o&&`${Zt(o.type)}/${o.id}/`||"")+t;return this.makeRequestWithMultipleResources(c,"POST",n,a,r)}deleteResource(t,n){return this.makeRequest(`${t}/${n}`,"DELETE")}deleteResourceWithPayload(t,n,r){return this.makeRequestWithBody(`${n}/${r}`,"DELETE",t)}updateResource(t,n={}){const r=t.type,o=n.parent,s=`${(o?`${Zt(o.type)}/${o.id}/`:"")+Zt(r)}/${t.id}`;return this.makeRequestWithBody(s,"PATCH",t,n)}updateResourceAction(t,n,r={}){const o=t.type,a=r.parent,c=`${(a?`${Zt(a.type)}/${a.id}/`:"")+Zt(o)}/${t.id}/${n}`;return this.makeRequestWithBody(c,"PATCH",t,r)}updateResourceSingleton(t,n={}){const r=t.type,o=n.parent,s=(o&&`${Zt(o.type)}/${o.id}/`||"")+Zt(r);return this.makeRequestWithBody(s,"PATCH",t,n)}postResourceSingletonActionNew(t,n,r,o={}){const a=`${t}/${n}`;return this.makeRequestWithBody(a,"POST",r,o)}postResourceSingletonAction(t,n,r={}){const o=t.type,a=`${Zt(o)}/${n}`;return this.makeRequestWithBody(a,"POST",t,r)}postResourceAction(t,n,r={}){const o=t.type,a=`${Zt(o)}/${t.id}/${n}`;return this.makeRequestWithBody(a,"POST",t,r)}async sendRequest(t,n,r={}){var a,s;const o=this.generateParams(r);r.contentType==="multipart/form-data"&&(n.data=l0.serialize(n.data,{allowEmptyArrays:!!r.formDataAllowEmptyArrays})),(a=n.headers)!=null||(n.headers={}),n.headers["Persona-Server-SHA"]="96406845f68";try{const c=await di.request({...n,url:`${this.apiRoot}/${t}${o}`});if(Ir("request_id",(s=c==null?void 0:c.headers)==null?void 0:s["x-request-id"]),c.status===0&&n.method)throw new Ct({method:n.method,uri:t,extra:"with 0 status code"});if(c.data==null&&n.method&&n.method.toLowerCase()!=="delete")throw new Ct({method:n.method,uri:t,extra:"with empty response"});return c}catch(c){n.method?ar({error:c,method:n.method,uri:t}):ux(new Error(`Missing request method for Axios error. Error: ${JSON.stringify(c)}`))}finally{Ir("request_id",void 0)}}async makeRequest(t,n,r={}){var s;const o={method:n,"axios-retry":r.retryOptions,signal:r.signal,responseType:r.responseType,headers:{"Key-Inflection":(s=r.attributeKeyFormat)!=null?s:"kebab",...r.headers}},a=await this.sendRequest(t,o,r);return a==null?void 0:a.data}async makeRequestWithBody(t,n,r,o={}){var d;const s={data:{data:r,meta:o.meta},headers:{"Content-Type":o.contentType||"application/json","Key-Inflection":(d=o.attributeKeyFormat)!=null?d:"kebab",...o.headers},method:n,"axios-retry":o.retryOptions,onUploadProgress:o.onUploadProgress},c={...o};delete c.meta;const l=await this.sendRequest(t,s,c);return l==null?void 0:l.data}async makeRequestWithMultipleResources(t,n,r,o=[],a={}){var l;const s={data:{data:[r,...o],meta:a.meta},headers:{"Content-Type":"application/json","Key-Inflection":(l=a.attributeKeyFormat)!=null?l:"kebab",...a.headers},method:n,"axios-retry":a.retryOptions,onUploadProgress:a.onUploadProgress},c=await this.sendRequest(t,s,a);return c==null?void 0:c.data}generateParams(t){const n=zo.stringify({filter:{...t.filter},page:{...t.page},sort:t.sort,query:t.query,include:Array.isArray(t.include)?t.include.join(","):void 0,activation_token:t==null?void 0:t.activationToken,meta:{...t.meta}});return n?`?${n}`:""}}const Ns=class Ns{static init(){try{sessionStorage.setItem("testtest","testtest"),sessionStorage.getItem("testtest"),sessionStorage.removeItem("testtest"),localStorage.setItem("testtest","testtest"),localStorage.getItem("testtest"),localStorage.removeItem("testtest"),this.supportsStorage=!0}catch{this.supportsStorage=!1}}static setSessionItem(t,n){if(this.sessionData[t]=n,this.supportsStorage)try{sessionStorage.setItem(t,n)}catch(r){Z(r,"warning",{keys:Object.keys(sessionStorage)}),this.supportsStorage=!1}}static getSessionItem(t){return this.supportsStorage?this.sessionData[t]=sessionStorage.getItem(t):t in this.sessionData||(this.sessionData[t]=null),this.sessionData[t]}static removeSessionItem(t){delete this.sessionData[t],this.supportsStorage&&sessionStorage.removeItem(t)}static setLocalItem(t,n){if(this.localData[t]=n,this.supportsStorage)try{localStorage.setItem(t,n)}catch(r){Z(r,"warning",{keys:Object.keys(localStorage)}),this.supportsStorage=!1}}static getLocalItem(t){return this.supportsStorage?this.localData[t]=localStorage.getItem(t):t in this.localData||(this.localData[t]=null),this.localData[t]}static removeLocalItem(t){delete this.localData[t],this.supportsStorage&&localStorage.removeItem(t)}};Ns.sessionData={},Ns.localData={};let gn=Ns;gn.init();var Us=(e=>(e.IpStackCacheKey="cached-ipstack-location",e.LocaleInfoCacheKey="cached-locale-info",e.DashboardCurrentEnvironmentId="dashboard:current-environment-id",e.DashboardRefreshTokenSession="PERSONA-DASHBOARD-REFRESH",e.DashboardCasesNextPageSettingDefault="dashboard:cases:next-page-setting-default",e.DashboardLayoutEditorCopiedModule="dashboard:copied-module",e.DashboardGraphQueryParameters="dashboard:graph:query-parameters",e.DashboardInquirySimulateBannerDismissed="dashboard:inquiry:simulate-banner-dismissed",e.DashboardITEInternalEditingEnabled="dashboard:ite:internal-editing-enabled",e.DashboardITEPreviewSimulatePanelOpen="dashboard:ite:simulate-panel-open",e.DashboardITEScreenEditorSelectedScreenMode="dashboard:ite-screen-editor-selected-screen-mode",e.DashboardITEScreenEditorSelectedComponentPanelSettings="dashboard:ite-screen-editor-selected-component-panel-settings",e.DashboardITEPreviewStepsPanelOpen="dashboard:ite:simulate-steps-panel-open",e.DasbhoardITEScreenEditorCopiedComponent="dashboard:ite:screen-editor:copied-component",e.DashboardITEScreenDimensions="dashboard:ite:screen-dimensions",e.DashboardFLELegacyDesign="dashboard:fle:legacy-design",e.DashboardReportsTableVisibleColumns="dashboard:reports:visible-columns",e.DashboardWorkflowRunsTableSelectedColumns="dashboard:workflow-runs:selected-columns",e.DashboardWorkflowEditorCollapsedSteps="dashboard:workflow-editor:collapsed-steps",e.DashboardWorkflowEditorCopiedSteps="dashboard:workflow-editor:copied-steps",e.DashboardWorkflowEditorRunCodeFormInputs="dashboard:workflow-editor:run-code-form-inputs",e.DashboardActivityAt="dashboard:activity-at",e.DashboardDocumentInsightFeedback="dashboard:document-insight-feedback",e.GroupProperties="ajs_group_properties",e.UserTraits="ajs_user_traits",e.APIListInfoBanner="api-list-info-banner",e.APIEditInfoBanner="api-edit-info-banner",e.WebhooksInfoBanner="webhooks-info-banner",e.EventsInfoBanner="events-info-banner",e.DashboardImporterStepperFormInputs="dashboard:importer-stepper-form-inputs",e.DashboardEventBus="dashboard:event-bus",e.MarketingGclid="marketing:gclid",e.MarketingUtmSource="marketing:utm-source",e.MarketingUtmMedium="marketing:utm-medium",e.MarketingUtmCampaign="marketing:utm-campaign",e.MarketingUtmTerm="marketing:utm-term",e.MarketingUtmContent="marketing:utm-content",e.MarketingUtmAudience="marketing:utm-audience",e.MarketingUtmOther="marketing:utm-other",e))(Us||{}),Wn=(e=>(e.CommentModuleDrafts="dashboard:comment-module-drafts",e.SarModuleTabIdx="dashboard:sar-module-tab-idx",e.SectionedCardIdx="dashboard:sectioned-card-idx",e.CaseTemplateSettingTabIdx="dashboard:case-template-setting-tab-idx",e.InquiryParams="inquiry:params-key",e.InquiryAccessToken="inquiry:access-token",e.InquiryDeviceId="inquiry:device-id",e.InquiryVideoErrorsMap="inquiry:video-errors-map",e))(Wn||{});function gs(e){if(!e)return null;try{return d0(e)}catch{return null}}const ul=(e,t=null,n=[])=>{const r=Object.prototype.toString.call(e);if(r==="[object Object]")for(const o in e)ul(e[o],t?`${t}[${o}]`:o,n);else if(r==="[object Array]")for(let o=0;o<e.length;o++)ul(e[o],`${t}[${o}]`,n);else String(e)==="undefined"||String(e)==="null"||n.push([t,e]);return n},Dx=e=>{try{return btoa(unescape(encodeURIComponent(e)))}catch{return"Failed to encode input"}},Ox="/dashboard/inquiry-templates/:inquiryTemplateId/:inquiryTemplateVersionId",bs={CREATED:"create-persona/created",DISMISSED:"create-persona/dismissed"},ji={TRANSITION_STARTED:"verify-with-persona/transition-started",TRANSITION_POLLING:"verify-with-persona/transition-polling",TRANSITION_COMPLETED:"verify-with-persona/transition-completed",TRANSITION_ERRORED:"verify-with-persona/transition-errored"},Op="/inquiry/reusable-persona-create-popup",Lp="/inquiry/reusable-persona-verify-popup";var je=(e=>(e.NameFirst="name-first",e.NameMiddle="name-middle",e.NameLast="name-last",e.NameFull="name-full",e.Birthdate="birthdate",e.SocialSecurityNumber="social-security-number",e.Address="address",e.AddressStreet1="address-street-1",e.AddressStreet2="address-street-2",e.AddressCity="address-city",e.AddressSubdivision="address-subdivision",e.AddressPostalCode="address-postal-code",e.AddressCountryCode="address-country-code",e.CountryCode="country-code",e.PhoneNumber="phone-number",e.EmailAddress="email-address",e.IdentificationNumber="identification-number",e.IdentificationClass="identification-class",e.Term="term",e))(je||{}),Ae=(e=>(e.Ui="ui",e.Document="document",e.GovernmentId="government_id",e.Selfie="selfie",e.SelfieReflection="selfie_reflection",e.Complete="complete",e.Integration="integration",e.VerifyWithPersona="verify_with_persona",e.Loop="loop",e.Start="start",e.Completed="completed",e.Failed="failed",e.CountrySelect="country_select",e.DocumentsUpload="documents_upload",e))(Ae||{}),Fp=(e=>(e.Default="default",e.None="none",e))(Fp||{}),Mp=(e=>(e.Prompt="prompt",e.CountryAndIdSelect="country_and_id_select",e))(Mp||{});function ct(e){const t=typeof e=="object"?JSON.stringify(e):e;Z(new TypeError(`assertNever non-exhaustive match: ${t}`))}const Lx=e=>e.replace(/\/$/,""),Vp=e=>{const t=e.split(".");return t.length>1?t.pop():null},Fx=e=>{if(e==null||e==="personacallback")return!0;let t;try{t=new URL(e).protocol}catch{return!1}return!["data:","javascript:"].includes(t)},Mx=e=>e&&e.substring(0,15)==="intent:#Intent;"&&e.substr(-4)===";end";function Bp({children:e,disabled:t,...n}){return t?i.jsx(i.Fragment,{children:e}):i.jsx(Bh,{...n,children:e})}var rt=(e=>(e.Embedded="embedded",e.WebView="webview",e.Hosted="hosted",e.Inline="inline",e))(rt||{});const Xt=e=>{const t=Ke(n=>n.inquiry.featureFlags);return!!(t!=null&&t[e])},Ur=()=>{var r;const e=Xt("inquiry:enable-template-preferred-dimensions-configuration"),t=Ke(o=>{var a;return(a=o==null?void 0:o.inquiry)==null?void 0:a.inquiryTemplateVersion}),n=e?N.flowType===rt.Embedded?(r=t==null?void 0:t.attributes)==null?void 0:r["embedded-flow-preferred-dimensions"]:N.flowType===rt.Hosted?t==null?void 0:t.attributes["hosted-flow-preferred-dimensions"]:null:null;return n!=null?n:null};var ml=(e=>(e.InsideMargins="inside_margins",e.EdgeToEdge="edge_to_edge",e))(ml||{}),So=(e=>(e.Start="start",e.Center="center",e.End="end",e))(So||{}),Xl=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(Xl||{}),ed=(e=>(e.Light="light",e.Normal="normal",e.Medium="medium",e.Bold="bold",e.Heavy="heavy",e))(ed||{}),td=(e=>(e.None="none",e.Capitalize="capitalize",e.Uppercase="uppercase",e.Lowercase="lowercase",e))(td||{});const Vx={light:300,normal:400,medium:500,bold:700,heavy:900},dn=e=>e!=null?Vx[e]:void 0,E=e=>{if(e!=null)switch(e.unit){case"px":case"%":return`${e.value}${e.unit}`;default:ct(e)}},k=e=>{if(e!=null)return e.value},Bx=e=>{if(e!=null)return Object.keys(e).map(t=>{var n;return e[t]==null?"0px":(n=E(e[t]))!=null?n:"0px"}).join(" ")},qp=e=>e==null?void 0:["top","right","bottom","left"].map(n=>{var r;return e[n]==null?"0px":(r=E(e[n]))!=null?r:"0px"}).join(" "),qx=va(["body{height:100%;width:100%;font-size:",";line-height:",";color:",";-webkit-font-smoothing:antialiased;font-family:",";overflow:auto;-webkit-overflow-scrolling:touch;@media ","{overflow:hidden;}@media ","{background-color:",";}}input,textarea,select{opacity:unset;}a{color:",";font-size:inherit;line-height:inherit;text-decoration-line:",";&:focus-visible{outline:"," auto 1px;outline-offset:2px;}}h2{font-size:",";line-height:",";font-weight:",";margin-bottom:","px;}h3{font-size:",";line-height:",";font-weight:",";}small{font-size:",";line-height:",";a{font-size:",";line-height:",";}}section{margin-bottom:","px;}.row{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-","px;margin-left:-","px;}.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{position:relative;width:100%;min-height:1px;padding-right:","px;padding-left:","px;}@media (min-width:576px){.col-sm-1{-webkit-box-flex:0;-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%;}.col-sm-2{-webkit-box-flex:0;-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%;}.col-sm-3{-webkit-box-flex:0;-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%;}.col-sm-4{-webkit-box-flex:0;-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%;}.col-sm-5{-webkit-box-flex:0;-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%;}.col-sm-6{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%;}.col-sm-7{-webkit-box-flex:0;-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%;}.col-sm-8{-webkit-box-flex:0;-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%;}.col-sm-9{-webkit-box-flex:0;-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%;}.col-sm-10{-webkit-box-flex:0;-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%;}.col-sm-11{-webkit-box-flex:0;-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%;}.col-sm-12{-webkit-box-flex:0;-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%;}}"],Yt.p,Yn.p,I.Color.CoreSlate500,I.FontFamilies.Primary,xt.isMobile,xt.isNotMobile,({flowType:e})=>e===rt.Inline||e===rt.Embedded?"unset":"#505060",({theme:e})=>e.colorLink,({theme:e})=>e.textDecorationLineLink,({theme:e})=>e.colorLink,Yt.h2,Yn.h2,pn.semiBold,F.base,Yt.h3,Yn.h3,pn.semiBold,Yt.small,Yn.small,Yt.small,Yn.small,F.base*2,F.base*2,F.base*2,F.base*2,F.base*2),Nr={"ar-EG":"العربية",az:"Azərbaycanca",bg:"Български",bn:"বাংলা",cs:"čeština",cy:"Cymraeg",da:"dansk",de:"Deutsch","el-GR":"Ελληνικά","en-US":"English","es-MX":"Español",fi:"suomi",fr:"Français",he:"עִבְרִית",hi:"हिन्दी",hr:"hrvatski",hu:"magyar","id-ID":"Bahasa indonesia",hy:"Հայերեն",it:"Italiano",ja:"日本語","ko-KR":"한국어",lt:"lietuvių kalba",ms:"Bahasa Melayu","nl-NL":"Nederlands",no:"norsk",pl:"Polski","pt-BR":"Português",ro:"Română",ru:"Русский",sk:"slovenčina",sr:"Српски",sv:"Svenska",ta:"தமிழ்",th:"ภาษาไทย",tl:"Tagalog","tr-TR":"Türkçe","uk-UA":"Українська",ur:"Roman Urdu",vi:"tiếng việt","zh-CN":"中文 (简体）","zh-TW":"中文 (繁體）"},Ux=["ar-EG","he"],Cs={AK:"Alaska",AL:"Alabama",AR:"Arkansas",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"},xs={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia (Plurinational State of)",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d’Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia (Federated States of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran (Islamic Republic of)",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea (Democratic People’s Republic of)",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People’s Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela (Bolivarian Republic of)",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},Hs=["GB"],Hx={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AN:"ANT",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AX:"ALA",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MF:"MAF",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",SS:"SSD",ST:"STP",SV:"SLV",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",XK:"XKX",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};u0(Hx);const $x=va(["select{padding-right:","px !important;}h4{padding-left:0px !important;padding-right:","px !important;}"],F.base*3,F.base*3),Gx=({children:e,i18n:t})=>{const n=Ux.indexOf(t.language)>=0?"rtl":"ltr";return i.jsxs("div",{dir:n,"data-test":"localized-direction",children:[n==="rtl"&&i.jsx($x,{}),e]})},Wx=qn()(Gx),zx={hide:W(["@media print{display:none;}"]),border:W(["@media print{border:1px solid ",";}"],({theme:e})=>e.color.border.primary),avoidPageBreak:W(["@media print{break-inside:avoid;}"])},ho=({disabled:e})=>e?"":":disabled",bn=({disabled:e})=>e?":not(*)":":not(:disabled)",jr=({hovered:e})=>e?"":":hover",xi=({focused:e})=>e?"":":focus",Yx=({active:e})=>e?"":":focus-within",Kx=W(["font-family:",";"],({theme:e})=>e.text.fontFamily.base),Qx={lg:W(["",";margin:0;"],I.Typography.DisplayLarge),md:W(["",";margin:0;"],I.Typography.DisplayMedium),sm:W(["",";margin:0;"],I.Typography.DisplaySmall)},Up={lg:W(["",";margin:0;"],I.Typography.HeadingLarge),md:W(["",";margin:0;"],I.Typography.HeadingMedium),sm:W(["",";margin:0;"],I.Typography.HeadingSmall)},ui={lg:W(["",";margin:0;"],I.Typography.TextLarge),lgBold:W(["",";margin:0;"],I.Typography.TextLargeBold),lgLight:W(["",";margin:0;"],I.Typography.TextLargeLight),md:W(["",";margin:0;"],I.Typography.TextMedium),mdBold:W(["",";margin:0;"],I.Typography.TextMediumBold),mdLight:W(["",";margin:0;"],I.Typography.TextMediumLight),mdLink:W(["",";margin:0;"],I.Typography.TextMediumLink),sm:W(["",";margin:0;"],I.Typography.TextSmall),smLink:W(["",";margin:0;"],I.Typography.TextSmallLink),xs:W(["",";margin:0;"],I.Typography.TextExtraSmall)},Zx=mi(["100%{transform:rotate(360deg);}"]);mi(["0%{opacity:0;}100%{opacity:1;}"]);var it=(e=>(e.ExtraFast="100ms",e.Fast="200ms",e.Medium="400ms",e))(it||{});function st(e=!1){const[t,n]=f.useState(!!e),r=f.useCallback(c=>n(c),[]),o=f.useCallback(()=>n(!t),[t]),a=f.useCallback(()=>n(!0),[]),s=f.useCallback(()=>n(!1),[]);return[t,{set:r,toggle:o,enable:a,disable:s}]}const Jx=()=>{},Xx=({active:e})=>e?"":":active:enabled",ev={md:W([""," height:",";padding:",";svg{height:16px;width:16px;}"],ui.md,({theme:e})=>e.button.height.md,I.Spacing[2]),sm:W([""," height:",";padding:",";svg{height:16px;width:16px;}"],ui.sm,({theme:e})=>e.button.height.sm,I.Spacing[1])},tv={full:W(["width:100%;"]),auto:W(["width:auto;"]),button:W(["width:",";"],({theme:e})=>e.element.width.md),icon:W(["width:",";padding:0;flex:none;"],({theme:e,size:t})=>e.button.height[t])},nv=C.button.attrs(({to:e})=>Ol(e)?"button":typeof e=="string"&&e.startsWith("https://")?{as:"a",href:e,target:"_blank",rel:"noreferrer"}:{as:qh}).withConfig({displayName:"Button__StyledButton",componentId:"sc-91wjkl-0"})(["cursor:pointer;border:none;box-sizing:border-box;outline:0 !important;white-space:nowrap;"," display:flex;align-items:center;justify-content:center;position:relative;border-radius:",";transition:",";"," "," "," ",""],({theme:e,variant:t})=>{const n=e.color.variants[t];return W(["&:disabled{background-color:",";color:",";svg path{stroke:",";}svg.pds-icon{path{stroke:unset;}path[stroke]{stroke:currentColor;}}user-select:none;}"],n.disabled,n.textDisabled,n.textDisabled)},({theme:e})=>e.button.borderRadius,it.Fast,({size:e})=>ev[e],({width:e})=>tv[e],({theme:e,variant:t,$isPending:n})=>{const r=e.color.variants[t];return W(["background-color:",";color:",";svg path{stroke:",";}svg.pds-icon{path{stroke:unset;}path[stroke]{stroke:currentColor;}}&","","{background-color:",";}&","{cursor:not-allowed;}&","{background-color:",";}&","","{box-shadow:0px 0px 0px 2px ",";}",""],r.default,r.text,r.text,jr,bn,r.hover,ho,Xx,r.active,xi,bn,I.Color.BackgroundInputCheckboxFocus,n&&W(["cursor:default;background-color:",";&:disabled{background-color:",";user-select:none;}svg path{stroke:",";}svg.pds-icon{path{stroke:unset;}path[stroke]{stroke:currentColor;}}"],r.active,({theme:o})=>o.color.variants[t].active,r.highlightDark))},zx.hide),iv=C.div.withConfig({displayName:"Button__LoaderContainer",componentId:"sc-91wjkl-1"})(["position:absolute;height:100%;width:100%;top:0;display:flex;align-items:center;justify-content:center;transition:opacity 2s;opacity:",";"],({isPending:e})=>e?"1":"0"),rv=C(Uh).withConfig({displayName:"Button__Loader",componentId:"sc-91wjkl-2"})(["animation:"," linear 1s infinite;"],Zx),ov=C("div").attrs(({isPending:e})=>({"aria-hidden":e})).withConfig({displayName:"Button__ButtonChildren",componentId:"sc-91wjkl-3"})(["width:100%;display:flex;flex-wrap:nowrap;align-items:center;justify-content:center;transition:opacity ",";opacity:",";"],it.Fast,({isPending:e})=>e?"0":"1"),Hp=C.div.withConfig({displayName:"Button__PrefixIconContainer",componentId:"sc-91wjkl-4"})(["display:flex;align-items:center;margin-right:",";"],I.Spacing[1]),av=C.div.withConfig({displayName:"Button__InheritPrefixIconContainer",componentId:"sc-91wjkl-5"})(["display:flex;align-items:center;& svg{width:inherit;height:inherit;}"]),sv=C(Hp).withConfig({displayName:"Button__SuffixIconContainer",componentId:"sc-91wjkl-6"})(["margin-left:",";margin-right:0;flex-grow:1;justify-content:flex-end;"],I.Spacing[1]),$p=f.forwardRef(function({id:t,children:n,prefixIcon:r,suffixIcon:o,disabled:a,isPending:s,type:c="button",prefixIconType:l="basic",variant:d="primary",size:u="md",width:h="full",onClick:m,...p},g){const[b,{enable:x,disable:y}]=st(!1),v=m0(m)?m:Jx,_=s||b,A=f.useCallback(async T=>{if(_)return;const R=v(T);R instanceof Promise&&(x(),await R,y())},[_,v]);return i.jsxs(nv,{id:t,type:c,"data-test":"button__"+d,variant:d,size:u,width:h,disabled:a||_,$isPending:_,...p,onClick:A,ref:g,children:[_&&i.jsx(iv,{isPending:_,children:i.jsx(rv,{"aria-label":`Loading ${p["aria-label"]||""}`})}),i.jsxs(ov,{isPending:_,children:[r!=null&&i.jsxs(i.Fragment,{children:[l==="basic"&&i.jsx(Hp,{children:r}),l==="inherit"&&i.jsx(av,{children:r})]}),n,o!=null&&i.jsx(sv,{children:o})]})]})});var gi=(e=>(e.High="0px 2px 10px 0px rgba(0, 0, 0, 0.04), 0px 5px 20px 0px rgba(0, 0, 0, 0.06), 0px 10px 40px 0px rgba(0, 0, 0, 0.08)",e.Mid="0px 8px 14px 0px rgba(0, 0, 0, 0.06), 0px 3px 24px 0px rgba(0, 0, 0, 0.06)",e.Low="0px 4px 5px 0px rgba(0, 0, 0, 0.08), 0px 3px 14px 0px rgba(0, 0, 0, 0.04), 0px 8px 10px 0px rgba(0, 0, 0, 0.04)",e))(gi||{});`${I.Color.BorderHairline}`,`${I.Color.BorderHairline}`,`${I.Color.BorderHairline}`;const Ha={sm:"12px",md:"16px"},cv=C($p).attrs({width:"icon",variant:"basic"}).withConfig({displayName:"IconButton__IconBtn",componentId:"sc-1b440bg-0"})(["background-color:transparent;padding:0;border-radius:",";"," ",""],I.BorderRadius.Circle,({size:e})=>W(["height:",";width:",";svg{width:",";height:",";}"],Ha[e],Ha[e],Ha[e],Ha[e]),({theme:e})=>W(["&","","{box-shadow:0 0 0 3px ",";}&","","","{box-shadow:0 0 0 3px ",",",";}"],xi,bn,e.color.border.active,jr,xi,bn,e.color.border.active,gi.Mid));f.forwardRef(function({size:t="md",...n},r){return i.jsx(cv,{size:t,ref:r,...n})});const lv=C("div").withConfig({displayName:"Banner__StyledBanner",componentId:"sc-1jbckac-0"})(["",";line-height:18px;display:flex;align-items:center;justify-content:space-between;padding:0px ",";border-radius:4px;background:",";"],ui.sm,I.Spacing[2],({variant:e})=>{switch(e){case"success":return I.Color.CoreGreen100;case"warning":return I.Color.CoreYellow100;case"alert":return I.Color.CoreRed100;case"basic":default:return I.Color.BackgroundSecondary}}),dv=C.div.withConfig({displayName:"Banner__BannerContent",componentId:"sc-1jbckac-1"})(["display:flex;align-items:center;> svg:first-child{margin-right:",";}",""],I.Spacing[2],({extendContentWidth:e})=>e&&W(["width:100%;"])),Eu=C($p).withConfig({displayName:"Banner__ActionButton",componentId:"sc-1jbckac-2"})(["background-color:transparent;justify-self:space-between;&","","{background-color:unset;}&","","{box-shadow:none;}",""],Yx,bn,jr,bn,({isFocusVisible:e})=>!e&&W(["&","","","{box-shadow:none;}&","","{box-shadow:none;}"],jr,xi,bn,xi,bn)),uv=({children:e,variant:t,action:n,onClose:r,extendContentWidth:o,...a})=>{const{isFocusVisible:s}=h0();return i.jsxs(lv,{variant:t,role:"alert",...a,children:[i.jsx(dv,{extendContentWidth:o,children:e}),typeof n=="string"?r&&i.jsx(Eu,{variant:"basic",width:"auto",size:"sm",onClick:r,children:n}):n,!n&&r&&i.jsx(Eu,{variant:"basic",width:"icon","aria-label":"Close",title:"Close",onClick:r,isFocusVisible:s,children:i.jsx(Ll,{})})]})},At={page:0,inputButtons:1,navbar:10,footer:10,dropdown:11,notifications:100,drawer:101,popupBackdrop:102},Gp={small:"400px"},Me={header:"72px"},mv=C.h1.attrs(()=>({tabIndex:-1})).withConfig({displayName:"SandboxBanner__Title",componentId:"sc-3vktuu-0"})(["",";p{margin-bottom:",";}"],I.Typography.TextLarge,I.Spacing[2]),hv="https://help.withpersona.com/articles/11tePoksKZ5kSCo7pdC800/";function pv(){const[e,t]=f.useState(!1),n=()=>{t(!0),setTimeout(cr,0)};return e?null:i.jsxs(gv,{"data-test":"sandbox-banner",variant:"alert",onClose:n,children:[i.jsx(bv,{children:i.jsx(p0,{size:24})}),i.jsx(Cv,{children:i.jsxs(mv,{children:[i.jsx("p",{children:i.jsx("b",{children:"You are in a Sandbox environment."})}),i.jsxs("p",{children:["This environment is for testing only — no real verifications or data extractions will take place, and all results are simulated."," ",i.jsx("a",{href:hv,target:"_blank",rel:"noreferrer",children:"Learn more"})]}),i.jsxs("p",{children:["Unless you are setting up Persona for your business,"," ",i.jsx("b",{children:"never enter your personal information here"}),". If someone sent you this link as part of an identity verification flow, it may be a fraudulent or unauthorized use of Persona."]})]})})]})}const fv=mi(["0%{transform:scale(1);box-shadow:",";}50%{transform:scale(1.02);box-shadow:",",0 0 20px}100%{transform:scale(1);box-shadow:",";}"],gi.Low,gi.Low,gi.Low),gv=C(uv).withConfig({displayName:"SandboxBanner__StyledBanner",componentId:"sc-3vktuu-1"})(["",";position:absolute;top:",";left:",";right:",";z-index:",";box-shadow:",";animation:"," 2s ease-in-out 1;transform-origin:center;"],ui.md,I.Spacing[2],I.Spacing[2],I.Spacing[2],At.notifications,gi.Low,fv),bv=C("div").withConfig({displayName:"SandboxBanner__IconContainer",componentId:"sc-3vktuu-2"})(["height:40px;width:40px;display:flex;align-items:center;justify-content:center;"]),Cv=C("div").withConfig({displayName:"SandboxBanner__MessageContainer",componentId:"sc-3vktuu-3"})(["margin:",";"],I.Spacing[2]);var aa=(e=>(e.Anton="Anton",e.Archivo="Archivo",e.Domine="Domine",e.Dosis="Dosis",e.DroidSans="Droid Sans",e.IBMPlexSans="IBM Plex Sans",e.Inter="Inter",e.Jost="Jost",e.Lato="Lato",e.Lora="Lora",e.Manrope="Manrope",e.Montserrat="Montserrat",e.NotoSansJP="Noto Sans JP",e.NotoSansTC="Noto Sans TC",e.Nunito="Nunito",e.NunitoSans="Nunito Sans",e.OpenSans="Open Sans",e.Oswald="Oswald",e.Outfit="Outfit",e.PTSans="PT Sans",e.PlayfairDisplay="Playfair Display",e.Poppins="Poppins",e.PublicSans="Public Sans",e.RedditSans="Reddit Sans",e.Roboto="Roboto",e.Rubik="Rubik",e.SourceSansPro="Source Sans Pro",e.SourceSerifPro="Source Serif Pro",e.SpaceGrotesk="Space Grotesk",e.Ubuntu="Ubuntu",e.WorkSans="Work Sans",e))(aa||{}),Wp=(e=>(e.DEFAULT="default",e.LIGHT="light",e.NORMAL="normal",e.MEDIUM="medium",e.BOLD="bold",e.HEAVY="heavy",e))(Wp||{}),zp=(e=>(e.DEFAULT="default",e.NORMAL="normal",e.ITALIC="italic",e))(zp||{});function xv(e){f.useEffect(()=>{Yp(e)},[e])}const Yp=e=>{if(e.length>0){const t=e.map(r=>`@font-face { 
                        font-family: ${r.attributes["font-family-name"]}; 
                        src: url(${r.attributes.url});
                        ${r.attributes["font-weight"]!==Wp.DEFAULT?`font-weight: ${r.attributes["font-weight"]};`:""}
                        ${r.attributes["font-style"]!==zp.DEFAULT?`font-style: ${r.attributes["font-style"]};`:""}}`).join(`
`),n=document.createElement("style");n.innerHTML=t,document.head.appendChild(n)}};function Ar(e){const[t,n]=f.useState(e?"loading":"idle");return f.useEffect(()=>{if(!e){n("idle");return}let r=document.querySelector(`link[href="${e}"]`);r==null?(r=document.createElement("link"),r.href=e,r.rel="stylesheet",r.setAttribute("data-status","loading"),document.head.appendChild(r)):n(r.getAttribute("data-status")),r.onload=()=>{r.setAttribute("data-status","ready"),n("ready")},r.onerror=()=>{r.setAttribute("data-status","error"),n("error")}},[e]),t}const $t=e=>e!=null?`'${e}', sans-serif`:I.FontFamilies.Primary,_c=(e,t)=>e&&(e==null?void 0:e.replace(/\s/g,""))in aa?`https://fonts.googleapis.com/css2?family=${e.replace(/\s/g,"+")}:wght@300;400;500;700;900&display=swap`:t||`https://fonts.googleapis.com/css2?family=${aa.Rubik}:wght@300;400;500;700;900&display=swap`,vv=C.div.withConfig({displayName:"ThemedFonts__Container",componentId:"sc-1o9ay19-0"})(["font-family:",";color:",";font-size:",";line-height:",";"],({theme:{fontFamily:e}})=>$t(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody),yv=({children:e,customFonts:t=[]})=>{const{fontFamily:n,fontFamilyTitle:r,fontUrl:o}=f.useContext(tt);return Ar(_c(n,o)),Ar(_c(r,o)),xv(t),Ar(_c(void 0,o)),i.jsx(vv,{children:e})},Iv=50,Aa=650,Sv=C("div").withConfig({displayName:"Frame__ContainerWrapper",componentId:"sc-hgw3de-0"})(["position:relative;height:100%;width:100%;",""],({flowType:e,extraMarginTop:t,preferredDimensions:n})=>e===rt.Inline||n&&e===rt.Embedded?null:t?`
        @media ${xt.isNotMobile} {
          margin-top: 70px;
          margin-bottom: 50px;
        }
      `:`
        @media ${xt.isNotMobile} {
          margin-top: 50px;
          margin-bottom: 50px;
        }
      `),wv=C("div").withConfig({displayName:"Frame__Container",componentId:"sc-hgw3de-1"})(["",";position:relative;color:",";@media ","{height:100vh;}@media ","{border-radius:",";"," overflow-y:hidden;}"],({hidden:e})=>e&&"display: none;",({theme:e})=>e.colorFont,xt.isMobile,xt.isNotMobile,({theme:e})=>e.borderRadiusModal,({flowType:e,preferredDimensions:t})=>{var n;return e===rt.Embedded&&t?"min-height: 100vh;":`
        margin-left: auto;
        margin-right: auto;
        min-height: ${(n=E(t==null?void 0:t["minimum-height"]))!=null?n:`${Aa}px`};
        ${t!=null&&t["minimum-width"]?`min-width: ${E(t["minimum-width"])};`:""}
        ${t!=null&&t["maximum-width"]?`max-width: ${E(t["maximum-width"])};`:e!==rt.Inline?`max-width: ${Gp.small};`:""}
        ${e!==rt.Inline?`box-shadow: 0 5px 15px 0 ${Dp.base};`:""}
        max-height: ${t!=null&&t["maximum-height"]?`${E(t["maximum-height"])};`:"100%;"}
    `}),Kp="application__frame";function ku(e){const t=_v(),n={};window.matchMedia(xt.isMobile).matches&&(n.height=t?`${t}px`:"100vh");const r=Ur();return i.jsx(Bp,{disabled:!N.isEmbedded,focusTrapOptions:{escapeDeactivates:!1,clickOutsideDeactivates:!1,allowOutsideClick:!1,initialFocus:!1,fallbackFocus:document.body,setReturnFocus:!1},children:i.jsx("div",{id:Kp,"data-test":e["data-test"],children:i.jsxs(ya,{theme:e.themeSerialized,children:[i.jsx(qx,{flowType:e.flowType}),i.jsx(f.Suspense,{fallback:null,children:i.jsx(Wx,{children:i.jsxs(yv,{customFonts:e.customFonts,children:[e.isSandbox&&!e.sandboxBannerDisabled&&i.jsx(pv,{}),i.jsxs(Sv,{flowType:e.flowType,extraMarginTop:!!(e.isSandbox&&e.sandboxBannerDisabled),preferredDimensions:r,children:[i.jsx(wv,{"data-test":"frame__container",flowType:e.flowType,style:n,hidden:e.hidden,preferredDimensions:r,children:e.children}),e.footerWidgets]})]})})})]})})})}function _v(){const[e,t]=f.useState(Nu),n=Rv();return f.useEffect(()=>{if(!n)return;function r(){const o=Nu();t(o)}return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),n?e:null}function Nu(){var e;return Qp()?((e=document.documentElement)==null?void 0:e.clientHeight)||window.innerHeight:null}function Rv(){const[e,t]=f.useState(!1);return f.useEffect(()=>{Qp()&&t(!0)},[]),e}function Qp(){return typeof window<"u"&&typeof document<"u"}function cr(e){var r;e!=null||(e=document.getElementById(Kp));const t=(r=e==null?void 0:e.querySelector("h1"))!=null?r:e;(t==null?void 0:t.offsetParent)!=null&&(t==null||t.focus())}const Av="/dashboard/";var Oe=(e=>(e.Error="error",e.Exit="exit",e.Complete="complete",e.Fail="fail",e.Load="load",e.Ready="ready",e.Start="start",e.Success="success",e.DocumentCameraSelect="document-camera-select",e.DocumentCameraCapture="document-camera-capture",e.DocumentUpload="document-upload",e.OneTimeLinkSent="one-time-link-sent",e.OneTimeLinkStart="one-time-link-start",e.OneTimeLinkExit="one-time-link-exit",e.SelfieCameraSelect="selfie-camera-select",e.SelfieCameraCapture="selfie-camera-capture",e.SelfieRecordUpload="selfie-record-upload",e.PageChange="page-change",e.LoadCameraFailed="load-camera-failed",e.CameraCaptureFailed="camera-capture-failed",e.InquiryLoad="inquiry-load",e.CountrySelect="country-select",e.VerificationChange="verification-change",e))(Oe||{}),hl=(e=>(e.Open="open",e.Exit="exit",e))(hl||{});let Tv=class{constructor(t,n){var s;const r=zo.parse(n,{ignoreQueryPrefix:!0});this.currentPath=t,((s=r["is-webview"])==null?void 0:s.toLowerCase())==="true"?this.flowType=rt.WebView:Object.values(rt).includes(r["flow-type"])?this.flowType=r["flow-type"]:t.startsWith("/widget")?this.flowType=rt.Embedded:this.flowType=rt.Hosted,r["template-id"]||(r["template-id"]=r["blueprint-id"]),r["reference-id"]||(r["reference-id"]=r.subject);const a=(r["inquiry-template-id"]!=null||r["inquiry-template-version-id"]!=null||r["template-id"]!=null||r.code!=null||r["inquiry-id"]!=null?r:JSON.parse(gn.getSessionItem(Wn.InquiryParams)))||{};this.inquiryParams={...a,prefill:this.normalizePrefill(a.prefill)},this.flowType===rt.Hosted&&gn.setSessionItem(Wn.InquiryParams,JSON.stringify(this.inquiryParams))}removeSessionTokenFromCachedParams(){const t=JSON.parse(gn.getSessionItem(Wn.InquiryParams));t&&(delete t["session-token"],gn.setSessionItem(Wn.InquiryParams,JSON.stringify(t)))}get isEmbedded(){return this.flowType===rt.Embedded}get isWebView(){var t;return this.flowType===rt.WebView||((t=navigator.userAgent)==null?void 0:t.includes("WebView"))}get isHosted(){return this.flowType===rt.Hosted}get isInline(){return this.flowType===rt.Inline}get widgetPadding(){var r,o,a,s,c,l,d,u;const t={top:72,bottom:24,left:24,right:24};if(!this.isInline)return t;const n=(h,m)=>h==null||Number.isNaN(Number(h))?m:Number(h);return{top:n((o=(r=this.inquiryParams)==null?void 0:r["widget-padding"])==null?void 0:o.top,t.top),bottom:n((s=(a=this.inquiryParams)==null?void 0:a["widget-padding"])==null?void 0:s.bottom,t.bottom),left:n((l=(c=this.inquiryParams)==null?void 0:c["widget-padding"])==null?void 0:l.left,t.left),right:n((u=(d=this.inquiryParams)==null?void 0:d["widget-padding"])==null?void 0:u.right,t.right)}}get isEmbeddedOrIframeIntegration(){return this.flowType===rt.Embedded||this.flowType===rt.Inline||window.parent!==window}get isNonIframeHostedIntegration(){return this.flowType===rt.Hosted&&window.parent===window}get isDashboard(){try{return!!Sn(window.location.pathname,{path:Av,exact:!1})}catch(t){return Z(t),!1}}get isDashboardFLE(){try{return!!Sn(window.location.pathname,{path:Ox,exact:!1})}catch(t){return Z(t),!1}}get isReusablePersonaPopup(){const t=Sn(this.currentPath,{path:Lp,exact:!1}),n=Sn(this.currentPath,{path:Op,exact:!1});return!!t||!!n}get canRequestMicrophone(){return this.flowType!==rt.Embedded&&this.flowType!==rt.Inline||!this.beforeVersion("4.8.1")}get canCopyToClipboard(){return this.flowType!==rt.Embedded&&this.flowType!==rt.Inline||!this.beforeVersion("5.1.2")}redirectToStart(t){const n=o=>window.location.assign(o),r=t!=null?t:n;if(this.isEmbeddedOrIframeIntegration)r("/widget?"+zo.stringify(N.inquiryParams));else if(this.flowType===rt.WebView||this.flowType===rt.Hosted)r("/verify");else throw this.onError({status:400,code:"invalid_config",message:"Unsupported flow type for redirect to start event"}),new Error("[IGNORED] Unsupported flow type for redirect to start event")}beforeVersion(t){if(this.inquiryParams["client-version"]==null)return!0;try{const{major:n,minor:r,patch:o}=this.parseClientVersion(t),{major:a,minor:s,patch:c}=this.parseClientVersion(this.inquiryParams["client-version"]);if(a<n)return!0;if(a===n&&s<r)return!0;if(a===n&&s===r&&c<o)return!0}catch(n){return Z(n),!1}return!1}parseClientVersion(t){const n=/(\d+)\.(\d+)\.(\d+)/.exec(t);return{major:parseInt(n[1]),minor:parseInt(n[2]),patch:parseInt(n[3])}}get targetOrigin(){var r;const t=(r=this.inquiryParams["message-target-origin"])!=null?r:this.inquiryParams["iframe-origin"],n=new f0(t).origin;return n==="null"&&t!=="*"?t:n}onError(t){var r;const n={containerId:this.inquiryParams["container-id"],templateId:(r=this.inquiryParams["inquiry-template-id"])!=null?r:this.inquiryParams["template-id"],templateVersionId:this.inquiryParams["inquiry-template-version-id"],name:"error",error:t};window.parent.postMessage(this.flowType===rt.WebView?JSON.stringify(n):n,this.targetOrigin)}onEvent(t,n={},r={}){var l,d;t==="ready"&&(this.isInline||setTimeout(cr,0)),this.beforeVersion("3.1.1")&&t==="fail"&&(t="exit");const o={containerId:this.inquiryParams["container-id"],templateId:(l=this.inquiryParams["inquiry-template-id"])!=null?l:this.inquiryParams["template-id"],templateVersionId:this.inquiryParams["inquiry-template-version-id"],name:t,metadata:n};if(window.parent.postMessage(this.flowType===rt.WebView?JSON.stringify(o):o,this.targetOrigin),this.flowType!==rt.Hosted&&this.flowType!==rt.WebView||t!=="exit"&&t!=="complete"&&t!=="fail")return;const a=r==null?void 0:r.inquiry,s=a==null?void 0:a.attributes["redirect-query-string-config"];let c=this.inquiryParams["redirect-uri"]||(a==null?void 0:a.attributes["redirect-uri"]);if(!Fx(c))throw this.onError({status:400,code:"invalid_config",message:"Unsafe redirect. Redirects must be valid URLs."}),new Error("[IGNORED] Unsafe redirect. Redirects must be valid URLs.");switch(this.flowType){case rt.WebView:{c||(c="https://personacallback");const u={"inquiry-id":t==="complete"?n.inquiryId:void 0,"persona-inquiry-id":n.inquiryId,"reference-id":n.referenceId,subject:n.referenceId,scopes:n.scopes,status:n.status,fields:n.fields},h=this.applyRedirectQueryStringConfig(u,s),m=zo.stringify(h,{addQueryPrefix:!1}),g=c.includes("?")||decodeURIComponent(c).includes("?")?"&":"?",b=m?c+g+m:c;window.location.assign(b);break}case rt.Hosted:{if(c==null)if(((d=a==null?void 0:a.attributes["next-step"])==null?void 0:d.type)===Ae.Complete){window.close();return}else throw this.onError({status:400,code:"invalid_config",message:"Close event called from hosted inquiry flow without redirect-uri; investigate template for misconfiguration"}),new Error("[IGNORED] Close event called from hosted inquiry flow without redirect-uri; investigate template for misconfiguration");else if(Mx(c)){const u=c.length-3,h=c.substring(0,u)+"S.com.withpersona.INQUIRY_ID="+n.inquiryId+";end";window.location.assign(h)}else{const u={"inquiry-id":n.inquiryId,"reference-id":n.referenceId,subject:n.referenceId,scopes:n.scopes,status:n.status,fields:n.fields},h=this.applyRedirectQueryStringConfig(u,s),m=zo.stringify(h,{addQueryPrefix:!1}),g=c.includes("?")||decodeURIComponent(c).includes("?")?"&":"?",b=m?c+g+m:c;window.location.assign(b)}break}default:ct(this.flowType)}}normalizePrefill(t){if(!t)return{};let n;t[je.PhoneNumber]&&(n=g0(t[je.PhoneNumber],{defaultCountry:t[je.CountryCode]||"US"}));let r;return t[je.EmailAddress]&&(r=t[je.EmailAddress].replace(/\s/g,"+")),{...t,[je.PhoneNumber]:n?n.number:void 0,[je.EmailAddress]:r!=null?r:t[je.EmailAddress]}}applyRedirectQueryStringConfig(t,n){if(t={...t},t.fields={...t.fields},n!=null)switch(n["include-inquiry-id"]||(delete t["inquiry-id"],"persona-inquiry-id"in t&&delete t["persona-inquiry-id"]),n["include-reference-id"]||(delete t["reference-id"],delete t.subject),n["include-status"]||delete t.status,n["include-fields"]){case"allowlist":{const r=new Set(n["field-keys"].concat(n["field-keys"].map(gu)));Object.keys(t.fields).forEach(o=>{r.has(o)||delete t.fields[o]});break}case"blocklist":{const r=new Set(n["field-keys"].concat(n["field-keys"].map(gu)));Object.keys(t.fields).forEach(o=>{r.has(o)&&delete t.fields[o]});break}}return t}};const N=new Tv(window.location.pathname,window.location.search),sa="/api/internal/verify/v1",Ev="2025-05-01";var pl=(e=>(e.Other="other",e.Network="network",e.Camera="camera",e.Permissions="permissions",e))(pl||{});let kv=class extends Px{constructor(){super(...arguments),this.organizationMetadata={},this.onError=async t=>fetch(`${sa}/current-inquiry-session/error`,{method:"post",headers:{...this.getHeaders(),"Content-Type":"application/json"},body:JSON.stringify({error_type:t.type,debug_description:t.description||{}})}),this.onCancel=async()=>fetch(`${sa}/current-inquiry-session/cancel`,{method:"post",headers:this.getHeaders(),keepalive:!0})}get accessToken(){var t,n;return(n=(t=this.myAccessToken)!=null?t:gn.getSessionItem(Wn.InquiryAccessToken))!=null?n:void 0}set accessToken(t){gs(t)==null?(this.myAccessToken=null,gn.removeSessionItem(Wn.InquiryAccessToken),N.removeSessionTokenFromCachedParams()):(this.myAccessToken=t,t==null?gn.removeSessionItem(Wn.InquiryAccessToken):gn.setSessionItem(Wn.InquiryAccessToken,t))}clearAccessToken(){this.accessToken=null}getAuthHeaders(){if(this.accessToken)return{Authorization:`Bearer ${this.accessToken}`}}getOrganizationMetadataHeaders(){return{"Persona-Inquiry-Template-Id":this.organizationMetadata.inquiryTemplateId,"Persona-Organization-Id":this.organizationMetadata.organizationId,"Persona-Environment-Id":this.organizationMetadata.environmentId}}getSdkVersionHeaders(){return N.inquiryParams["client-version"]!=null?{"Persona-Js-Sdk-Version":N.inquiryParams["client-version"]}:{}}getChecksumHeaders(t,n,r){if(this.accessToken){const o=Math.floor(t/1e3).toString();let a=ul(n).map(u=>u[1]instanceof Blob?[u[0],String(u[1].size)]:/^[+-]?\d+(\.\d+)?$/.test(String(u[1]))?[u[0],String(u[1]).substring(0,10)]:[u[0],String(u[1]).replace(/\s/g,"")]).filter(u=>u[1].length>0);a=sl(a,[u=>uo(u).join()]);const s=JSON.stringify(a),c=bu([gs(this.accessToken).sub,o,s].join(":")).toString();let l="",d="";try{const u=["Persona-Version"];l=["User-Agent","tljlggdg",...u].join(", "),d=bu([navigator.userAgent+l+u.map(h=>r[h]).join(""),o,s].join(":")).toString()}catch(u){Z(u)}return{nhmjlnrs:o,stpbwsbb:c,tljlggdg:l,dnlgnzlz:d,requestparams:Dx(JSON.stringify(a.map(u=>u[1])).slice(0,1e3))}}}get styleVariant(){var t,n;return N.inquiryParams["style-variant"]?N.inquiryParams["style-variant"]:(n=(t=window.matchMedia)==null?void 0:t.call(window,"(prefers-color-scheme: dark)"))!=null&&n.matches?"dark":"base"}getHeaders(){var t,n;return{...this.getAuthHeaders(),...this.getOrganizationMetadataHeaders(),...this.getSdkVersionHeaders(),"Persona-Version":Ev,"Persona-Device-Id":(t=gn.getSessionItem(Wn.InquiryDeviceId))!=null?t:void 0,"Persona-Device-Locale":js.language,"Persona-Style-Variant":this.styleVariant,"Persona-Country":(n=this.countryToRouteRequests)!=null?n:N.inquiryParams["routing-country"]}}get fpjsCountry(){return this.countryToRouteRequests}get fpjsRetentionDays(){return this.fingerprintRetentionDays}async sendRequest(t,n,r={}){var s,c,l,d,u,h;const o={...n.headers,...this.getHeaders()},a={...n,headers:{...o,...this.getChecksumHeaders(Date.now(),n.data,o)}};try{const m=await super.sendRequest(t,a,r);return(s=m==null?void 0:m.headers)!=null&&s["persona-device-id"]&&gn.setSessionItem(Wn.InquiryDeviceId,m.headers["persona-device-id"]),(c=m==null?void 0:m.headers)!=null&&c["persona-fingerprint-life"]&&(this.fingerprintRetentionDays=m.headers["persona-fingerprint-life"]/86400),(l=m==null?void 0:m.headers)!=null&&l["persona-country"]&&(this.countryToRouteRequests=m.headers["persona-country"]),(d=m==null?void 0:m.headers)!=null&&d["persona-organization-id"]&&(this.organizationMetadata.organizationId=m.headers["persona-organization-id"]),(u=m==null?void 0:m.headers)!=null&&u["persona-environment-id"]&&(this.organizationMetadata.environmentId=m.headers["persona-environment-id"]),(h=m==null?void 0:m.headers)!=null&&h["persona-inquiry-template-id"]&&(this.organizationMetadata.inquiryTemplateId=m.headers["persona-inquiry-template-id"]),m}catch(m){throw m instanceof pt&&m.status===401&&(rr({level:"warning",message:"Failed to authenticate",data:{name:m.name,method:m.method,uri:m.uri,errors:m.errors}}),this.clearAccessToken(),delete N.inquiryParams["session-token"],N.redirectToStart()),m}}};const te=new kv(sa),Nv=60*60*24*60;function jv(){let e={country_code:"US"};try{const t=new Date().getTime(),n=JSON.parse(gn.getLocalItem(Us.LocaleInfoCacheKey));n&&n.expire>=t&&(e==null?void 0:e.country_code)!=null&&(e=n.value)}catch{e={country_code:"US"}}return e}function Pv(e){return gn.setLocalItem(Us.LocaleInfoCacheKey,JSON.stringify({value:e,expire:new Date().getTime()+Nv})),e}function Dv(e){if(e==null)return!1;const t=JSON.parse(gn.getLocalItem(Us.LocaleInfoCacheKey));return(t==null?void 0:t.value)==null||(t==null?void 0:t.expire)==null?!0:new Date().getTime()>=t.expire||t.value.country_code!==e.country_code||t.value.latitude!==e.latitude||t.value.longitude!==e.longitude}var Zp=(e=>(e.SaveLocaleInfo="locale/SAVE_LOCALE_INFO",e))(Zp||{});function Jp(e){return{payload:{localeInfo:e},type:"locale/SAVE_LOCALE_INFO"}}function Ov(e){return async t=>{var o;const n=await te.updateResourceSingleton(e),r=(o=n==null?void 0:n.data)==null?void 0:o.attributes;if(r!=null&&r["country-code"]){const a={country_code:r["country-code"],latitude:r==null?void 0:r.latitude,longitude:r==null?void 0:r.longitude};Dv(a)&&(Pv(a),t(Jp(a)))}}}var $s=(e=>(e.InquiriesEnableDeviceFingerprint="inquiries.device-fingerprint",e))($s||{});const Pn=()=>{try{return!!window.Cypress}catch{return!1}},Lv=()=>window.self!==window.top;class z{static async logAmplitude(t,n){Pn()||(Hi.getInstance().logEvent(t,n),rr({level:"info",message:`[AMPLITUDE] ${t}`}))}static async logPendo(t,n){Pn()||window.pendo.track(t,n)}static async logAll(t,n){z.logAmplitude(t,n),z.logPendo(t,n)}}class mn extends Error{constructor({method:t}){super(t),this.name="ApiNonRetryableResponseError",Object.setPrototypeOf(this,new.target.prototype),this.message=t!=null?t:this.name,this.method=t}}var Ee=(e=>(e.BusinessSearch="business_search",e.ButtonAction="button_action",e.ButtonCancel="button_cancel",e.ButtonComplete="button_complete",e.ButtonCreatePersona="button_create_persona",e.ButtonDeviceHandoff="button_device_handoff",e.ButtonLink="button_link",e.ButtonSubmit="button_submit",e.ButtonVerifyWithPersona="button_verify_with_persona",e.CombinedStepButton="combined_step/button",e.CombinedStepImagePreview="combined_step/image_preview",e.ClickableStack="clickable_stack",e.Footer="footer",e.GovernmentIdNfcScan="government_id_nfc_scan",e.GovernmentIdTypeSelect="government_id_type_select",e.HorizontalStack="horizontal_stack",e.Home="home",e.ImageLocal="image_local",e.ImageRemote="image_remote",e.InputAddress="input_address",e.InputCheckbox="input_checkbox",e.InputCheckboxGroup="input_checkbox_group",e.InputConfirmationCode="input_confirmation_code",e.InputCreditCard="input_credit_card",e.InputCurrency="input_currency",e.InputDate="input_date",e.InputESignature="input_e_signature",e.InputFileUpload="input_file_upload",e.InputInternationalDb="input_international_db",e.InputMaskedText="input_masked_text",e.InputMultiSelect="input_multi_select",e.InputNumber="input_number",e.InputPhoneNumber="input_phone_number",e.InputRadioGroup="input_radio_group",e.InputSelect="input_select",e.InputText="input_text",e.InputTextArea="input_text_area",e.MDoc="mdoc",e.LanguageSelector="language_selector",e.PasskeyAuthentication="passkey_authentication",e.PasskeyRegistration="passkey_registration",e.PersonaBranding="persona_branding",e.PrivacyPolicy="privacy_policy",e.QrCode="qr_code",e.Spacer="spacer",e.Stepper="stepper",e.TableStatic="table_static",e.Text="text",e.Title="title",e))(Ee||{});function Fv(e){switch(e==null?void 0:e.type){case"clickable_stack":case"footer":case"horizontal_stack":return!0;default:return!1}}var Xp=(e=>(e.Primary="primary",e.Secondary="secondary",e))(Xp||{}),ie=(e=>(e.AnimatedCheck="animated_check",e.FailedIcon="failed_icon",e.StartHero="start_hero",e.FailureDefaultIcon="failure_default_icon",e.FailureDocumentIcon="failure_document_icon",e.FailureSelfieIcon="failure_selfie_icon",e.IdBackIcon="id_back_icon",e.IdFrontIcon="id_front_icon",e.DocumentStartHero="document_start_hero",e.OptionFlagIcon="option_flag_icon",e.OptionGlobeIcon="option_globe_icon",e.OptionHomeIcon="option_home_icon",e.OptionIdIcon="option_id_icon",e.OptionIdDocumentIcon="option_id_document_icon",e.OptionUserIcon="option_user_icon",e.OptionPhoneIcon="option_phone_icon",e.OptionCheckIcon="option_check_icon",e.OptionChevronIcon="option_chevron_icon",e.ReusablePersonaLogo="reusable_persona_logo",e.CreatePersonaCtaCardIcon="create_persona_cta_card_icon",e.CreatePersonaPasskeyRegistrationHero="create_persona_passkey_registration_hero",e.CreatePersonaPasskeyRegistrationSpeedIcon="create_persona_passkey_registration_speed_icon",e.CreatePersonaPasskeyRegistrationShieldIcon="create_persona_passkey_registration_shield_icon",e.CreatePersonaPasskeyRegistrationFingerprintIcon="create_persona_passkey_registration_fingerprint_icon",e.CreatePersonaSuccessHero="create_persona_success_hero",e.CreatePersonaVerifyMobileDeviceHero="create_persona_verify_mobile_device_hero",e.VerifyWithPersonaPasskeyAuthenticationHero="verify_with_persona_passkey_authentication_hero",e.VerifyWithPersonaPasskeyAuthenticationPersonaLogo="verify_with_persona_passkey_authentication_persona_logo",e.VerifyWithPersonaPasskeyAuthenticationIdIcon="verify_with_persona_passkey_authentication_id_icon",e.VerifyWithPersonaPasskeyAuthenticationAddressIcon="verify_with_persona_passkey_authentication_address_icon",e.VerifyWithPersonaPasskeyAuthenticationDataSharedIcon="verify_with_persona_passkey_authentication_data_shared_icon",e.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon="verify_with_persona_passkey_authentication_individual_attributes_icon",e.VerifyWithPersonaPasskeyAuthenticationNameIcon="verify_with_persona_passkey_authentication_name_icon",e.VerifyWithPersonaPasskeyAuthenticationSelfieIcon="verify_with_persona_passkey_authentication_selfie_icon",e.GovernmentIdNfcScanBackClosed="government_id_nfc_scan_back_closed",e.GovernmentIdNfcScanFrontClosed="government_id_nfc_scan_front_closed",e.GovernmentIdNfcScanPhotoPage="government_id_nfc_scan_photo_page",e.GovernmentIdNfcScanIdCard="government_id_nfc_scan_id_card",e.GovernmentIdNfcScanBackThenFront="government_id_nfc_scan_back_then_front",e.StepperIncompleteIcon="stepper_incomplete_icon",e.StepperConnectorIcon="stepper_connector_icon",e.StepperCurrentIcon="stepper_current_icon",e.StepperCompletedIcon="stepper_completed_icon",e.StepperErroredIcon="stepper_errored_icon",e))(ie||{}),as=(e=>(e.None="none",e.GoogleMaps="google_maps",e))(as||{}),na=(e=>(e.Text="text",e.Email="email",e.NumberPad="number_pad",e))(na||{}),ef=(e=>(e.BusinessSearch="business_search",e.ButtonAction="button_action",e.ButtonCancel="button_cancel",e.ButtonComplete="button_complete",e.ButtonCreatePersona="button_create_persona",e.ButtonDeviceHandoff="button_device_handoff",e.ButtonLink="button_link",e.ButtonSubmit="button_submit",e.ButtonVerifyWithPersona="button_verify_with_persona",e.CombinedStepButton="combined_step/button",e.CombinedStepImagePreview="combined_step/image_preview",e.ClickableStack="clickable_stack",e.FailureReasonText="failure_reason_text",e.FailureReasonImage="failure_reason_image",e.Footer="footer",e.GovernmentIdNfcScan="government_id_nfc_scan",e.GovernmentIdTypeSelect="government_id_type_select",e.HorizontalStack="horizontal_stack",e.Home="home",e.ImageHosted="image_hosted",e.ImageLocal="image_local",e.InputAddress="input_address",e.InputCheckbox="input_checkbox",e.InputCheckboxDatetime="input_checkbox_datetime",e.InputCheckboxGroup="input_checkbox_group",e.InputConfirmationCode="input_confirmation_code",e.InputCreditCard="input_credit_card",e.InputCountrySelect="input_country_select",e.InputCurrency="input_currency",e.InputDate="input_date",e.InputESignature="input_e_signature",e.InputFileUpload="input_file_upload",e.InputInternationalDb="input_international_db",e.InputMaskedText="input_masked_text",e.InputMultiSelect="input_multi_select",e.InputNumber="input_number",e.InputPhoneNumber="input_phone_number",e.InputRadioGroup="input_radio_group",e.InputSelect="input_select",e.InputSubdivisionSelect="input_subdivision_select",e.InputText="input_text",e.InputTextArea="input_text_area",e.InputUrl="input_url",e.LanguageSelector="language_selector",e.PasskeyAuthentication="passkey_authentication",e.PasskeyRegistration="passkey_registration",e.PersonaBranding="persona_branding",e.PrivacyPolicy="privacy_policy",e.QrCode="qr_code",e.Spacer="spacer",e.Stepper="stepper",e.TableStatic="table_static",e.Text="text",e.Title="title",e))(ef||{});Object.values(ef).filter(e=>![].includes(e));var fl=(e=>(e.Auto="auto",e.National="national",e.International="international",e))(fl||{});const ju="QXz8BHySkL0h61Kytaae",Pu="TDFWciWInORo44Ij1rSu",Mv="1zuUw1sS4hPAU8i3Zwe9",Vv="ROZupuzRDToFCm71CiAG";async function tf(){try{const e=await bx.load(),{visitorId:t}=await e.get();return t}catch{}}async function nf(e,t,n){try{const r=e==="DE"?"eu":"us";let o=`https://fp-${r}.withpersona.com`,a=e==="DE"?Pu:ju;if(t!=null&&t["inquiry:enable-fp-365-day-retention"]){const l=e==="DE"?Pu:ju,d=e==="DE"?Vv:Mv,u=n==null||n>=365;a=u?d:l,o=`https://fp-${r}${u?"-365":""}.withpersona.com`}const s=[Cx()];return t!=null&&t["inquiry:enable-fp-bot-detection"]&&s.push(xx()),(await vx({token:a,modules:s,endpoint:o,region:r})).get({extendedResult:!0})}catch{}}function Vn(e){e&&(e.entries=[],e.length=0,e.index=-1)}function Bv(e){e&&(e.entries=e.entries.slice(-1),e.length=1,e.index=0)}function Gs(e,t,n,r,o,a){{mx({id:e}),Ir("organization_id",o),Ir("template_id",r),Ir("environment_type",n),Ir("viewType",N.flowType),Ir("release","96406845f68"),hx("featureFlags",a);const s=px();t==null||e==null||s.setSession({sid:t,did:e,release:"96406845f68",init:!0}),Hi.getInstance().setOptOut(!a["inquiry:enable-amplitude"]),Hi.getInstance().setUserId(e),Hi.getInstance().setGroup("environment",n),Hi.getInstance().setGroup("template-id",r),Hi.getInstance().setGroup("organization-id",o),Hi.getInstance().setGroup("viewType",N.flowType),Object.entries(a).forEach(([c,l])=>{Hi.getInstance().setGroup(c,l.toString())})}}var fe=(e=>(e.Created="created",e.Pending="pending",e.Completed="completed",e.Expired="expired",e.Approved="approved",e.NeedsReview="needs_review",e.Declined="declined",e.Failed="failed",e))(fe||{}),an=(e=>(e.BACKGROUND="background",e.BLOCKING="blocking",e.NONE="none",e))(an||{}),gl=(e=>(e.CREATED="created",e.ERRORED="errored",e.AUTHENTICATED="authenticated",e.UPDATED="updated",e))(gl||{});function wi(e){var t,n;return(n=(t=e==null?void 0:e.attributes["wait-for-transition"])==null?void 0:t["polling-mode"])!=null?n:"none"}function wo(e){switch(e.type){case Ae.Document:case Ae.GovernmentId:case Ae.Selfie:case Ae.SelfieReflection:return!0;default:return!1}}var rn=(e=>(e.LoadVerifications="inquiry/LOAD_VERIFICATIONS",e.LogCollectedData="inquiry/LOG_COLLECTED_DATA",e.SaveVerification="inquiry/SAVE_VERIFICATION",e.LoadDocuments="inquiry/LOAD_DOCUMENTS",e.UpdateDocumentAtIndex="inquiry/UPDATE_DOCUMENT_AT_INDEX",e.SaveTemplate="inquiry/SAVE_TEMPLATE",e.SaveInquiryTemplateVersion="inquiry/SAVE_INQUIRY_TEMPLATE_VERSION",e.SaveInquiry="inquiry/SAVE_INQUIRY",e.SaveThemeVariableFonts="inquiry/SAVE_THEME_VARIABLE_FONTS",e.SaveOrganization="inquiry/SAVE_ORGANIZATION",e.SaveTheme="inquiry/SAVE_THEME",e.SaveIsWebGLIncompatible="inquiry/SAVE_WEB_GL_INCOMPATIBILITY",e.SavePopupUrl="inquiry/SAVE_POPUP_URL",e.SaveFeatureFlags="inquiry/SAVE_FEATURE_FLAGS",e.SaveProductFeatures="inquiry/SAVE_PRODUCT_FEATURES",e.SetCurrentSession="inquiry/SET_CURRENT_SESSION",e.SetCurrentStep="inquiry/SET_CURRENT_STEP",e.SetComponent="inquiry/SET_COMPONENT",e.SetCachedInquiryTransitionParams="inquiry/SET_CACHED_INQUIRY_TRANSITION_PARAMS",e))(rn||{});function qv(e){return{payload:{verifications:e},type:"inquiry/LOAD_VERIFICATIONS"}}function Uv(e){return{payload:{verification:e},type:"inquiry/SAVE_VERIFICATION"}}function Hv(e){return{payload:{documents:e},type:"inquiry/LOAD_DOCUMENTS"}}function Ta(e){return{payload:{data:e},type:"inquiry/LOG_COLLECTED_DATA"}}function ca(e,t){return{payload:{document:e,documentNumber:t},type:"inquiry/UPDATE_DOCUMENT_AT_INDEX"}}function rf(e){return{payload:{template:e},type:"inquiry/SAVE_TEMPLATE"}}function $v(e){return{payload:{inquiryTemplateVersion:e},type:"inquiry/SAVE_INQUIRY_TEMPLATE_VERSION"}}function Ot(e){return{payload:{inquiry:e},type:"inquiry/SAVE_INQUIRY"}}function nd(e){return{payload:{organization:e},type:"inquiry/SAVE_ORGANIZATION"}}function id(e){return{payload:{theme:e},type:"inquiry/SAVE_THEME"}}function Gv(e){return{payload:{fonts:e},type:"inquiry/SAVE_THEME_VARIABLE_FONTS"}}function of(e){return{payload:{isWebGLIncompatible:e},type:"inquiry/SAVE_WEB_GL_INCOMPATIBILITY"}}function af(e){return{payload:{popupUrl:e},type:"inquiry/SAVE_POPUP_URL"}}function rd(e){return{payload:{featureFlags:e},type:"inquiry/SAVE_FEATURE_FLAGS"}}function od(e){return{payload:{productFeatures:e},type:"inquiry/SAVE_PRODUCT_FEATURES"}}function Ws(e){return{payload:{session:e},type:"inquiry/SET_CURRENT_SESSION"}}function Wv(e){return{payload:{step:e},type:"inquiry/SET_CURRENT_STEP"}}function Ki(e){return{payload:{component:e},type:"inquiry/SET_COMPONENT"}}function sf(e){return{payload:{cachedInquiryTransitionParams:e},type:"inquiry/SET_CACHED_INQUIRY_TRANSITION_PARAMS"}}var Yo=(e=>(e.ShowMessage="messages/SHOW_MESSAGE",e.RemoveMessage="messages/REMOVE_MESSAGE",e.ClearMessage="messages/CLEAR_MESSAGE",e.ClearMessages="messages/CLEAR_MESSAGES",e.ClearMessagesOnRouteChange="messages/CLEAR_MESSAGES_ON_ROUTE_CHANGE",e))(Yo||{});function se(e,t){return{payload:{id:Hh("message"),message:e,persist:t},type:"messages/SHOW_MESSAGE"}}function Lt(){return{type:"messages/CLEAR_MESSAGES"}}function zv(){return{type:"messages/CLEAR_MESSAGES_ON_ROUTE_CHANGE"}}var cf=(e=>(e.Default="default",e.None="none",e))(cf||{}),ad=(e=>(e.None="none",e.Mobile="mobile",e))(ad||{}),U=(e=>(e.Front="front",e.Back="back",e.BarcodePdf417="barcode_pdf417",e.FrontOrBack="front_or_back",e.PassportSignature="passport_signature",e))(U||{}),Ko=(e=>(e.Flag="flag",e.World="world",e.House="house",e.Card="card",e))(Ko||{}),ir=(e=>(e.Barcode="barcode",e.Passport="passport",e.IdFront="id_front",e.IdFrontRightPortrait="id_front_right_portrait",e.IdBack="id_back",e.CornersOnly="corners_only",e.Empty="empty",e))(ir||{}),xn=(e=>(e.Name="name",e.Birthdate="birthdate",e.Address="address",e.IdentificationNumberLast4="identification_number_last_4",e.IdentificationNumberFull9="identification_number_full_9",e.PhoneNumber="phone_number",e.EmailAddress="email_address",e))(xn||{}),lf=(e=>(e.Full="full",e.Partial="partial",e.None="none",e))(lf||{}),df=(e=>(e.NameFirst="name_first",e.NameLast="name_last",e.Birthdate="birthdate",e.IdentificationNumber="identification_number",e.AddressStreet1="address_street_1",e.AddressStreet2="address_street_2",e.AddressCity="address_city",e.AddressSubdivision="address_subdivision",e.AddressPostalCode="address_postal_code",e))(df||{}),wn=(e=>(e.WebCamera="web_camera",e.MobileCamera="mobile_camera",e.Upload="upload",e.DeviceHandoff="device_handoff",e))(wn||{}),sd=(e=>(e.None="none",e.Name="name",e.NameAndBirthdate="name_and_birthdate",e.NameAndSsn="name_and_ssn",e))(sd||{}),uf=(e=>(e.Telesign="telesign",e))(uf||{}),Cn=(e=>(e.ProfileAndCenter="profile_and_center",e.OnlyCenter="only_center",e.ConfigurablePoses="configurable_poses",e.Reflection="reflection",e))(Cn||{}),Kn=(e=>(e.WebCamera="web_camera",e.Manual="manual",e.Stillfie="stillfie",e.DeviceHandoff="device_handoff",e))(Kn||{}),la=(e=>(e.None="none",e.GoogleMaps="google_maps",e))(la||{});async function cd(e,t,n){const[{data:r}]=await Promise.all([di.get(e).catch(o=>{let a;try{a=new URL(e)}catch{}ar({error:o,method:"GET",uri:a instanceof URL?`${a.origin}${a.pathname}`:e})}),t.loadLanguages([n])]);return t.addResourceBundle(n,"translation",r,!0,!0),r}var kt=(e=>(e.Initiated="initiated",e.Confirmed="confirmed",e.Submitted="submitted",e.Passed="passed",e.TentativelyPassed="tentatively_passed",e.TentativelyFailed="tentatively_failed",e.RequiresRetry="requires_retry",e.Failed="failed",e.Skipped="skipped",e.Canceled="canceled",e))(kt||{});const mf=(e,t,n)=>{if(e==null)return;const r=e.attributes["enabled-country-codes"],o=(t||{})["country-code"];if(r.length===0&&o in xs||r.includes(o))return o;if(o==null&&r.length===1)return r[0];if(r.length===0&&n in xs||r.includes(n))return n},Yv=(e,t,n,r)=>{var b;const{"enabled-capture-options-desktop":o,"enabled-capture-options-mobile":a,"enabled-id-classes-by-country":s}=e,l=((b=(s||{})[t])!=null?b:[]).find(x=>x.class===n),d=l==null||l["requires-device"]!==ad.Mobile,u=ni(),h=(u?a:o)||[],m=d||xp()||u,p=r&&m&&h.includes(wn.WebCamera),g=window.FileReader!=null;return[{option:wn.WebCamera,condition:p},{option:wn.MobileCamera,condition:!p&&u},{option:wn.Upload,condition:g},{option:wn.DeviceHandoff,condition:!0}].filter(x=>x.condition&&h.includes(x.option)).map(x=>x.option)};function po(e){var t,n;return((n=(t=e==null?void 0:e.relationships)==null?void 0:t["inquiry-template-version"])==null?void 0:n.data)!=null}function vi(e){return N.isHosted?!!N.inquiryParams["redirect-uri"]||!!e.attributes["redirect-uri"]:!0}var he=(e=>(e.Center="center",e.Left="left",e.Right="right",e))(he||{}),ld=(e=>(e.Start="start",e))(ld||{}),ut=(e=>(e.Live="live",e.Auto="auto",e.Manual="manual",e.Upload="upload",e))(ut||{}),_o=(e=>(e.Guided="guided",e.Unguided="unguided",e))(_o||{}),cn=(e=>(e.PortraitMissing="portrait_missing",e.PortraitNotClear="portrait_not_clear",e.DisabledIdClass="disabled_id_class",e.MilitaryId="military_id",e.BarcodeNotDetected="barcode_not_detected",e.MrzNotDetected="mrz_not_detected",e.Expired="expired",e.FailedAgeComparison="failed_age_comparison",e.DoubleFrontDetected="double_front",e.Blurry="blurry",e.Glare="glare",e.CornerMissing="corner_missing",e.SelectedCountryMismatch="selected_country_mismatch",e.UnprocessableImage="unprocessable_image",e.UnacceptableGovernmentId="unacceptable_government_id",e.Generic="generic",e))(cn||{}),bl=(e=>(e.AddressDeliverableDetection="database_address_deliverable_detection",e))(bl||{}),lo=(e=>(e.Generic="generic",e.Glare="glare",e.Glasses="glasses",e))(lo||{});function ss(e){return(e.attributes["next-step"].config||{})["require-selfie-match"]||Cn.ProfileAndCenter}function zs(e){return(e.attributes["next-step"].config||{})["require-strict-selfie-capture"]||!1}function Di(e,t){return!!e.find(n=>n.pose===t)}function da(e,t,n){if(n&&Cn.ConfigurablePoses)return Ei(e,n);switch(t){case Cn.ProfileAndCenter:return Di(e,he.Center)?Di(e,he.Left)?Di(e,he.Right)?void 0:he.Right:he.Left:he.Center;case Cn.OnlyCenter:return Di(e,he.Center)?void 0:he.Center}}function hf({orderedPoses:e,requireSelfieMatch:t}){const n=t===Cn.OnlyCenter?[]:[he.Left,he.Right];return e!=null?e:[he.Center,...n]}function Ei(e,t){for(const n of t)if(!Di(e,n))return n}function Du(e){return e==null?void 0:e.map(t=>({capturedAt:t==null?void 0:t.capturedAt,captureMethod:t==null?void 0:t.captureMethod,pose:t==null?void 0:t.pose}))}function Rc(e,t=[]){return t.find(n=>n.pose===e)}function dd(e,t,n,r,o){return[...e,{dataUrl:n,captureMethod:r,pose:t,capturedAt:o}]}const Kv=({verificationConfigSelfie:e,isMobile:t,isWebGLIncompatible:n,hasCamera:r})=>{const o=e[t?"enabled-capture-options-mobile":"enabled-capture-options-desktop"],a=r&&!n&&(o==null?void 0:o.includes(Kn.WebCamera));return[{option:Kn.WebCamera,condition:a},{option:Kn.Manual,condition:a},{option:Kn.Stillfie,condition:!a},{option:Kn.DeviceHandoff,condition:!0}].filter(s=>s.condition&&(o==null?void 0:o.includes(s.option))).map(s=>s.option)},si=(e,t)=>e.find(n=>n.pose===t),Ac=(e,t)=>e.filter(n=>n.pose===t),Qv=e=>e?Object.values(e).map(n=>n.captureMethod).indexOf(ut.Upload)>=0:!1;var Qt=(e=>(e.ClearCapturedSelfies="verification/CLEAR_CAPTURED_SELFIES",e.ClearUploadFiles="verification/CLEAR_UPLOAD_FILES",e.ClearCaptureStartedAt="verification/CLEAR_CAPTURE_STARTED_AT",e.SaveActiveVerificationType="verification/SAVE_ACTIVE_VERIFICATION_TYPE",e.SaveActiveVerification="verification/SAVE_ACTIVE_VERIFICATION",e.SaveCapturedSelfie="verification/SAVE_CAPTURED_SELFIE",e.SaveCaptureMethod="verification/SAVE_CAPTURE_METHOD",e.SaveCaptureStartedAt="verification/SAVE_CAPTURE_STARTED_AT",e.SaveSubmittedValues="verification/SAVE_SUBMITTED_VALUES",e.SaveAudioConstraints="verification/SAVE_AUDIO_CONSTRAINTS",e.SaveVideoConstraints="verification/SAVE_VIDEO_CONSTRAINTS",e.SaveUploadProgress="verification/SAVE_UPLOAD_PROGRESS",e.SaveWaitingOnNetwork="verification/SAVE_WAITING_ON_NETWORK",e.SaveVideoCaptureEnabled="verification/SAVE_VIDEO_CAPTURE_ENABLED",e.SelectGovernmentIdClass="verification/SELECT_GOVERNMENT_ID_CLASS",e.UpdateCameraInspectionData="verification/UPDATE_CAMERA_INSPECTION_DATA",e.UploadFiles="verification/UPLOAD_FILES",e.AcceptCheck="verification/ACCEPT_CHECK",e.SaveAutoclassificationSuccessIdDetails="verification/SAVE_AUTOCLASSIFICATION_SUCCESS_ID_DETAILS",e.SaveAutoclassificationFailureResult="verification/SAVE_AUTOCLASSIFICATION_FAILURE_RESULT",e.SaveAutoclassificationIdSelection="verification/SAVE_AUTOCLASSIFICATION_ID_SELECTION",e.SaveAutoclassificationIdClassesByCountries="verification/SAVE_AUTOCLASSIFICATION_ID_CLASSES_BY_COUNTRIES",e.ResetAutoclassificationState="verification/RESET_AUTOCLASSIFICATION_STATE",e))(Qt||{});function Zv(e){return{payload:{verificationType:e},type:"verification/SAVE_ACTIVE_VERIFICATION_TYPE"}}function Jv(e){return{payload:{verification:e},type:"verification/SAVE_ACTIVE_VERIFICATION"}}function pf(e){return{payload:{submittedValues:e},type:"verification/SAVE_SUBMITTED_VALUES"}}function Ro(e){return{payload:{videoConstraints:e},type:"verification/SAVE_VIDEO_CONSTRAINTS"}}function ff(e){return{payload:{audioConstraints:e},type:"verification/SAVE_AUDIO_CONSTRAINTS"}}function hr(e){return{payload:{captureMethod:e},type:"verification/SAVE_CAPTURE_METHOD"}}function Xv(e){return{payload:{videoCaptureEnabled:e},type:"verification/SAVE_VIDEO_CAPTURE_ENABLED"}}function Ea(e,t,n,r){return{payload:{selfieStep:e,imageDataUrl:t,captureMethod:n,capturedAt:r},type:"verification/SAVE_CAPTURED_SELFIE"}}function Ys(){return{type:"verification/CLEAR_CAPTURED_SELFIES"}}function ey(){return{type:"verification/CLEAR_UPLOAD_FILES"}}function ty(e){return{payload:{captureStartedAt:e},type:"verification/SAVE_CAPTURE_STARTED_AT"}}function ny(){return{type:"verification/CLEAR_CAPTURE_STARTED_AT"}}function ud(e){return{payload:{governmentIdClass:e},type:"verification/SELECT_GOVERNMENT_ID_CLASS"}}function md(e){return{payload:{cameraInspectionData:e},type:"verification/UPDATE_CAMERA_INSPECTION_DATA"}}function Ks(e,t,n,r){return{payload:{actionStep:e,clientExtractions:n,clientExtractionSource:r,files:t},type:"verification/UPLOAD_FILES"}}function bi(e){return{payload:{progress:e},type:"verification/SAVE_UPLOAD_PROGRESS"}}function iy(e,t,n){return{payload:{autoclassificationCountryCode:e,governmentIdClass:t,idClassesByCountries:n},type:"verification/SAVE_AUTOCLASSIFICATION_SUCCESS_ID_DETAILS"}}function ry(e,t){return{payload:{autoclassificationFailureReason:e,idClassesByCountries:t},type:"verification/SAVE_AUTOCLASSIFICATION_FAILURE_RESULT"}}function oy(e,t){return{payload:{autoclassificationCountryCode:e,governmentIdClass:t},type:"verification/SAVE_AUTOCLASSIFICATION_ID_SELECTION"}}function hd(){return{payload:{},type:"verification/RESET_AUTOCLASSIFICATION_STATE"}}function ay(e){return{payload:{idClassesByCountries:e},type:"verification/SAVE_AUTOCLASSIFICATION_ID_CLASSES_BY_COUNTRIES"}}var Ue=(e=>(e[e.Prompt=0]="Prompt",e[e.TakePhoto=1]="TakePhoto",e[e.CaptureLeadInAnimation=2]="CaptureLeadInAnimation",e[e.Check=3]="Check",e[e.CheckUpload=4]="CheckUpload",e[e.AutoclassificationFailure=5]="AutoclassificationFailure",e[e.AutoclassificationSelect=6]="AutoclassificationSelect",e))(Ue||{});function gf(e){return e.replace(/^[^,]+,/,"")}const Ou=";base64,";function Lu(e){const t=e.indexOf(Ou)+Ou.length,n=e.substring(t),r=atob(n),o=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return o.buffer}function pd(e){try{return new File([Lu(e.dataUrl)],e.filename)}catch{return new Blob([Lu(e.dataUrl)])}}function Ao(e,t=!1){return new Promise((n,r)=>{if(typeof FileReader>"u"){r(new Error("FileReader is not supported in this environment."));return}const o=new FileReader;o.onload=a=>{var s;if(((s=a.target)==null?void 0:s.result)==null){r(new Error("FileReader failed to load the file."));return}n(a.target.result)},o.onerror=a=>{var s,c;r((c=(s=a.target)==null?void 0:s.error)!=null?c:new Error("An unknown error occurred while reading the file.")),o.abort()},t?o.readAsText(e):o.readAsDataURL(e)})}function fd(e,t=!0){return t?pd(e):{filename:e.filename,data:gf(e.dataUrl)}}function Tr(e=[],t=!0){return e.map(n=>fd(n,t))}function bf(e,t,n){try{return new File(e,t,{type:n})}catch{return new Blob(e,{type:n})}}const ua=1e7;var Cl=(e=>(e.ImageJpg="image/jpg",e.ImageJpeg="image/jpeg",e.ImagePng="image/png",e.ImageHeic="image/heic",e.ImageHeif="image/heif",e.ImageTif="image/tif",e.ImageTiff="image/tiff",e.ImageGif="image/gif",e.ImageSvgXml="image/svg+xml",e.ApplicationPdf="application/pdf",e.TextPlain="text/plain",e.VideoMp4="video/mp4",e.VideoWebm="video/webm",e))(Cl||{});function lr(e){switch(e){case"image/svg+xml":return"svg";case"text/plain":return"txt";case"video/mp4":return"mp4";case"video/webm":return"webm";default:return e.split("/")[1]}}function gd(e,t,n,r){var c;if((e==null?void 0:e["enabled-id-classes-by-country"])==null)return;if(n==null)return r===0?U.Front:void 0;const s=((c=e["enabled-id-classes-by-country"][t.toLowerCase()])!=null?c:[]).find(l=>l.class===n);if(s==null)throw new Error(`No configuration for id class: ${n} for country: ${t}`);return s["requires-sides"][r]}function Qn(e,t){switch(t){case Ue.Prompt:return`/verify/government-id/${e}/prompt`;case Ue.TakePhoto:return`/verify/government-id/${e}/capture`;case Ue.Check:case Ue.CheckUpload:return`/verify/government-id/${e}/check`;case Ue.AutoclassificationFailure:case Ue.AutoclassificationSelect:throw new Error("Inquiry 2.0 should not have autoclassification step");case Ue.CaptureLeadInAnimation:throw new Error("Inquiry 2.0 should not have this govid redesign-only step");default:ct(t)}}function sy(e,t,n,r){const a=(e.attributes["next-step"].config||{})["enabled-id-classes-by-country"][t.toLowerCase()];return a&&a.find(c=>c.class===n&&c["requires-sides"].length>r)?r>=2:r>=1}function Fu(e,t,n,r,o=!0){var u,h,m,p,g,b;const a=t[U.Front]||t[U.FrontOrBack],s=t[U.Back]||t[U.BarcodePdf417],c=t[U.PassportSignature],l=[{page:U.Front,"capture-method":(u=zt(a))==null?void 0:u.captureMethod,"capture-flow":(h=zt(a))==null?void 0:h.captureFlow,data:Tr(a,o)},{page:U.Back,"capture-method":(m=zt(s))==null?void 0:m.captureMethod,"capture-flow":(p=zt(s))==null?void 0:p.captureFlow,data:Tr(s,o)},{page:U.PassportSignature,"capture-method":(g=zt(c))==null?void 0:g.captureMethod,"capture-flow":(b=zt(c))==null?void 0:b.captureFlow,data:Tr(c,o)}].filter(x=>x.data.length!==0);return{attributes:{"selected-id-class":e,"government-id-files":l,"client-extraction-raws":r,"camera-properties":n},type:w.VerificationGovernmentId}}function bd(e,t,n){return async r=>{var o,a,s;try{const c=await uy(t,n);r(Ws(c.data)),c.data.attributes.locale&&await e.changeLanguage(c.data.attributes.locale);const l=await te.getResource(S.Inquiry,c.data.relationships.inquiry.data.id,{include:["inquiry-template-version","organization","theme-variable-fonts"]});if((l==null?void 0:l.data)==null)return;const d=l.data,u=c.data;r(Ot(d)),Gs(d.id,u.id,(o=d.attributes.environment)!=null?o:"undefined",po(d)?d.relationships["inquiry-template-version"].data.id:d.relationships.template.data.id,d.relationships.organization.data.id,(s=(a=l.meta)==null?void 0:a["feature-flags"])!=null?s:{}),z.logAmplitude("inquiry.one-time-link.start"),N.onEvent(Oe.OneTimeLinkStart),z.logAmplitude("inquiry.load",{inquiryId:d.id}),N.onEvent(Oe.InquiryLoad,{inquiryId:d.id}),po(d)?await r(Cd(e,l,u)):await r(Cf(e,l,u))}catch(c){if(c instanceof pt)switch(c.status){case 403:Jt({status:403,code:"too_many_sessions"},c);break;case 404:Jt({status:404,code:"invalid_inquiry_id"},c);break;case 409:Jt({status:409,code:"unauthenticated"},c);break;default:Jt({status:c.status,code:"http_response"},c),Z(c,"warning",void 0,{functionName:"loadInquiryFromCode"})}else c instanceof Error?Jt({status:0,code:"application_error"},c):Jt({status:-1,code:"unknown"}),Z(c,"warning",void 0,{functionName:"loadInquiryFromCode"});r(jt("/verify/invalid/code"))}}}function cy(e,t){return async n=>{var r,o,a,s,c,l;try{const d=await te.getResource(S.Inquiry,t,{include:["inquiry-template-version","organization","current-inquiry-session","theme-variable-fonts"]});if((d==null?void 0:d.data)==null)return;const u=d.data,h=po(u);let m;N.inquiryParams["theme-id"]&&!h&&(m=(await te.getResource(S.Theme,N.inquiryParams["theme-id"])).data),n(Ot(u)),((r=gs(te.accessToken))==null?void 0:r.inquiry_id)!==u.id&&te.clearAccessToken();let p;if(h?(p=(o=d.included)==null?void 0:o.find(g=>{var b;return g.id===((b=u.relationships["current-inquiry-session"].data)==null?void 0:b.id)}),te.accessToken=(a=d.meta)==null?void 0:a["access-token"]):p=te.accessToken?(await my()).data:(await vf(u)).data,p==null)return;n(Ws(p)),Gs(u.id,p.id,(s=u.attributes.environment)!=null?s:"undefined",h?u.relationships["inquiry-template-version"].data.id:u.relationships.template.data.id,u.relationships.organization.data.id,(l=(c=d.meta)==null?void 0:c["feature-flags"])!=null?l:{}),z.logAmplitude("inquiry.load",{inquiryId:u.id}),N.onEvent(Oe.InquiryLoad,{inquiryId:u.id}),h?await n(Cd(e,d,p)):await n(Cf(e,d,p,m))}catch(d){if(d instanceof pt)switch(d.status){case 404:Jt({status:404,code:"invalid_inquiry_id"},d);break;case 409:Jt({status:409,code:"unauthenticated"},d);break;default:Jt({status:d.status,code:"http_response"},d),Z(d,"warning",void 0,{functionName:"loadInquiryFromId"})}else d instanceof Error?Jt({status:0,code:"application_error"},d):Jt({status:-1,code:"unknown"}),Z(d,"warning",void 0,{functionName:"loadInquiryFromId"});console.error(d),n(jt("/verify/invalid/inquiry"))}}}function ly(e,t){return async n=>{te.clearAccessToken();try{const{data:r,included:o}=await te.getResource(S.Template,t),a=await If(e,r.attributes["enabled-locales"]),c=(r.attributes["custom-translations"]||[]).filter(u=>u.lang===a);c.length>0&&await cd(c.shift()["translation-url"],e,a),n(rf(r));const l=o.find(u=>u.id===r.relationships.organization.data.id);n(nd(l));let d;N.inquiryParams["theme-id"]?d=(await te.getResource(S.Theme,N.inquiryParams["theme-id"])).data:d=o.find(u=>u.id===r.relationships["default-theme"].data.id),n(id(d)),r.attributes["skip-intro-page"]?await n(xf(N.inquiryParams,d,window.location.host)):n(jt("/verify/intro",{skipAnimation:!0}))}catch(r){Z(r,"warning",void 0,{functionName:"loadThemeAndRedirect"}),Jt({status:400,code:"invalid_config"},r),n(jt("/verify/invalid/config",{error:r}))}}}function Cf(e,{data:t,meta:n,included:r},o,a){return async s=>{var m;if(!te.accessToken)throw new Error("No access token set for inquiry:"+t.id);const c=n==null?void 0:n["feature-flags"];s(rd(c));const l=n["product-features"];s(od(l)),s(id(a!=null?a:r.find(p=>p.id===t.relationships.theme.data.id)));const d=te.getResource(S.Template,t.relationships.template.data.id).then(async({data:p,included:g})=>{await If(e,p.attributes["enabled-locales"],o.attributes.locale),s(rf(p));const b=g.find(v=>v.id===p.relationships.organization.data.id);if(s(nd(b)),t.attributes["selected-country-code"]==null&&p.attributes["enabled-country-codes"].length===1){const v={type:t.type,id:t.id,attributes:{"selected-country-code":p.attributes["enabled-country-codes"][0]}};te.updateResource(v).then(({data:_})=>Ot(_))}const y=(p.attributes["custom-translations"]||[]).filter(v=>v.lang===e.language);y.length>0&&await cd(y.shift()["translation-url"],e,e.language)}),u=te.listResource(S.Verification).then(({data:p})=>s(qv(p))),h=!!((m=n["product-features"])!=null&&m[$s.InquiriesEnableDeviceFingerprint]);yf(h,te.fpjsCountry),await Promise.all([d,u]),s(Gt(t,jt))}}function xf(e,t,n){return async r=>{var c,l,d,u,h,m,p;const o=n==="sandbox.withpersona.com"?"sandbox":e.environment,a=e.prefill||{},s={attributes:{"template-id":e["template-id"],"theme-id":t.id,"redirect-uri":e["redirect-uri"],"account-id":e["account-id"],"account-type-id":e["account-type-id"],"reference-id":e["reference-id"],note:e.note,environment:o,"environment-id":e["environment-id"],"flow-type":N.flowType,"accepted-policies":!0,fields:e.fields,...a,"country-code":a["country-code"]},type:w.Inquiry};try{const g=await te.postResourceCreate(s,{retryOptions:{retryCondition:A=>Li.isNetworkError(A)||Li.isRetryableError(A)}}),b=g.data;r(Ot(b));const x=(l=(c=g.meta)==null?void 0:c["feature-flags"])!=null?l:{};r(rd(x));const y=(u=(d=g.meta)==null?void 0:d["product-features"])!=null?u:{};r(od(y));const v=await vf(b);r(Ws(v.data)),Gs(b.id,v.data.id,(h=b.attributes.environment)!=null?h:"undefined",b.relationships.template.data.id,b.relationships.organization.data.id,x),z.logAmplitude("inquiry.start",{inquiryId:b.id}),N.onEvent(Oe.Start,{inquiryId:b.id});const _=!!((p=(m=g.meta)==null?void 0:m["product-features"])!=null&&p[$s.InquiriesEnableDeviceFingerprint]);yf(_,te.fpjsCountry),r(Gt(b,jt))}catch(g){if(g instanceof pt){switch(g.status){case 400:Jt({status:g.status,code:"invalid_config"},g),Z(g,"warning",void 0,{functionName:"startInquiry"});break;default:Jt({status:g.status,code:"http_response"},g),Z(g,"error",void 0,{functionName:"startInquiry"});break}r(jt("/verify/invalid/config",{error:g}))}else g instanceof Error?Jt({status:0,code:"application_error"},g):Jt({status:-1,code:"unknown"}),Z(g,"error",void 0,{functionName:"startInquiry"}),r(jt("/verify/invalid/config",{error:g}))}}}function dy(e){return async t=>{const n={type:e.type,id:e.id,attributes:{"accepted-policies":!0}},r=(await te.updateResource(n)).data;t(Gt(r,jt))}}async function vf(e){const t=await te.postResourceCreate({type:w.InquirySession,attributes:{"flow-type":N.flowType}},{meta:{"inquiry-id":e.id}});return te.accessToken=t.meta["access-token"],t}async function uy(e,t){const n={attributes:{"one-time-link-code":e},type:w.InquirySession},r=await te.postResourceSingletonAction(n,"exchange-one-time-link-code",{meta:{"device-handoff-method":t==null?void 0:t.deviceHandoffMethod}});return te.accessToken=r.meta["access-token"],r}async function my(){return await te.getResourceSingleton(S.CurrentInquirySession)}function Hr(e,t,n){return async r=>{z.logAmplitude("inquiry.language-change",{"from-language":t.language,"to-language":n}),await t.changeLanguage(n);const o=await te.getResource(S.Inquiry,e.id);r(Ot(o.data))}}function Qo(e,t={},n){return async r=>{const o=e.data,a=e.included.find(s=>s.id===o.relationships.inquiry.data.id);r(Gt(a,void 0,n))}}function Gt(e,t=yn,n){return async r=>{var a;r(Ot(e));const o=e.attributes["next-step"];switch(r(Wv(o)),o.type){case Ae.Start:r(typeof n=="boolean"?t("/verify/intro",{preventBackNavigation:n}):t("/verify/intro"));return;case Ae.CountrySelect:r(typeof n=="boolean"?t("/verify/select-country",{preventBackNavigation:n}):t("/verify/select-country"));return;case Ae.DocumentsUpload:r(typeof n=="boolean"?t("/verify/documents/intro",{preventBackNavigation:n}):t("/verify/documents/intro"));return;case Ae.Completed:r(typeof n=="boolean"?t("/verify/success",{preventBackNavigation:n}):t("/verify/success"));return;case Ae.Failed:r(typeof n=="boolean"?t("/verify/failed",{preventBackNavigation:n}):t("/verify/failed"));return;case Ae.Ui:case Ae.Document:case Ae.Integration:case Ae.GovernmentId:case Ae.Selfie:case Ae.SelfieReflection:case Ae.Complete:case Ae.VerifyWithPersona:case Ae.Loop:return;default:r(hy(o.type,o.config,(a=e.attributes["selected-country-code"])!=null?a:e.attributes["country-code"],t,n))}}}function hy(e,t,n,r=yn,o){return t=t||{},a=>{switch(a(Zv(e)),e){case w.VerificationDatabase:a(typeof o=="boolean"?r("/verify/database",{preventBackNavigation:o}):r("/verify/database"));break;case w.VerificationGovernmentId:{const s=t["enabled-id-classes-by-country"];if(!t["enabled-skip-unknown"]&&s&&s[n.toLowerCase()]&&s[n.toLowerCase()].length===1){const l=s[n.toLowerCase()][0].class;a(ud(l)),a(typeof o=="boolean"?r(Qn(0,Ue.Prompt),{preventBackNavigation:o}):r(Qn(0,Ue.Prompt)))}else a(typeof o=="boolean"?r("/verify/government-id/select",{preventBackNavigation:o}):r("/verify/government-id/select"));break}case w.VerificationEmailAddress:a(typeof o=="boolean"?r("/verify/email-address/prompt",{preventBackNavigation:o}):r("/verify/email-address/prompt"));break;case w.VerificationPhoneNumber:a(typeof o=="boolean"?r("/verify/phone-number/prompt",{preventBackNavigation:o}):r("/verify/phone-number/prompt"));break;case w.VerificationSelfie:{const s=da([],Cn.OnlyCenter);a(typeof o=="boolean"?r(`/verify/selfie/${s}/prompt`,{preventBackNavigation:o}):r(`/verify/selfie/${s}/prompt`));break}default:throw new Error("Invalid verification type selected")}}}function yi(e){return t=>{if(t(Jv(e)),t(Uv(e)),e!=null){let n;e.attributes["submitted-at"]&&[kt.TentativelyPassed,kt.TentativelyFailed,kt.Passed,kt.RequiresRetry,kt.Failed].includes(e.attributes.status)&&(n=Mn.local().diff(Mn.fromISO(e.attributes["submitted-at"]),"seconds").seconds),z.logAmplitude("inquiry.verification-change",{id:e.id,type:e.type,status:e.attributes.status,duration:n}),N.onEvent(Oe.VerificationChange,{id:e.id,type:e.type,status:e.attributes.status,duration:n})}}}function py(){return async e=>{const{data:t}=await te.listResource(S.Document);e(Hv(t.filter(n=>n.type===w.DocumentGeneric&&n.attributes["latest-verification-status"]===kt.Passed)))}}function yf(e,t){async function n(){try{const[r,o]=await Promise.all([tf(),e?nf(t):null]);await te.updateResourceSingleton({attributes:{},type:w.CurrentInquirySession},{meta:{"browser-fingerprint":r,"device-fingerprint":o==null||o.visitorId==="n/a"?null:o.visitorId,"device-fingerprint-components":o}})}catch{}}n()}async function If(e,t,n){let r;return n&&(t.length===0||t.includes(n))?r=n:t.length>0?t.includes(e.language)?r=e.language:r=t[0]:r=e.language,r!==e.language&&await e.changeLanguage(r),r}const fy={nextInquiry:null},{reducer:gy,actions:by}=b0({name:"verify-with-persona",initialState:fy,reducers:{setNextInquiry:(e,t)=>{e.nextInquiry=t.payload.inquiry}}}),{setNextInquiry:vs}=by,Sf=e=>e!=null?wf(e.config.components):[],wf=e=>e.flatMap(t=>Fv(t)?[t,...wf(t.attributes.children)]:[t]);function Cy(e,t,n){return async(r,o)=>{var l;await r(bd(e,t));const a=o().inquiry.inquiry;if(!a){r(jt("/verify/invalid/code"));return}const s=(l=a.attributes)==null?void 0:l["next-step"];if((s==null?void 0:s.type)!==Ae.Ui){r(jt("/verify/invalid/config",{error:new Error("verify with persona popup accessed on non-ui step")}));return}const c=Sf(s).find(d=>d.type===Ee.ButtonVerifyWithPersona&&d.name===n);if(!c){r(jt("/verify/invalid/config",{error:new Error("verify with persona popup accessed without verify with persona component")}));return}r(Ki(c)),c.attributes["passkey-registration-as-primary-cta"]?r(jt("/inquiry/create-persona/passkey-registration")):r(jt("/inquiry/verify-with-persona/passkey-authentication"))}}function xy(e,t,n){return async(r,o)=>{var l;await r(bd(e,t));const a=o().inquiry.inquiry;if(!a){r(jt("/verify/invalid/code"));return}const s=(l=a.attributes)==null?void 0:l["next-step"];if((s==null?void 0:s.type)!==Ae.Ui){r(jt("/verify/invalid/config",{error:new Error("create persona popup accessed on non-ui step")}));return}const c=Sf(s).find(d=>d.type===Ee.ButtonCreatePersona&&d.name===n);if(!c){r(jt("/verify/invalid/config",{error:new Error("create persona popup accessed without create persona component")}));return}r(Ki(c)),r(jt("/inquiry/create-persona/passkey-registration"))}}function vy(e,t,n){return async r=>{var o,a,s,c,l,d,u;try{const h=n==="sandbox.withpersona.com"?"sandbox":t.environment,m={attributes:{"inquiry-template-id":(o=t["inquiry-template-id"])!=null?o:t["template-id"],"inquiry-template-version-id":t["inquiry-template-version-id"],"redirect-uri":t["redirect-uri"],"account-id":t["account-id"],"account-type-id":t["account-type-id"],"reference-id":t["reference-id"],"theme-set-id":t["theme-set-id"],"theme-id":t["theme-id"],environment:h,"environment-id":t["environment-id"],"flow-type":N.flowType,"accepted-policies":!0,fields:t.fields},type:w.Inquiry},p=await te.postResourceCreate(m,{retryOptions:{retryCondition:x=>Li.isNetworkError(x)||Li.isRetryableError(x)}}),g=p.data,b=(a=p.included)==null?void 0:a.find(x=>{var y;return x.id===((y=g.relationships["current-inquiry-session"].data)==null?void 0:y.id)});if(te.accessToken=(s=p.meta)==null?void 0:s["access-token"],b==null||te.accessToken==null){const x=new Error("current-inquiry-session missing for newly created inquiry");throw Z(x,"error",{inquiry:g.id}),x}r(Ot(g)),r(Ws(b)),Gs(g.id,b.id,(c=g.attributes.environment)!=null?c:"undefined",g.relationships["inquiry-template-version"].data.id,g.relationships.organization.data.id,(d=(l=p.meta)==null?void 0:l["feature-flags"])!=null?d:{}),z.logAmplitude("inquiry.start",{inquiryId:g.id}),N.onEvent(Oe.Start,{inquiryId:g.id}),r(Cd(e,p,b))}catch(h){h instanceof pt?((u=h.errors)==null?void 0:u[0].code)==="inactive_template_error"?(Jt({status:422,code:"inactive_template"},h),r(jt("/inquiry/inactive"))):h.status>=500?(Jt({status:h.status,code:"http_response"},h),Z(h,"error",void 0,{functionName:"createInquiry"}),r(jt("/verify/invalid/config",{error:h}))):(Jt({status:400,code:"invalid_config"},h),Z(h,"warning",void 0,{functionName:"createInquiry"}),r(jt("/verify/invalid/config",{error:h}))):(h instanceof Error?Jt({status:0,code:"application_error"},h):Jt({status:-1,code:"unknown"}),Z(h,"error",void 0,{functionName:"createInquiry"}),r(jt("/verify/invalid/config",{error:h})))}}}function Cd(e,{data:t,meta:n,included:r},o){return async a=>{if(!te.accessToken)throw new Error("No access token set for inquiry:"+t.id);const s=n==null?void 0:n["feature-flags"],c=n==null?void 0:n["product-features"],l=r.find(g=>g.id===t.relationships["inquiry-template-version"].data.id),d=r.find(g=>g.id===t.relationships.organization.data.id);if(s&&a(rd(s)),c&&a(od(c)),a($v(l)),a(id({id:"backserialized-inquiry-template-version-theme",type:w.Theme,attributes:l.attributes.theme})),a(nd(d)),r){const g=r.filter(b=>b.type===w.ThemeVariableFont);Yp(g),a(Gv(g))}const u=!!(c!=null&&c[$s.InquiriesEnableDeviceFingerprint]);wy(u,te.fpjsCountry,s,te.fpjsRetentionDays);const h=e.language;if(await _y(e,l.attributes["enabled-locales"],o.attributes.locale)!==h&&({data:t}=await te.getResource(S.Inquiry,t.id)),wi(t)===an.BLOCKING)try{await a(jn(t))}catch(g){throw a(mt()),g}else a(Tt(t,{skipAnimation:!0}))}}function xd({inquiry:e,componentParams:t,fromComponent:n,workflowInitialVariables:r,contentType:o="multipart/form-data",onUploadProgress:a}){return async s=>{var c;s(Nn()),s(_a());try{const l={meta:{"from-component":n,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":r}};l.contentType=o,l.onUploadProgress=a,l.formDataAllowEmptyArrays=!0,o==="multipart/form-data"&&Ol(t)&&(t="");const{data:d}=await te.postResourceAction({id:e.id,type:e.type,attributes:{componentParams:t,"flow-type":N.flowType}},"transition",l);N.inquiryParams["send-client-side-collected-data-in-events"]&&s(Ta({name:e.attributes["next-step"].name,type:Ae.Ui,data:t||{}})),wi(d)===an.BLOCKING?await s(jn(d)):(s(mt()),s(Tt(d,{isSameStep:Rf(e,d)})))}catch(l){if(s(mt()),l instanceof Ct){const{data:d}=await te.getResource(S.Inquiry,e.id);throw s(Tt(d)),l}else if(l instanceof pt){const d=(c=l.errors)==null?void 0:c[0].code;switch(l.status){case 401:break;case 409:if(d==="inconsistent_transition_error"||d==="transition_from_terminal_state_error"){const{data:u}=await te.getResource(S.Inquiry,e.id);s(Tt(u))}else throw l;break;default:throw l}}else throw l}}}function yy(e,t,n,r){return async o=>{var a;o(Nn()),o(_a());try{const{data:s}=await te.postResourceAction({id:e.id,type:e.type,attributes:{fields:t,"flow-type":N.flowType}},"transition",{meta:{"from-component":n,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":r}});N.inquiryParams["send-client-side-collected-data-in-events"]&&o(Ta({name:e.attributes["next-step"].name,type:Ae.Integration,data:t})),wi(s)===an.BLOCKING?await o(jn(s)):(o(mt()),o(Tt(s,{isSameStep:Rf(e,s)})))}catch(s){if(o(mt()),s instanceof Ct){const{data:c}=await te.getResource(S.Inquiry,e.id);throw o(Tt(c)),s}else if(s instanceof pt){const c=(a=s.errors)==null?void 0:a[0].code;switch(s.status){case 401:break;case 409:if(c==="inconsistent_transition_error"||c==="transition_from_terminal_state_error"){const{data:l}=await te.getResource(S.Inquiry,e.id);o(Tt(l))}else throw s;break;default:throw s}}else throw s}}}function _f(e,t,n,r,o,a,s){return async c=>{var l;c(Nn()),c(_a()),N.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:ji.TRANSITION_STARTED});try{const{data:d}=await te.postResourceAction({id:e.id,type:e.type,attributes:{"passkey-fields":{"client-key":t,"public-key":n,"expected-origin":window.location.origin},"component-params":a,"flow-type":N.flowType}},"transition",{meta:{"from-component":r,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":o,"is-persona-registration":s}});wi(d)===an.BLOCKING?(N.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:ji.TRANSITION_POLLING}),await c(jn(d,{onComplete:(h,m,p)=>{N.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:ji.TRANSITION_COMPLETED}),c(mt()),c(vs({inquiry:p})),p.attributes["reusable-persona-status"]===gl.ERRORED?c(jt("/inquiry/verify-with-persona/error")):s||c(jt("/inquiry/verify-with-persona/success")),h()}}))):(N.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:ji.TRANSITION_COMPLETED}),c(mt()),c(vs({inquiry:d})),d.attributes["reusable-persona-status"]===gl.ERRORED?c(jt("/inquiry/verify-with-persona/error")):s||c(jt("/inquiry/verify-with-persona/success")))}catch(d){if(N.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:ji.TRANSITION_ERRORED}),c(mt()),d instanceof Ct){const{data:u}=await te.getResource(S.Inquiry,e.id);throw c(Tt(u)),d}else if(d instanceof pt){const u=(l=d.errors)==null?void 0:l[0].code;switch(d.status){case 401:break;case 409:if(u==="inconsistent_transition_error"||u==="transition_from_terminal_state_error"){const{data:h}=await te.getResource(S.Inquiry,e.id);c(Tt(h))}else throw d;break;default:throw d}}else throw d}}}function Iy(e){return async t=>{var n;t(Nn()),t(_a());try{const{data:r}=await te.postResourceAction({id:e.id,type:e.type},"transition-back",{meta:{"from-step":e.attributes["next-step"].name}});t(mt()),t(Tt(r,{back:!0}))}catch(r){if(t(mt()),r instanceof Ct){const{data:o}=await te.getResource(S.Inquiry,e.id);throw t(Tt(o)),r}else if(r instanceof pt){const o=(n=r.errors)==null?void 0:n[0].code;switch(r.status){case 401:break;case 409:if(o==="inconsistent_transition_error"||o==="transition_from_terminal_state_error"){const{data:a}=await te.getResource(S.Inquiry,e.id);t(Tt(a))}else throw r;break;default:throw r}}else throw r}}}function Tt(e,t={}){return n=>{n(Ot(e)),!t.isSameStep&&(t.historyToClear&&Bv(t.historyToClear),n(jt("/inquiry/ui",{back:!!t.back,skipAnimation:!!t.skipAnimation,transition:t.transition})))}}async function vd(){try{return await te.onCancel()}catch(e){Z(e,"warning",{note:"A fetch exception may imply the fetch library we are using (in react-native?) is invalid"})}}function Sy(e){switch(e.code){case"unauthenticated":return pl.Permissions;default:return pl.Other}}function Mu(e){if(e)return{name:e==null?void 0:e.name,message:e==null?void 0:e.message}}function Jt(e,t){try{N.onError(e),z.logAmplitude("inquiry.error",e),te.accessToken&&te.onError({type:Sy(e),description:Mu(t)}),rr({level:"error",message:"HolderClient.onError",data:{status:e.status,code:e.code,message:e.message,description:Mu(t)}})}catch(n){Z(n,"warning")}}async function wy(e,t,n,r){async function o(){try{const[a,s]=await Promise.all([tf(),e?nf(t,n,r):null]);await te.updateResourceSingleton({attributes:{"flow-type":N.flowType},type:w.CurrentInquirySession},{meta:{"browser-fingerprint":a,"device-fingerprint":s==null||s.visitorId==="n/a"?null:s.visitorId,"device-fingerprint-components":s}})}catch{}}o()}function Vu(e,t,n="en-US"){if(e.length===0||e.includes(t))return t;const r=t&&e.find(o=>o.split("-")[0]===t.split("-")[0]);return r||(e.includes(n)?n:e[0])}async function _y(e,t,n){let r;const o=Vu(t,e.language);return n?r=Vu(t,n,o):r=o,r!==e.language&&await e.changeLanguage(r),r}const Ry=1e3,Ay=90;function jn(e,t={}){return(n,r)=>new Promise((o,a)=>{var p,g;const s=e.attributes["wait-for-transition"];!t.skipInquiryStateUpdateOnPoll&&!(s!=null&&s["currently-transitioning-with-persona"])&&n(Ot(e));let c;const l=(p=t.pollingMode)!=null?p:wi(e),d=(g=s==null?void 0:s["max-attempts"])!=null?g:Ay,u=t.onComplete?b=>t.onComplete(o,a,b):null;n(_a());const h=r().ui.pollerId;l===an.BLOCKING&&n(WC());function m(b,x){var y,v,_;if(b<=0){clearTimeout(c),n(mt()),Z(new Error(`Polled more than ${d} times without success`),"error",{id:x.id}),a();return}c=window.setTimeout(()=>Ey({inquiry:x,context:{initialPollerId:h,pollingMode:l,getPollerId:()=>Ty(r())},onPending:A=>{m(b-1,A)},onComplete:u!=null?u:A=>{var L,H;const{historyToClear:T}=t,R=A.attributes["next-step"].name===x.attributes["next-step"].name,O=(L=A.attributes["next-step"].config)==null?void 0:L["server-component-errors"],D=(H=A.attributes["next-step"].config)==null?void 0:H["server-step-messages"];if(D&&R)for(const M of D)n(se(M));if(n(mt()),n(Tt(A,{isSameStep:R,historyToClear:T})),O&&R){const M=C0($h(B=>[B.name,B.message],O));a(new Te.SubmissionError(M))}else o()},onError:A=>{clearTimeout(c),n(mt()),A instanceof Ct||A instanceof pt||A instanceof qs||A instanceof mn||Z(new Error("Failed to poll for inquiry status"),"error",{id:x.id,error:A}),a()},onAbort:()=>{clearTimeout(c),o()}}),(_=(v=(y=x==null?void 0:x.attributes)==null?void 0:y["wait-for-transition"])==null?void 0:v["interval-ms"])!=null?_:Ry)}m(d,e)})}function Ty(e){return e.ui.pollerId}async function Ey({inquiry:e,context:t,onPending:n,onComplete:r,onError:o,onAbort:a}){var s,c;try{const{data:l}=await te.getResource(S.Inquiry,e.id,{retryOptions:{retries:0}});if(t.getPollerId()>t.initialPollerId){a();return}if(!(l.attributes["next-step"].name===e.attributes["next-step"].name)&&!((c=(s=l.attributes)==null?void 0:s["wait-for-transition"])==null?void 0:c["currently-transitioning-with-persona"])){r(l);return}switch(t.pollingMode){case an.BACKGROUND:case an.BLOCKING:t.pollingMode!==wi(l)?r(l):n(l);break;case an.NONE:default:r(l)}}catch(l){if(l instanceof Ct||l instanceof pt&&l.status===502)n(e);else if(o!=null)o(l);else throw l}}function Rf(e,t){return e.attributes["next-step"].name===t.attributes["next-step"].name&&!ky(e)}function ky(e){const t=e.attributes["loop-step-name"];if(!t)return!1;const n=t.split(".");return n.length<2?!1:n[1]==="0"}function $r(){return async(e,t)=>{if(t().ui.hasCamera!==!0){const n=await zC();e(YC(n))}}}const ys=Ny();function Ny(){var n;const e={},t=document.getElementsByTagName("meta");for(const r of t)if(r.name.startsWith("config.")){let o;(r.name==="config.sandboxToolsDisabled"||r.name==="config.sandboxBannerDisabled")&&(o=((n=r.content)==null?void 0:n.toLowerCase())==="true"),e[r.name.substring(7)]=o}return e}const jy={cccd:"Citizen ID",cct:"Citizen certificate",cid:"Consular ID",dl:"Driver license",hic:"Healthcare Insurance card",foid:"Foreigner ID",id:"National ID",ipp:"Internal passport",keyp:"Keypass ID",ltpass:"Long-Term pass card",mid:"Military ID",munid:"Municipal ID",myn:"My Number card",nbi:"NBI Clearance",nric:"NRIC",ofw:"OFW ID",pan:"PAN card",pid:"Postal ID",pp:"Passport",ppc:"Passport card",pr:"Permanent resident card",rp:"Residency permit",sss:"SSS ID",td:"Travel Document",tribalid:"Tribal ID",umid:"UMID","us-id":"US ID",vid:"Voter ID",visa:"Visa",wp:"Work permit"},To={V1:1};var Pi=(e=>(e.None="none",e.Slide="slide",e.Fade="fade",e.SlideVertical="slide-vertical",e))(Pi||{}),xl=(e=>(e.Light="300",e.Regular="400",e.Medium="500",e.Bold="700",e.Black="900",e))(xl||{}),Is=(e=>(e.Inline="inline",e.Bottom="bottom",e))(Is||{}),Qs=(e=>(e.Input="input",e.Select="select",e))(Qs||{}),Zs=(e=>(e.Default="default",e.Start="start",e.Center="center",e))(Zs||{}),Af=(e=>(e.None="none",e.Underline="underline",e))(Af||{}),Oi=(e=>(e.Start="start",e.Center="center",e.End="end",e.None="none",e))(Oi||{}),Gr=(e=>(e.Default="default",e.None="none",e))(Gr||{}),ka=(e=>(e.Default="default",e.Overlay="overlay",e))(ka||{}),Wi=(e=>(e.Default="default",e.Light="light",e.Button="button",e))(Wi||{}),Wt=(e=>(e.Start="start",e.Center="center",e))(Wt||{}),_n=(e=>(e.AboveButton="above_button",e.BelowButton="below_button",e))(_n||{});const Na=e=>{const t=e.inquiry.inquiry.attributes["next-step"];return t.type===Ae.Document?t.config:void 0},ja=ti([e=>e.inquiry],e=>{const t=e.attributes["next-step"];return t.type===Ae.Document?t.styles:null}),Js=ti([e=>e.document.document,Na],(e,t)=>(e==null?void 0:e.id)===(t==null?void 0:t["document-id"])?e:void 0),Qi=ti([e=>e.inquiry],e=>{const t=e.attributes["next-step"];return t.type===Ae.GovernmentId?t.styles:null}),hi=e=>{const t=e.state.inquiry.inquiry.attributes["next-step"];return t.type===e.stepType&&t.config!=null?t.config:null},Py=e=>ti([t=>t.inquiry],t=>{const n=t.attributes["next-step"];return n.type===e?n.styles:null}),yd=e=>{const t=e.inquiry.component;return(t==null?void 0:t.type)===Ee.ButtonVerifyWithPersona?t:null},Xs=ti([e=>e.inquiry],e=>{const t=e.attributes["next-step"];return t.type===Ae.Selfie?t.styles:null}),pi=ti([e=>e.inquiry],e=>{var n;const t=(n=e.inquiry)==null?void 0:n.attributes["next-step"];switch(t==null?void 0:t.type){case Ae.Ui:return t.styles;case Ae.Document:return ja(e);case Ae.GovernmentId:return Qi(e);case Ae.Selfie:return Xs(e);case Ae.SelfieReflection:return Py(Ae.SelfieReflection)(e);default:return}}),Tf=ti([e=>e.document.uploadedFiles,e=>e.document.documentFiles],(e,t)=>e.filter(n=>t.some(r=>r.id===n.fileId))),Zi=()=>{const e=f.useRef(!1);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),f.useCallback(()=>e.current,[])},Dy=C.div.withConfig({displayName:"FrameBackground__BackgroundColorDiv",componentId:"sc-1re4kos-0"})(["position:absolute;height:100%;width:100%;bottom:0;left:0;right:0;z-index:-1;overflow-y:hidden;@media ","{height:100vh;width:100vw;}"],xt.isMobile),Id=()=>{var l,d;const e=f.useContext(tt),t=Ke(pi),o=!!Vr().pathname.match(new RegExp("/inquiry/create-persona"))?"#ffffff":(d=(l=k(t==null?void 0:t["background-color"].base.base))!=null?l:e.colorModalBackground)!=null?d:"#ffffff",[a,s]=f.useState(o),c=Zi();return f.useEffect(()=>{c||s(o)},[c]),i.jsx(Dy,{"data-test":"frame-background",style:{backgroundColor:a},"aria-hidden":!0})},Oy="modulepreload",Ly=function(e){return"https://cdn.withpersona.com/build/"+e},Bu={},Ze=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let s=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=s(n.map(d=>{if(d=Ly(d),d in Bu)return;Bu[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Oy,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return o.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},Ef=async e=>{try{return"clipboard"in navigator?(await navigator.clipboard.writeText(e),!0):document.execCommand("copy",!0,e)}catch(t){return KC("Copying to clipboard was unsuccessful","warning",{error:t}),!1}},Pa=f.createContext(void 0),kf=()=>f.useContext(Pa),Fy=C("div").withConfig({displayName:"InlineLoadingIndicator__InlineImage",componentId:"sc-1xu4kxi-0"})(["display:inline-block;width:20px;",";svg{vertical-align:baseline;}"],e=>e.dark&&W(["filter:invert(0.8) brightness(250%);"])),Ji=({className:e,dark:t})=>i.jsx(Fy,{dark:t,className:e,role:"progressbar","aria-busy":!0,"aria-live":"polite",children:i.jsx(U1,{})});var Zo=(e=>(e.Primary="primary",e.Secondary="secondary",e))(Zo||{});const My=C(Ji).withConfig({displayName:"ButtonBase__StyledLoadingIndicator",componentId:"sc-sjtwuq-0"})(["position:absolute;transition:opacity 0.2s;",";"],e=>!e.isVisible&&W(["opacity:0;"])),Tc=C("div").attrs(({isVisible:e})=>({"aria-hidden":!e})).withConfig({displayName:"ButtonBase__ButtonChildren",componentId:"sc-sjtwuq-1"})(["width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;transition:opacity 0.2s;",";"],e=>!e.isVisible&&W(["opacity:0;"])),Vy=C.div.withConfig({displayName:"ButtonBase__LoadingProgressBackground",componentId:"sc-sjtwuq-2"})(["position:absolute;width:100%;height:100%;display:block;background:rgba(0,0,0,0.2);z-index:0;transform:translateX(",");transition:all 0.7s ease-out;"],({xValue:e})=>`${e}%`),Nf=({styles:e,hasLoadingBackground:t})=>{var n,r,o,a,s,c,l,d,u,h,m,p,g,b,x,y,v,_,A,T,R,O,D,L,H,M,B,V,q,$,Q;return{boxSizing:"border-box",cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",borderStyle:"solid",whiteSpace:"normal",wordBreak:"initial",transition:it.Fast,overflow:t?"hidden":"initial",height:E(e==null?void 0:e.height.base.base),width:E(e==null?void 0:e.width.base.base),marginTop:E((n=e==null?void 0:e.margin.base.base)==null?void 0:n.top),marginBottom:E((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom),marginLeft:E((o=e==null?void 0:e.margin.base.base)==null?void 0:o.left),marginRight:E((a=e==null?void 0:e.margin.base.base)==null?void 0:a.right),paddingTop:E((s=e==null?void 0:e.padding.base.base)==null?void 0:s.top),paddingBottom:E((c=e==null?void 0:e.padding.base.base)==null?void 0:c.bottom),paddingLeft:E((l=e==null?void 0:e.padding.base.base)==null?void 0:l.left),paddingRight:E((d=e==null?void 0:e.padding.base.base)==null?void 0:d.right),justifySelf:e==null?void 0:e.justify.base.base,...((u=e==null?void 0:e["font-family"])==null?void 0:u.base.base)!=null&&{fontFamily:$t(e==null?void 0:e["font-family"].base.base)},fontSize:E(e==null?void 0:e["font-size"].base.base),fontWeight:dn(e==null?void 0:e["font-weight"].base.base),lineHeight:E(e==null?void 0:e["line-height"].base.base),color:k(e==null?void 0:e["text-color"].base.base),"svg path":{stroke:k(e==null?void 0:e["text-color"].base.base)},textTransform:((m=(h=e==null?void 0:e["text-transform"])==null?void 0:h.base)==null?void 0:m.base)||td.None,backgroundColor:k(e==null?void 0:e["background-color"].base.base),borderColor:k(e==null?void 0:e["border-color"].base.base),borderTopWidth:E((p=e==null?void 0:e["border-width"].base.base)==null?void 0:p.top),borderBottomWidth:E((g=e==null?void 0:e["border-width"].base.base)==null?void 0:g.bottom),borderLeftWidth:E((b=e==null?void 0:e["border-width"].base.base)==null?void 0:b.left),borderRightWidth:E((x=e==null?void 0:e["border-width"].base.base)==null?void 0:x.right),borderRadius:E(e==null?void 0:e["border-radius"].base.base),boxShadow:`${E((y=e==null?void 0:e["shadow-offset"].base.base)==null?void 0:y.x)} ${E((v=e==null?void 0:e["shadow-offset"].base.base)==null?void 0:v.y)} ${E(e==null?void 0:e["shadow-radius"].base.base)} 0 ${k(e==null?void 0:e["shadow-color"].base.base)}`,transform:`translateX(${E((_=e==null?void 0:e.translate.base.base)==null?void 0:_.x)}) translateY(${E((A=e==null?void 0:e.translate.base.base)==null?void 0:A.y)})`,"&:hover:not(:disabled), &:focus:not(:disabled)":{color:k(e==null?void 0:e["text-color"].base.focused),backgroundColor:k(e==null?void 0:e["background-color"].base.focused),borderColor:k(e==null?void 0:e["border-color"].base.focused),boxShadow:`${E((T=e==null?void 0:e["shadow-offset"].base.focused)==null?void 0:T.x)} ${E((R=e==null?void 0:e["shadow-offset"].base.focused)==null?void 0:R.y)} ${E(e==null?void 0:e["shadow-radius"].base.focused)} 0 ${k(e==null?void 0:e["shadow-color"].base.focused)}`},"&:active:not(:disabled)":{color:k(e==null?void 0:e["text-color"].base.active),backgroundColor:k(e==null?void 0:e["background-color"].base.active),borderColor:k(e==null?void 0:e["border-color"].base.active),boxShadow:`${E((O=e==null?void 0:e["shadow-offset"].base.active)==null?void 0:O.x)} ${E((D=e==null?void 0:e["shadow-offset"].base.active)==null?void 0:D.y)} ${E(e==null?void 0:e["shadow-radius"].base.active)} 0 ${k(e==null?void 0:e["shadow-color"].base.active)}`,transform:`translateX(${E((L=e==null?void 0:e.translate.base.active)==null?void 0:L.x)}) translateY(${E((H=e==null?void 0:e.translate.base.active)==null?void 0:H.y)})`},"&:disabled":{cursor:"not-allowed",color:k(e==null?void 0:e["text-color"].base.disabled),backgroundColor:k(e==null?void 0:e["background-color"].base.disabled),borderColor:k(e==null?void 0:e["border-color"].base.disabled),boxShadow:`${E((M=e==null?void 0:e["shadow-offset"].base.disabled)==null?void 0:M.x)} ${E((B=e==null?void 0:e["shadow-offset"].base.disabled)==null?void 0:B.y)} ${E(e==null?void 0:e["shadow-radius"].base.disabled)} 0 ${k(e==null?void 0:e["shadow-color"].base.disabled)}`,transform:`translateX(${E((V=e==null?void 0:e.translate.base.disabled)==null?void 0:V.x)}) translateY(${E((q=e==null?void 0:e.translate.base.disabled)==null?void 0:q.y)})`},"&:not(:active):not(:disabled)":{"&:hover, &:focus":{transform:`translateX(${E(($=e==null?void 0:e.translate.base.focused)==null?void 0:$.x)}) translateY(${E((Q=e==null?void 0:e.translate.base.focused)==null?void 0:Q.y)})`}},outlineColor:"#00000000",outlineWidth:"2px",outlineOffset:"2px",outlineStyle:"solid","&:focus-visible":{outlineColor:k(e==null?void 0:e["border-color"].base.focused),outlineWidth:"2px",outlineOffset:"2px",outlineStyle:"solid"}}},By=C.a.withConfig({displayName:"ButtonBase__StyledLink",componentId:"sc-sjtwuq-3"})(Nf),qy=C.button.withConfig({displayName:"ButtonBase__StyledButton",componentId:"sc-sjtwuq-4"})(Nf),ma=e=>{const{children:t,href:n,type:r="button",styles:o,isPending:a,uploadProgress:s,pendingContent:c,...l}=e,d=s!=null?(100-s)*-1:-100,u=i.jsxs(i.Fragment,{children:[a&&s!=null&&i.jsx(Vy,{xValue:d,role:"progressbar","aria-busy":!0,"aria-live":"polite","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":s}),c?i.jsx(i.Fragment,{children:a?i.jsxs(Tc,{isVisible:!0,children:[i.jsx("span",{children:c}),i.jsx(Ji,{})]}):i.jsx(Tc,{isVisible:!0,"data-test":"button__children",children:t})}):i.jsxs(i.Fragment,{children:[a&&i.jsx(My,{isVisible:a}),i.jsx(Tc,{isVisible:!a,"data-test":"button__children",children:t})]})]});return n?i.jsx(By,{href:n,"data-test":"button__"+e.buttonType,styles:o,hasLoadingBackground:a&&s!=null,target:"_blank",rel:"noopener",...l,children:u}):i.jsx(qy,{"data-test":"button__"+e.buttonType,type:r,styles:o,hasLoadingBackground:a&&s!=null,...l,children:u})},Uy=(e,t,n)=>{const{"enabled-capture-options-desktop":r,"enabled-capture-options-mobile":o,idclasses:a}=e,s=ni(),c=s?o:r,l=a.find(g=>g.class===t),u=(l==null?void 0:l["requires-device"])!==ad.Mobile||xp()||s,h=n&&u&&c.includes("web_camera"),m=s&&(!h||e["always-show-mobile-camera-capture-option"]),p=window.FileReader!=null;return c.filter(g=>{switch(g){case"web_camera":return h;case"mobile_camera":return m;case"upload":return p;case"device_handoff":return!0;default:ct(g)}})},Hy=({config:e,isWebGLIncompatible:t,hasCamera:n})=>{const{"enabled-capture-options-desktop":r,"enabled-capture-options-mobile":o}=e,s=ni()?o:r,c=n&&!t&&s.includes("web_camera");return s.filter(l=>{switch(l){case"web_camera":return c;case"device_handoff":return!0;default:ct(l)}})},$y=(e,t)=>{const{"enabled-capture-options-desktop":n,"enabled-capture-options-mobile":r}=e,o=ni(),a=o?r:n,s=t&&(a==null?void 0:a.includes("web_camera"));return a.filter(c=>{switch(c){case"web_camera":return s;case"mobile_camera":return!s&&o;case"upload":return!0;case"device_handoff":return!0;default:ct(c)}})},Sd=e=>{const{terminal:t}=e.attributes["next-step"].config;return t};function vl(e,t=void 0,n){const r=e==null?void 0:e[n];if(t==null)return r;{const o=e==null?void 0:e[`${t.toLowerCase()}-${n}`];return o!=null?o:r}}const Wr=(e,t)=>{if(!Sd(e))throw new Error("Cannot trigger completion on non-terminal step");N.onEvent(Oe.Complete,{inquiryId:e.id,referenceId:e.attributes["reference-id"],status:e.attributes.status,fields:e.attributes.fields,collectedData:N.inquiryParams["send-client-side-collected-data-in-events"]?t:void 0},{inquiry:e})},Da=e=>{var t,n;return e==null?{base:void 0,buttons:void 0}:{base:{backgroundColor:e["background-color"].base.base,headerButton:{text:{color:e["text-color"]["header-button"].base}},header:{border:{color:e["border-color"].header.base,width:e["border-width"].header.base}},modal:{backgroundColor:e["background-color"].base.base,padding:e.padding.modal.base,border:{radius:e["border-radius"].modal.base}},fill:{color:e["fill-color"].base.base,highlightColor:(t=e["fill-color"].highlight)==null?void 0:t.base,backgroundColor:(n=e["fill-color"].background)==null?void 0:n.base},stroke:{color:e["stroke-color"].base.base},textStyle:e["text-style"].base.base,titleStyle:e["title-style"].base.base,disclaimerStyle:e["disclaimer-style"].base.base},buttons:Gy(e)}},Gy=e=>e==null?{[Zo.Primary]:null,[Zo.Secondary]:null}:{[Zo.Primary]:e["button-primary-style"].base.base,[Zo.Secondary]:e["button-secondary-style"].base.base},jf=e=>{if(e==null)return{base:void 0,buttons:void 0,imagePreview:void 0,processingPage:void 0};const{base:t,buttons:n}=Da(e);return{base:{...t,border:{color:e["border-color"].base,width:e["border-width"].base}},buttons:n,imagePreview:{border:{color:e["border-color"]["image-preview"].base,radius:e["border-radius"]["image-preview"].base,width:e["border-width"]["image-preview"].base},plusIcon:{stroke:{color:e["stroke-color"]["image-preview-plus-icon"].base},fill:{color:e["fill-color"]["image-preview-plus-icon"].base}},xIcon:{stroke:{color:e["stroke-color"]["image-preview-x-icon"].base},fill:{color:e["fill-color"]["image-preview-x-icon"].base}},mainArea:{fill:{color:e["fill-color"]["image-preview-main-area"].base}},cropArea:{fill:{color:e["fill-color"]["image-preview-crop-area"].base}},imageName:{textStyle:e["text-style"]["image-name"].base}},processingPage:{textStyle:e["text-style"]["document-processing-text"].base,titleStyle:e["title-style"]["document-processing-title"].base}}},Pf=e=>{var r,o,a,s,c,l,d,u,h,m,p;if(e==null)return{base:void 0,buttons:void 0,captureHint:void 0,captureHintIcon:void 0,captureButtons:void 0,captureFeedBox:void 0,captureOverlayHeaderButton:void 0,processingPage:void 0,reviewImageBox:void 0,selectOption:void 0};const{base:t,buttons:n}=Da(e);return{base:{...t,border:{color:e["border-color"].base,width:e["border-width"].base}},buttons:n,captureHint:{textStyle:e["text-style"]["government-id-capture-hint-text"].base},captureHintIcon:{fill:{color:(a=(r=e["fill-color"]["capture-page-hint-icon"])==null?void 0:r.base)!=null?a:(o=e["fill-color"].base)==null?void 0:o.base},stroke:{color:(l=(s=e["stroke-color"]["capture-page-hint-icon"])==null?void 0:s.base)!=null?l:(c=e["stroke-color"].base)==null?void 0:c.base}},captureButtons:{submit:(d=e["button-primary-style"]["submit-photo-button"])==null?void 0:d.base,retake:(u=e["button-secondary-style"]["retake-photo-button"])==null?void 0:u.base},captureHelpButtonIcon:{stroke:{color:(h=e["stroke-color"]["capture-page-help-button-icon"])==null?void 0:h.base}},captureFeedBox:{border:{color:e["border-color"]["government-id-capture-feed-box"].base,radius:e["border-radius"]["government-id-capture-feed-box"].base,width:e["border-width"]["government-id-capture-feed-box"].base},stroke:{color:(m=e["stroke-color"]["government-id-capture-feed-box"])==null?void 0:m.base}},captureOverlayHeaderButton:{stroke:{color:(p=e["stroke-color"]["capture-overlay-header-button"])==null?void 0:p.base}},processingPage:{textStyle:e["text-style"]["government-id-processing-text"].base,titleStyle:e["title-style"]["government-id-processing-title"].base},reviewImageBox:{border:{color:e["border-color"]["government-id-review-image-box"].base,radius:e["border-radius"]["government-id-review-image-box"].base,width:e["border-width"]["government-id-review-image-box"].base}},selectOption:{backgroundColor:{base:e["background-color"].base.base,active:e["background-color"].option.active,focused:e["background-color"].option.focused},border:{color:e["border-color"]["government-id-select-option"].base,width:e["border-width"]["government-id-select-option"].base},chevron:{stroke:{color:e["stroke-color"]["government-id-select-option-chevron"].base}},height:e.height["government-id-select-option-min-row-height"].base,icon:{stroke:{color:e["stroke-color"]["government-id-select-option-icon"].base},fill:{color:e["fill-color"]["government-id-select-option-icon"].base}},textStyle:e["text-style"]["government-id-vertical-option"].base},inputSelect:{base:e["input-select-style"].base.base},imageLocal:{illustration:e["image-local-style"].illustration.base}}},Df=e=>{var r,o,a,s;if(e==null)return{base:void 0,buttons:void 0,captureFeedbox:void 0,captureHintText:void 0,captureCompleteIcon:void 0,captureIcon:void 0,processingPage:void 0,startIcon:void 0,video:void 0};const{base:t,buttons:n}=Da(e);return{base:t,selfiePreviewImage:{borderRadius:(o=(r=e["border-radius"])==null?void 0:r["selfie-preview-image"])==null?void 0:o.base},buttons:n,captureFeedbox:{border:{color:e["border-color"]["selfie-capture-feed-box"].base,width:e["border-width"]["selfie-capture-feed-box"].base}},captureHintText:e["text-style"]["selfie-processing-text"].base,captureCompleteIcon:{stroke:{color:e["stroke-color"]["capture-complete-icon"].base}},captureIcon:{fill:{color:e["fill-color"]["selfie-capture-icon-fill-color"].base},background:{color:e["fill-color"]["selfie-capture-icon-background-fill-color"].base},stroke:{color:e["stroke-color"]["selfie-capture-icon-stroke-color"].base}},processingPage:{titleStyle:e["title-style"]["selfie-processing-title"].base,textStyle:e["text-style"]["selfie-processing-text"].base},startIcon:e["image-local-style"]["selfie-start-icon"].base,video:{maxWidth:(s=(a=e["max-width"])==null?void 0:a.video)==null?void 0:s.base}}};function yl(e){return e.attributes["next-step"].type===Ae.Completed||e.attributes["next-step"].type===Ae.Failed?!0:e.attributes.status?[fe.Completed,fe.Failed,fe.Approved,fe.Declined,fe.NeedsReview].includes(e.attributes.status):!1}const Of=f.createContext(Da()),Xi=()=>f.useContext(Of),pr=({children:e,value:t})=>{const n=f.useMemo(()=>Da(t),[t]);return i.jsx(Of.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n==null?void 0:n.buttons,children:e})})},Wy={disableParsingRawHTML:!0,overrides:{a:{props:{target:"_blank",rel:"noreferrer",onClick:e=>{e.stopPropagation()}}}}},J=({id:e,className:t,children:n,markdownOptions:r,wrapper:o,wrapperProps:a})=>{const s=o!=null?{wrapper:o,forceWrapper:!0}:{},c=f.useMemo(()=>({...Wy,...s,...r}),[o,r]);return i.jsx(zy,{id:e,className:t,children:i.jsx(x0,{...a,options:c,children:n!=null?n:""})})},zy=C.div.withConfig({displayName:"Markdown__Container",componentId:"sc-1qxdm1t-0"})(["display:flex;flex-direction:column;a{font-size:inherit;}p + p,ol + p,ul + p{margin-top:",";}p + ol,p + ul,ol + ol,ol + ul,ul + ol,ul + ul{margin-top:0.75rem;}ul{li + li,p + p{margin-top:0.75rem;}p:first-child{display:initial;}}ol{li + li,p + p{margin-top:0.75rem;}}ol{margin-left:1.8ch;}ul{list-style:none;li::before{content:'•';font-size:150%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';line-height:0;margin:0 0.5rem 0 0.25rem;position:relative;top:1px;color:",";}}"],I.Spacing[5],({theme:e})=>e.colorFont),sn=8,We=C.div.attrs(()=>({"aria-hidden":!0})).withConfig({displayName:"Spacer",componentId:"sc-1733kfs-0"})(["height:","px;width:","px;flex:none;"],({height:e=5})=>e*sn,({width:e=0})=>e*sn);var ne=(e=>(e.Primary="primary",e.Secondary="secondary",e))(ne||{});function Yy(e,t){var h,m,p;const n=t.colorButtonPrimary||t.colorPrimary,r=vt(n).mix(vt("white"),.2).hex(),o=vt(n).mix(vt("white"),.4).hex(),a=t.colorButtonSecondary||t.colorPrimary,s=vt(a).mix(vt("white"),.2).hex(),c=vt(a).mix(vt("white"),.4).hex(),l=t.colorButtonSecondaryFill,d=l!=null?vt(l).mix(vt("white"),.2).hex():void 0,u=l!=null?vt(l).mix(vt("white"),.4).hex():void 0;switch(e){default:case"primary":{const g=t.buttonShadowStrength;return W(["background-color:",";background-image:",";border:"," solid ",";color:",";svg:not(.pds-icon) path{stroke:",";}",";&:hover:not(:disabled),&:focus:not(:disabled){background-color:",";border-color:",";",";}&:active:not(:disabled){background-color:",";border-color:",";box-shadow:none;}&:disabled{background-color:",";border-color:",";background-image:none;box-shadow:none;}&:focus-visible{outline-color:",";outline-width:2px;outline-offset:2px;outline-style:solid;}"],n,t.buttonBackgroundImage,t.borderWidth,n,t.colorFontButtonPrimary,t.colorFontButtonPrimary,g>0&&W(["box-shadow:0 3px 10px 0px ",";"],I.Color.CoreSlate500),r,r,g>0&&W(["box-shadow:0 6px 15px 0px ",";"],I.Color.CoreSlate500),o,o,t.colorButtonPrimaryFillDisabled,t.colorButtonPrimaryFillDisabled,r)}case"secondary":return W(["border:"," solid ",";background-color:",";color:",";svg:not(.pds-icon) path{stroke:",";}&:hover:not(:disabled),&:focus:not(:disabled){border:"," solid ",";background-color:",";}&:active:not(:disabled){border:"," solid ",";background-color:",";}&:disabled{background-color:",";border-color:",";color:",";svg:not(.pds-icon) path{stroke:",";}}&:focus-visible{outline-color:",";outline-width:2px;outline-offset:2px;outline-style:solid;}"],t.borderWidth,a,(h=l!=null?l:t.colorModalBackground)!=null?h:I.Color.PrimaryWhite,(m=t.colorFontButtonSecondary)!=null?m:a,(p=t.colorFontButtonSecondary)!=null?p:a,t.borderWidth,s,d!=null?d:I.Color.CoreSlate50,t.borderWidth,c,u!=null?u:I.Color.CoreSlate200,l!=null?t.colorButtonSecondaryFillDisabled:I.Color.PrimaryWhite,t.colorButtonSecondaryFillDisabled,I.Color.CoreSlate500,I.Color.CoreSlate500,s)}}const Lf=W([""," border-radius:",";box-sizing:border-box;height:48px;text-transform:",";padding:0 ","px;font-size:",";line-height:",";cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;width:100%;font-weight:",";text-decoration:none;white-space:nowrap;transition:",";outline-color:transparent;outline-width:2px;outline-offset:2px;outline-style:solid;&:disabled{cursor:not-allowed;}&:not(:active):not(:disabled){&:hover,&:focus{transform:translateY(-2px);}}"],e=>Yy(e.buttonType,e.theme),e=>{var t;return(t=e.theme.borderRadius)!=null?t:un.base},e=>e.theme.buttonTextTransform,F.base*2,Yt.input,Yn.input,e=>{var t;return(t=e.theme.buttonFontWeight)!=null?t:pn.medium},Ra.fast),qu=C(Ji).withConfig({displayName:"Button__StyledLoadingIndicator",componentId:"sc-qijgxr-0"})(["position:absolute;transition:opacity 0.2s;",";"],e=>!e.isPending&&W(["opacity:0;"])),Uu=C("div").attrs(({isPending:e})=>({"aria-hidden":e})).withConfig({displayName:"Button__ButtonChildren",componentId:"sc-qijgxr-1"})(["width:100%;display:flex;flex-wrap:unset;align-items:center;justify-content:center;transition:opacity 0.2s;",";"],e=>e.isPending&&W(["opacity:0;"])),Ec=C("div").withConfig({displayName:"Button__PrefixIconContainer",componentId:"sc-qijgxr-2"})(["display:flex;align-items:center;margin-right:","px;"],F.base),kc=C("div").withConfig({displayName:"Button__SuffixIconContainer",componentId:"sc-qijgxr-3"})(["display:flex;align-items:center;margin-left:","px;"],F.base),Ky=C("button").withConfig({displayName:"Button__StyledButton",componentId:"sc-qijgxr-4"})(["",";"],Lf),Qy=C("a").withConfig({displayName:"Button__StyledLink",componentId:"sc-qijgxr-5"})(["",";"],Lf),ge=e=>{const{children:t,href:n,prefixIcon:r,suffixIcon:o,type:a="button",styles:s,...c}=e;return s!=null?i.jsxs(ma,{href:n,prefixIcon:r,suffixIcon:o,type:a,styles:s,...c,children:[r!=null&&i.jsx(Ec,{children:r}),t,o!=null&&i.jsx(kc,{children:o})]}):n?i.jsxs(Qy,{"data-test":"button__"+e.buttonType,type:a,href:n,target:"_blank",rel:"noopener",buttonType:e.buttonType,children:[e.isPending&&i.jsx(qu,{isPending:e.isPending}),i.jsxs(Uu,{isPending:e.isPending,children:[r!=null&&i.jsx(Ec,{children:r}),t,o!=null&&i.jsx(kc,{children:o})]})]}):i.jsxs(Ky,{"data-test":"button__"+e.buttonType,type:a,...c,children:[e.isPending&&i.jsx(qu,{isPending:e.isPending}),i.jsxs(Uu,{isPending:e.isPending,children:[r!=null&&i.jsx(Ec,{children:r}),t,o!=null&&i.jsx(kc,{children:o})]})]})},Zy=e=>btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))),$a={};function Jy({contentType:e,normalizedPathname:t,src:n}){return e==="image/png"||e==="image/gif"||e==="image/jpeg"||e==="image/webp"||t!=null&&t.endsWith(".png")||t!=null&&t.endsWith(".gif")||t!=null&&t.endsWith(".jpg")||t!=null&&t.endsWith(".jpeg")||t!=null&&t.endsWith(".webp")||n!=null&&n.startsWith("data:image/png;")||n!=null&&n.startsWith("data:image/gif;")||n!=null&&n.startsWith("data:image/jpeg;")||n!=null&&n.startsWith("data:image/webp;")?"image":e==="image/svg+xml"||t!=null&&t.endsWith(".svg")||n!=null&&n.startsWith("data:image/svg+xml")?"svg":e==="application/json"?"json":null}const Ff=f.memo(function({contentType:t,src:n,styles:r,"data-test":o="image",environment:a,alt:s,"aria-label":c,...l}){var R,O,D,L,H,M,B,V;const[d,{disable:u}]=st(!0),h=Ps(),[m,{enable:p}]=st(!1);let g;try{g=new URL(n).pathname}catch{g=n}const[b,x]=f.useState($a[g]),y=Jy({contentType:t,normalizedPathname:g==null?void 0:g.toLowerCase(),src:n}),v=n==null?void 0:n.toLowerCase().startsWith("data:"),_=()=>!!g&&h(ZC(g)),A=()=>{g&&h(QC(g)),u()};if(f.useEffect(()=>{var $;if((a?a==="production":!0)&&!(n!=null&&n.startsWith("https://files.withpersona.com/")||n!=null&&n.startsWith("https://files.withpersona-staging.com/"))){A();return}switch(y){case"image":if(v||n==null)return;_(),di.get(n,{responseType:"blob","axios-retry":{retryDelay:()=>0,retryCondition:Q=>Li.isNetworkOrIdempotentRequestError(Q)||Q.code==="ECONNABORTED"}}).then(({data:Q})=>{var Y;const G=URL.createObjectURL(Q);$a[g]=G,x(G),A(),(Y=l.onLoad)==null||Y.call(l)}).catch(Q=>{var G;p(),A(),(G=l.onError)==null||G.call(l),ar({error:Q,method:"GET",uri:n})}).catch(Q=>{if(!(Q instanceof Ct))throw Q});break;case"svg":_(),di.get(n).then(({data:Q})=>{var re;const G=eI(Q,Xy(r)),Y=`data:image/svg+xml;base64,${Zy(G)}`;$a[g]=Y,x(Y),A(),(re=l.onLoad)==null||re.call(l)}).catch(Q=>{var G;A(),(G=l.onError)==null||G.call(l),ar({error:Q,method:"GET",uri:n})}).catch(Q=>{if(!(Q instanceof Ct))throw Q});break;case"json":_(),di.get(n).then(({data:Q})=>{var G;(b==null||(Q==null?void 0:Q.nm)!==(b==null?void 0:b.nm))&&($a[g]=Q,x(Q)),A(),(G=l.onLoad)==null||G.call(l)}).catch(Q=>{var G;A(),(G=l.onError)==null||G.call(l),ar({error:Q,method:"GET",uri:n})}).catch(Q=>{if(!(Q instanceof Ct))throw Q});break;default:A(),($=l.onError)==null||$.call(l);break}},[n,y]),!n)return null;const T=i.jsx("div",{"aria-label":d?"loading image":"no image","data-test":`${o}__${d?"loading":"empty"}`,className:l.className});switch(y){case"image":return v||m?i.jsx("img",{...l,src:n,"data-test":o,alt:s,"aria-label":c}):b!=null?i.jsx("img",{...l,src:b,"data-test":o,alt:s,"aria-label":c}):T;case"svg":return b!=null?i.jsx("img",{...l,src:b,"data-test":o,alt:s,"aria-label":c}):T;case"json":return b!=null?i.jsx(Gn,{role:"img",alt:s,"aria-label":c,animationData:b,style:{height:(L=(D=E((O=(R=r==null?void 0:r.height)==null?void 0:R.base)==null?void 0:O.base))!=null?D:l.height)!=null?L:"auto",width:(V=(B=E((M=(H=r==null?void 0:r.width)==null?void 0:H.base)==null?void 0:M.base))!=null?B:l.width)!=null?V:"auto",maxWidth:"min(100%, 100vw)"},className:l.className}):T;default:return T}}),nr={fillColor:"{{ fill_color }}",backgroundColorColor:"{{ background_color }}",highlightColor:"{{ highlight_color }}",strokeColor:"{{ stroke_color }}"};function Xy(e){var t,n,r,o,a,s,c,l,d,u,h,m,p,g,b,x;return{fillColor:k((n=(t=e==null?void 0:e["fill-color"])==null?void 0:t.fill)==null?void 0:n.base),backgroundColor:k((o=(r=e==null?void 0:e["fill-color"])==null?void 0:r.background)==null?void 0:o.base),highlightColor:k((s=(a=e==null?void 0:e["fill-color"])==null?void 0:a.highlight)==null?void 0:s.base),strokeColor:k((l=(c=e==null?void 0:e["stroke-color"])==null?void 0:c.stroke)==null?void 0:l.base),originalFillColor:k((u=(d=e==null?void 0:e["fill-color"])==null?void 0:d["original-fill"])==null?void 0:u.base),originalBackgroundColor:k((m=(h=e==null?void 0:e["fill-color"])==null?void 0:h["original-background"])==null?void 0:m.base),originalHighlightColor:k((g=(p=e==null?void 0:e["fill-color"])==null?void 0:p["original-highlight"])==null?void 0:g.base),originalStrokeColor:k((x=(b=e==null?void 0:e["stroke-color"])==null?void 0:b["original-stroke"])==null?void 0:x.base)}}function eI(e,t){var c,l,d,u;if(Object.values(t).every(h=>h==null))return e;const n=Cu((h,m)=>m==null,{[(c=t.originalFillColor)==null?void 0:c.toUpperCase()]:nr.fillColor,[(l=t.originalBackgroundColor)==null?void 0:l.toUpperCase()]:nr.backgroundColorColor,[(d=t.originalHighlightColor)==null?void 0:d.toUpperCase()]:nr.highlightColor,[(u=t.originalStrokeColor)==null?void 0:u.toUpperCase()]:nr.strokeColor});let r=e;if(Object.keys(n).some(h=>h!=null)){const h=new RegExp(Object.keys(n).join("|"),"gi");r=e.replace(h,m=>n[m.toUpperCase()])}const o=Cu((h,m)=>h==null,{[nr.fillColor]:t.fillColor,[nr.backgroundColorColor]:t.backgroundColor,[nr.highlightColor]:t.highlightColor,[nr.strokeColor]:t.strokeColor}),a=new RegExp(Object.keys(o).join("|"),"g");return r.replace(a,h=>o[h])}const tI=e=>e==="",nI=e=>Array.isArray(e)&&e.length===0,iI=e=>v0(e)&&Object.keys(e).length===0,qt=e=>e==null||tI(e)||nI(e)||iI(e);Fl.add_operation("scalarlength",e=>(e==null?void 0:e.length)||0);Fl.add_operation("=",(e,t)=>e==t);const Sr=(e,t,n)=>{if(e!=null)try{return Fl.apply(e,t)}catch(r){return r instanceof Error&&r.message==="Unrecognized operation matchesregex"||Z(r,"warning",{rule:e}),n}};function _t(e,t){const n=Ke(s=>{var c;return(c=s.form[t])==null?void 0:c.values}),r=Ke(s=>{var c;return((c=s.ui)==null?void 0:c.status)===tn.Blocked}),o=f.useMemo(()=>({form:n,value:n==null?void 0:n[e],meta:{polling:r}}),[n,e,r]);return f.useCallback((s,c)=>Sr(s,o,c),[o])}function hn({hidden:e,optional:t,validations:n}){return f.useMemo(()=>{const o=(s,c)=>!Sr(e,{form:c,value:s})&&(qt(s)||s===!1)&&!Sr(t.logic,{form:c,value:s})&&t.message,a=(n!=null?n:[]).map(({logic:s,message:c})=>(l,d)=>!Sr(e,{form:d,value:l})&&!(qt(l)&&Sr(t.logic,{form:d,value:l}))&&!Sr(s,{form:d,value:l},!0)&&c);return[o].concat(a)},[e,t,n])}const Hu={width:{unit:"%",value:100},height:{unit:"%",value:100}},rI=C(Ff).withConfig({displayName:"ImageRemote__StyledCachedImage",componentId:"sc-yyqavh-0"})(({styles:e,height:t,width:n})=>{var r,o,a,s,c,l;return{display:"block",objectFit:"contain",height:(r=E(e==null?void 0:e.height.base.base))!=null?r:t,width:(o=E(e==null?void 0:e.width.base.base))!=null?o:n,maxWidth:"min(100%, 100vw)",alignSelf:e==null?void 0:e.justify.base.base,marginTop:E((a=e==null?void 0:e.margin.base.base)==null?void 0:a.top),marginBottom:E((s=e==null?void 0:e.margin.base.base)==null?void 0:s.bottom),marginLeft:E((c=e==null?void 0:e.margin.base.base)==null?void 0:c.left),marginRight:E((l=e==null?void 0:e.margin.base.base)==null?void 0:l.right)}}),Mf=({component:e,inquiry:t,onLoad:n,onError:r,environment:o})=>{const{attributes:{url:a,height:s,width:c,"content-type":l,hidden:d,alt:u}}=e;return _t(e.name,t==null?void 0:t.attributes["next-step"].name)(d)?null:i.jsx(rI,{onLoad:n,onError:r,src:a,contentType:l,"data-test":e.type,height:s!=null?s:E(Hu.height),width:c!=null?c:E(Hu.width),styles:e.styles,environment:o,alt:u||"","aria-label":u||void 0,role:u?void 0:"presentation"})},Ye=({customImage:e,children:t=null,onLoad:n,environment:r,alt:o})=>{const[a,s]=f.useState(!1),c=f.useMemo(()=>{var l;if(e)return o?{...e,attributes:{...e.attributes,alt:(l=e.attributes.alt)!=null?l:o}}:e},[e,o]);return c&&!a?i.jsx(Mf,{component:c,onLoad:n,onError:()=>s(!0),environment:r}):(n==null||n(),i.jsx(i.Fragment,{children:t}))},ec=(e,t)=>e&&(e==null?void 0:e.replace(/\s/g,""))in aa?`https://fonts.googleapis.com/css2?family=${e.replace(/\s/g,"+")}:wght@300;400;500;700;900&display=swap`:`https://fonts.googleapis.com/css2?family=${aa.Rubik}:wght@300;400;500;700;900&display=swap`;C.div.withConfig({displayName:"ThemedFonts__Container",componentId:"sc-16j6dhq-0"})(["font-family:",";color:",";font-size:",";line-height:",";"],({theme:{fontFamily:e}})=>$t(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody);const Oa=C.span.withConfig({displayName:"TextBase",componentId:"sc-dokknq-0"})(({styles:e})=>{var t,n,r,o,a,s,c,l;return{marginTop:(n=E((t=e==null?void 0:e.margin.base.base)==null?void 0:t.top))!=null?n:0,marginBottom:(o=E((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom))!=null?o:0,marginLeft:(s=E((a=e==null?void 0:e.margin.base.base)==null?void 0:a.left))!=null?s:0,marginRight:(l=E((c=e==null?void 0:e.margin.base.base)==null?void 0:c.right))!=null?l:0,textAlign:e==null?void 0:e.justify.base.base,fontFamily:$t(e==null?void 0:e["font-family"].base.base),fontSize:E(e==null?void 0:e["font-size"].base.base),fontWeight:dn(e==null?void 0:e["font-weight"].base.base),letterSpacing:E(e==null?void 0:e["letter-spacing"].base.base),lineHeight:E(e==null?void 0:e["line-height"].base.base),color:k(e==null?void 0:e["text-color"].base.base),a:{color:k(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:k(e==null?void 0:e["text-color-highlight"].base.base)}}}),oI=C("p").withConfig({displayName:"ThemedParagraph__Paragraph",componentId:"sc-1xt23cs-0"})(["font-family:",";color:",";font-size:",";line-height:",";text-align:",";"],({theme:{fontFamily:e}})=>$t(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody,({theme:e})=>e.textAlign),ot=({styles:e,...t})=>(Ar(ec(e==null?void 0:e["font-family"].base.base)),i.jsx(i.Fragment,{children:e!=null?i.jsx(Oa,{...t,styles:e}):i.jsx(oI,{...t})})),wd=C("h1").attrs(()=>({tabIndex:-1})).withConfig({displayName:"TitleTextBase",componentId:"sc-1oqm48g-0"})(["",""],({styles:e})=>{var t,n,r,o,a,s,c,l;return{marginTop:(n=E((t=e==null?void 0:e.margin.base.base)==null?void 0:t.top))!=null?n:0,marginBottom:(o=E((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom))!=null?o:0,marginLeft:(s=E((a=e==null?void 0:e.margin.base.base)==null?void 0:a.left))!=null?s:0,marginRight:(l=E((c=e==null?void 0:e.margin.base.base)==null?void 0:c.right))!=null?l:0,textAlign:e==null?void 0:e.justify.base.base,fontFamily:$t(e==null?void 0:e["font-family"].base.base),fontSize:E(e==null?void 0:e["font-size"].base.base),fontWeight:dn(e==null?void 0:e["font-weight"].base.base),letterSpacing:E(e==null?void 0:e["letter-spacing"].base.base),lineHeight:E(e==null?void 0:e["line-height"].base.base),color:k(e==null?void 0:e["text-color"].base.base),a:{color:k(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:k(e==null?void 0:e["text-color-highlight"].base.base)}}}),aI=C("h1").withConfig({displayName:"ThemedTitle__Title",componentId:"sc-xrn9gt-0"})(["font-family:",";color:",";font-size:",";font-weight:",";line-height:",";margin-bottom:",";text-align:",";"],({theme:{fontFamilyTitle:e}})=>$t(e),({theme:e})=>e.colorFontTitle,({theme:e})=>e.fontSizeHeader,({theme:e})=>e.headerFontWeight,({theme:e})=>e.lineHeightHeader,({theme:e})=>e.headerMarginBottom,({theme:e})=>e.textAlign),dt=({styles:e,...t})=>(Ar(ec(e==null?void 0:e["font-family"].base.base)),i.jsx(i.Fragment,{children:e!=null?i.jsx(wd,{...t,styles:e}):i.jsx(aI,{...t,tabIndex:-1})})),sI=C.div.withConfig({displayName:"CenteredPictograph__Container",componentId:"sc-ti65m9-0"})(["display:flex;justify-content:",";position:relative;"," :empty{margin-bottom:0;}svg{"," ","}"],({justify:e})=>e,({marginTop:e,marginBottom:t,marginLeft:n,marginRight:r})=>W(["margin-top:",";margin-bottom:",";margin-left:",";margin-right:",";"],e,t!=null?t:I.Spacing[5],n,r),({height:e})=>e!=null&&`height: ${e}px;`,({width:e})=>e!=null&&`width: ${e}px;`),$e=({height:e=100,width:t=100,justify:n=So.Center,children:r,title:o,"aria-label":a,role:s="img",...c})=>i.jsx(sI,{height:e,width:t,justify:n,title:o,"aria-label":a,role:s,...c,children:r}),_d=({value:e,accessibleTitle:t,"data-test":n,bgColor:r,fgColor:o})=>e==null?null:i.jsx(Gh,{value:e,title:t,"data-test":n,includeMargin:!0,bgColor:r!=null?r:I.Color.PrimaryWhite,fgColor:o}),ye=C("div").withConfig({displayName:"ThemedSvg",componentId:"sc-lrejct-0"})(["circle[stroke]:not(.no-theme),rect[stroke]:not(.no-theme),path[stroke]:not(.no-theme),g[stroke]:not(.no-theme){stroke:",";vector-effect:",";}circle[fill]:not([fill='none']):not(.no-theme),rect[fill]:not([fill='none']):not(.no-theme),path[fill]:not([fill='none']):not(.no-theme),g[fill]:not([fill='none']):not(.no-theme){fill:",";}circle[fill].icon-color-highlight,rect[fill].icon-color-highlight,path[fill].icon-color-highlight,g[fill].icon-color-highlight{fill:"," !important;}circle[fill].icon-color-background,rect[fill].icon-color-background,path[fill].icon-color-background,g[fill].icon-color-background{fill:"," !important;}circle[fill].icon-color-stroke,rect[fill].icon-color-stroke,path[fill].icon-color-stroke,g[fill].icon-color-stroke{fill:"," !important;}line-height:0;"],({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke,({vectorEffect:e})=>e!=null?e:"non-scaling-stroke",({$primaryColor:e,theme:t})=>e!=null?e:t.iconColorPrimary,({$highlightColor:e,theme:t})=>e!=null?e:t.iconColorHighlight,({$backgroundColor:e,theme:t})=>e!=null?e:t.iconColorBackground,({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke),Rd=132,cI=256,lI=C("div").withConfig({displayName:"InquiryAppHandoffView__Header",componentId:"sc-zpvqme-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),dI=C(ge).withConfig({displayName:"InquiryAppHandoffView__CopyToClipboardButton",componentId:"sc-zpvqme-1"})(({styles:e,textStyles:t})=>({backgroundColor:"transparent !important",border:0,borderBottom:"1px solid",borderRadius:0,boxShadow:"unset !important",margin:0,padding:0,textTransform:"unset",transform:"none !important",width:"initial",borderColor:`${k(e==null?void 0:e["text-color"].base.base)} !important`,fontFamily:$t(t==null?void 0:t["font-family"].base.base),fontSize:E(t==null?void 0:t["font-size"].base.base),fontWeight:dn(t==null?void 0:t["font-weight"].base.base),letterSpacing:E(t==null?void 0:t["letter-spacing"].base.base),lineHeight:E(t==null?void 0:t["line-height"].base.base),svg:{height:E(t==null?void 0:t["font-size"].base.base),width:E(t==null?void 0:t["font-size"].base.base)}})),uI=C.div.withConfig({displayName:"InquiryAppHandoffView__QrCodeContainer",componentId:"sc-zpvqme-2"})(["height:","px;margin-bottom:",";display:flex;flex-direction:column;align-items:center;"],Rd,I.Spacing[6]),mI=C.div.withConfig({displayName:"InquiryAppHandoffView__Container",componentId:"sc-zpvqme-3"})(["display:flex;flex-direction:column;"]);function hI({assets:e,link:t,shortlink:n,iosAppClipLink:r,copyShortlink:o,localizations:a,pageState:s,isIOS:c,osVersion:l}){var _,A,T;const[d]=K(),{base:u,buttons:h}=Xi(),m=a==null?void 0:a["qr-code"],p=m?pI(m.length):Rd,g=m||t,b=n!=null&&N.canCopyToClipboard;let x="",y="",v="";switch(s){case"miniapp-supported":{x=c?"Continue on App Clip":"Continue on Instant App",y=c?"To verify your identify, launch the Persona App Clip using the button below.":"To verify your identify, launch the Persona Instant App using the button below.",v=c?`Mobile device requirements:

* Must be iOS 17+
* App Clips must be enabled`:`Mobile device requirements:

* Must be Android 9+
* Instant Apps must be enabled`;break}case"miniapp-unsupported":{x="Return to previous device",y=c?`Your iOS version ${l!=null?l:"is too old and"} does not support App Clips. Please return to your previous device to continue.`:`Your Android version ${l!=null?l:"is too old and"} does not support Instant Apps. Please return to your previous device to continue.`,v=c?`Mobile device requirements:

* Must be iOS 17+
* App Clips must be enabled`:`Mobile device requirements:

* Must be Android 9+
* Instant Apps must be enabled`;break}case"not-on-mobile":{x="Continue on another device",y="Use your camera app to capture the QR code and go to the embedded link. **Do not close this page.**",v=`Mobile device requirements:

* Must be iOS 17+ or Android 9+
* App Clips (iOS) and Instant Apps (Android) must be enabled`;break}}return i.jsxs(mI,{children:[i.jsx(Ye,{customImage:e==null?void 0:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(lI,{children:[i.jsx(dt,{styles:u==null?void 0:u.titleStyle,children:i.jsx(J,{children:x})}),i.jsx(ot,{styles:u==null?void 0:u.textStyle,children:i.jsx(J,{children:y})})]}),s==="miniapp-supported"&&i.jsxs(i.Fragment,{children:[i.jsx(ge,{href:c?r:g,children:c?"Launch App Clip":"Launch Instant App"}),i.jsx(We,{})]}),s==="miniapp-unsupported"&&i.jsx($e,{"aria-label":"return to original device pictograph",children:i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ql,{})})}),s==="not-on-mobile"&&i.jsx(uI,{style:{height:`${p}px`},children:!!g&&i.jsxs(i.Fragment,{children:[i.jsx($e,{height:p,width:p,"aria-label":d("qr-code.prompt"),role:"img",marginBottom:n?"0":void 0,children:i.jsx(_d,{value:g,accessibleTitle:d("qr-code.prompt"),"data-test":"device-handoff-qr__qr-code",bgColor:k(u==null?void 0:u.backgroundColor),fgColor:k((T=(A=(_=u==null?void 0:u.textStyle)==null?void 0:_["text-color"])==null?void 0:A.base)==null?void 0:T.base)})}),b&&i.jsx(dI,{onClick:o,id:"device-handoff-qr__copy-shortlink",suffixIcon:i.jsx(Wh,{}),styles:h==null?void 0:h.secondary,textStyles:u==null?void 0:u.disclaimerStyle,children:n})]})}),v&&i.jsx(ot,{styles:u==null?void 0:u.textStyle,children:i.jsx(J,{children:v})})]})}function pI(e){return zh(Rd,cI,Math.floor(Math.sqrt(e)*16))}const It=(e,t,n={})=>{const r=Ke(p=>{var g,b,x;return(x=(b=(g=p==null?void 0:p.featureFlags)==null?void 0:g.featureFlags)==null?void 0:b["global:enable-api-callback-v2"])!=null?x:!1}),o=Ke(p=>{var g,b,x;return(x=(b=(g=p==null?void 0:p.inquiry)==null?void 0:g.featureFlags)==null?void 0:b["global:enable-api-callback-v2"])!=null?x:!1}),a=r||o,[s,c]=f.useState(!!n.defaultLoading),[l,d]=f.useState(void 0),u=Zi(),h=f.useRef(0),m=f.useCallback(async(...p)=>{let g=!1;try{h.current+=1,c(!0);const b=await e(...p);return d(void 0),b}catch(b){if(b instanceof Jl)g=!0;else if(b instanceof Ct||b instanceof pt||b instanceof qs||b instanceof mn)u()&&d(b);else throw b}finally{h.current-=1,a?u()&&h.current===0&&c(!1):u()&&!g&&c(!1)}},t);return{loading:s,error:l,callback:m}},Et=({error:e,onError:t,onNetworkError:n,onNonRetryableError:r,onRequestError:o})=>{f.useEffect(()=>{if(e==null)return;if(!(typeof e=="object"&&e!=null&&"method"in e))throw e;if(e instanceof Ct)n==null||n(e);else if(e instanceof pt)t==null||t(e);else if(e instanceof qs)o==null||o(e);else if(e instanceof mn)r==null||r(e);else throw e},[e])};function Vf(e,t,n={}){const r=n.maxWait,o=f.useRef(null),a=f.useRef([]),s=n.leading,c=n.trailing==null?!0:n.trailing,l=f.useRef(!1),d=f.useRef(null),u=f.useRef(!1),h=f.useRef(e);h.current=e;const m=f.useCallback(()=>{clearTimeout(d.current),clearTimeout(o.current),o.current=null,a.current=[],d.current=null,l.current=!1},[]);f.useEffect(()=>()=>{u.current=!0},[]);const p=f.useCallback((...b)=>{a.current=b,clearTimeout(d.current),l.current&&(l.current=!1),d.current==null&&s&&!l.current&&(h.current(...b),l.current=!0),d.current=window.setTimeout(()=>{let x=!0;s&&l.current&&(x=!1),m(),!u.current&&c&&x&&h.current(...b)},t),r!=null&&!o.current&&c&&(o.current=window.setTimeout(()=>{const x=a.current;m(),u.current||h.current(...x)},r))},[r,t,m,s,c]),g=f.useCallback(()=>{d.current!=null&&(h.current.apply(null,a.current),m())},[m]);return[p,m,g]}const fr=({loader:e,deps:t,onError:n,onNetworkError:r,skip:o,abortController:a,options:s={}})=>{const{error:c,loading:l,callback:d}=It(e,t,{defaultLoading:!o,...s});Et({error:c,onError:n,onNetworkError:r});const[u]=Vf(d,500,{leading:!0,trailing:!0});return f.useEffect(()=>{if(!o&&u(),a)return()=>a.abort()},t),{error:c,loading:l,callback:d}};var on=(e=>(e.Email="email",e.Sms="sms",e.Qr="qr",e))(on||{});const $u=3e3,fI=e=>{var h;const t=Dt(),[n]=K(),[r,o]=f.useState({long:void 0,short:void 0,code:void 0}),[a,{disable:s}]=st(!0);let c;fr({loader:async()=>{var p,g,b;const m=await te.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"generate-one-time-link");o({long:(p=m==null?void 0:m.meta)==null?void 0:p["one-time-link-url"],short:(g=m==null?void 0:m.meta)==null?void 0:g["one-time-link-url-short"],code:(b=m==null?void 0:m.meta)==null?void 0:b["one-time-link-code"]}),z.logAmplitude("one-time-link.sent",{method:"qr"}),N.onEvent(Oe.OneTimeLinkSent,{method:"qr"})},deps:[],onError:m=>{var p;m.status===403&&((p=m.errors[0])==null?void 0:p.code)==="max_session_limit_error"?t.push("/verify/invalid/inquiry"):m.status===409?e.showMessage(n("errors.inquiry-conflict")):e.showMessage(n("errors.network"))},onNetworkError:()=>e.showMessage(n("errors.network"))}),f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}return l(),()=>{clearTimeout(c),s()}},[]);const l=f.useCallback(async()=>{try{const{data:m,meta:p}=await te.getResource(Zt(e.inquiry.type),e.inquiry.id);if((p==null?void 0:p["device-handed-off-at"])!=null){e.saveInquiry(m),e.history.push("/inquiry/device-handoff/started");return}switch(m.attributes.status){case fe.Created:case fe.Pending:a&&(c=window.setTimeout(l,$u));return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(m),e.routeToNextStep(m);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(n("errors.session-expired"));return;default:ct(m.attributes.status)}}catch(m){if(m instanceof Ct)c=window.setTimeout(l,$u);else if(m instanceof pt&&m.status!==401)e.showMessage(n("errors.session-expired"));else throw m}},[e.inquiry,a]),d=f.useCallback(async()=>{r.short!=null&&await Ef(r.short)&&e.showMessage(n("to-mobile.link-copied"))},[r.short]);if(e.inquiry==null)return null;let u;return JC()?u="miniapp-supported":window.location.host.startsWith("miniapp.")&&XC()?u="miniapp-unsupported":u="not-on-mobile",i.jsx(pr,{value:e.styles,children:i.jsx(hI,{link:r.long?`${r.long}&device-handoff-method=${on.Qr}`:void 0,shortlink:r.short,iosAppClipLink:r.code?`https://appclip.apple.com/id?p=com.withpersona.app.Reusable-Personas.Clip&code=${r.code}`:void 0,copyShortlink:d,pageState:u,isIOS:zl(),osVersion:(h=new y0(navigator.userAgent).getOS())==null?void 0:h.version})})};function gI(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:pi(e)}}const bI={clearMessages:Lt,showMessage:se,saveInquiry:Ot,routeToNextStep:Tt},CI=ke(gI,bI),xI=CI(fI);var Bf=(e=>(e.SetStatus="create-persona/SET_STATUS",e))(Bf||{}),En=(e=>(e.CtaNotShown="cta-not-shown",e.CtaShown="cta-shown",e.CtaDismissed="cta-dismissed",e.PersonaCreated="persona-created",e.PersonaUpdated="persona-updated",e))(En||{});function Jo(e){return{type:"create-persona/SET_STATUS",payload:{status:e}}}const vI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"button-type":o,disabled:a,hidden:s,text:c}=e.attributes,[l]=K(),{loading:d,error:u,callback:h}=It(async y=>{await n.onActionButtonClick(e.name)},[n.onActionButtonClick,e.name]);Et({error:u,onNetworkError:()=>n.showMessage(l("errors.network")),onError:y=>{y instanceof pt&&y.status===422?n.showMessage("Invalid configuration. Please check your parameters."):Z(y)}});const m=_t(e.name,t.attributes["next-step"].name),p=m(s),g=d||r||m(a)===!0,[b,x]=f.useState(!1);return f.useEffect(()=>{d&&x(!0),g||x(!1)},[d,g]),p?null:i.jsx(ge,{id:e.name,type:"button",buttonType:o!=null?o:ne.Primary,onClick:h,disabled:g,isPending:b,styles:e==null?void 0:e.styles,children:c})},yI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"button-type":o,disabled:a,hidden:s,text:c}=e.attributes,l=_t(e.name,t.attributes["next-step"].name);if(!N.isDashboardFLE&&(N.isHosted||N.isInline)||l(s))return null;const d=r||l(a);return i.jsx(ge,{id:e.name,type:"button",buttonType:o!=null?o:ne.Primary,onClick:()=>n.onCancel(),disabled:d,styles:e==null?void 0:e.styles,children:c})},II=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{var y;const{disabled:o,hidden:a,text:s,"auto-submit-countdown-text":c,"auto-submit-interval-seconds":l}=e.attributes,{onComplete:d}=n,u=f.useCallback(v=>{v==null||v.preventDefault(),d()},[d]),[h,m]=f.useState(l);f.useEffect(()=>{if(h!=null&&u!=null&&h>0){const v=setTimeout(()=>{h>1?m(h-1):(m(h-1),u())},1e3);return()=>clearTimeout(v)}},[h,u]);const p=_t(e.name,t.attributes["next-step"].name);if(p(a)||!vi(t))return null;const b=r||p(o),x=h!=null&&h>0&&c?c.replace("{time}",String(h)):s;return i.jsx(ge,{id:"complete__button",type:"submit",buttonType:(y=e.attributes["button-type"])!=null?y:ne.Primary,onClick:u,disabled:b,styles:e==null?void 0:e.styles,children:x})},SI=C.div.withConfig({displayName:"PopupBackdrop__BackdropBackground",componentId:"sc-l968gl-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;z-index:",";&.backdrop-enter{background-color:rgba(0,0,0,0);pointer-events:none;}&.backdrop-enter-active,&.backdrop-enter-done{background-color:rgba(0,0,0,0.85);transition:background-color ",";pointer-events:unset;}&.backdrop-exit{background-color:rgba(0,0,0,0.85);pointer-events:unset;}&.backdrop-exit-active{background-color:rgba(0,0,0,0);transition:background-color ",";pointer-events:none;}"],At.popupBackdrop,it.Fast,it.Fast),wI=C("button").withConfig({displayName:"PopupBackdrop__CloseButton",componentId:"sc-l968gl-1"})(["position:absolute;right:24px;top:24px;cursor:pointer;pointer-events:auto;background:none;display:flex;align-items:center;justify-content:center;flex:none;margin:-","px;padding:","px;border-radius:",";outline:0 !important;transition:box-shadow ",",background-color ",";box-shadow:0 0 0 2px transparent;:hover:not(:disabled){background-color:",";}:focus:not(:disabled):not(:active){box-shadow:0 0 0 2px ",";}:active:not(:disabled){background-color:",";}svg path{stroke:",";}&:disabled{cursor:not-allowed;opacity:0.25;}"],sn/1.5,sn/1.5,({theme:e})=>e.borderRadius,it.Fast,it.Fast,vt(I.Color.CoreSlate300).fade(.5).rgb().string(),({theme:e})=>e.colorPrimary,vt(I.Color.CoreSlate400).fade(.5).rgb().string(),I.Color.PrimaryWhite),qf=e=>{const t=n=>{var r;n.stopPropagation(),n.preventDefault(),(r=e.onClose)==null||r.call(e)};return i.jsx(Ia,{in:e.visible,timeout:{enter:200,exit:200},mountOnEnter:!0,unmountOnExit:!0,classNames:"backdrop",children:i.jsxs(SI,{children:[i.jsx(wI,{id:"popup_backdrop__close",onClick:t,children:i.jsx(Rp,{})}),e.children]})})};var Un=(e=>(e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Zero=48]="Zero",e[e.C=67]="C",e[e.S=83]="S",e[e.V=86]="V",e[e.Z=90]="Z",e[e.EqualSign=187]="EqualSign",e[e.Dash=189]="Dash",e))(Un||{});const Eo=(e,t={})=>n=>{const{stopPropagation:r,preventDefault:o}=t;return f.useEffect(()=>{const a=s=>{r&&s.stopPropagation(),o&&s.preventDefault(),s.keyCode===e&&n(s)};return window.addEventListener("keyup",a),()=>window.removeEventListener("keyup",a)},[n])},zr=(e,t={})=>n=>{const{stopPropagation:r,preventDefault:o,withAlt:a,withCtrl:s,withShift:c}=t;return f.useEffect(()=>{const l=d=>{if(r&&d.stopPropagation(),o&&d.preventDefault(),!(a&&!d.altKey)&&!(s&&!d.ctrlKey&&!d.metaKey)&&!(c&&!d.shiftKey))return d.keyCode===e&&n(d)};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[n])},Uf=Eo(Un.Esc);Eo(Un.Left);Eo(Un.Right);Eo(Un.Up);Eo(Un.Down);Eo(Un.Backspace);zr(Un.Z,{withCtrl:!0});zr(Un.Z,{withCtrl:!0,withShift:!0});zr(Un.S,{withCtrl:!0});zr(Un.Enter,{withCtrl:!0});zr(Un.Backspace);zr(Un.C,{withCtrl:!0});zr(Un.V,{withCtrl:!0});const Gu=400,Wu=650,Nc="reusable-persona-create-popup",Il=250,_I=C.div.withConfig({displayName:"ButtonCreatePersona__Backdrop",componentId:"sc-12sb4nb-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:",";pointer-events:none;@media ","{position:fixed;}"],At.drawer,xt.isMobile),RI=C.div.withConfig({displayName:"ButtonCreatePersona__Anim",componentId:"sc-12sb4nb-1"})(["position:absolute;bottom:",";left:",";right:",";transition:","ms;.dialog-enter &{transform:translateY( calc(100% + ",") );}.dialog-enter-active &{transform:translateY(0%);}.dialog-exit &{transform:translateY(0%);}.dialog-exit-active &{transform:translateY( calc(100% + ",") );}z-index:",";pointer-events:auto;"],({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.left)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.right)},Il,({styles:e})=>{var t,n,r,o;return(o=E((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom))!=null?o:"0px"},({styles:e})=>{var t,n,r,o;return(o=E((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom))!=null?o:"0px"},At.drawer),AI=C.div.withConfig({displayName:"ButtonCreatePersona__CtaCard",componentId:"sc-12sb4nb-2"})(["position:relative;z-index:",";padding-top:",";padding-bottom:",";padding-left:",";padding-right:",";background-color:",";border-color:",";border-width:",";border-radius:",";box-shadow:"," "," "," 0 ",";overflow:hidden;"],At.drawer,({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.top)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.left)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.right)},({styles:e})=>{var t,n;return k((n=(t=e==null?void 0:e["background-color"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n;return k((n=(t=e==null?void 0:e["border-color"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e["border-width"])==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.top)},({styles:e})=>{var t,n;return E((n=(t=e==null?void 0:e["border-radius"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e["shadow-offset"])==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.x)},({styles:e})=>{var t,n,r;return E((r=(n=(t=e==null?void 0:e["shadow-offset"])==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.y)},({styles:e})=>{var t,n;return E((n=(t=e==null?void 0:e["shadow-radius"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n;return k((n=(t=e==null?void 0:e["shadow-color"])==null?void 0:t.base)==null?void 0:n.base)}),TI=C.div.withConfig({displayName:"ButtonCreatePersona__PopupOverlayText",componentId:"sc-12sb4nb-3"})(["font-family:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";width:75%;text-align:center;a{color:",";font-weight:bold;outline-color:",";}"],({theme:e})=>$t(e.fontFamily),I.Color.PrimaryWhite,I.Color.PrimaryWhite,I.Color.PrimaryWhite),EI=C(Ll).attrs(()=>({size:16})).withConfig({displayName:"ButtonCreatePersona__StyledIconX",componentId:"sc-12sb4nb-4"})(["cursor:pointer;position:absolute;top:16px;right:16px;z-index:",";"],At.navbar),kI=({component:e,actionsApi:t,inquiry:n,inquiryLoading:r})=>{const o=Ke(Y=>{var re;return(re=Y.createPersona)==null?void 0:re.status}),a=Ps(),s=e.attributes.pages["cta-card"]["ui-step"].config.components,c=e.attributes.pages["cta-card"]["component-name-mapping"],[l,{enable:d,disable:u}]=st(o===En.CtaShown);Uf(u);const[h]=K(),m=f.useRef(null),p=Ke(Y=>Y.inquiry.popupUrl),g=f.useCallback(Y=>a(af(Y)),[a]),b=e.attributes["auto-complete-on-dismiss"]&&vi(n),x=f.useRef(!1),y=f.useCallback(()=>{x.current||(x.current=!0,b&&t.onComplete())},[t.onComplete,b]),v=f.useCallback(()=>{g(null),y()},[g,y]),{error:_,loading:A,callback:T}=It(async()=>{var re;if(p&&m.current&&m.current!=="blocked"&&!m.current.closed){m.current.focus();return}if(o===En.PersonaCreated||o===En.PersonaUpdated)return;const Y=await te.postResourceAction({id:n.id,type:n.type},"generate-reusable-persona-create-popup-one-time-link-code");if((re=Y==null?void 0:Y.meta)!=null&&re["one-time-link-code"]){const ae=new URL(e.attributes.url);ae.searchParams.append("code",Y.meta["one-time-link-code"]),ae.searchParams.append("component",e.name),ae.host=window.location.host,g(ae.toString())}},[p,o]);f.useEffect(()=>{var Y;if(p){const re=window.screenX+(window.outerWidth-Gu)/2,ae=window.screenY+(window.outerHeight-Wu)/2.5;m.current=window.open(p,Nc,`popup,width=${Gu},height=${Wu},left=${re},top=${ae}`),m.current||(m.current="blocked");const Ce=()=>{(m.current==="blocked"||!m.current||m.current.closed)&&(m.current=null,v())};window.addEventListener("focus",Ce);const we=Ie=>{var le;Ie.origin===new URL(p).origin&&(Ie.source===m.current||m.current==="blocked"&&Ie.source.name===Nc)&&(Ie.data===bs.CREATED?(a(Jo(En.PersonaCreated)),u(),y()):Ie.data===bs.DISMISSED&&(a(Jo(En.CtaDismissed)),m.current!=="blocked"&&((le=m.current)==null||le.close()),u(),y()))};window.addEventListener("message",we);const me=()=>{var Ie;m.current!=="blocked"&&((Ie=m.current)==null||Ie.close())};return window.addEventListener("close",me),()=>{window.removeEventListener("focus",Ce),window.removeEventListener("message",we),window.removeEventListener("close",me)}}else m.current!=="blocked"&&((Y=m.current)==null||Y.close()),m.current=null},[p]),f.useEffect(()=>()=>{var Y;g(null),m.current!=="blocked"&&((Y=m.current)==null||Y.close()),m.current=null},[]),Et({error:_,onError:()=>t.showMessage(h("errors.network")),onNetworkError:()=>t.showMessage(h("errors.network"))});const R=!Xt("inquiry:disable-reusable-personas-embedded-web"),O=Xt("inquiry:enable-verify-with-persona-brand-update"),D=f.useCallback(async Y=>{Y===c["start-button"]?N.isNonIframeHostedIntegration?(z.logAmplitude("reusable-persona.create.cta.started-hosted"),t.setComponent(e),t.route("/inquiry/create-persona/passkey-registration",{transition:Pi.SlideVertical})):N.isEmbeddedOrIframeIntegration&&R&&(z.logAmplitude("reusable-persona.create.cta.started-embedded"),await T()):Y===c["dismiss-button"]&&(z.logAmplitude("reusable-persona.create.cta.dismissed"),y(),a(Jo(En.CtaDismissed)),u())},[e,c,t,u,a,T,R,y]),L=f.useMemo(()=>({...t,onSubmit:D}),[t,D]);f.useEffect(()=>{if(o===En.CtaNotShown){const Y=setTimeout(()=>{d()},1e3);return()=>clearTimeout(Y)}},[d,o]);const[H,{enable:M,disable:B}]=st(),V=f.useRef(void 0),q=f.useCallback(()=>{M(),a(Jo(En.CtaShown)),cr(V.current),z.logAmplitude("reusable-persona.create.cta.shown")},[]),$=f.useCallback(()=>{setTimeout(cr,0)},[]),Q=f.useMemo(()=>n.attributes["reusable-persona-status"]?!1:N.isEmbeddedOrIframeIntegration?R:N.isNonIframeHostedIntegration,[R,n.attributes]);f.useEffect(()=>{Q&&z.logAmplitude("reusable-persona.create.btn-rendered")},[]);const G={overrides:{a:{component:C.a.withConfig({displayName:"ButtonCreatePersona__component",componentId:"sc-12sb4nb-5"})([""]),props:{target:Nc,onClick:Y=>{(m.current!=="blocked"||!p)&&(Y.preventDefault(),T())}}}}};return Q?i.jsxs(i.Fragment,{children:[i.jsx(qf,{visible:!!p&&o!==En.PersonaCreated,onClose:v,children:i.jsx(TI,{id:"create_persona__popup_overlay_text",children:i.jsx(J,{markdownOptions:G,children:e.attributes["popup-overlay-text"].replace("(#)",`(${p})`)})})}),i.jsx(Ia,{in:l,timeout:{enter:o===En.CtaShown?0:Il,exit:Il},mountOnEnter:!0,unmountOnExit:!0,onEntered:q,onExit:B,onExited:$,classNames:"dialog",children:i.jsx(Bh,{active:H,focusTrapOptions:{escapeDeactivates:!0,clickOutsideDeactivates:!0,allowOutsideClick:!0,initialFocus:!1,setReturnFocus:!1,fallbackFocus:document.body},children:i.jsx(_I,{children:i.jsx(RI,{styles:e.styles,children:i.jsxs(AI,{styles:e.styles,ref:V,children:[s.map(Y=>i.jsx(Po,{component:Y,inquiry:n,inquiryLoading:r||A,actionsApi:L},Y.name)),O&&i.jsx(EI,{id:"cta-card__close-button","data-test":"cta-card__close-button",onClick:()=>{u(),y()}})]})})})})})]}):null},NI=({component:e,actionsApi:t,inquiryLoading:n})=>{var o;const r=a=>{a.preventDefault(),t.setComponent(e),t.route("/inquiry/device-handoff/prompt")};return i.jsx(ge,{id:"device_handoff__button",type:"button",buttonType:(o=e.attributes["button-type"])!=null?o:ne.Primary,disabled:n,onClick:r,styles:e==null?void 0:e.styles,children:e.attributes.text})},jI=({component:e,inquiry:t})=>{const{"button-type":n,hidden:r,text:o,link:a}=e.attributes;return _t(e.name,t.attributes["next-step"].name)(r)?null:i.jsx(ge,{href:a,id:e.name,type:"button",buttonType:n!=null?n:ne.Primary,styles:e==null?void 0:e.styles,children:o})},PI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"button-type":o,disabled:a,hidden:s,text:c,"auto-submit-countdown-text":l,"auto-submit-interval-seconds":d}=e.attributes,[u]=K(),{loading:h,error:m,callback:p}=It(async R=>{R==null||R.preventDefault(),await n.onSubmit(e.name)},[n.onSubmit,e.name]);Et({error:m,onNetworkError:()=>n.showMessage(u("errors.network")),onError:R=>{R instanceof pt&&R.status===422?n.showMessage("Invalid configuration. Please check your parameters."):Z(R)}});const[g,b]=f.useState(d);f.useEffect(()=>{if(g!=null&&g>0){const R=setTimeout(()=>{g>1?b(g-1):(b(g-1),p())},1e3);return()=>clearTimeout(R)}},[g,p]);const x=_t(e.name,t.attributes["next-step"].name),y=x(s),v=h||r||x(a)===!0,[_,A]=f.useState(!1);if(f.useEffect(()=>{h&&A(!0),v||A(!1)},[h,v]),y)return null;const T=g>0&&l?l.replace("{time}",String(g)):c;return i.jsx(ge,{id:e.name,type:"submit",buttonType:o!=null?o:ne.Primary,onClick:p,disabled:v,isPending:_,styles:e==null?void 0:e.styles,children:T})},zu=400,Yu=650,jc="reusable-persona-verify-popup",DI=C.div.withConfig({displayName:"ButtonVerifyWithPersona__PopupOverlayText",componentId:"sc-qdldel-0"})(["font-family:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";width:75%;text-align:center;a{color:",";font-weight:bold;outline-color:",";}"],({theme:e})=>$t(e.fontFamily),I.Color.PrimaryWhite,I.Color.PrimaryWhite,I.Color.PrimaryWhite),OI=({component:e,actionsApi:t,inquiry:n,inquiryLoading:r})=>{var V;const{"button-type":o,disabled:a,hidden:s,text:c}=e.attributes,[l]=K(),d=Ps(),u=f.useRef(null),h=f.useRef(null),m=Ke(q=>q.inquiry.popupUrl),p=f.useCallback(q=>d(af(q)),[d]),g=Ke(q=>q.inquiry.cachedInquiryTransitionParams),b=f.useCallback(q=>d(sf(q)),[d]),[x,y]=f.useState(!1),{error:v,loading:_,callback:A}=It(async q=>{var Q;if(m&&u.current&&u.current!=="blocked"&&!u.current.closed){u.current.focus();return}const $=await te.postResourceAction({id:n.id,type:n.type},"generate-reusable-persona-verify-popup-one-time-link-code",{meta:{"transition-params":{"component-data":Object.entries(q).map(([G,Y])=>({name:G,value:Y}))}}});if((Q=$==null?void 0:$.meta)!=null&&Q["one-time-link-code"]){const G=new URL(e.attributes.url);G.searchParams.append("code",$.meta["one-time-link-code"]),G.searchParams.append("component",e.name),G.host=window.location.host,p(G.toString())}},[m]);f.useEffect(()=>{var q;if(m){const $=window.screenX+(window.outerWidth-zu)/2,Q=window.screenY+(window.outerHeight-Yu)/2.5;h.current=null,u.current=window.open(m,jc,`popup,width=${zu},height=${Yu},left=${$},top=${Q}`),u.current||(u.current="blocked");const G=()=>{(u.current==="blocked"||!u.current||u.current.closed)&&(u.current=null,p(null),h.current===ji.TRANSITION_STARTED&&(d(Nn()),y(!0),d(jn(n,{skipInquiryStateUpdateOnPoll:!0}))))};window.addEventListener("focus",G);const Y=ae=>{ae.origin===new URL(m).origin&&(ae.source===u.current||u.current==="blocked"&&ae.source.name===jc)&&(ae.data.name===ji.TRANSITION_POLLING?(d(Nn()),y(!0),d(jn(n,{pollingMode:an.BLOCKING,skipInquiryStateUpdateOnPoll:!0}))):ae.data.name===ji.TRANSITION_COMPLETED?h.current===ji.TRANSITION_STARTED&&(d(Nn()),y(!0),d(jn(n,{pollingMode:an.BLOCKING,skipInquiryStateUpdateOnPoll:!0}))):ae.data.name===ji.TRANSITION_ERRORED&&(d(Nn()),y(!0),d(jn(n,{pollingMode:an.BLOCKING,skipInquiryStateUpdateOnPoll:!0}))),h.current=ae.data.name)};window.addEventListener("message",Y);const re=()=>{var ae;u.current!=="blocked"&&((ae=u.current)==null||ae.close())};return window.addEventListener("close",re),()=>{window.removeEventListener("focus",G),window.removeEventListener("message",Y),window.removeEventListener("close",re)}}else u.current!=="blocked"&&((q=u.current)==null||q.close()),u.current=null},[m]),f.useEffect(()=>()=>{p(null)},[]),Et({error:v,onError:()=>t.showMessage(l("errors.network")),onNetworkError:()=>t.showMessage(l("errors.network"))}),f.useEffect(()=>{r||y(!1)},[r]);const T=!Xt("inquiry:disable-reusable-personas-embedded-web"),R=f.useCallback(async q=>{t.validateFormWithCallback(async $=>{b($),N.isNonIframeHostedIntegration?(z.logAmplitude("reusable-persona.verify.started-hosted"),t.setComponent(e),e.attributes["passkey-registration-as-primary-cta"]?t.route("/inquiry/create-persona/passkey-registration"):t.route("/inquiry/verify-with-persona/passkey-authentication")):N.isEmbeddedOrIframeIntegration&&T&&(z.logAmplitude("reusable-persona.verify.started-embedded"),await A($))})},[t,e,A,T,b]),O={overrides:{a:{props:{target:jc,onClick:q=>{(u.current!=="blocked"||!m)&&(q.preventDefault(),A(g))}}}}},D=_t((V=e.name)!=null?V:"",n.attributes["next-step"].name),L=D(s),H=I0(),M=f.useMemo(()=>L||!H?!1:N.isEmbeddedOrIframeIntegration?T:N.isNonIframeHostedIntegration,[L,T]);if(f.useEffect(()=>{M&&z.logAmplitude("reusable-persona.verify.btn-rendered")},[]),!M)return null;const B=r||_||D(a)||!!n.attributes["reusable-persona-status"];return i.jsxs(i.Fragment,{children:[i.jsx(qf,{visible:!!m,onClose:()=>p(null),children:i.jsx(DI,{id:"verify_with_persona__popup_overlay_text",children:i.jsx(J,{markdownOptions:O,children:e.attributes["popup-overlay-text"].replace("(#)",`(${m})`)})})}),i.jsx(ge,{id:"verify_with_persona__button",buttonType:o!=null?o:ne.Primary,onClick:R,disabled:B,styles:e==null?void 0:e.styles,isPending:r&&x||_,children:c})]})},Hf=C.div.withConfig({displayName:"StackBase__StackContainer",componentId:"sc-19md1e0-0"})(({styles:e})=>{var r,o,a,s,c,l,d,u,h,m,p,g,b,x,y;const t=(e==null?void 0:e["frame-positioning"].base.base)===ml.EdgeToEdge?`-${N.widgetPadding.left}px`:E((r=e==null?void 0:e.margin.base.base)==null?void 0:r.left),n=(e==null?void 0:e["frame-positioning"].base.base)===ml.EdgeToEdge?`-${N.widgetPadding.right}px`:E((o=e==null?void 0:e.margin.base.base)==null?void 0:o.right);return{display:"flex",flexWrap:"nowrap",borderStyle:"solid",width:(c=E((s=(a=e==null?void 0:e.width)==null?void 0:a.base)==null?void 0:s.base))!=null?c:`calc(100% - ${t} - ${n})`,marginTop:E((l=e==null?void 0:e.margin.base.base)==null?void 0:l.top),marginBottom:E((d=e==null?void 0:e.margin.base.base)==null?void 0:d.bottom),marginLeft:t,marginRight:n,flexDirection:`${e.axis.base.base===Xl.Vertical?"column":"row"}`,gap:E(e==null?void 0:e.gap.base.base),justifyContent:e==null?void 0:e.justify.base.base,paddingTop:E((u=e==null?void 0:e.padding.base.base)==null?void 0:u.top),paddingBottom:E((h=e==null?void 0:e.padding.base.base)==null?void 0:h.bottom),paddingLeft:E((m=e==null?void 0:e.padding.base.base)==null?void 0:m.left),paddingRight:E((p=e==null?void 0:e.padding.base.base)==null?void 0:p.right),backgroundColor:k(e==null?void 0:e["background-color"].base.base),borderColor:k(e==null?void 0:e["border-color"].base.base),borderTopWidth:E((g=e==null?void 0:e["border-width"].base.base)==null?void 0:g.top),borderBottomWidth:E((b=e==null?void 0:e["border-width"].base.base)==null?void 0:b.bottom),borderLeftWidth:E((x=e==null?void 0:e["border-width"].base.base)==null?void 0:x.left),borderRightWidth:E((y=e==null?void 0:e["border-width"].base.base)==null?void 0:y.right),borderRadius:E(e==null?void 0:e["border-radius"].base.base)}}),$f=C.div.withConfig({displayName:"StackBase__StackChild",componentId:"sc-19md1e0-1"})(({styles:e,index:t})=>{var a,s;const n=(s=(a=e==null?void 0:e["child-sizes"].base.base)==null?void 0:a[t])!=null?s:0,r=n===0;return{display:"flex",flexDirection:"column",justifyContent:e.axis.base.base===Xl.Vertical||e==null?void 0:e.alignment.base.base,flexGrow:n,flexShrink:r?0:1,flexBasis:r?"initial":0,":empty":{flexGrow:0,margin:`calc(${E(e==null?void 0:e.gap.base.base)} / -2)`},wordBreak:"break-word",'> img, [role="img"] svg':{maxWidth:"100% !important",height:"auto !important",objectFit:"contain",display:"block"}}}),LI=C(Hf).withConfig({displayName:"ClickableStack__Container",componentId:"sc-1d75rt7-0"})(["align-items:initial;cursor:pointer;transition-property:background-color,border-color;transition-duration:",";&:hover:enabled,&:focus:enabled{background-color:",";border-color:",";}&:active:enabled{background-color:",";border-color:",";}&:disabled{cursor:not-allowed;background-color:",";border-color:",";}"],it.Fast,e=>{var t;return k((t=e.styles)==null?void 0:t["background-color"].base.focused)},e=>{var t;return k((t=e.styles)==null?void 0:t["border-color"].base.focused)},e=>{var t;return k((t=e.styles)==null?void 0:t["background-color"].base.active)},e=>{var t;return k((t=e.styles)==null?void 0:t["border-color"].base.active)},e=>{var t,n;return k(e.isPending?(t=e.styles)==null?void 0:t["background-color"].base.active:(n=e.styles)==null?void 0:n["background-color"].base.disabled)},e=>{var t,n;return k(e.isPending?(t=e.styles)==null?void 0:t["border-color"].base.active:(n=e.styles)==null?void 0:n["border-color"].base.disabled)}),FI=({component:e,...t})=>{const{disabled:n,hidden:r,"transition-behavior":o}=e.attributes,{actionsApi:a,inquiry:s,inquiryLoading:c}=t,[l]=K(),{loading:d,error:u,callback:h}=It(async b=>{b.preventDefault(),o==="action"?await a.onActionButtonClick(e.name):await a.onSubmit(e.name)},[a.onSubmit,e.name]);Et({error:u,onNetworkError:()=>a.showMessage(l("errors.network")),onError:b=>{b instanceof pt&&b.status===422?a.showMessage("Invalid configuration. Please check your parameters."):Z(b)}});const m=_t(e.name,s.attributes["next-step"].name);if(m(r))return null;const g=d||c||m(n);return i.jsxs(LI,{as:"button",id:"clickable__stack",styles:e.styles,type:o==="action"?"button":"submit",onClick:h,disabled:g,isPending:d,children:[!t.isPreview&&e.attributes.children.map((b,x)=>i.jsx($f,{styles:e.styles,index:x,children:i.jsx(Po,{...t,component:b})},`${b.name}-${x}`)),t.isPreview&&t.childPreviews.map(b=>b.component)]})},MI=1e-4,VI=C.div.withConfig({displayName:"Footer__Container",componentId:"sc-atrlkw-0"})(["position:absolute;z-index:",";left:0;right:0;bottom:0;border-style:solid;display:flex;flex-direction:",";align-items:",";justify-content:space-between;@media ","{position:fixed;}",""],At.footer,({direction:e})=>{switch(e){case"end_to_start":return"row-reverse";case"top_to_bottom":return"column";case"start_to_end":default:return"row"}},({styles:e})=>{var t,n,r;return(r=(n=(t=e==null?void 0:e.justify)==null?void 0:t.base)==null?void 0:n.base)!=null?r:"center"},xt.isMobile,({styles:e})=>{var t,n,r,o,a,s,c,l,d,u;return W(["background-color:",";padding-top:",";padding-bottom:",";border-top-width:",";border-bottom-width:",";border-left-width:",";border-right-width:",";border-top-left-radius:",";border-top-right-radius:",";border-color:",";padding-left:",";padding-right:",";padding-left:calc( "," + env(safe-area-inset-left))};padding-right:calc( "," + env(safe-area-inset-right))};"],k(e==null?void 0:e["background-color"].base.base),E((t=e==null?void 0:e.padding.base.base)==null?void 0:t.top),E((n=e==null?void 0:e.padding.base.base)==null?void 0:n.bottom),E((r=e==null?void 0:e["border-width"].base.base)==null?void 0:r.top),E((o=e==null?void 0:e["border-width"].base.base)==null?void 0:o.bottom),E((a=e==null?void 0:e["border-width"].base.base)==null?void 0:a.left),E((s=e==null?void 0:e["border-width"].base.base)==null?void 0:s.right),E(e==null?void 0:e["border-radius"].base.base),E(e==null?void 0:e["border-radius"].base.base),k(e==null?void 0:e["border-color"].base.base),E((c=e==null?void 0:e.padding.base.base)==null?void 0:c.left),E((l=e==null?void 0:e.padding.base.base)==null?void 0:l.right),E((d=e==null?void 0:e.padding.base.base)==null?void 0:d.left),E((u=e==null?void 0:e.padding.base.base)==null?void 0:u.right))}),BI=({component:e,...t})=>{const[n,r]=f.useState(F.base*7),o=f.useRef(),a=()=>{var c,l;const s=((l=(c=o.current)==null?void 0:c.getBoundingClientRect().height)!=null?l:0)-parseInt(F.widgetPadding);s>=0&&Math.abs(s-n)>MI&&r(s)};return f.useLayoutEffect(()=>{a()}),f.useEffect(()=>{const s=setTimeout(a,0);return()=>clearTimeout(s)},[]),i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-hidden":!0,style:{height:n}}),i.jsx(VI,{"data-test":"footer",ref:o,direction:e.attributes.direction,styles:e.styles,children:i.jsxs(i.Fragment,{children:[!t.isPreview&&e.attributes.children.map(s=>f.createElement(Po,{...t,key:s.name,component:s})),t.isPreview&&t.childPreviews.map(s=>i.jsx(f.Fragment,{children:s.component},s.name))]})})]})},qI=({component:e,inquiry:t})=>{var c,l,d;const{hidden:n,"launch-button-text":r}=e.attributes;if(_t(e.name,t.attributes["next-step"].name)(n))return null;const s=!N.isDashboardFLE;return i.jsx(i.Fragment,{children:i.jsx(ge,{id:"government_id_nfc_scan__button_submit",type:"submit",buttonType:ne.Primary,disabled:s,styles:(d=(l=(c=e==null?void 0:e.styles)==null?void 0:c["button-primary-style"])==null?void 0:l.base)==null?void 0:d.base,children:r||"Start scan"})})},UI=({component:e,...t})=>{const{hidden:n}=e.attributes,{inquiry:r}=t;return _t(e.name,r.attributes["next-step"].name)(n)?null:i.jsxs(Hf,{styles:e.styles,children:[!t.isPreview&&e.attributes.children.map((s,c)=>i.jsx($f,{styles:e.styles,index:c,children:i.jsx(Po,{...t,component:s})},`${s.name}-${c}`)),t.isPreview&&t.childPreviews.map(s=>s.component)]})},HI=C.div.attrs(()=>({role:"img","aria-label":"Pictograph of documents to upload","aria-hidden":!0,alt:null})).withConfig({displayName:"VerificationHero__Container",componentId:"sc-1xtav50-0"})(["display:flex;align-items:center;justify-content:center;border-radius:8px;background-color:",";height:160px;width:100%;svg{margin:",";}"],({$backgroundColor:e,theme:t})=>e!=null?e:t.iconColorHighlight,I.Spacing[2]),In=({children:e,backgroundColor:t,className:n})=>i.jsx(HI,{className:n,$backgroundColor:t,"data-test":"verification-hero-banner",children:e}),Ku=e=>{if(typeof e=="string"&&e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i)){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!t)throw new Error("Color can be only hex or rgb array (ex. [10,20,30])");return[Math.round(parseInt(t[1],16)/255*1e3)/1e3,Math.round(parseInt(t[2],16)/255*1e3)/1e3,Math.round(parseInt(t[3],16)/255*1e3)/1e3]}else{if(typeof e=="object"&&e.length===3&&e.every(t=>t>=0&&t<=255))return[Math.round(e[0]/255*1e3)/1e3,Math.round(e[1]/255*1e3)/1e3,Math.round(e[2]/255*1e3)/1e3];if(e)throw new Error("Color can be only hex or rgb array (ex. [10,20,30])");return}},Pc=e=>Math.round(e*1e3)/1e3,$I=(e,t,n,r=!0)=>{const o=Ku(e),a=Ku(t);if(!o||!a)throw new Error("Proper colors must be used for both source and target");function s(c,l,d){if(d&&d.s&&Array.isArray(d.s)&&d.s.length===4)c[0]===d.s[0]&&c[1]===d.s[1]&&c[2]===d.s[2]&&(d.s=[...l,1]);else if(d&&d.c&&d.c.k)Array.isArray(d.c.k)&&typeof d.c.k[0]!="number"?s(c,l,d.c.k):c[0]===Pc(d.c.k[0])&&c[1]===Pc(d.c.k[1])&&c[2]===Pc(d.c.k[2])&&(d.c.k=l);else for(const u in d)typeof d[u]=="object"&&s(c,l,d[u]);return d}return s(o,a,r?ls(n):n)},Bo=(e,t)=>e.reduce((n,[r,o])=>$I(r,o,n),t),GI=C("div").withConfig({displayName:"AnimatedCheck__AnimationContainer",componentId:"sc-1ixhrx1-0"})(["height:250px;width:250px;margin:-32px;.lines,.green-c-1,.green-c-2,.white-c-1,.white-c-2,.check-c{transform-origin:50% 50%;}.white-c-1{transform:scale(0);animation:reset 0.6s 0.2s forwards;fill:",";}.green-c-1{transform:scale(0);opacity:0.4;animation:reset 0.8s forwards;fill:",";}@keyframes reset{to{transform:initial;}}.lines{transform:scale(0);animation:lines 0.8s 0.4s forwards;}.lines path{fill:",";}@keyframes lines{to{transform:scale(1.5);}}.white-c-2{transform:scale(0);animation:reset 0.6s 1s forwards;fill:",";}.green-c-2{transform:scale(0);opacity:0.4;animation:reset 0.8s 0.8s forwards;fill:",";}.check-c{transform:scale(0);animation:check-c 0.3s 0.7s forwards ease-in-out;fill:",";}@keyframes check-c{0%{transform:scale(0);opacity:0;}70%{transform:scale(1.3);}100%{transform:scale(1);}}.check{stroke-dasharray:250;stroke-dashoffset:250;animation:check 0.2s 1s forwards ease-in-out;}@keyframes check{to{stroke-dashoffset:0;}}"],e=>{var t;return(t=e.$backgroundColor)!=null?t:e.theme.colorModalBackground},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess},e=>{var t;return(t=e.$backgroundColor)!=null?t:e.theme.colorModalBackground},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess});function Gf({$primaryColor:e,$backgroundColor:t}){return i.jsx(GI,{$primaryColor:e,$backgroundColor:t,children:i.jsxs("svg",{role:"img",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:[i.jsx("circle",{className:"green-c-1",fill:"#6ABF39",cx:"500",cy:"500",r:"496.3"}),i.jsx("circle",{className:"white-c-1",fill:"#FFFFFF",cx:"500",cy:"500",r:"500.0"}),i.jsx("circle",{className:"green-c-2",fill:"#6ABF39",cx:"500",cy:"500",r:"496.3"}),i.jsx("circle",{className:"white-c-2",fill:"#FFFFFF",cx:"500",cy:"500",r:"500.0"}),i.jsx("circle",{className:"check-c",fill:"#6ABF39",cx:"500",cy:"500",r:"272.4"}),i.jsx("clipPath",{id:"lines_mask",children:i.jsx("circle",{className:"lines-mask",fill:"#FFFFFF",cx:"500",cy:"500",r:"496.3"})}),i.jsx("g",{clipPath:"url(#lines_mask)",children:i.jsxs("g",{className:"lines",children:[i.jsx("path",{fill:"#6ABF39",d:"M268.6,261.2l-100.8-104l-10.6,10.6l104,100.8C263.7,266.1,266.1,263.7,268.6,261.2z"}),i.jsx("path",{fill:"#6ABF39",d:"M167.5,500c0-1.7,0-3.5,0.1-5.2l-144.8-2.3v14.9l144.8-2.3C167.5,503.5,167.5,501.7,167.5,500z"}),i.jsx("path",{fill:"#6ABF39",d:"M261.2,731.4l-104,100.8l10.6,10.6l100.8-104C266.1,736.3,263.7,733.9,261.2,731.4z"}),i.jsx("path",{fill:"#6ABF39",d:"M500,832.5c-1.7,0-3.5,0-5.2-0.1l-2.3,144.8h14.9l-2.3-144.8C503.5,832.5,501.7,832.5,500,832.5z"}),i.jsx("path",{fill:"#6ABF39",d:"M738.8,731.4c-2.4,2.5-4.9,4.9-7.4,7.4l100.8,104l10.6-10.6L738.8,731.4z"}),i.jsx("path",{fill:"#6ABF39",d:"M832.4,494.8c0,1.7,0.1,3.5,0.1,5.2s0,3.5-0.1,5.2l144.8,2.3v-14.9L832.4,494.8z"}),i.jsx("path",{fill:"#6ABF39",d:"M738.8,268.6l104-100.8l-10.6-10.6l-100.8,104C733.9,263.7,736.3,266.1,738.8,268.6z"}),i.jsx("path",{fill:"#6ABF39",d:"M500,167.5c1.7,0,3.5,0,5.2,0.1l2.3-144.8h-14.9l2.3,144.8C496.5,167.5,498.3,167.5,500,167.5z"})]})}),i.jsx("polyline",{className:"check",fill:"none",stroke:"#FFFFFF",strokeWidth:"30",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"416.5,520 470.1,573.7 583.9,459.9 "})]})})}const WI=C.div.withConfig({displayName:"ImageLocal__AnimatedCheckContainer",componentId:"sc-aey58n-0"})(["display:flex;flex-direction:column;align-items:",";margin-top:calc("," + ",");margin-bottom:calc("," + ",");"],({justify:e})=>e!=null?e:"center",({marginTop:e})=>e!=null?e:"0",I.Spacing[6],({marginBottom:e})=>e!=null?e:"0",I.Spacing[6]),qo=C.div.withConfig({displayName:"ImageLocal__FailureReasonPictograph",componentId:"sc-aey58n-1"})(["display:flex;flex-direction:column;align-items:",";"],({justify:e})=>e!=null?e:"center");ie.OptionFlagIcon,ie.OptionGlobeIcon,ie.OptionHomeIcon,ie.OptionIdIcon,ie.OptionIdDocumentIcon,ie.OptionUserIcon,ie.OptionPhoneIcon;const zI=[ie.OptionFlagIcon,ie.OptionGlobeIcon,ie.OptionHomeIcon,ie.OptionIdIcon,ie.OptionPhoneIcon,ie.OptionIdDocumentIcon,ie.OptionUserIcon,ie.OptionCheckIcon,ie.OptionChevronIcon,ie.ReusablePersonaLogo,ie.CreatePersonaCtaCardIcon,ie.CreatePersonaPasskeyRegistrationSpeedIcon,ie.CreatePersonaPasskeyRegistrationShieldIcon,ie.CreatePersonaPasskeyRegistrationFingerprintIcon,ie.CreatePersonaVerifyMobileDeviceHero,ie.VerifyWithPersonaPasskeyAuthenticationAddressIcon,ie.VerifyWithPersonaPasskeyAuthenticationIdIcon,ie.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon,ie.VerifyWithPersonaPasskeyAuthenticationNameIcon,ie.VerifyWithPersonaPasskeyAuthenticationSelfieIcon,ie.VerifyWithPersonaPasskeyAuthenticationDataSharedIcon,ie.StepperConnectorIcon,ie.StartHero,ie.DocumentStartHero],Wf={[ie.AnimatedCheck]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ie.DocumentStartHero]:{width:{value:100,unit:"%"},height:{value:184,unit:"px"}},[ie.FailedIcon]:{width:{value:140,unit:"px"},height:{value:120,unit:"px"}},[ie.StartHero]:{width:{value:240,unit:"px"},height:{value:177,unit:"px"}},[ie.FailureDefaultIcon]:{width:{value:100,unit:"px"},height:{value:100,unit:"px"}},[ie.FailureDocumentIcon]:{width:{value:149,unit:"px"},height:{value:120,unit:"px"}},[ie.FailureSelfieIcon]:{width:{value:103,unit:"px"},height:{value:111,unit:"px"}},[ie.IdBackIcon]:{width:{value:149,unit:"px"},height:{value:100,unit:"px"}},[ie.IdFrontIcon]:{width:{value:149,unit:"px"},height:{value:100,unit:"px"}},[ie.OptionFlagIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionGlobeIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionHomeIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionIdIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionIdDocumentIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionUserIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionPhoneIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionCheckIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ie.OptionChevronIcon]:{width:{value:8,unit:"px"},height:{value:14,unit:"px"}},[ie.ReusablePersonaLogo]:{width:{value:148,unit:"px"},height:{value:60,unit:"px"}},[ie.CreatePersonaPasskeyRegistrationHero]:{width:{value:181,unit:"px"},height:{value:181,unit:"px"}},[ie.CreatePersonaCtaCardIcon]:{width:{value:41,unit:"px"},height:{value:44,unit:"px"}},[ie.CreatePersonaPasskeyRegistrationSpeedIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.CreatePersonaPasskeyRegistrationShieldIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.CreatePersonaPasskeyRegistrationFingerprintIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.CreatePersonaSuccessHero]:{width:{value:354,unit:"px"},height:{value:208,unit:"px"}},[ie.CreatePersonaVerifyMobileDeviceHero]:{width:{value:100,unit:"px"},height:{value:170,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationPersonaLogo]:{width:{value:128,unit:"px"},height:{value:128,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationHero]:{width:{value:181,unit:"px"},height:{value:181,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationAddressIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationDataSharedIcon]:{width:{value:80,unit:"px"},height:{value:80,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationIdIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationNameIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.VerifyWithPersonaPasskeyAuthenticationSelfieIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ie.GovernmentIdNfcScanBackClosed]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ie.GovernmentIdNfcScanFrontClosed]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ie.GovernmentIdNfcScanPhotoPage]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ie.GovernmentIdNfcScanIdCard]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ie.GovernmentIdNfcScanBackThenFront]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ie.StepperIncompleteIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ie.StepperCurrentIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ie.StepperErroredIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ie.StepperCompletedIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ie.StepperConnectorIcon]:{width:{value:10,unit:"px"},height:{value:32,unit:"px"}}},YI=({component:e,inquiry:t})=>{var R,O,D,L,H,M,B,V,q,$,Q,G,Y,re,ae,Ce,we,me,Ie,le,ee,ce,_e,pe,Je,lt,ue;const{attributes:{"image-key":n,hidden:r}}=e;if(_t(e.name,t==null?void 0:t.attributes["next-step"].name)(r))return null;const s=E((O=(R=e.styles)==null?void 0:R.height)==null?void 0:O.base.base),c=E((L=(D=e.styles)==null?void 0:D.width)==null?void 0:L.base.base),l=E((B=(M=(H=e.styles)==null?void 0:H.margin)==null?void 0:M.base.base)==null?void 0:B.top),d=E(($=(q=(V=e.styles)==null?void 0:V.margin)==null?void 0:q.base.base)==null?void 0:$.bottom),u=E((Y=(G=(Q=e.styles)==null?void 0:Q.margin)==null?void 0:G.base.base)==null?void 0:Y.left),h=E((Ce=(ae=(re=e.styles)==null?void 0:re.margin)==null?void 0:ae.base.base)==null?void 0:Ce.right),m=(we=e.styles)==null?void 0:we.justify.base.base,p=k((le=(Ie=(me=e.styles)==null?void 0:me["fill-color"])==null?void 0:Ie.base)==null?void 0:le.base),g=k((ce=(ee=e.styles)==null?void 0:ee["fill-color"])==null?void 0:ce.background.base),b=k((pe=(_e=e.styles)==null?void 0:_e["fill-color"])==null?void 0:pe.highlight.base),x=k((ue=(lt=(Je=e.styles)==null?void 0:Je["stroke-color"])==null?void 0:lt.base)==null?void 0:ue.base),y={$primaryColor:p,$backgroundColor:g,$highlightColor:b,$strokeColor:x},v=Wf[n],_={marginTop:l,marginBottom:d,marginLeft:u,marginRight:h},A=[["#290087",x],["#322B7E",x],["#CBB2FF",p],["#F1E9FF",b],["#FFFFFF",g]].filter(Pe=>Pe[1]!=null&&Pe[0]!==Pe[1].toUpperCase()),T=zI.includes(n)?{"aria-hidden":!0,alt:null}:null;switch(n){case ie.AnimatedCheck:return i.jsx(WI,{role:"img","aria-label":"Checkmark icon","data-test":"image-local__animated-check",marginTop:l,marginBottom:d,justify:m,style:{marginLeft:u,marginRight:h},...T,children:i.jsx(Gf,{$primaryColor:p,$backgroundColor:g})});case ie.FailedIcon:return i.jsx($e,{role:"img","aria-label":"Failed icon",justify:m,...T,..._,children:i.jsx(ye,{...y,children:i.jsx(Wl,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.StartHero:return i.jsx($e,{role:"img","aria-label":"Start hero image",justify:m,...T,..._,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(bC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.FailureDefaultIcon:return i.jsx(qo,{role:"img","aria-label":"Failed icon",justify:m,...T,children:i.jsx(ye,{...y,children:i.jsx(gC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height),marginTop:l,marginBottom:d,marginLeft:u,marginRight:h}})})});case ie.FailureDocumentIcon:return i.jsx(qo,{role:"img","aria-label":"Document icon",justify:m,...T,children:i.jsx(ye,{...y,children:i.jsx(sp,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height),marginTop:l,marginBottom:d,marginLeft:u,marginRight:h}})})});case ie.FailureSelfieIcon:return i.jsx(qo,{role:"img","aria-label":"Selfie icon",justify:m,...T,children:i.jsx(ye,{...y,children:i.jsx(fC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height),marginTop:l,marginBottom:d,marginLeft:u,marginRight:h}})})});case ie.IdBackIcon:return i.jsx(qo,{role:"img","aria-label":"ID back icon",justify:m,...T,children:i.jsx(ye,{...y,children:i.jsx(pC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height),marginTop:l,marginBottom:d,marginLeft:u,marginRight:h}})})});case ie.IdFrontIcon:return i.jsx(qo,{role:"img","aria-label":"ID front icon",justify:m,...T,children:i.jsx(ye,{...y,children:i.jsx(ap,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height),marginTop:l,marginBottom:d,marginLeft:u,marginRight:h}})})});case ie.DocumentStartHero:return i.jsx($e,{height:null,width:null,role:null,"aria-label":null,justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,style:{width:"100%"},children:i.jsx(In,{backgroundColor:b,children:i.jsx(Gl,{height:80,width:"100%"})})})});case ie.OptionFlagIcon:return i.jsx($e,{role:"img","aria-label":"Flag option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(op,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionGlobeIcon:return i.jsx($e,{role:"img","aria-label":"Globe option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx($l,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionHomeIcon:return i.jsx($e,{role:"img","aria-label":"Home option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(Hl,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionIdIcon:return i.jsx($e,{role:"img","aria-label":"ID option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(Ul,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionPhoneIcon:return i.jsx($e,{role:"img","aria-label":"Phone option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(hC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionIdDocumentIcon:return i.jsx($e,{role:"img","aria-label":"Document ID option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(mC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionUserIcon:return i.jsx($e,{role:"img","aria-label":"User option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(uC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionCheckIcon:return i.jsx($e,{role:"img","aria-label":"Check option icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(dC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.OptionChevronIcon:return i.jsx($e,{role:"img","aria-label":"Chevron icon",justify:m,..._,...T,children:i.jsx(ye,{vectorEffect:"initial",...y,children:i.jsx(Ql,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})})});case ie.ReusablePersonaLogo:return i.jsx($e,{role:"img","aria-label":"Reusable Persona logo",justify:So.Start,..._,...T,children:i.jsx(lC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.CreatePersonaCtaCardIcon:return i.jsx(ye,{role:"img","aria-label":"Create Persona card icon",vectorEffect:"initial",...y,...T,children:i.jsx(cC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.CreatePersonaPasskeyRegistrationHero:return i.jsx(Gn,{role:"img",animationData:sC,"aria-label":"Create Persona passkey registration hero image",loop:!0,style:{width:`min(${c!=null?c:E(v.width)}, 1000px)`,height:`min(${s!=null?s:E(v.height)}, 768px)`}});case ie.CreatePersonaPasskeyRegistrationSpeedIcon:return i.jsx(ye,{role:"img","aria-label":"Create Persona passkey registration icon",vectorEffect:"initial",...y,...T,children:i.jsx(aC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.CreatePersonaPasskeyRegistrationShieldIcon:return i.jsx(ye,{role:"img","aria-label":"Create Persona passkey registration icon",vectorEffect:"initial",...y,...T,children:i.jsx(oC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.CreatePersonaPasskeyRegistrationFingerprintIcon:return i.jsx(ye,{role:"img","aria-label":"Create Persona passkey registration icon",vectorEffect:"initial",...y,...T,children:i.jsx(rC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.CreatePersonaSuccessHero:return i.jsx(Gn,{role:"img","aria-label":"Create Persona success hero image",animationData:iC,loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height),maxHeight:"1000px",maxWidth:"768px"}});case ie.CreatePersonaVerifyMobileDeviceHero:return i.jsx($e,{role:"img","aria-label":"Verify mobile device hero image",justify:m,..._,...T,children:i.jsx(nC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationHero:return i.jsx(Gn,{role:"img",animationData:tC,"aria-label":"Verify with Persona passkey authentication hero image",loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}});case ie.VerifyWithPersonaPasskeyAuthenticationPersonaLogo:return i.jsx(ye,{role:"img","aria-label":"Verify with Persona passkey authentication logo",vectorEffect:"initial",...y,...T,children:i.jsx(eC,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationAddressIcon:return i.jsx(ye,{role:"img","aria-label":"Verify with Persona passkey authentication address icon",vectorEffect:"initial",...y,...T,children:i.jsx(X1,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationDataSharedIcon:return i.jsx($e,{role:"img","aria-label":"Verify with Persona passkey authentication data shared icon",justify:m,..._,...T,children:i.jsx(J1,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationIdIcon:return i.jsx(ye,{role:"img","aria-label":"Verify with Persona passkey authentication ID icon",vectorEffect:"initial",...y,...T,children:i.jsx(Z1,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon:return i.jsx(ye,{role:"img","aria-label":"Verify with Persona passkey authentication individual attributes icon",vectorEffect:"initial",...y,...T,children:i.jsx(Q1,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationNameIcon:return i.jsx(ye,{role:"img","aria-label":"Verify with Persona passkey authentication name icon",vectorEffect:"initial",...y,...T,children:i.jsx(K1,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.VerifyWithPersonaPasskeyAuthenticationSelfieIcon:return i.jsx(ye,{role:"img","aria-label":"Verify with Persona passkey authentication selfie icon",vectorEffect:"initial",...y,...T,children:i.jsx(Y1,{style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}})});case ie.GovernmentIdNfcScanBackClosed:return i.jsx(Gn,{role:"img","aria-label":"Government Id Nfc scan back of closed id image",animationData:Bo(A,IC),loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}});case ie.GovernmentIdNfcScanFrontClosed:return i.jsx(Gn,{role:"img","aria-label":"Government Id Nfc scan front of closed id image",animationData:Bo(A,yC),loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}});case ie.GovernmentIdNfcScanPhotoPage:return i.jsx(Gn,{role:"img","aria-label":"Government Id Nfc scan photo page image",animationData:Bo(A,vC),loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}});case ie.GovernmentIdNfcScanIdCard:return i.jsx(Gn,{role:"img","aria-label":"Government Id Nfc scan id card image",animationData:Bo(A,xC),loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}});case ie.GovernmentIdNfcScanBackThenFront:return i.jsx(Gn,{role:"img","aria-label":"Government Id Nfc scan back then front of id image",animationData:Bo(A,CC),loop:!0,style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)}});case ie.StepperIncompleteIcon:return i.jsx(z1,{role:"img","aria-label":"incomplete step",style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)},...T});case ie.StepperCurrentIcon:return i.jsx(W1,{role:"img","aria-label":"current step",style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)},...T});case ie.StepperCompletedIcon:return i.jsx(G1,{role:"img","aria-label":"step completed",style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)},...T});case ie.StepperErroredIcon:return i.jsx($1,{role:"img","aria-label":"step errored",style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)},...T});case ie.StepperConnectorIcon:return i.jsx(H1,{role:"img",style:{width:c!=null?c:E(v.width),height:s!=null?s:E(v.height)},...T});default:return null}},KI=e=>({mainText:e.main_text,secondaryText:e.secondary_text}),Ai=(...e)=>(...t)=>{e.forEach(n=>n&&n(...t))},cu=class cu extends f.Component{constructor(t){super(t),this.init=()=>{if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");this.autocompleteService=new window.google.maps.places.AutocompleteService,this.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,this.setState(n=>n.ready?null:{ready:!0})},this.autocompleteCallback=(n,r)=>{var a,s,c;if(this.setState({loading:!1}),r!==this.autocompleteOK){(s=(a=this.props).onError)==null||s.call(a,r,this.clearSuggestions);return}const{highlightFirstSuggestion:o}=this.props;this.setState({suggestions:(c=n==null?void 0:n.map((l,d)=>({description:l.description,placeId:l.place_id,active:!!(o&&d===0),index:d,formattedSuggestion:KI(l.structured_formatting),matchedSubstrings:l.matched_substrings,terms:l.terms,types:l.types})))!=null?c:[],hideSuggestions:!1})},this.fetchPredictions=()=>{var r;const{value:n}=this.props;n!=null&&n.length&&(this.setState({loading:!0}),(r=this.autocompleteService)==null||r.getPlacePredictions({...this.props.searchOptions,input:n},this.autocompleteCallback))},this.clearSuggestions=()=>{this.setState({suggestions:[]})},this.clearActive=()=>{this.setState({suggestions:this.state.suggestions.map(n=>({...n,active:!1}))})},this.hideSuggestions=()=>{this.setState({...this.state,hideSuggestions:!0})},this.handleSelect=(n,r,o)=>{var a,s;this.hideSuggestions(),this.props.onSelect?this.props.onSelect(n,r,o):(s=(a=this.props).onChange)==null||s.call(a,n)},this.getActiveSuggestion=()=>this.state.suggestions.find(n=>n.active),this.selectActiveAtIndex=n=>{this.setActiveAtIndex(n)},this.handleEnterKey=()=>{const n=this.getActiveSuggestion();n==null?this.handleSelect(this.props.value,null,null):this.handleSelect(n.description,n.placeId,n)},this.handleDownKey=()=>{if(this.state.suggestions.length===0)return;const n=this.getActiveSuggestion();n==null?this.selectActiveAtIndex(0):n.index!==this.state.suggestions.length-1&&this.selectActiveAtIndex(n.index+1)},this.handleUpKey=()=>{if(this.state.suggestions.length===0)return;const n=this.getActiveSuggestion();n==null?this.selectActiveAtIndex(this.state.suggestions.length-1):n.index!==0&&this.selectActiveAtIndex(n.index-1)},this.handleInputKeyDown=n=>{switch(n.key){case"Enter":n.preventDefault(),this.handleEnterKey();break;case"ArrowDown":n.preventDefault(),this.handleDownKey();break;case"ArrowUp":n.preventDefault(),this.handleUpKey();break;case"Escape":this.hideSuggestions();break}},this.setActiveAtIndex=n=>{this.setState({suggestions:this.state.suggestions.map((r,o)=>o===n?{...r,active:!0}:{...r,active:!1})})},this.handleInputChange=n=>{var o,a;const{value:r}=n.target;if((a=(o=this.props).onChange)==null||a.call(o,r),this.setState({userInputValue:r}),!r){this.clearSuggestions();return}this.props.shouldFetchSuggestions&&this.debouncedFetchPredictions()},this.handleInputOnBlur=()=>{this.mousedownOnSuggestion||this.hideSuggestions()},this.handleInputOnFocus=()=>{this.setState({...this.state,hideSuggestions:!1})},this.getActiveSuggestionId=()=>{const n=this.getActiveSuggestion();return n?`PlacesAutocomplete__suggestion-${n.placeId}`:void 0},this.getIsExpanded=()=>this.state.suggestions.length>0,this.getInputProps=n=>({...{type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":this.getIsExpanded(),"aria-activedescendant":this.getActiveSuggestionId(),disabled:!this.state.ready},...n,onKeyDown:Ai(this.handleInputKeyDown,n==null?void 0:n.onKeyDown),onBlur:Ai(this.handleInputOnBlur,n==null?void 0:n.onBlur),onFocus:Ai(this.handleInputOnFocus,n==null?void 0:n.onFocus),value:this.props.value,onChange:o=>{this.handleInputChange(o)}}),this.getSuggestionItemProps=(n,r={})=>{const o=this.handleSuggestionMouseEnter.bind(this,n.index),a=this.handleSuggestionClick.bind(this,n);return{...r,key:n.placeId,id:this.getActiveSuggestionId(),role:"option",onMouseEnter:Ai(o,r.onMouseEnter),onMouseLeave:Ai(this.handleSuggestionMouseLeave,r.onMouseLeave),onMouseDown:Ai(this.handleSuggestionMouseDown,r.onMouseDown),onMouseUp:Ai(this.handleSuggestionMouseUp,r.onMouseUp),onTouchStart:Ai(this.handleSuggestionTouchStart,r.onTouchStart),onTouchEnd:Ai(this.handleSuggestionMouseUp,r.onTouchEnd),onClick:Ai(a,r.onClick)}},this.handleSuggestionMouseEnter=n=>{this.setActiveAtIndex(n)},this.handleSuggestionMouseLeave=()=>{this.mousedownOnSuggestion=!1,this.clearActive()},this.handleSuggestionMouseDown=n=>{n.preventDefault(),this.mousedownOnSuggestion=!0},this.handleSuggestionTouchStart=()=>{this.mousedownOnSuggestion=!0},this.handleSuggestionMouseUp=()=>{this.mousedownOnSuggestion=!1},this.handleSuggestionClick=(n,r)=>{r&&r.preventDefault&&r.preventDefault();const{description:o,placeId:a}=n;this.handleSelect(o,a,n),setTimeout(()=>{this.mousedownOnSuggestion=!1})},this.state={loading:!1,suggestions:[],userInputValue:t.value,ready:!t.googleCallbackName,hideSuggestions:!0},this.debouncedFetchPredictions=S0(this.fetchPredictions,t.debounce)}componentDidMount(){const{googleCallbackName:t}=this.props;t?window.google&&window.google.maps&&window.google.maps.places?this.init():window[t]=this.init:this.init()}componentWillUnmount(){const{googleCallbackName:t}=this.props;t&&window[t]&&delete window[t]}shouldComponentUpdate(t,n){let r=!1;return Object.keys(this.props).forEach(s=>{this.props[s]!==t[s]&&(r=!0)}),Object.keys(this.state).forEach(s=>{this.state[s]!==n[s]&&s!=="userInputValue"&&(r=!0)}),r}render(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.hideSuggestions?[]:this.state.suggestions})}};cu.defaultProps={onError:(t,n)=>console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,t),searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};let Ss=cu;const zf=e=>{const t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((r,o)=>{t.geocode({placeId:e},(a,s)=>{s!==n||a==null?o(s):r(a)})})},Sl=vt(I.Color.CoreSlate700).fade(.9).rgb().string();function ko(e,t){var s,c,l;const n=t.colorPrimary,r=t.borderRadius?t.borderRadius:un.base,o=/(\d+)px/.exec(r);let a=r;return o&&parseInt(o[1],10)>4&&(a=un.rounded),W(["font-family:",";border-radius:",";border-style:solid;border-width:1px;box-sizing:border-box;display:block;min-width:0;padding:",";width:100%;height:",";font-size:",";font-weight:",";line-height:",";outline:0 !important;box-shadow:0 0 0 0 ",";transition:",";",";&::placeholder{font-weight:",";}&:focus-within{background-color:",";border-color:",";color:",";box-shadow:0 0 0 1px ",";&::placeholder{color:",";opacity:0.6;}}&:disabled{background-color:",";border-color:",";color:",";-webkit-text-fill-color:",";&::placeholder{color:",";-webkit-text-fill-color:",";opacity:1;}}"],$t(t.fontFamily),a,F.inputPadding,Vi.input,Yt.input,pn.regular,Yn.input,I.Color.CorePurple900,Ra.fast,e.hasError?W(["border-color:",";background-color:",";color:",";&::placeholder{color:",";opacity:0.7;}"],t.colorError,vt(t.colorError).fade(.97).rgb().string(),t.colorError,t.colorError):e.hasWarning?W(["border-color:",";background-color:",";color:",";&::placeholder{color:",";opacity:0.7;}"],t.colorWarning,vt(t.colorWarning).fade(.97).rgb().string(),t.colorWarning,t.colorWarning):W(["border-color:",";background-color:",";color:",";&::placeholder{color:",";opacity:0.6;}"],t.colorInputBorder,t.colorInputBackground,(s=t.colorFont)!=null?s:I.Color.CoreSlate1000,(c=t.colorFont)!=null?c:I.Color.CoreSlate1000),pn.regular,t.colorInputBackground,n,t.colorFont?t.colorFont:I.Color.CoreSlate1000,n,(l=t.colorFont)!=null?l:I.Color.CoreSlate1000,Sl,I.Color.CoreSlate200,I.Color.CoreSlate900,I.Color.CoreSlate900,I.Color.CoreSlate800,I.Color.CoreSlate800)}const Bi=W(["margin-bottom:",";",""],I.Spacing[4],N.isDashboardFLE&&W(["pointer-events:visible;"])),qi=e=>{var t,n;return W([""," margin:",";"],Bi,qp((n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base))};W(["margin-bottom:",";padding-top:",";"],I.Spacing[2],I.Spacing[2]);const No=W(["margin-bottom:",";position:relative;padding-top:",";"],I.Spacing[2],I.Spacing[4]),jo=W(["color:",";font-size:",";margin-top:",";"],({theme:e})=>e.colorError,({theme:e})=>e.fontSizeSmall,I.Spacing[2]),QI=e=>{var t,n,r,o,a,s,c,l;return W([""," color:",";font-family:",";font-size:",";font-weight:",";"],jo,k((n=(t=e==null?void 0:e["text-color"])==null?void 0:t.error)==null?void 0:n.base),$t((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.error)==null?void 0:o.base),E((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.error)==null?void 0:s.base),dn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.error)==null?void 0:l.base))},tc=W(["label,legend{",";font-weight:500;font-family:inherit;margin-bottom:",";transition-duration:",";}&:focus-within label{color:",";}"],ui.sm,I.Spacing[2],it.Fast,({theme:e})=>e.colorPrimary),Dn=e=>{var t,n,r,o,a,s,c,l,d,u;return W([""," label,legend{color:",";font-family:",";font-size:",";font-weight:",";}&:focus-within label{color:",";}"],tc,k((n=(t=e==null?void 0:e["text-color"])==null?void 0:t.label)==null?void 0:n.base),$t((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.label)==null?void 0:o.base),E((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.label)==null?void 0:s.base),dn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.label)==null?void 0:l.base),k((u=(d=e==null?void 0:e["text-color"])==null?void 0:d.label)==null?void 0:u.focused))},Ga=e=>{var t,n,r,o,a,s,c,l,d,u,h,m,p,g,b,x,y,v,_,A;return{BASE:W(["&::placeholder{color:",";font-family:",";font-size:",";font-weight:",";line-height:",";letter-spacing:",";opacity:1;}"],k((n=(t=e==null?void 0:e["text-color"])==null?void 0:t.placeholder)==null?void 0:n.base),$t((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.placeholder)==null?void 0:o.base),E((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.placeholder)==null?void 0:s.base),dn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.placeholder)==null?void 0:l.base),E((u=(d=e==null?void 0:e["line-height"])==null?void 0:d.placeholder)==null?void 0:u.base),E((m=(h=e==null?void 0:e["letter-spacing"])==null?void 0:h.placeholder)==null?void 0:m.base)),ERRORED:W(["&::placeholder{color:",";opacity:1;}"],k((g=(p=e==null?void 0:e["text-color"])==null?void 0:p.placeholder)==null?void 0:g.errored)),FOCUSED:W(["&::placeholder{color:",";opacity:1;}"],k((x=(b=e==null?void 0:e["text-color"])==null?void 0:b.placeholder)==null?void 0:x.focused)),DISABLED:W(["&::placeholder{color:",";-webkit-text-fill-color:",";opacity:1;}"],k((v=(y=e==null?void 0:e["text-color"])==null?void 0:y.placeholder)==null?void 0:v.disabled),k((A=(_=e==null?void 0:e["text-color"])==null?void 0:_.placeholder)==null?void 0:A.disabled))}},ZI=({styles:e,error:t=!1,themeErrorColor:n})=>{var r,o,a,s,c,l,d,u,h,m,p,g,b,x,y,v,_,A,T,R,O,D,L,H,M,B,V,q,$,Q,G,Y,re,ae,Ce,we,me,Ie,le,ee,ce,_e,pe,Je,lt,ue,Pe,Le,Fe,nt;return W(["outline:0 !important;transition:",";box-shadow:0 0 0 0;font-family:",";font-size:",";font-weight:",";line-height:",";letter-spacing:",";border-radius:",";border-width:",";color:",";background-color:",";border-color:",";box-shadow:"," "," 0 ",";",";"," &:focus-within{color:",";background-color:",";border-color:",";"," ",";}&:disabled{color:",";-webkit-text-fill-color:",";background-color:",";border-color:",";",";}"],it.Fast,$t((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.base)==null?void 0:o.base),E((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.value)==null?void 0:s.base),dn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.value)==null?void 0:l.base),E((u=(d=e==null?void 0:e["line-height"])==null?void 0:d.value)==null?void 0:u.base),E((m=(h=e==null?void 0:e["letter-spacing"])==null?void 0:h.base)==null?void 0:m.base),E((g=(p=e==null?void 0:e["border-radius"])==null?void 0:p.base)==null?void 0:g.base),qp((x=(b=e==null?void 0:e["border-width"])==null?void 0:b.base)==null?void 0:x.base),k((v=(y=e==null?void 0:e["text-color"])==null?void 0:y.value)==null?void 0:v.base),k((A=(_=e==null?void 0:e["background-color"])==null?void 0:_.base)==null?void 0:A.base),k((R=(T=e==null?void 0:e["border-color"])==null?void 0:T.base)==null?void 0:R.base),Bx((D=(O=e==null?void 0:e["shadow-offset"])==null?void 0:O.base)==null?void 0:D.base),E((H=(L=e==null?void 0:e["shadow-radius"])==null?void 0:L.base)==null?void 0:H.base),k((B=(M=e==null?void 0:e["shadow-color"])==null?void 0:M.base)==null?void 0:B.base),Ga(e).BASE,t&&W(["color:",";background-color:",";border-color:",";",";"],k((q=(V=e==null?void 0:e["text-color"])==null?void 0:V.value)==null?void 0:q.errored),(Q=k(($=e==null?void 0:e["background-color"])==null?void 0:$.base.errored))!=null?Q:vt(n).fade(.97).rgb().string(),k((Y=(G=e==null?void 0:e["border-color"])==null?void 0:G.base)==null?void 0:Y.errored),Ga(e).ERRORED),k((ae=(re=e==null?void 0:e["text-color"])==null?void 0:re.value)==null?void 0:ae.focused),k((we=(Ce=e==null?void 0:e["background-color"])==null?void 0:Ce.base)==null?void 0:we.focused),k((Ie=(me=e==null?void 0:e["border-color"])==null?void 0:me.base)==null?void 0:Ie.focused),k((ee=(le=e==null?void 0:e["border-color"])==null?void 0:le.base)==null?void 0:ee.focused)&&W(["box-shadow:0 0 0 1px ",";"],k((_e=(ce=e==null?void 0:e["border-color"])==null?void 0:ce.base)==null?void 0:_e.focused)),Ga(e).FOCUSED,k((Je=(pe=e==null?void 0:e["text-color"])==null?void 0:pe.value)==null?void 0:Je.disabled),k((ue=(lt=e==null?void 0:e["text-color"])==null?void 0:lt.value)==null?void 0:ue.disabled),k((Le=(Pe=e==null?void 0:e["background-color"])==null?void 0:Pe.base)==null?void 0:Le.disabled),k((nt=(Fe=e==null?void 0:e["border-color"])==null?void 0:Fe.base)==null?void 0:nt.disabled),Ga(e).DISABLED)},Pr=(e,t,n)=>W([""," ",""],ko(e,t),n!=null&&ZI({styles:n,error:e.hasError,themeErrorColor:t.colorError})),Ad=W(["font-family:",";font-size:",";font-weight:",";line-height:",";letter-spacing:",";position:absolute;pointer-events:none;left:",";top:",";transition:"," ease all;"," &&& label{margin-bottom:0;font-size:inherit;font-weight:inherit;line-height:inherit;color:inherit;}"],({styles:e,theme:t})=>{var n,r,o;return(o=$t((r=(n=e==null?void 0:e["font-family"])==null?void 0:n.placeholder)==null?void 0:r.base))!=null?o:t.fontFamily},({styles:e})=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e["font-size"])==null?void 0:t.placeholder)==null?void 0:n.base))!=null?r:Yt.input},({styles:e})=>{var t,n,r;return(r=dn((n=(t=e==null?void 0:e["font-weight"])==null?void 0:t.placeholder)==null?void 0:n.base))!=null?r:pn.regular},({styles:e})=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e["line-height"])==null?void 0:t.placeholder)==null?void 0:n.base))!=null?r:Yn.input},({styles:e})=>{var t,n;return E((n=(t=e==null?void 0:e["letter-spacing"])==null?void 0:t.placeholder)==null?void 0:n.base)},I.Spacing[1],I.Spacing[2],it.Fast,({styles:e,theme:t,hasError:n,hasWarning:r,focused:o})=>{var s,c,l,d,u,h,m,p,g;let a;return n?a=(l=k((c=(s=e==null?void 0:e["text-color"])==null?void 0:s.error)==null?void 0:c.base))!=null?l:t.colorError:r?a=t.colorWarning:a=(h=k((u=(d=e==null?void 0:e["text-color"])==null?void 0:d.label)==null?void 0:u.focused))!=null?h:t.colorPrimary,o?W(["color:",";"],a):W(["color:",";*:focus ~ &{color:",";}"],(g=k((p=(m=e==null?void 0:e["border-color"])==null?void 0:m.base)==null?void 0:p.base))!=null?g:t.colorInputBorder,a)}),Td=W(["font-family:",";font-size:",";font-weight:",";line-height:",";padding:"," "," "," ",";width:100%;display:block;border:none;border-bottom:1px solid;border-radius:0;background-color:",";color:",";transition:"," ease border-color;",""],({styles:e,theme:t})=>{var n,r,o;return $t((o=(r=(n=e==null?void 0:e["font-family"])==null?void 0:n.base)==null?void 0:r.base)!=null?o:t.fontFamily)},({styles:e})=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e["font-size"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:Yt.input},({styles:e})=>{var t,n,r;return(r=(n=(t=e==null?void 0:e["font-weight"])==null?void 0:t.value)==null?void 0:n.base)!=null?r:pn.regular},({styles:e})=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e["line-height"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:Yn.input},I.Spacing[2],I.Spacing[2],I.Spacing[2],I.Spacing[1],({styles:e,theme:t})=>{var n,r,o;return(o=k((r=(n=e==null?void 0:e["background-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:t.colorInputBackground},({styles:e,theme:t})=>{var n,r,o;return(o=k((r=(n=e==null?void 0:e["text-color"])==null?void 0:n.value)==null?void 0:r.base))!=null?o:t.colorFont},it.Fast,({styles:e,theme:t,hasError:n,hasWarning:r,focused:o})=>{var s,c,l,d,u,h,m,p,g;let a;return n?a=(l=k((c=(s=e==null?void 0:e["border-color"])==null?void 0:s.base)==null?void 0:c.errored))!=null?l:t.colorError:r?a=t.colorWarning:a=(h=k((u=(d=e==null?void 0:e["border-color"])==null?void 0:d.base)==null?void 0:u.focused))!=null?h:t.colorPrimary,o?W(["border-color:",";"],a):W(["border-color:",";*:focus{outline:none;border-color:",";}"],(g=k((p=(m=e==null?void 0:e["border-color"])==null?void 0:m.base)==null?void 0:p.base))!=null?g:t.colorInputBorder,a)}),Ed=parseInt(Yt.input)*Yn.input+sn*2,JI=C("input").withConfig({displayName:"MaterialInput__Input",componentId:"sc-25ma2t-0"})(["",""],Td),XI=C(J).withConfig({displayName:"MaterialInput__StyledMarkdown",componentId:"sc-25ma2t-1"})([""," ",";"],Ad,({hasError:e,hasValue:t})=>(e||t)&&W(["top:-14px;font-size:",";"],Yt.small)),eS=C("div").withConfig({displayName:"MaterialInput__Container",componentId:"sc-25ma2t-2"})(["position:relative;"]);function dr({className:e,focused:t,hasError:n,hasWarning:r,labelText:o,styles:a,...s}){return i.jsxs(eS,{className:e,children:[i.jsx(JI,{focused:t,hasError:n,hasWarning:r,spellCheck:!1,styles:a,...s}),i.jsx(XI,{wrapper:"label",wrapperProps:{htmlFor:s.id},focused:t,hasError:n,hasValue:!!s.value,hasWarning:r,styles:a,children:o})]})}const tS=C.div.withConfig({displayName:"FormError__FormErrorContainer",componentId:"sc-1p5wybl-0"})([""," display:",";"],({styles:e})=>QI(e),({hasError:e})=>e?null:"none"),nn=e=>{const{errorMessage:t,hasError:n,styles:r,...o}=e;return i.jsx(tS,{"aria-live":"polite",role:"alert",hasError:n,styles:r,...o,children:t})};var Pt=(e=>(e.Outlined="outlined",e.Material="material",e))(Pt||{});const nS=C("div").withConfig({displayName:"ThemedFormInput__OutlinedContainer",componentId:"sc-zw49yf-0"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),iS=C("div").withConfig({displayName:"ThemedFormInput__MaterialContainer",componentId:"sc-zw49yf-1"})(["",""],No),$i=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},autoFocus:a,label:s,placeholder:c,id:l,styles:d,"data-test":u="form",serverError:h,...m}=e,{inputStyle:p}=f.useContext(tt),g=o&&r||h,b=!!g;switch(p){case Pt.Material:return i.jsxs(iS,{className:t,children:[i.jsx(dr,{labelText:s||c,...n,...m,autoFocus:a,hasError:b,"aria-invalid":b,"aria-errormessage":`${l}--error`,"aria-describedby":`${l}--error`,id:l,"data-test":u,styles:d}),i.jsx(nn,{id:`${l}--error`,"data-test":`${u}-error`,hasError:b,errorMessage:g,styles:d})]});case Pt.Outlined:default:return i.jsxs(nS,{className:t,styles:d,children:[s&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:l},children:s}),i.jsx(ws,{...n,...m,autoFocus:a,hasError:b,"aria-invalid":b,"aria-errormessage":`${l}--error`,"aria-describedby":`${l}--error`,id:l,placeholder:c,"data-test":u,styles:d}),i.jsx(nn,{id:`${l}--error`,"data-test":`${u}-error`,hasError:b,errorMessage:g,styles:d})]})}},rS=C("input").attrs({spellCheck:!1}).withConfig({displayName:"ThemedFormInputBase__ThemedFormInputBaseInner",componentId:"sc-1apa5v6-0"})(["",";"],e=>Pr(e,e.theme,e.styles));function ws(e){return i.jsx(rS,{...e})}const Yf=ti(e=>{var t;return(t=e.locale)==null?void 0:t.localeInfo},e=>e!=null&&e.latitude&&(e!=null&&e.longitude)?{lat:e.latitude,lng:e.longitude}:void 0),oS=C("div").withConfig({displayName:"LocationSearchInput__DropdownWrapper",componentId:"sc-1ddacib-0"})(["position:relative;margin-bottom:",";& > div{margin-bottom:0;}"],({styles:e})=>{var t;return E((t=e==null?void 0:e.margin.base.base)==null?void 0:t.bottom)}),aS=C("div").withConfig({displayName:"LocationSearchInput__MaterialDropdownWrapper",componentId:"sc-1ddacib-1"})(["position:relative;margin-bottom:",";& > div{margin-bottom:0;}"],({styles:e})=>{var t;return E((t=e==null?void 0:e.margin.base.base)==null?void 0:t.bottom)}),sS=C("div").withConfig({displayName:"LocationSearchInput__DropdownContainer",componentId:"sc-1ddacib-2"})(["background-color:",";border:1px solid ",";position:absolute;z-index:",";width:100%;",""],({theme:e})=>e.colorDropdownBackground,I.Color.CoreSlate400,At.dropdown,({openUpwards:e})=>e&&`bottom: ${Vi.input}`),cS=new Set(["AT","CH","CZ","DE","HU","SK"]),Kf=C("div").withConfig({displayName:"LocationSearchInput__DropdownItem",componentId:"sc-1ddacib-3"})(["cursor:pointer;padding:",";&:hover,&:focused{background-color:",";}",";"],I.Spacing[2],({theme:e})=>e.colorDropdownOption,e=>e.active&&W(["background-color:",";"],({theme:t})=>t.colorDropdownOption)),Wa=({selectedCountryCode:e,onChange:t,input:n,setField:r,fieldKeyAddressStreet1:o,fieldKeyAddressStreet2:a,fieldKeyAddressCity:s,fieldKeyAddressSubdivision:c,fieldKeyAddressPostalCode:l,fieldKeyAddressBusinessName:d,showBusinessNameField:u,addressSubdivisionFormat:h="long_name",placeType:m,...p})=>{var H,M;const[g,{enable:b,disable:x}]=st(),y=Ke(Yf),{inputStyle:v}=f.useContext(tt),_={componentRestrictions:{country:e},types:m!=null?[m]:void 0,...y&&((M=(H=window.google)==null?void 0:H.maps)!=null&&M.LatLng)?{location:new window.google.maps.LatLng(y),radius:4e3}:{}},A=({getInputProps:B,suggestions:V,getSuggestionItemProps:q,loading:$})=>{const G=(g?V:[]).map(re=>f.createElement(Kf,{...q(re,{key:re.description,active:re.active}),key:re.placeId},re.description)),Y=i.jsxs(i.Fragment,{children:[i.jsx($i,{input:n,id:n.name,...B({name:n.name,onBlur:D,onFocus:L}),...p}),i.jsx(lS,{loading:$,children:G})]});switch(v){case Pt.Material:return i.jsx(aS,{styles:p.styles,children:Y});case Pt.Outlined:default:return i.jsx(oS,{styles:p.styles,children:Y})}},T=B=>{[google.maps.places.PlacesServiceStatus.ZERO_RESULTS,google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR,google.maps.places.PlacesServiceStatus.REQUEST_DENIED,google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT].includes(B)||Z(new Error(`Google Maps API returned error with status: ${B}`))},R=B=>{n.onChange(B)},O=async(B,V)=>{if(!V)return;let q;try{q=await zf(V)}catch(me){T(me);return}if(!q)return;const $=q[0].address_components,Q=(me,Ie="long_name")=>{const le=$.filter(ee=>ee.types.indexOf(me)!==-1);return le.length>0?le[0][Ie]:""};if(u){const me=B==null?void 0:B.split(",")[0];r(d,me)}const G=Q("street_number"),Y=Q("route"),re=Q("premise"),ae=Q("subpremise"),Ce=[Q("sublocality_level_1"),Q("sublocality_level_2"),Q("sublocality_level_3"),Q("sublocality_level_4")],we=Q("country","short_name");if(G){const me=cS.has(e==null?void 0:e.toUpperCase())?[Y,G]:[G,Y];r(o,me.filter(Ie=>Ie).join(" ")),r(a,ae)}else if(we==="KR"){const me=[Ce[3],Ce[2],Ce[1]].filter(Ie=>Ie);r(o,[re,me.join(", ")].filter(Ie=>Ie).join(" ")),r(a,ae)}else if(we==="JP"){const me=[[[Ce[2],Ce[3],re].filter(Ie=>Ie).join("-"),Ce[1]].filter(Ie=>Ie).join(" "),Ce[0]].filter(Ie=>Ie).join(", ");r(o,me),r(a,ae)}else re&&!Y?(r(o,re),r(a,ae)):r(o,[ae,Y].filter(me=>me).join(" "));r(s,Q("locality")||Q("sublocality_level_1")||Q("administrative_area_level_2")||Q("neighborhood")),r(c,Q("administrative_area_level_1",h)),r(l,Q("postal_code"))},D=B=>{var V;x(),(V=n.onBlur)==null||V.call(n,B)},L=B=>{var V;b(),(V=n.onFocus)==null||V.call(n,B)};return i.jsx(Ss,{onChange:R,onError:T,value:n.value,onSelect:O,searchOptions:_,googleCallbackName:"onGoogleMapsLoaded",children:A})},lS=({loading:e,children:t})=>{const[n,r]=f.useState(!1),o=f.useRef(),a=f.Children.count(t);return f.useLayoutEffect(()=>{if(o.current==null||o.current.offsetParent==null)return;const c=o.current.offsetParent.getBoundingClientRect().bottom+o.current.getBoundingClientRect().height;r(document.documentElement.clientHeight<c)},[a]),a===0?null:i.jsxs(sS,{ref:o,openUpwards:n,children:[e&&i.jsx(Kf,{active:!1,children:"Loading..."}),t]})},en=e=>e===""?null:e,Qf=e=>t=>qt(t)||t.length===e,dS=e=>t=>qt(t)||t.length<=e,Rn=e=>!qt(e),uS=e=>!e||qt(e)?!1:Mn.fromISO(e).isValid,mS=e=>{if(!e)return!0;const t=e;return qt(t.month)&&qt(t.day)&&qt(t.year)||!qt(t.month)&&!qt(t.day)&&!qt(t.year)&&Mn.local(t.year,t.month,t.day).isValid},hS=e=>e?typeof e=="string"?Mn.local().diff(Mn.fromISO(e),"years").years<100:Mn.local().diff(Mn.fromObject(e),"years").years<100:!1,pS=e=>e?typeof e=="string"?Mn.local().diff(Mn.fromISO(e),"years").years>1:Mn.local().diff(Mn.fromObject(e),"years").years>1:!1,Zf=e=>e==null||e===""?!0:w0(e),ur=e=>t=>qt(t)||e.test(t),bt=(e,t)=>(n,r)=>t(n,r)?null:e,Jf=(e,t)=>(n,r)=>{const o=n==null?void 0:n.replace(e,"");return t(o,r)},nc=W(["content:'';position:absolute;right:",";top:50%;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid ",";transform:translateY(-50%);"],I.Spacing[4],I.Color.CoreSlate800),Xf=C("select").withConfig({displayName:"MaterialSelect__Select",componentId:"sc-i6stps-0"})(["appearance:none;&::-ms-expand{display:none;}background-color:",";font-family:",";font-size:",";font-weight:",";line-height:",";color:",";padding:","px 0px ","px ","px;border-bottom:",";border-radius:0;",";&:focus{outline:none;border-color:",";}position:relative;width:100%;background-color:",";"],Be.white,({theme:{fontFamily:e}})=>$t(e),Yt.input,pn.regular,Yn.input,({theme:e})=>e.colorFont,F.base,F.base,F.base/2,({theme:e})=>`1px solid ${e.colorInputBorder}`,({theme:e,hasError:t})=>t&&`border-color: ${e.colorError}`,({theme:e,hasError:t,hasWarning:n})=>t?e.colorError:n?e.colorWarning:e.colorPrimary,({theme:e})=>e.colorInputBackground),fS=C("div").withConfig({displayName:"MaterialSelect__Wrapper",componentId:"sc-i6stps-1"})(["position:relative;width:100%;&::after{",";right:","px;}"],nc,F.base),gS=C(J).withConfig({displayName:"MaterialSelect__StyledMarkdown",componentId:"sc-i6stps-2"})(["font-weight:",";line-height:",";color:",";position:absolute;pointer-events:none;left:","px;transition:"," ease all;top:-14px;font-size:",";label{margin-bottom:0;font-size:inherit;font-weight:inherit;line-height:inherit;color:inherit;}",";",""," ~ &{color:",";}"],pn.regular,Yn.input,({theme:e})=>e.colorInputBorder,F.base/2,Ra.fast,Yt.small,({theme:e,hasError:t})=>t&&`color: ${e.colorError};`,Xf,xi,({theme:e,hasError:t,hasWarning:n})=>t?e.colorError:n?e.colorWarning:e.colorPrimary),eg=({labelText:e,hasError:t,hasWarning:n,className:r,...o})=>i.jsxs(fS,{className:r,children:[i.jsx(Xf,{hasError:t,hasWarning:n,...o}),i.jsx(gS,{wrapper:"label",wrapperProps:{htmlFor:o.id},hasError:t,hasWarning:n,children:e})]}),bS=C("select").withConfig({displayName:"Select__InnerSelect",componentId:"sc-bkgd00-0"})(["",";appearance:none;&::-ms-expand{display:none;}color:",";height:",";padding-top:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;"," ",""],e=>ko(e,e.theme),({theme:e})=>{var t;return(t=e.colorFont)!=null?t:Be.gray20},Vi.input,F.base,F.base,F.base*2,F.base*4,({isSelectingPlaceholder:e,theme:t})=>{var n;return e&&W(["font-weight:",";color:",";"],pn.regular,vt((n=t.colorFont)!=null?n:Be.gray100).fade(.5).rgb().string())},({hasError:e,theme:t,value:n})=>{var o;const r=vt((o=t.colorError)!=null?o:I.Color.CoreRed900).rgb();return e&&(n==null||n==="")&&W(["color:",";-webkit-text-fill-color:",";"],`rgba(${r.red()}, ${r.green()}, ${r.blue()}, 0.7)`,`rgba(${r.red()}, ${r.green()}, ${r.blue()}, 0.7)`)}),CS=C("div").withConfig({displayName:"Select__Wrapper",componentId:"sc-bkgd00-1"})(["position:relative;"]),xS=C(Zl).withConfig({displayName:"Select__StyledIconCaretDown",componentId:"sc-bkgd00-2"})(["position:absolute;right:","px;top:50%;transform:translateY(-50%);display:inline-block;pointer-events:none;rect[fill],path[fill]{fill:",";}"],F.base*2,({theme:e})=>{var t;return(t=e.colorFont)!=null?t:Be.gray50}),ic=({value:e,...t})=>i.jsxs(CS,{children:[i.jsx(bS,{...t,value:e,isSelectingPlaceholder:e===""}),i.jsx(xS,{})]}),Qu=C("div").withConfig({displayName:"ThemedFormSelect__Container",componentId:"sc-8hgqfp-0"})(["margin-bottom:","px;",";text-transform:capitalize;"],F.base*2,({inputStyle:e})=>e===Pt.Material?`padding-top: ${F.base*2}px;`:""),vS=C("div").withConfig({displayName:"ThemedFormSelect__OutlinedLabelContainer",componentId:"sc-8hgqfp-1"})(["",""],tc),Zu=C("div").withConfig({displayName:"ThemedFormSelect__FormError",componentId:"sc-8hgqfp-2"})(["",";padding-left:","px;"],jo,F.base);function tg(e){const{id:t,input:n,label:r,serverError:o,meta:{error:a,submitFailed:s},...c}=e,{inputStyle:l}=f.useContext(tt),d=s&&a||o,u=!!d;switch(l){case Pt.Material:return i.jsxs(Qu,{inputStyle:l,children:[i.jsx(eg,{...n,...c,hasError:u,labelText:r}),u&&i.jsx(Zu,{role:"alert",children:d})]});default:case Pt.Outlined:return i.jsxs(vS,{children:[r&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:t},children:r}),i.jsxs(Qu,{inputStyle:l,children:[i.jsx(ic,{...n,...c,id:t,hasError:u}),u&&i.jsx(Zu,{role:"alert",children:d})]})]})}}const yS=C("div").withConfig({displayName:"ThemedFormAddressInput__Container",componentId:"sc-tr0su4-0"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),IS=C("div").withConfig({displayName:"ThemedFormAddressInput__ExpandedContainer",componentId:"sc-tr0su4-1"})([""," "," margin-bottom:0;"],({styles:e})=>qi(e),({styles:e})=>Dn(e)),SS=({fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,editAddressManuallyPrompt:s,label:c,placeholderAddressStreet1:l,placeholderAddressStreet2:d,placeholderAddressCity:u,placeholderAddressSubdivision:h,placeholderAddressSubdivisionUs:m,placeholderAddressPostalCode:p,placeholderAddressPostalCodeUs:g,placeholderAddressBusinessName:b,placeholderAutocomplete:x,placeholderAutocompletePostalCode:y,validateAddressStreet1:v,validateAddressStreet2:_,validateAddressCity:A,validateAddressSubdivision:T,validateAddressPostalCode:R,validateAddressBusinessName:O,serverErrorAddressStreet1:D,serverErrorAddressStreet2:L,serverErrorAddressCity:H,serverErrorAddressSubdivision:M,serverErrorAddressPostalCode:B,serverErrorAddressBusinessName:V,setField:q,selectedCountryCode:$,forceOpen:Q,addressAutocompleteMethod:G,addressSubdivisionFormat:Y,placeType:re,disabled:ae,optional:Ce,showBusinessNameField:we,styles:me})=>{var be,Se;const[Ie,le]=f.useState(!((Se=(be=window.google)==null?void 0:be.maps)!=null&&Se.places)),ee=f.useContext(tt),ce=f.useMemo(()=>({autocompleteClosed:Ce?[]:[bt("Fill out the details of your current address",()=>!1)],addressStreet1:v,addressStreet2:_,addressCity:A,addressSubdivision:T,addressPostalCode:R,addressBusinessName:O}),[v,_,A,T,R,O,Ce]),_e=Hs.includes($),pe=_e?o:e,Je=_e?y:x,lt=$==="US"?g:p,ue=()=>{if(Ie||Q||G===as.None)return nt();{const ve=ee.inputStyle===Pt.Outlined?Je:c;return i.jsxs(yS,{styles:me,children:[i.jsx(Te.Field,{"data-test":"address-street-1",selectedCountryCode:$,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:we,addressSubdivisionFormat:Y,name:pe,id:pe,setField:Le,component:Wa,disabled:ae,type:"text",parse:en,validate:ce.autocompleteClosed,placeholder:ve,placeType:re,styles:me}),!ae&&s&&i.jsx(Oa,{styles:me==null?void 0:me["text-style"]["expand-button"].base,children:i.jsx("a",{id:"address_input_section__manual_edit","data-test":"address_input_section__manual_edit",onClick:Qe,tabIndex:0,children:s})})]})}},Pe=(ve,He,Ve,ze,St,wt,Ut)=>{switch(ve){case"AR":return[[Ut],[He,Ve],[St],[wt,ze]];case"GL":case"IS":return[[Ut],[He],[Ve],[wt,ze]];case"AT":case"BE":case"DK":return[[Ut],[He,Ve],[wt,ze]];case"BR":case"CR":case"EG":case"NG":return[[Ut],[He,Ve],[ze,St],[wt]];case"CA":return[[Ut],[Ve,He],[ze,St,wt]];case"CN":return[[Ut],[Ve],[He,ze],[St,wt]];case"IT":return[[Ut],[He,Ve],[wt,ze,St]];case"AU":case"GB":case"PH":case"US":return[[Ut],[He,Ve],[ze,St,wt]];case"CZ":case"FI":case"IL":return[[Ut],[He,Ve],[wt,ze]];case"DE":case"EE":case"ES":case"FR":case"IN":return[[Ut],[He,Ve],[wt,ze],[St]];case"JP":case"KR":return[[Ut],[He,Ve],[ze,St,wt]];case"FJ":return[[Ut],[He,Ve],[ze]];case"HK":return[[Ut],[Ve],[He],[ze]];case"BD":case"PK":return[[Ut],[He,Ve],[ze,wt],[St]];case"TW":case"ID":default:return[[Ut],[He,Ve],[ze,wt]]}},Le=(ve,He)=>{q(ve,en(He)),le(!0)},Fe=()=>pe===o?i.jsx(Te.Field,{"data-test":"address-postal-code",autoComplete:"postal-code",selectedCountryCode:$,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:we,addressSubdivisionFormat:Y,name:o,id:o,disabled:ae,placeholder:lt,type:"text",parse:en,validate:ce.addressPostalCode,setField:q,component:Wa,placeType:re,serverError:B,styles:me}):i.jsx(Te.Field,{"data-test":"address-postal-code",autoComplete:"postal-code",name:o,id:o,disabled:ae,placeholder:lt,type:"text",parse:en,validate:ce.addressPostalCode,setField:q,component:$i,serverError:B,styles:me}),nt=()=>{const ve=i.jsx(Te.Field,{"data-test":"address-street-2",autoComplete:"address-line2",name:t,id:t,component:$i,disabled:ae,type:"text",placeholder:d,parse:en,validate:ce.addressStreet2,serverError:L,styles:me}),He=i.jsx(Te.Field,{"data-test":"address-city",autoComplete:"address-level2",name:n,id:n,component:$i,disabled:ae,type:"text",placeholder:u,parse:en,validate:ce.addressCity,serverError:H,styles:me}),Ve=i.jsx(wS,{selectedCountryCode:$,disabled:ae,placeholderAddressSubdivisionUs:m,placeholderAddressSubdivision:h,theme:ee,fieldKeyAddressSubdivision:r,validate:ce.addressSubdivision,serverError:M,styles:me});return Pe($,Ne(),ve,He,Ve,Fe(),de()).map((St,wt)=>i.jsx("div",{className:"row",children:St.filter(Boolean).map((Ut,gt)=>i.jsx("div",{className:"col-sm-12",children:Ut},gt))},wt))},Qe=()=>{le(!0)},Ne=()=>pe===e&&G===as.GoogleMaps?i.jsx(Te.Field,{"data-test":"address-street-1",autoComplete:"address-line1",selectedCountryCode:$,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:we,addressSubdivisionFormat:Y,name:e,id:e,disabled:ae,placeholder:l,type:"text",parse:en,validate:ce.addressStreet1,setField:q,component:Wa,placeType:re,serverError:D,styles:me}):i.jsx(Te.Field,{"data-test":"address-street-1",autoComplete:"address-line1",name:e,id:e,disabled:ae,placeholder:l,type:"text",parse:en,validate:ce.addressStreet1,component:$i,serverError:D,styles:me}),de=()=>we?G===as.GoogleMaps?i.jsx(Te.Field,{"data-test":"address-business-name",autoComplete:"address-line1",selectedCountryCode:$,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:we,addressSubdivisionFormat:Y,name:a,id:a,disabled:ae,placeholder:b,type:"text",setField:q,component:Wa,placeType:re,parse:en,validate:ce.addressBusinessName,serverError:V,styles:me}):i.jsx(Te.Field,{"data-test":"address-business-name",name:a,id:a,component:$i,disabled:ae,type:"text",placeholder:b,parse:en,validate:ce.addressBusinessName,serverError:V,styles:me}):null;return i.jsxs(IS,{styles:me,children:[ee.inputStyle===Pt.Outlined&&c&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:e},children:c}),ue()]})};function wS({selectedCountryCode:e,disabled:t,theme:n,placeholderAddressSubdivisionUs:r,placeholderAddressSubdivision:o,fieldKeyAddressSubdivision:a,validate:s,serverError:c,styles:l}){return e==="US"&&n.usStateInputMethod===Qs.Select?i.jsxs(Te.Field,{"data-test":"address-subdivision",autoComplete:"address-level1",name:a,id:a,component:tg,disabled:t,type:"text",placeholder:r,parse:en,validate:s,serverError:c,children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:r}),Object.keys(Cs).map(d=>i.jsx("option",{value:Cs[d],children:d},d))]}):i.jsx(Te.Field,{"data-test":"address-subdivision",autoComplete:"address-level1",name:a,id:a,component:$i,disabled:t,type:"text",placeholder:e==="US"?r:o,parse:en,validate:s,serverError:c,styles:l})}const zn=(e,t,n,r)=>{const o=e.attributes["next-step"].name,a=Ke(d=>Te.isPristine(o)(d,n)),s=Ke(d=>Te.formValueSelector(o)(d,n)),[c,l]=f.useState(!0);return f.useEffect(()=>{(r||"")!==(s||"")&&!a&&l(!1)},[a,r,s]),f.useEffect(()=>{l(!0)},[e]),f.useEffect(()=>{t&&l(!1)},[t]),c},Zr={STREET_1:"street_1",STREET_2:"street_2",CITY:"city",SUBDIVISION:"subdivision",POSTAL_CODE:"postal_code",BUSINESS_NAME:"business_name"},_S=({component:e,inquiry:t,inquiryLoading:n,actionsApi:r})=>{const o=`${e.name}.${Zr.STREET_1}`,a=`${e.name}.${Zr.STREET_2}`,s=`${e.name}.${Zr.CITY}`,c=`${e.name}.${Zr.SUBDIVISION}`,l=`${e.name}.${Zr.POSTAL_CODE}`,d=`${e.name}.${Zr.BUSINESS_NAME}`,{"prefill-address-street-1":u,"prefill-address-street-2":h,"prefill-address-city":m,"prefill-address-subdivision":p,"prefill-address-postal-code":g,"prefill-address-business-name":b,"selected-country-code":x,"validations-address-street-1":y,"validations-address-street-2":v,"validations-address-city":_,"validations-address-subdivision":A,"validations-address-postal-code":T,"validations-address-business-name":R,"edit-address-manually-prompt":O,label:D,"placeholder-autocomplete":L,"placeholder-autocomplete-postal-code":H,"placeholder-address-street-1":M,"placeholder-address-street-2":B,"placeholder-address-city":V,"placeholder-address-subdivision":q,"placeholder-address-subdivision-us":$,"placeholder-address-postal-code":Q,"placeholder-address-postal-code-us":G,"placeholder-address-business-name":Y,"error-address-street-1":re,"error-address-street-2":ae,"error-address-city":Ce,"error-address-subdivision":we,"error-address-postal-code":me,"error-address-business-name":Ie,"address-autocomplete-method":le,"format-address-subdivision":ee,"place-type":ce,disabled:_e,hidden:pe,optional:Je}=e.attributes,lt=t.attributes["next-step"].name,ue=Ke(Te.hasSubmitFailed(lt)),Pe=Ke(Hn=>[a,s,c,Hs.includes(x)?o:l].some(ri=>Te.formValueSelector(lt)(Hn,ri))),Le=zn(t,n,o,u),Fe=zn(t,n,a,h),nt=zn(t,n,s,m),Qe=zn(t,n,c,p),Ne=zn(t,n,l,g),de=zn(t,n,d,b),be=Le&&Fe&&nt&&Qe&&Ne&&de,Se=!!(re||ae||Ce||we||me||Ie),ve=_t("",t.attributes["next-step"].name),He=ve(pe),Ve=Jr(e.name,y),ze=Jr(e.name,v),St=Jr(e.name,_),wt=Jr(e.name,A),Ut=Jr(e.name,T),gt=Jr(e.name,R);return f.useEffect(()=>{He?(r.setField(o,""),r.setField(a,""),r.setField(s,""),r.setField(c,""),r.setField(l,""),r.setField(d,"")):He||[[o,u],[a,h],[s,m],[c,p],[l,g],[d,b]].forEach(([Hn,ri])=>{qt(ri)||r.setField(Hn,ri)})},[He]),He?null:i.jsx(i.Fragment,{children:i.jsx(SS,{disabled:ve(_e),optional:ve(Je==null?void 0:Je.logic),selectedCountryCode:x,fieldKeyAddressStreet1:o,fieldKeyAddressStreet2:a,fieldKeyAddressCity:s,fieldKeyAddressSubdivision:c,fieldKeyAddressPostalCode:l,fieldKeyAddressBusinessName:d,editAddressManuallyPrompt:O,label:D,placeholderAutocomplete:L,placeholderAutocompletePostalCode:H,placeholderAddressStreet1:M,placeholderAddressStreet2:B,placeholderAddressCity:V,placeholderAddressSubdivision:q,placeholderAddressSubdivisionUs:$,placeholderAddressPostalCode:Q,placeholderAddressPostalCodeUs:G,placeholderAddressBusinessName:Y,validateAddressStreet1:Ve,validateAddressStreet2:ze,validateAddressCity:St,validateAddressSubdivision:wt,validateAddressPostalCode:Ut,validateAddressBusinessName:gt,serverErrorAddressStreet1:be?re:void 0,serverErrorAddressStreet2:be?ae:void 0,serverErrorAddressCity:be?Ce:void 0,serverErrorAddressSubdivision:be?we:void 0,serverErrorAddressPostalCode:be?me:void 0,serverErrorAddressBusinessName:be?Ie:void 0,addressAutocompleteMethod:le,addressSubdivisionFormat:ee,placeType:ce,setField:r.setField,forceOpen:ue||Pe||Se,showBusinessNameField:e.attributes["field-key-address-business-name"]!=null,styles:e.styles})})};function Jr(e,t){return f.useMemo(()=>(t!=null?t:[]).map(({logic:r,message:o})=>(a,s)=>!Sr(r,{form:s,value:s[e]},!0)&&o),[e,t])}const ng=C("div").withConfig({displayName:"Stack",componentId:"sc-dqoy2x-0"})(["display:flex;flex-direction:",";gap:",";"," "," "," "," ",""],({direction:e})=>e==="horizontal"?"row":"column",({spacing:e})=>e||I.Spacing[2],({align:e})=>e&&W(["align-items:",";"],e),({justify:e})=>e&&W(["justify-content:",";"],e),({wrap:e})=>e&&W(["flex-wrap:",";"],e),({equal:e})=>e&&W(["> *{flex-grow:1;flex-basis:0;}"]),({fullWidth:e})=>e&&W(["width:100%;"])),Ht={black:I.Color.PrimaryBlack,white:I.Color.PrimaryWhite,brand:I.Color.PrimaryPurple,brand800:I.Color.CorePurple800,brand700:I.Color.CorePurple700,brand600:I.Color.CorePurple600,brand500:I.Color.CorePurple500,brand400:I.Color.CorePurple400,brand300:I.Color.CorePurple300,brand200:I.Color.CorePurple200,brand100:I.Color.CorePurple100},Tn={primary:I.Color.TextPrimary,secondary:I.Color.TextSecondary,tertiary:I.Color.CoreSlate800,brand:Ht.brand,inverse:I.Color.TextInverse,disabled:I.Color.TextDisabled},Ln={primary:I.Color.TextInverse,secondary:I.Color.CoreSlate500,tertiary:I.Color.CoreSlate800,brand:Ht.brand,inverse:I.Color.TextPrimary,disabled:I.Color.TextDisabled},RS={primary:Ht,text:Tn,background:{primary:I.Color.BackgroundPrimary,secondary:I.Color.BackgroundSecondary,active:Ht.brand,highlight:Ht.brand100,disabled:I.Color.BackgroundInputDisabled},variants:{basic:{active:I.Color.BackgroundButtonDefaultActive,default:I.Color.BackgroundButtonDefault,hover:I.Color.BackgroundButtonDefaultHover,highlight:I.Color.CoreSlate400,highlightLight:I.Color.CoreSlate400,highlightDark:I.Color.CoreSlate700,disabled:I.Color.CoreSlate100,text:Tn.primary,textDisabled:Tn.disabled},primary:{active:I.Color.BackgroundButtonPrimaryActive,default:I.Color.BackgroundButtonPrimary,hover:I.Color.BackgroundButtonPrimaryHover,highlight:Ht.brand200,highlightLight:Ht.brand100,highlightDark:Ht.brand200,disabled:I.Color.BackgroundButtonPrimaryDisabled,text:Tn.inverse,textDisabled:Tn.inverse},inverse:{active:Ht.brand100,default:Ht.white,hover:I.Color.BackgroundButtonDefaultHover,highlight:Ht.brand200,highlightLight:Ht.brand100,highlightDark:Ht.brand700,disabled:Ht.white,text:Tn.primary,textDisabled:Tn.disabled},danger:{active:I.Color.BackgroundButtonDangerActive,default:I.Color.BackgroundButtonDanger,hover:I.Color.BackgroundButtonDangerHover,highlight:I.Color.CoreRed200,highlightLight:I.Color.CoreRed100,highlightDark:I.Color.CoreRed200,disabled:I.Color.BackgroundButtonDangerDisabled,text:Tn.inverse,textDisabled:Tn.inverse},caution:{active:I.Color.CoreYellow900,default:I.Color.CoreYellow800,hover:I.Color.CoreYellow700,highlight:I.Color.CoreYellow200,highlightLight:I.Color.CoreYellow100,highlightDark:I.Color.CoreYellow200,disabled:I.Color.CoreYellow100,text:Tn.inverse,textDisabled:Tn.inverse},success:{active:I.Color.CoreGreen900,default:I.Color.CoreGreen800,hover:I.Color.CoreGreen700,highlight:I.Color.CoreGreen200,highlightLight:I.Color.CoreGreen100,highlightDark:I.Color.CoreGreen200,disabled:I.Color.CoreGreen100,text:Tn.inverse,textDisabled:Tn.inverse},text:{active:I.Color.BackgroundButtonTextActive,default:I.Color.BackgroundButtonText,hover:I.Color.BackgroundButtonTextHover,highlight:I.Color.BackgroundButtonTextHover,highlightLight:I.Color.CoreSlate900,highlightDark:I.Color.CoreSlate900,disabled:I.Color.BackgroundButtonTextDisabled,text:Tn.primary,textDisabled:Tn.secondary}},border:{primary:I.Color.BorderHairline,secondary:I.Color.BorderDivider,active:I.Color.BorderInputActive,input:I.Color.BorderInputDefault,inputHover:I.Color.BorderInputHover,disabled:I.Color.BorderInputDisabled}},AS={primary:Ht,text:Ln,background:{primary:I.Color.CoreSlate1000,secondary:I.Color.CoreSlate50,active:Ht.brand,highlight:I.Color.PrimaryWhite,disabled:I.Color.CoreSlate300},variants:{basic:{active:I.Color.BackgroundButtonDefaultActive,default:I.Color.BackgroundButtonDefault,hover:I.Color.BackgroundButtonDefaultHover,highlight:I.Color.CoreSlate400,highlightLight:I.Color.CoreSlate400,highlightDark:I.Color.CoreSlate900,disabled:I.Color.CoreSlate100,text:Ln.primary,textDisabled:Ln.disabled},primary:{active:I.Color.CoreSlate900,default:I.Color.CoreSlate1000,hover:I.Color.BackgroundButtonPrimaryHover,highlight:Ht.brand200,highlightLight:Ht.brand100,highlightDark:Ht.brand200,disabled:I.Color.BackgroundButtonPrimaryDisabled,text:Ht.white,textDisabled:Ln.inverse},inverse:{active:Ht.brand100,default:Ht.white,hover:I.Color.BackgroundButtonDefaultHover,highlight:Ht.brand200,highlightLight:Ht.brand100,highlightDark:Ht.brand700,disabled:Ht.white,text:Ln.inverse,textDisabled:Ln.disabled},danger:{active:I.Color.BackgroundButtonDangerActive,default:I.Color.BackgroundButtonDanger,hover:I.Color.BackgroundButtonDangerHover,highlight:I.Color.CoreRed300,highlightLight:I.Color.CoreRed100,highlightDark:I.Color.CoreRed300,disabled:I.Color.BackgroundButtonDangerDisabled,text:Ln.inverse,textDisabled:Ln.inverse},caution:{active:I.Color.CoreYellow900,default:I.Color.CoreYellow800,hover:I.Color.CoreYellow700,highlight:I.Color.CoreYellow200,highlightLight:I.Color.CoreYellow100,highlightDark:I.Color.CoreYellow200,disabled:I.Color.CoreYellow100,text:Ln.inverse,textDisabled:Ln.inverse},success:{active:I.Color.CoreGreen900,default:I.Color.CoreGreen800,hover:I.Color.CoreGreen700,highlight:I.Color.CoreGreen200,highlightLight:I.Color.CoreGreen100,highlightDark:I.Color.CoreGreen200,disabled:I.Color.CoreGreen100,text:Ln.inverse,textDisabled:Ln.inverse},text:{active:I.Color.BackgroundButtonTextActive,default:I.Color.BackgroundButtonText,hover:I.Color.BackgroundButtonTextHover,highlight:I.Color.BackgroundButtonTextHover,highlightLight:I.Color.CoreSlate900,highlightDark:I.Color.CoreSlate900,disabled:I.Color.BackgroundButtonTextDisabled,text:Ln.primary,textDisabled:Ln.secondary}},border:{primary:I.Color.CoreSlate900,secondary:I.Color.BorderDivider,active:I.Color.BorderInputActive,input:I.Color.BorderInputDefault,inputHover:I.Color.BorderInputHover,disabled:I.Color.BorderInputDisabled}},kd={fontFamily:{base:I.FontFamilies.Primary,mono:I.FontFamilies.Monospace},display:{lg:I.Typography.DisplayLarge,md:I.Typography.DisplayMedium,sm:I.Typography.DisplaySmall},heading:{lg:I.Typography.HeadingLarge,md:I.Typography.HeadingMedium,sm:I.Typography.HeadingSmall},paragraph:{lg:I.Typography.TextLarge,lgBold:I.Typography.TextLargeBold,lgLight:I.Typography.TextLargeLight,md:I.Typography.TextMedium,mdBold:I.Typography.TextMediumBold,mdLight:I.Typography.TextMediumLight,mdLink:I.Typography.TextMediumLink,sm:I.Typography.TextSmall,smLink:I.Typography.TextSmallLink,xs:I.Typography.TextExtraSmall}};({...kd,fontFamily:(I.FontFamilies.Primary,I.FontFamilies.Monospace)});const ig={borderRadius:"4px",height:{xl:"128px",lg:"56px",md:"48px",sm:"40px",xs:"32px"},width:{md:"228px"}},rg={borderRadius:"4px",height:{md:"32px",sm:"24px"}},og={borderRadius:"8px"},ag={borderRadius:{xl:"8px",lg:"4px",md:"4px"},width:{xl:"1020px",lg:"720px",md:"520px"}},Gi={color:RS,text:kd,element:ig,button:rg,card:og,modal:ag},TS={color:AS,text:kd,element:ig,button:rg,card:og,modal:ag},ES=C.div.withConfig({displayName:"CheckboxBase__CheckboxContainer",componentId:"sc-1njarhg-0"})(({styles:e,"aria-readonly":t})=>({cursor:t?"initial":"pointer",overflowWrap:"break-word",display:"flex",flexWrap:"nowrap",alignItems:e==null?void 0:e.alignment.base.base})),kS=C(J).withConfig({displayName:"CheckboxBase__CheckboxLabel",componentId:"sc-1njarhg-1"})(["padding:0 ",";p + p{margin:0 !important;}",""],I.Spacing[2],({styles:e,disabled:t})=>({fontFamily:$t(e==null?void 0:e["font-family"].base.base),fontSize:E(e==null?void 0:e["font-size"].base.base),fontWeight:dn(e==null?void 0:e["font-weight"].base.base),letterSpacing:E(e==null?void 0:e["letter-spacing"].base.base),lineHeight:E(e==null?void 0:e["line-height"].base.base),color:t?Gi.color.text.disabled:k(e==null?void 0:e["text-color"].base.base),a:{color:k(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:k(e==null?void 0:e["text-color-highlight"].base.base)}})),NS=C(J).withConfig({displayName:"CheckboxBase__CheckboxDescription",componentId:"sc-1njarhg-2"})(["padding:0 ",";p + p{margin:0 !important;}",""],I.Spacing[2],({styles:e,disabled:t})=>({fontFamily:$t(e==null?void 0:e["font-family"].description.base),fontSize:E(e==null?void 0:e["font-size"].description.base),fontWeight:dn(e==null?void 0:e["font-weight"].description.base),letterSpacing:E(e==null?void 0:e["letter-spacing"].description.base),lineHeight:E(e==null?void 0:e["line-height"].description.base),color:t?Gi.color.text.disabled:k(e==null?void 0:e["text-color"].description.base),a:{color:k(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:k(e==null?void 0:e["text-color-highlight"].base.base)}})),jS=C.input.withConfig({displayName:"CheckboxBase__HiddenInput",componentId:"sc-1njarhg-3"})(["height:1px;width:1px;margin:-1px;border:0;overflow:hidden;clip:rect(0,0,0,0);position:absolute;"]),PS=C.div.withConfig({displayName:"CheckboxBase__IconContainer",componentId:"sc-1njarhg-4"})(["display:flex;flex:none;align-items:center;transition:box-shadow ",";",""],it.Fast,({styles:e})=>W(["svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}.checkbox__check{stroke:",";}}&:hover","{box-shadow:0 0 0 3px transparent,",";}&","","{svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}}}&:active","{svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}}}&","{cursor:not-allowed;svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}}}"],k(e==null?void 0:e["fill-color"]["checkbox-unchecked"].base),k(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].base),k(e==null?void 0:e["fill-color"]["checkbox-checked"].base),k(e==null?void 0:e["stroke-color"]["checkbox-checked"].base),k(e==null?void 0:e["stroke-color"].checkmark.base),bn,gi.Mid,xi,bn,k(e==null?void 0:e["fill-color"]["checkbox-unchecked"].focused),k(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].focused),k(e==null?void 0:e["fill-color"]["checkbox-checked"].focused),k(e==null?void 0:e["stroke-color"]["checkbox-checked"].focused),bn,k(e==null?void 0:e["fill-color"]["checkbox-unchecked"].active),k(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].active),k(e==null?void 0:e["fill-color"]["checkbox-checked"].active),k(e==null?void 0:e["stroke-color"]["checkbox-checked"].active),ho,k(e==null?void 0:e["fill-color"]["checkbox-unchecked"].disabled),k(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].disabled),k(e==null?void 0:e["fill-color"]["checkbox-checked"].disabled),k(e==null?void 0:e["stroke-color"]["checkbox-checked"].disabled))),sg=({className:e,disabled:t,indeterminate:n,hasError:r,onChange:o,onFocus:a,onBlur:s,value:c,id:l,autoFocus:d,styles:u,labelText:h,descriptionText:m,"data-test":p})=>{const[g,{enable:b,disable:x}]=st(),y=f.useCallback(()=>{var A;o(!c),(A=v.current)==null||A.focus()},[o,c]),v=f.useRef();f.useEffect(()=>{v.current&&(v.current.indeterminate=n)},[n]);let _;return r?_=`${l}--error`:m&&(_=`${l}-description`),i.jsxs(ES,{id:l,className:e,onClick:t?void 0:y,"data-test":p,"aria-checked":!!c,"aria-readonly":t,styles:u,children:[i.jsx(jS,{"aria-label":h,"aria-describedby":_,"aria-invalid":r,"aria-errormessage":`${l}--error`,ref:v,"data-test-toggle-status":c?"on":"off",disabled:t,type:"checkbox",checked:!!c,readOnly:!0,onChange:()=>null,autoFocus:d,onFocus:A=>{b(),a==null||a(A)},onBlur:A=>{x(),s==null||s(A)}}),i.jsx(PS,{focused:g,disabled:t,styles:u,children:n?i.jsx(Ap,{}):c?i.jsx(Tp,{}):i.jsx(Ep,{})}),i.jsxs(ng,{spacing:I.Spacing[0],children:[i.jsx(kS,{wrapper:"label",wrapperProps:{htmlFor:l},styles:u,disabled:t,children:h}),m&&i.jsx(NS,{id:`${l}-description`,styles:u,disabled:t,children:m})]})]})},DS=C("div").withConfig({displayName:"ThemedFormCheckbox__Container",componentId:"sc-2drq49-0"})(["",""],Bi),OS=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},autoFocus:a,label:s,descriptionText:c,id:l,styles:d,disabled:u,...h}=e,m=!!(r&&o);return i.jsxs(DS,{className:t,children:[i.jsx(sg,{...n,...h,autoFocus:a,disabled:u,id:l,value:n.value,styles:d,labelText:s,descriptionText:c,hasError:m,"aria-errormessage":`${l}--error`,"aria-describedby":`${l}--error`}),i.jsx(nn,{id:`${l}--error`,hasError:m,errorMessage:r,styles:d})]})},LS=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,"description-text":s,optional:c,prefill:l,validations:d}=e.attributes,u=e.name,h=_t(u,t.attributes["next-step"].name),m=hn({hidden:o,optional:c,validations:d}),p=h(o);return f.useEffect(()=>{p?n.setField(u,""):!p&&!qt(l)&&n.setField(u,l)},[p]),p?null:i.jsx(i.Fragment,{children:i.jsx(Te.Field,{id:u,name:u,label:a,descriptionText:s,component:OS,disabled:h(r),validate:m,type:"checkbox",styles:e.styles})})},FS=C("div").withConfig({displayName:"ThemedFormCheckboxGroup__Container",componentId:"sc-1jm42aq-0"})(["",""],Bi),MS=C("fieldset").withConfig({displayName:"ThemedFormCheckboxGroup__ItemContainer",componentId:"sc-1jm42aq-1"})(["display:flex;flex-direction:column;"]),VS=C(J).attrs(()=>({wrapper:"legend"})).withConfig({displayName:"ThemedFormCheckboxGroup__Legend",componentId:"sc-1jm42aq-2"})(["",""],({styles:e})=>Dn(e)),BS=C("label").withConfig({displayName:"ThemedFormCheckboxGroup__LineItem",componentId:"sc-1jm42aq-3"})(["position:relative;display:flex;align-items:baseline;margin:0 ",";& + &{margin-top:",";}"],I.Spacing[2],I.Spacing[2]),qS=e=>{const{className:t,input:{name:n,value:r,onChange:o,...a},meta:{error:s,submitFailed:c},label:l,id:d,styles:u,options:h,disabled:m,...p}=e,g=f.useMemo(()=>h.reduce((y,v,_)=>(y[v.value]=_,y),{}),[h]),b=f.useCallback((y,v)=>{const _=r||[],T=(y?_.concat(v):_.filter(R=>R!==v)).map(R=>g[R]).sort((R,O)=>R-O).map(R=>h[R].value);o(T)},[r,o,h,g]),x=!!(s&&c);return i.jsxs(FS,{className:t,children:[i.jsxs(MS,{id:d,"aria-invalid":x,"aria-errormessage":`${d}--error`,"aria-describedby":`${d}--error`,children:[l&&i.jsx(VS,{styles:u,children:l}),h.map((y,v)=>{var T,R;const _=`${n}_${v}`,A=(T=r==null?void 0:r.includes(y.value))!=null?T:!1;return i.jsx(BS,{isSelected:A,htmlFor:_,children:i.jsx(sg,{...a,...p,id:_,disabled:(R=y.disabled)!=null?R:m,labelText:y.text,descriptionText:y["description-text"],hasError:x,value:A,onChange:O=>b(O,y.value),styles:u,onFocus:()=>null,onBlur:()=>null})},y.value)})]}),i.jsx(nn,{id:`${d}--error`,hasError:x,errorMessage:s,styles:u})]})},US=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,prefill:l,validations:d}=e.attributes,u=e.name,h=_t(u,t.attributes["next-step"].name),m=hn({hidden:o,optional:s,validations:d}),p=h(o);return f.useEffect(()=>{p?n.setField(u,""):!p&&!qt(l)&&n.setField(u,l)},[p]),p?null:i.jsx(Te.Field,{id:u,name:u,component:qS,options:c,disabled:h(r),validate:m,label:a,styles:e.styles})},zi=C("input").attrs(()=>({spellCheck:!1})).withConfig({displayName:"Input",componentId:"sc-12x9mcm-0"})(["",";"],e=>ko(e,e.theme)),Nd=4;new Set(Object.values(lf));new Set(Object.values(df));new Set(Object.keys(jy));new Set(Object.values(on));new Set(Object.values(sd));new Set(Object.values(uf));new Set(Object.values(Cn));new Set(Object.values(xn));new Set(Object.values(la));const HS=C("div").withConfig({displayName:"PinInput__Container",componentId:"sc-1wwo943-0"})(["display:flex;justify-content:space-between;position:relative;margin-left:-","px;margin-right:-","px;direction:ltr;"],F.base,F.base),$S=C(zi).withConfig({displayName:"PinInput__HiddenInput",componentId:"sc-1wwo943-1"})(["background:transparent !important;border-color:transparent !important;box-shadow:none !important;caret-color:transparent;color:transparent !important;position:absolute;left:0;right:0;top:0;bottom:0;&::selection{color:transparent;}"]),GS=mi(["49%{color:",";}50%{color:transparent;}99%{color:transparent;}100%{color:",";}"],Be.gray100,Be.gray100),WS=C(zi).withConfig({displayName:"PinInput__CodeInput",componentId:"sc-1wwo943-2"})(["text-align:center;margin-left:","px;margin-right:","px;",";",";"],F.base,F.base,e=>e.isFocused&&W(["border-color:",";color:",";box-shadow:0 0 0 1px ",";"],e.theme.colorPrimary,Be.gray100,e.theme.colorPrimary),e=>e.isCursor&&W(["animation-name:",";animation-duration:1s;animation-iteration-count:infinite;"],GS)),zS=({id:e,"data-test":t,allowsLetters:n=!1,autoFocus:r=!1,codeLength:o=Nd,disabled:a=!1,name:s,value:c="",handleSubmitCode:l=()=>{},onChange:d,refHiddenInput:u,hasError:h})=>{const[m,p]=f.useState(r),g=Dc(c,{allowsLetters:n,codeLength:o});u!=null||(u=f.createRef());const b=()=>{u.current.selectionStart=u.current.selectionEnd=g.length},x=()=>{p(!0)},y=()=>{p(!1)},v=A=>{d(Dc(A.target.value,{allowsLetters:n,codeLength:o}))},_=A=>{const T=A.clipboardData||window.clipboardData;if(!T)return;const R=Dc(T.getData("text"),{allowsLetters:n,codeLength:o});new RegExp(`\\d{${o}}`).test(R)&&(d(R),l({"confirmation-code":R}))};return i.jsxs(HS,{"data-test":t,children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:e,children:`${o} digit code`})}),i.jsx($S,{id:e,autoComplete:"no-autocomplete",autoFocus:r,name:s,ref:u,value:g,onBlur:y,onChange:v,onFocus:x,onKeyDown:b,onPaste:_,"aria-invalid":h,"aria-errormessage":`${e}--error`,"aria-describedby":`${e}--error`}),Yh(o).map(A=>{const T=m&&Math.min(g.length,o-1)===A,R=g.charAt(A),O=R!==""?R:T?"|":"";return i.jsx(WS,{disabled:a,isCursor:R==="",isFocused:T,maxLength:1,onChange:()=>{},tabIndex:-1,type:"tel",value:O},A)})]})};function Dc(e,{allowsLetters:t,codeLength:n}){return e.trim().toUpperCase().replace(t?/[^0-9０-９A-Z]/g:/[^0-9０-９]/g,"").replace(/[０-９]/g,r=>(r.charCodeAt(0)-65296).toString()).substring(0,n)}const YS=C("div").withConfig({displayName:"PinInputField__Container",componentId:"sc-1oeykwt-0"})(["",""],Bi);function KS(e){const{input:t,className:n,disabled:r,meta:{error:o,submitFailed:a,submitting:s},autoFocus:c,handleSubmitCode:l,styles:d,...u}=e,h=!!(o&&a),m=f.createRef(),[p,g]=f.useState(void 0);f.useEffect(()=>{var x;h&&((x=t.value)==null?void 0:x.length)===4&&(g(o),t.onChange(""),m.current.focus())},[h]);const b=x=>{g(void 0),t==null||t.onChange(x)};return i.jsxs(YS,{className:n,children:[i.jsx(zS,{...u,...t,onChange:b,autoFocus:c,handleSubmitCode:l,disabled:r||s,refHiddenInput:m,hasError:h||!!p}),i.jsx(nn,{id:`${u.id}--error`,hasError:h||!!p,errorMessage:p||o,styles:d})]})}const QS=({actionsApi:e,component:t,inquiry:n})=>{const{disabled:r,hidden:o,optional:a,validations:s}=t.attributes,c=t.name,l=_t(c,n.attributes["next-step"].name),d=hn({hidden:o,optional:a,validations:s}),u=l(o);f.useEffect(()=>{u&&e.setField(c,"")},[u]);const h=f.useMemo(()=>{const m=p=>u||!p||(p==null?void 0:p.length)>=4?null:a==null?void 0:a.message;return[...d,m]},[d,a==null?void 0:a.message,u]);return u?null:i.jsx(Te.Field,{component:KS,disabled:r,id:c,name:c,parse:en,validate:h,styles:t.styles})};Kh.setLoadParameters({advancedFraudSignals:!1});const ZS=C("div").withConfig({displayName:"StripePaymentElement__Container",componentId:"sc-1ke54je-0"})(["",""],({styles:e})=>qi(e)),JS=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},id:a,styles:s,"data-test":c="form",serverError:l,stripeSetupIntentId:d}=e,u=R0(),h=A0(),[m,{enable:p,disable:g}]=st(),[b,x]=f.useState(null),y=o&&r||l||b,v=!!y,_=async()=>{if(!(!u||!h||!d||!h.getElement(xu)))try{p();const{error:T,setupIntent:R}=await u.confirmSetup({elements:h,confirmParams:{},redirect:"if_required"});if(T){x(T.message||"We could not verify your credit card. Please try again with a different card."),n.onChange(!1);return}(R==null?void 0:R.status)==="succeeded"?(n.onChange(!0),x(null)):(x("We could not verify your credit card. Please try again with a different card."),n.onChange(!1))}catch{x("We could not verify your credit card. Please try again with a different card."),n.onChange(!1)}finally{g()}};return!u||!h||!d?null:i.jsxs(ZS,{className:t,styles:s,children:[i.jsx(xu,{id:a,options:{layout:"tabs",readOnly:m||!!n.value,terms:{card:"never"}},onChange:A=>{x(null),A.complete&&_()}}),i.jsx(nn,{id:`${a}--error`,"data-test":`${c}-error`,hasError:v,errorMessage:y,styles:s})]})},XS=e=>{const{stripeClientSecret:t,...n}=e,r=f.useMemo(()=>Kh("pk_live_51RYsmWRl13py6YPuIL1jpVUdAicaVKUpjCjZQUBBV2gBwYn4Gj35uShTwPQomMs4O10GbNjkUyxlI3sZCJ4NWhrB00TlNOy25N"),[]);return!t||!r?null:i.jsx(_0,{stripe:r,options:{clientSecret:t,locale:"auto",appearance:{theme:"stripe",variables:{colorPrimary:"#0570de",colorBackground:"#ffffff",colorText:"#30313d",colorTextSecondary:"#666666",colorTextPlaceholder:"#999999",colorDanger:"#df1b41",colorDangerText:"#df1b41",colorWarning:"#ffab00",colorWarningText:"#ffab00",colorSuccess:"#00d924",colorSuccessText:"#00d924",colorIconTab:"#666666",colorIconTabSelected:"#0570de",colorIconCardError:"#df1b41",colorIconCardCvc:"#666666",colorIconCardCvcError:"#df1b41",colorIconCheckmark:"#00d924",colorIconRedirect:"#666666",fontFamily:"system-ui, sans-serif",fontSizeBase:"16px",fontSizeSm:"14px",fontSizeXs:"12px",fontWeightLight:"300",fontWeightNormal:"400",fontWeightMedium:"500",fontWeightBold:"700",fontLineHeight:"1.5",borderRadius:"4px",gridColumnSpacing:"12px",gridRowSpacing:"12px",tabSpacing:"10px",spacingUnit:"2px",spacingGridRow:"16px",spacingGridColumn:"12px",spacingTab:"10px",focusBoxShadow:"0 0 0 2px rgba(5, 112, 222, 0.3)",focusOutline:"none",accessibleColorOnColorPrimary:"#ffffff",tabIconColor:"#666666",logoColor:"dark"}}},children:i.jsx(JS,{...n})})},ew=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{disabled:o,hidden:a,optional:s,prefill:c,validations:l,error:d,"stripe-client-secret":u,"stripe-setup-intent-id":h}=e.attributes,m=e.name,p=zn(t,r,e.name,c),g=_t(m,t.attributes["next-step"].name),b=hn({hidden:a,optional:s,validations:l}),x=g(a);return f.useEffect(()=>{x?n.setField(m,!1):!x&&c!=null&&n.setField(m,c)},[x]),x?null:i.jsx(Te.Field,{name:m,id:m,component:XS,disabled:g(o),validate:b,serverError:p?d:null,styles:e.styles,stripeSetupIntentId:h,stripeClientSecret:u,actionsApi:n})},tw=["ar","bn"],nw=e=>{var n,r,o,a,s;if(!e)return{};const t=Intl.NumberFormat(e.locale,{style:"currency",currency:e.currency}).formatToParts(.1111111111111);return{decimalLength:(o=(r=(n=t.find(c=>c.type==="fraction"))==null?void 0:n.value)==null?void 0:r.length)!=null?o:0,decimalSymbol:(a=t.find(c=>c.type==="decimal"))==null?void 0:a.value,currencySymbol:(s=t.find(c=>c.type==="currency"))==null?void 0:s.value}},iw=({id:e,hasError:t,hasWarning:n,enableAutofocus:r,onBlur:o,onChange:a,value:s,intlConfig:c,decimalScale:l,maxLength:d,prefix:u,suffix:h,disableGroupSeparators:m,decimalSeparator:p,...g})=>{var O,D,L;const[b,x]=f.useState(void 0),{decimalLength:y,decimalSymbol:v,currencySymbol:_}=f.useMemo(()=>nw(c),[c]),A=f.useMemo(()=>{if(l)return l;if(y&&y>0&&v){if(typeof b=="string")return b.includes(v)?y:void 0;if(typeof b=="number")return b%1>0?y:void 0}},[y,v,l,b]),T=f.useCallback((H,M,B)=>{H!==b&&((B==null?void 0:B.float)!=null?Math.abs(B.float)<=1e16-2&&(x(H),a(B.float)):(x(H),a("")))},[a,b]);f.useEffect(()=>{Number(s!=null?s:"")!==Number(b!=null?b:"")&&x((s!=null?s:"").toString())},[s]);const R=!!c&&tw.includes((L=(D=(O=c==null?void 0:c.locale)==null?void 0:O.split)==null?void 0:D.call(O,"-"))==null?void 0:L[0]);return i.jsx(T0,{autoFocus:r,value:b,onValueChange:T,decimalScale:A,maxLength:Math.min(d!=null?d:17,17),...g,onBlur:()=>o==null?void 0:o(void 0),"aria-invalid":t,"aria-errormessage":`${e}--error`,"aria-describedby":`${e}--error`,id:e,intlConfig:R?void 0:c,prefix:u!=null?u:R?"":void 0,suffix:h!=null?h:R?_:void 0,decimalSeparator:p!=null?p:R?v:void 0,disableGroupSeparators:m!=null?m:R,disableAbbreviations:!0})},rw=C(iw).withConfig({displayName:"CurrencyInput",componentId:"sc-11h3wuq-0"})(["",";"],e=>ko(e,e.theme)),ow=C("div").withConfig({displayName:"CurrencyInputField__Container",componentId:"sc-3pqjn7-0"})([""," ",""],Bi,({styles:e})=>Dn(e)),aw=e=>{const{id:t,className:n,input:r,meta:{error:o,submitFailed:a,warning:s},autoFocus:c,label:l,placeholder:d,"data-test":u="form",serverError:h,styles:m,...p}=e,g=a&&(o||s)||h,b=!!g;return i.jsxs(ow,{className:n,styles:m,children:[l&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:t},children:l}),i.jsx(rw,{...r,...p,autoFocus:c,hasError:b,id:t,placeholder:d,"data-test":u,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`}),i.jsx(nn,{id:`${t}--error`,"data-test":`${u}-error`,hasError:b,errorMessage:g,styles:m})]})},sw=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:d=[],"currency-code":u}=e.attributes,h=e.name,m=_t(h,t.attributes["next-step"].name),p=hn({hidden:o,optional:s,validations:d}),g=m(o);f.useEffect(()=>{g?n.setField(h,""):!g&&!qt(l)&&n.setField(h,l)},[g]);const{i18n:b}=K(),x=navigator.language.split("-")[0]===b.language.split("-")[0]?navigator.language:b.language;return g?null:i.jsx(Te.Field,{name:h,id:h,component:aw,disabled:m(r),validate:p,label:a,placeholder:c,type:"text",inputmode:"decimal",styles:e.styles,intlConfig:{locale:x,currency:u}})},cw=C("select").withConfig({displayName:"MaterialSelect__Select",componentId:"sc-yvsb2h-0"})(["appearance:none;&::-ms-expand{display:none;}"," padding:","px 0px ","px ","px;position:relative;color:",";"],Td,F.base,F.base,F.base/2,({hasValue:e,styles:t,theme:n})=>{var r,o,a;if(!e)return(a=k((o=(r=t==null?void 0:t["border-color"])==null?void 0:r.base)==null?void 0:o.base))!=null?a:n.colorInputBorder}),lw=C("div").withConfig({displayName:"MaterialSelect__Wrapper",componentId:"sc-yvsb2h-1"})(["position:relative;width:100%;&::after{",";right:","px;}"],nc,F.base),dw=C(J).withConfig({displayName:"MaterialSelect__StyledMarkdown",componentId:"sc-yvsb2h-2"})([""," top:-14px;font-size:",";"],Ad,Yt.small),cg=({className:e,focused:t,hasError:n,hasWarning:r,labelText:o,styles:a,...s})=>{const c=!!s.value;return i.jsxs(lw,{className:e,children:[i.jsx(cw,{...s,focused:t,hasError:n,hasValue:c,hasWarning:r,styles:a}),i.jsx(dw,{wrapper:"label",wrapperProps:{htmlFor:s.id},focused:t,hasError:n,hasValue:c,hasWarning:r,styles:a,children:o})]})},uw=C("select").withConfig({displayName:"Select__InnerSelect",componentId:"sc-plsfst-0"})(["",";appearance:none;&::-ms-expand{display:none;}height:",";opacity:unset;padding-top:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;",""],e=>Pr(e,e.theme,e.styles),Vi.input,F.base,F.base,F.base*2,F.base*4,({hasValue:e,hasError:t,styles:n,theme:r})=>{var s;if(e)return;if(((s=n==null?void 0:n["text-color"])==null?void 0:s.placeholder)!=null)return W(["font-weight:",";color:",";-webkit-text-fill-color:",";&:disabled{color:",";-webkit-text-fill-color:",";}",""],pn.regular,k(n==null?void 0:n["text-color"].placeholder.base),k(n==null?void 0:n["text-color"].placeholder.base),k(n==null?void 0:n["text-color"].placeholder.disabled),k(n==null?void 0:n["text-color"].placeholder.disabled),t&&`
          &:not(:focus) {
            color: ${k(n==null?void 0:n["text-color"].placeholder.errored)};
            -webkit-text-fill-color: ${k(n==null?void 0:n["text-color"].placeholder.errored)};
          }
        `);const o=vt(r.colorFont).rgb(),a=vt(r.colorError).rgb();return W(["font-weight:",";color:",";-webkit-text-fill-color:",";&:disabled{color:",";-webkit-text-fill-color:",";}",""],pn.regular,`rgba(${o.red()}, ${o.green()}, ${o.blue()}, 0.6)`,`rgba(${o.red()}, ${o.green()}, ${o.blue()}, 0.6)`,I.Color.CoreSlate800,I.Color.CoreSlate800,t&&`
        &:not(:focus) {
          color: ${`rgba(${a.red()}, ${a.green()}, ${a.blue()}, 0.7)`};
          -webkit-text-fill-color: ${`rgba(${a.red()}, ${a.green()}, ${a.blue()}, 0.7)`};
        }
      `)}),mw=C("div").withConfig({displayName:"Select__Wrapper",componentId:"sc-plsfst-1"})(["position:relative;"]),hw=C(Zl).withConfig({displayName:"Select__StyledIconCaretDown",componentId:"sc-plsfst-2"})(["position:absolute;right:","px;top:50%;transform:translateY(-50%);display:inline-block;pointer-events:none;rect[fill],path[fill]{fill:",";}"],F.base*2,({styles:e,theme:t})=>{var n,r,o;return(o=k((r=(n=e==null?void 0:e["text-color"])==null?void 0:n.value)==null?void 0:r.base))!=null?o:t.colorFont}),jd=({value:e,hasError:t,styles:n,...r})=>i.jsxs(mw,{children:[i.jsx(uw,{...r,value:e,hasValue:!!e,hasError:t,styles:n}),!r.disabled&&i.jsx(hw,{styles:n})]}),Oc=C("span").withConfig({displayName:"ThemedFormDateInput__VisuallyHiddenSpan",componentId:"sc-174kr1d-0"})(["border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;"]),pw=C("div").withConfig({displayName:"ThemedFormDateInput__OutlinedContainer",componentId:"sc-174kr1d-1"})([""," display:flex;flex-wrap:wrap;margin-left:-",";margin-right:-",";"],({styles:e})=>qi(e),I.Spacing[2],I.Spacing[2]),fw=C("div").withConfig({displayName:"ThemedFormDateInput__MaterialContainer",componentId:"sc-174kr1d-2"})([""," display:flex;flex-wrap:wrap;margin-left:-",";margin-right:-",";"],No,I.Spacing[2],I.Spacing[2]),gw=C("div").withConfig({displayName:"ThemedFormDateInput__OutlinedLabelContainer",componentId:"sc-174kr1d-3"})(["",""],({styles:e})=>Dn(e)),Ju=C("div").withConfig({displayName:"ThemedFormDateInput__ErrorContainer",componentId:"sc-174kr1d-4"})(["padding-left:",";"],I.Spacing[2]),Xu=C("div").withConfig({displayName:"ThemedFormDateInput__Month",componentId:"sc-174kr1d-5"})(["flex:0 0 40%;max-width:40%;padding-left:",";padding-right:",";text-transform:capitalize;"],I.Spacing[2],I.Spacing[2]),za=C("div").withConfig({displayName:"ThemedFormDateInput__DayOrYear",componentId:"sc-174kr1d-6"})(["flex:0 0 30%;max-width:30%;padding-left:",";padding-right:",";"],I.Spacing[2],I.Spacing[2]),bw=({disabled:e,input:t,label:n,meta:{error:r,submitFailed:o},textMonths:a,placeholderDay:s,placeholderMonth:c,placeholderYear:l,labelMonth:d,labelDay:u,labelYear:h,styles:m})=>{const[p,g]=f.useState(""),[b,x]=f.useState(""),[y,v]=f.useState(""),_=f.useContext(tt),A=f.useMemo(()=>{if(/\d{4}-\d{2}-\d{2}/.test(t.value)){const M=new Date(t.value);return{year:String(M.getUTCFullYear()),month:String(M.getUTCMonth()),day:String(M.getUTCDate())}}else return{year:y,month:b,day:p}},[t.value,y,b,p]),T=M=>{D({year:A.year,month:A.month,day:M.target.value})},R=M=>{D({year:A.year,month:M.target.value,day:A.day})},O=M=>{D({year:M.target.value,month:A.month,day:A.day})},D=M=>{g(M.day),x(M.month),v(M.year);const B=parseInt(M.year,10),V=parseInt(M.month,10),q=parseInt(M.day,10),$=new Date(Date.UTC(B,V,q));if(!isNaN($.getTime())&&$.getUTCFullYear()===B&&$.getUTCMonth()===V&&$.getUTCDate()===q){const Q=$.toISOString().split("T")[0];t.onChange(Q)}else t.onChange("")},L=()=>{const M=!!(r&&o);return i.jsxs(gw,{styles:m,children:[n&&i.jsx(J,{wrapper:"label",wrapperProps:{style:{marginBottom:d||h||u?"0":"8px"}},children:n}),i.jsxs(pw,{styles:m,children:[i.jsxs(Xu,{children:[d&&i.jsxs("label",{htmlFor:t.name+"-month",children:[i.jsx(Oc,{children:n&&i.jsx(J,{children:`${n}, `})}),i.jsx(J,{wrapperProps:{role:"presentation",style:{marginBottom:I.Spacing[2]}},children:d})]}),i.jsxs(jd,{id:t.name+"-month",name:t.name+"-month",disabled:e,hasError:M,onChange:R,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,value:A.month,styles:m,children:[i.jsx("option",{value:"",disabled:!0,children:c}),a.map((B,V)=>i.jsx("option",{value:V,children:B},V))]})]}),i.jsxs(za,{children:[u&&i.jsxs("label",{htmlFor:t.name+"-day",children:[i.jsx(Oc,{children:n&&i.jsx(J,{children:`${n}, `})}),i.jsx(J,{wrapperProps:{role:"presentation",style:{marginBottom:I.Spacing[2]}},children:u})]}),i.jsx(ws,{id:t.name+"-day",name:t.name+"-day",disabled:e,hasError:M,min:1,max:31,onChange:T,placeholder:s,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:A.day,styles:m})]}),i.jsxs(za,{children:[h&&i.jsxs("label",{htmlFor:t.name+"-year",children:[i.jsx(Oc,{children:n&&i.jsx(J,{children:`${n}, `})}),i.jsx(J,{wrapperProps:{role:"presentation",style:{marginBottom:I.Spacing[2]}},children:h})]}),i.jsx(ws,{id:t.name+"-year",name:t.name+"-year",disabled:e,hasError:M,min:1900,onChange:O,placeholder:l,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:A.year,styles:m})]}),i.jsx(Ju,{children:i.jsx(nn,{id:`${t.name}--error`,hasError:M,errorMessage:r,styles:m})})]})]})},H=()=>{const M=!!(r&&o);return i.jsxs(fw,{children:[i.jsxs(Xu,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:t.name+"-month",children:`${n}, ${c}`})}),i.jsxs(cg,{id:t.name+"-month",name:t.name+"-month",disabled:e,hasError:M,onChange:R,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,value:A.month,labelText:n,styles:m,children:[i.jsx("option",{value:"",disabled:!0,children:c}),a.map((B,V)=>i.jsx("option",{value:V,children:B},V))]})]}),i.jsxs(za,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:t.name+"-day",children:`${n}, ${s}`})}),i.jsx(dr,{id:t.name+"-day",name:t.name+"-day",disabled:e,hasError:M,min:1,max:31,onChange:T,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:A.day,labelText:s,styles:m})]}),i.jsxs(za,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:t.name+"-year",children:`${n}, ${l}`})}),i.jsx(dr,{id:t.name+"-year",name:t.name+"-year",disabled:e,hasError:M,min:1900,max:9999,onChange:O,labelText:l,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:A.year,styles:m})]}),i.jsx(Ju,{children:i.jsx(nn,{id:`${t.name}--error`,hasError:M,errorMessage:r,styles:m})})]})};switch(_.inputStyle){case Pt.Material:return H();case Pt.Outlined:default:return L()}},Cw=Ml(bw),xw=({component:e,inquiry:t,actionsApi:n})=>{const{"placeholder-day":r,"placeholder-month":o,"placeholder-year":a,"label-day":s,"label-month":c,"label-year":l,"text-months":d,disabled:u,hidden:h,label:m,optional:p,prefill:g,validations:b}=e.attributes,x=e.name,y=_t(x,t.attributes["next-step"].name),v=hn({hidden:h,optional:p,validations:b}),_=y(h);return f.useEffect(()=>{_?n.setField(x,""):!_&&!qt(g)&&n.setField(x,g)},[_]),_?null:i.jsx(Te.Field,{name:x,id:x,component:Cw,disabled:y(u),parse:en,validate:v,label:m,type:"text",placeholderMonth:o,placeholderDay:r,placeholderYear:a,labelDay:s,labelMonth:c,labelYear:l,textMonths:d,styles:e.styles})},ha=250,vw=C.div.withConfig({displayName:"Dialog__Backdrop",componentId:"sc-1ep06vy-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:",";@media ","{position:fixed;}&.dialog-enter{background-color:rgba(0,0,0,0);pointer-events:none;}&.dialog-enter-active,&.dialog-enter-done{background-color:rgba(0,0,0,0.7);transition:background-color ","ms;pointer-events:unset;}&.dialog-exit{background-color:rgba(0,0,0,0.7);pointer-events:unset;}&.dialog-exit-active{background-color:rgba(0,0,0,0);transition:background-color ","ms;pointer-events:none;}"],At.drawer,xt.isMobile,ha,ha),yw=C.div.withConfig({displayName:"Dialog__Anim",componentId:"sc-1ep06vy-1"})(["position:absolute;bottom:0;width:100%;transition:","ms;.dialog-enter &{transform:translateY(100%);}.dialog-enter-active &{transform:translateY(0%);}.dialog-exit &{transform:translateY(0%);}.dialog-exit-active &{transform:translateY(100%);}"],ha),Iw=C.div.withConfig({displayName:"Dialog__DialogContainer",componentId:"sc-1ep06vy-2"})(["box-shadow:0 0 6px 0 ",";background-color:",";color:",";margin:4px;pointer-events:all;user-select:none;position:relative;"," "," @media ","{max-height:","px;}@media ","{max-height:calc(100vh - 40px);}display:flex;flex-direction:column;"],Dp.base,({styles:e,theme:t})=>{var n;return(n=k(e==null?void 0:e.backgroundColor))!=null?n:t.colorModalBackground},({theme:e})=>e.colorFont,({swipeable:e})=>e&&`
    cursor: grab;

    &:active {
      cursor: grabbing;
    }
  `,({styles:e})=>{var t,n,r,o,a,s,c,l,d,u;return`
    border-radius: ${(n=E((t=e==null?void 0:e.border)==null?void 0:t.radius))!=null?n:un.rounded};
    padding-top: calc(${(o=E((r=e==null?void 0:e.padding)==null?void 0:r.top))!=null?o:"16px"} - ${Xo}px);
    padding-bottom: calc(${(s=E((a=e==null?void 0:e.padding)==null?void 0:a.bottom))!=null?s:"16px"} - ${Xo}px);
    padding-left: calc(${(l=E((c=e==null?void 0:e.padding)==null?void 0:c.left))!=null?l:"24px"} - ${Xo}px);
    padding-right: calc(${(u=E((d=e==null?void 0:e.padding)==null?void 0:d.right))!=null?u:"24px"} - ${Xo}px);
  `},xt.isNotMobile,Aa-40,xt.isMobile),Sw=C.div.withConfig({displayName:"Dialog__SwipeHandle",componentId:"sc-1ep06vy-3"})(["position:absolute;top:8px;left:0;right:0;"]),ww=C.div.withConfig({displayName:"Dialog__SwipeHandleInner",componentId:"sc-1ep06vy-4"})(["width:60px;margin:auto;height:4px;border-radius:",";background-color:",";"],un.rounded,({theme:e})=>e.colorDivider);function _i({children:e,isOpen:t,onClose:n,styles:r,"aria-labelledby":o,"aria-describedby":a,"data-test":s="dialog"}){const[c,{enable:l,disable:d}]=st();Uf(n!=null?n:E0);const u=k0({onSwipedDown:()=>n==null?void 0:n(),preventDefaultTouchmoveEvent:!0,trackTouch:!0,trackMouse:!0}),h=n!=null,m=f.useRef(null),p=f.useCallback(()=>{l(),cr(m.current)},[]),g=f.useCallback(()=>{setTimeout(cr,0)},[]);return i.jsx(Ia,{in:t,timeout:{enter:ha,exit:ha},mountOnEnter:!0,unmountOnExit:!0,onEntered:p,onExit:d,onExited:g,classNames:"dialog",children:i.jsx(Bp,{active:c,focusTrapOptions:{escapeDeactivates:!1,clickOutsideDeactivates:!1,allowOutsideClick:!1,initialFocus:!1,fallbackFocus:document.body,setReturnFocus:!1},children:i.jsx(vw,{"data-test":"dialog__backdrop",id:"dialog__backdrop",onClick:n,children:i.jsx(yw,{id:"dialog__animation",onClick:b=>b.stopPropagation(),children:i.jsxs(_w,{styles:r,dialogContainerRef:m,"data-test":s,"aria-labelledby":o,"aria-describedby":a,swipeable:h,swipeHandlers:u,children:[h&&i.jsx(Sw,{role:"presentation",children:i.jsx(ww,{})}),i.jsx(Rw,{children:e})]})})})})})}const _w=({dialogContainerRef:e,swipeHandlers:{ref:t,...n},...r})=>(f.useEffect(()=>{var o,a;e.current!=null&&!Aw(e.current)&&((a=(o=document.body).scrollTo)==null||a.call(o,{top:window.innerHeight-Iv,behavior:"smooth"}))},[]),i.jsx(Iw,{role:"dialog",...n,...r,ref:o=>{e.current=o,t(o)}})),Xo=4,Rw=C.div.withConfig({displayName:"Dialog__DialogScrollContainer",componentId:"sc-1ep06vy-5"})(["overflow-y:auto;padding:","px;"],Xo);function Aw(e){const{top:t,height:n}=e.getBoundingClientRect();return t-n/2<window.innerHeight}const Tw=C("div").withConfig({displayName:"ThemedFormESignature__Container",componentId:"sc-dy8tgn-0"})([""," ",""],Bi,tc),Ew=C.div.withConfig({displayName:"ThemedFormESignature__SignaturePadWrapper",componentId:"sc-dy8tgn-1"})(({styles:e})=>{var t,n,r,o;return{position:"relative",height:"120px",borderStyle:"solid",borderColor:k(e==null?void 0:e["border-color"].base.base),borderRadius:E(e==null?void 0:e["border-radius"].base.base),borderTopWidth:E((t=e==null?void 0:e["border-width"].base.base)==null?void 0:t.top),borderBottomWidth:E((n=e==null?void 0:e["border-width"].base.base)==null?void 0:n.bottom),borderLeftWidth:E((r=e==null?void 0:e["border-width"].base.base)==null?void 0:r.left),borderRightWidth:E((o=e==null?void 0:e["border-width"].base.base)==null?void 0:o.right),"&:hover":{cursor:"pointer"}}}),kw=C.hr.withConfig({displayName:"ThemedFormESignature__SignaturePadOverlay",componentId:"sc-dy8tgn-2"})(({styles:e})=>{var t;return{position:"absolute",left:"10%",right:"10%",bottom:I.Spacing[5],margin:"auto",borderStyle:"solid",borderColor:k(e==null?void 0:e["border-color"].base.base),borderBottomWidth:E((t=e==null?void 0:e["border-width"].base.base)==null?void 0:t.bottom)}}),Nw=C.div.withConfig({displayName:"ThemedFormESignature__ButtonWrapper",componentId:"sc-dy8tgn-3"})(["display:flex;justify-content:space-between;gap:",";"],I.Spacing[3]),jw=C.button.withConfig({displayName:"ThemedFormESignature__AddSignatureButton",componentId:"sc-dy8tgn-4"})(["",";height:160px;width:100%;background-color:",";border:2px solid ",";border-radius:",";&:hover{cursor:pointer;}"],I.Typography.TextMedium,({styles:e})=>k(e==null?void 0:e["background-color"]["signature-preview"].base),({styles:e})=>k(e==null?void 0:e["border-color"].base.base),({styles:e})=>E(e==null?void 0:e["border-radius"].base.base)),Pw=C.button.withConfig({displayName:"ThemedFormESignature__AddSignaturePreview",componentId:"sc-dy8tgn-5"})(["position:relative;height:160px;width:100%;background-color:",";border:2px solid ",";border-radius:",";&:hover{cursor:pointer;}"],({styles:e})=>k(e==null?void 0:e["background-color"]["signature-preview"].base),({styles:e})=>k(e==null?void 0:e["border-color"].base.base),({styles:e})=>E(e==null?void 0:e["border-radius"].base.base)),Dw=C.img.withConfig({displayName:"ThemedFormESignature__PreviewImage",componentId:"sc-dy8tgn-6"})(["height:100%;width:100%;max-height:128px;object-fit:contain;"]),Ow=C(N0).withConfig({displayName:"ThemedFormESignature__EditSignatureIcon",componentId:"sc-dy8tgn-7"})(["position:absolute;top:",";right:",";"],I.Spacing[4],I.Spacing[4]),Lw=C.div.withConfig({displayName:"ThemedFormESignature__DialogHeaderWrapper",componentId:"sc-dy8tgn-8"})(["display:flex;justify-content:space-between;"]),Fw=C.button.withConfig({displayName:"ThemedFormESignature__DialogCloseButton",componentId:"sc-dy8tgn-9"})(["width:24px;background-color:transparent;color:",";&:hover{cursor:pointer;}"],({styles:e})=>k(e==null?void 0:e["text-color"].label.base)),Mw=e=>{var H,M,B,V;const{input:{onChange:t,value:n},meta:{error:r,submitFailed:o},id:a,label:s,placeholder:c,dialogTitle:l,dialogText:d,clearButtonText:u,saveButtonText:h,styles:m,disabled:p}=e,g=!!(r&&o),[b,{enable:x,disable:y}]=st(!1),v=f.useRef(null),_=f.useCallback(()=>{var q,$;($=(q=v.current)==null?void 0:q.instance)==null||$.clear()},[]),A=f.useCallback(()=>{var q,$;if(($=(q=v.current)==null?void 0:q.instance)!=null&&$.isEmpty())t(null);else{const Q=v.current.toDataURL();t(Q!=null?Q.split(",")[1]:null)}y()},[t,y]),T=(H=m==null?void 0:m["button-primary-style"])==null?void 0:H["save-signature-button"].base,R=(M=m==null?void 0:m["button-secondary-style"])==null?void 0:M["clear-signature-button"].base,O=(B=m==null?void 0:m["title-style"])==null?void 0:B["dialog-title"].base,D=(V=m==null?void 0:m["text-style"])==null?void 0:V["dialog-text"].base,L={margin:{base:{base:null}},justify:{base:{base:So.Start}},"font-family":{base:{base:m==null?void 0:m["font-family"].placeholder.base}},"font-size":{base:{base:m==null?void 0:m["font-size"].placeholder.base}},"font-weight":{base:{base:m==null?void 0:m["font-weight"].placeholder.base}},"letter-spacing":{base:{base:m==null?void 0:m["letter-spacing"].placeholder.base}},"line-height":{base:{base:m==null?void 0:m["line-height"].placeholder.base}},"text-color":{base:{base:m==null?void 0:m["text-color"].placeholder.base}},"text-color-highlight":{base:{base:m==null?void 0:m["text-color"].placeholder.base}}};return i.jsxs(i.Fragment,{children:[i.jsxs(Tw,{children:[s&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:`${a}-open-dialog__btn`},children:s}),n?i.jsxs(Pw,{type:"button",id:a,onClick:x,styles:m,"aria-errormessage":`${a}--error`,"aria-describedby":`${a}--error`,children:[i.jsx(Ow,{size:16,color:I.Color.CoreSlate800}),i.jsx(Dw,{src:Vw(n),alt:"Current signature preview"})]}):i.jsx(jw,{type:"button",id:a,onClick:x,styles:m,"aria-errormessage":`${a}--error`,"aria-describedby":`${a}--error`,children:i.jsx(ot,{styles:L,children:c})}),i.jsx(nn,{id:`${a}--error`,hasError:g,errorMessage:r})]}),i.jsxs(_i,{isOpen:b,onClose:y,"data-test":`${a}-dialog`,"aria-labelledby":`${a}-dialog__title`,"aria-describedby":`${a}-dialog__description`,children:[i.jsxs(Lw,{role:"presentation",children:[i.jsx(dt,{id:`${a}-dialog__title`,styles:O,children:l}),i.jsx(Fw,{type:"button",id:`${a}-dialog-close__btn`,onClick:y,styles:m,children:i.jsx(Ll,{size:24,"aria-hidden":!0})})]}),i.jsx(ot,{id:`${a}-dialog__description`,styles:D,children:d}),i.jsx(We,{height:4}),i.jsxs(Ew,{role:"presentation",styles:m,children:[i.jsx(j0,{ref:v,height:120}),i.jsx(kw,{role:"presentation",styles:m})]}),i.jsx(We,{height:4}),i.jsxs(Nw,{role:"presentation",children:[i.jsx(ma,{type:"button",id:`${a}-dialog-save__btn`,styles:R,onClick:_,children:u}),i.jsx(ma,{type:"button",id:`${a}-dialog-clear__btn`,styles:T,onClick:A,children:h})]})]})]})},Vw=e=>e.startsWith("https")?e:`data:image/png;base64,${e}`,Bw=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:d,"dialog-title":u,"dialog-text":h,"clear-button-text":m,"save-button-text":p}=e.attributes,g=e.name,b=_t(g,t.attributes["next-step"].name),x=hn({hidden:o,optional:s,validations:d}),y=b(o);return f.useEffect(()=>{y?n.setField(g,""):!y&&!qt(l)&&n.setField(g,l)},[y]),y?null:i.jsx(Te.Field,{id:g,name:g,component:Mw,disabled:b(r),parse:en,validate:x,label:a,placeholder:c,dialogTitle:u,dialogText:h,clearButtonText:m,saveButtonText:p,styles:e.styles})},lg="USE PREVIOUS FILE",qw=C("div").withConfig({displayName:"ThemedFormFileUpload__FileUploadContainer",componentId:"sc-1etar0k-0"})([""," ",""],Bi,({styles:e})=>Dn(e)),Uw=C("input").withConfig({displayName:"ThemedFormFileUpload__UploadInput",componentId:"sc-1etar0k-1"})(["display:block;"]),Hw=e=>{const{input:{onChange:t},meta:{error:n,submitFailed:r},id:o,label:a,fileUploadLimit:s,allowedFileTypes:c,disabled:l,styles:d,prefill:u}=e,h=!!(n&&r),[m,p]=f.useState(!1);f.useEffect(()=>{t(u?lg:[])},[]);const g=f.useCallback(b=>{const x=b.target.files;t(()=>{const y=Array.from(x!=null?x:[]);if(y&&y.length)return p(!0),y})},[t]);return i.jsxs(qw,{styles:d,children:[a&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:o},children:a}),i.jsx(Uw,{id:o,name:o,accept:c.join(","),"data-test":`${o}__upload-input`,disabled:l,multiple:s>1,onChange:g,type:"file","aria-errormessage":`${o}--error`,"aria-describedby":`${o}--error`}),u&&!m&&i.jsx(J,{children:u.map(b=>typeof b=="string"?`- ${b}`:`- [${b.filename}](${b.url})`).join(`
`)}),i.jsx(nn,{id:`${o}--error`,hasError:h,errorMessage:n,styles:d})]})},$w=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,prefill:o,hidden:a,label:s,optional:c,validations:l,"file-upload-limit":d,"allowed-file-types":u}=e.attributes,h=e.name,m=_t(h,t.attributes["next-step"].name),p=Ke(v=>{var _;return(_=v.form[t.attributes["next-step"].name])==null?void 0:_.values}),b=(p&&p[h])!==lg,x=hn({hidden:a,optional:c,validations:b?l:[]}),y=m(a);return f.useEffect(()=>{y&&n.setField(h,"")},[y]),y?null:i.jsx(Te.Field,{id:h,name:h,component:Hw,disabled:m(r),validate:x,label:s,fileUploadLimit:d,allowedFileTypes:u,styles:e.styles,prefill:o})},Gw=C("div").withConfig({displayName:"ThemedFormSelect__OutlinedContainer",componentId:"sc-14x9c3j-0"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),Ww=C("div").withConfig({displayName:"ThemedFormSelect__MaterialContainer",componentId:"sc-14x9c3j-1"})(["",""],No);function wl(e){const{id:t,input:n,label:r,styles:o,meta:{error:a,submitFailed:s},...c}=e,{inputStyle:l}=f.useContext(tt),d=!!(a&&s);switch(l){case Pt.Material:return i.jsxs(Ww,{children:[i.jsx(cg,{...n,...c,id:t,hasError:d,"aria-invalid":d,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,labelText:r,styles:o}),i.jsx(nn,{id:`${t}--error`,hasError:d,errorMessage:a,styles:o})]});default:case Pt.Outlined:return i.jsxs(Gw,{styles:o,children:[r&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:t},children:r}),i.jsx(jd,{...n,...c,id:t,hasError:d,"aria-invalid":d,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,"aria-label":r!=null?r:t,styles:o}),i.jsx(nn,{id:`${t}--error`,hasError:d,errorMessage:a,styles:o})]})}}const fo=C("button").withConfig({displayName:"IconButton",componentId:"sc-1qrgawo-0"})(["cursor:pointer;pointer-events:auto;height:",";width:",";background:none;display:flex;align-items:center;justify-content:center;flex:none;border-radius:",";outline:0 !important;transition:box-shadow ",",background-color ",";box-shadow:0 0 0 2px transparent;:hover:not(:disabled){background-color:",";}:focus-visible:not(:disabled){box-shadow:0 0 0 2px ",";}:active:not(:disabled){background-color:",";}svg{color:",";}&:disabled{cursor:not-allowed;opacity:0.25;}"],I.Spacing[6],I.Spacing[6],({theme:e})=>e.borderRadius,it.Fast,it.Fast,vt(I.Color.CoreSlate200).fade(.5).rgb().string(),({theme:e})=>e.colorPrimary,vt(I.Color.CoreSlate300).fade(.5).rgb().string(),({theme:e})=>e.colorFont),em=C("div").withConfig({displayName:"ThemedMaskedInput__Container",componentId:"sc-1fzoepq-0"})(["position:relative;"]),zw=C(Ds).withConfig({displayName:"ThemedMaskedInput__StyledThemedMaskedInput",componentId:"sc-1fzoepq-1"})(["",";"," left:0;position:absolute;background:transparent !important;border-color:transparent;caret-color:#000000;color:transparent !important;-webkit-text-fill-color:transparent !important;"],e=>Pr(e,e.theme,e.styles),e=>{if(e.$secured)return`font-family: ${e.theme.text.fontFamily.mono};
        &::placeholder {
          font-family: ${e.$fontFamily||e.theme.text.fontFamily.base};
        }
      `}),Yw=C(ws).withConfig({displayName:"ThemedMaskedInput__DisplayInput",componentId:"sc-1fzoepq-2"})(["",";",""],e=>Pr(e,e.theme,e.styles),e=>{if(e.$secured)return`font-family: ${e.theme.text.fontFamily.mono};
        &::placeholder {
          font-family: ${e.$fontFamily||e.theme.text.fontFamily.base};
        }
      `}),Kw=C(Ds).withConfig({displayName:"ThemedMaskedInput__StyledMaterialThemedMaskedInput",componentId:"sc-1fzoepq-3"})([""," font-size:",";font-weight:",";line-height:",";padding:"," "," "," ",";width:100%;left:0;position:absolute;background-color:",";border-color:transparent;caret-color:#000000;color:transparent !important;"],({$styles:e,$secured:t,theme:n})=>{var o,a;const r=t?n.text.fontFamily.mono:(a=(o=e==null?void 0:e["font-family"])==null?void 0:o.base)==null?void 0:a.base;return`font-family: ${r!=null?r:n.text.fontFamily.base};`},({$styles:e})=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e["font-size"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:Yt.input},({$styles:e})=>{var t,n,r;return(r=(n=(t=e==null?void 0:e["font-weight"])==null?void 0:t.value)==null?void 0:n.base)!=null?r:pn.regular},({$styles:e})=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e["line-height"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:Yn.input},I.Spacing[2],I.Spacing[2],I.Spacing[2],I.Spacing[1],({$styles:e,theme:t})=>{var n,r,o;return(o=k((r=(n=e==null?void 0:e["background-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:t.colorInputBackground}),Qw=C(dr).withConfig({displayName:"ThemedMaskedInput__DisplayMaterialInput",componentId:"sc-1fzoepq-4"})(["background-color:transparent !important;pointer-events:none;> input{"," background-color:transparent !important;}"],({styles:e,$secured:t,theme:n})=>{var o,a;const r=t?n.text.fontFamily.mono:(a=(o=e==null?void 0:e["font-family"])==null?void 0:o.base)==null?void 0:a.base;return`font-family: ${r!=null?r:n.text.fontFamily.base};`}),Zw=C("div").withConfig({displayName:"ThemedMaskedInput__OutlinedContainer",componentId:"sc-1fzoepq-5"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),Jw=C("div").withConfig({displayName:"ThemedMaskedInput__MaterialContainer",componentId:"sc-1fzoepq-6"})(["",""],No),dg=C.div.withConfig({displayName:"ThemedMaskedInput__ButtonContainer",componentId:"sc-1fzoepq-7"})(["position:absolute;right:0;z-index:",";height:100%;display:flex;align-items:center;padding-right:",";[dir='rtl'] &{right:unset;left:0;padding-right:unset;padding-left:",";}"],At.inputButtons,I.Spacing[2],I.Spacing[2]),Xw=C(dg).withConfig({displayName:"ThemedMaskedInput__MaterialButtonContainer",componentId:"sc-1fzoepq-8"})(["height:","px;"],Ed),ug=({meta:{error:e,submitFailed:t},input:n,mask:r,label:o,secure:a=!0,serverError:s,styles:c,...l})=>{var T,R,O,D;const{inputStyle:d}=f.useContext(tt),[u,{toggle:h,set:m}]=st(a);f.useEffect(()=>{m(a)},[a,m]);const p=u?e_((T=n.value)!=null?T:"",r):(R=n.value)!=null?R:"",g=t&&e||s,b=!!g,x=(D=(O=c==null?void 0:c["font-family"])==null?void 0:O.base)==null?void 0:D.base,[y,{enable:v,disable:_}]=st(!1),A={"data-1p-ignore":!0};switch(d){case Pt.Material:return i.jsx(Jw,{children:i.jsxs(em,{children:[a&&i.jsx(Xw,{children:i.jsx(fo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:h,tabIndex:-1,"aria-label":u?"show value":"hide value",children:u?i.jsx(ds,{"aria-hidden":!0,height:16,width:16}):i.jsx(us,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(Kw,{...l,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholder:void 0,placeholderChar:" ",onFocus:v,onBlur:_,"aria-invalid":b,"aria-errormessage":`${l.id}--error`,"aria-describedby":`${l.id}--error`,$styles:c,$secured:!!u,...A}),i.jsx(Qw,{value:p,readOnly:!0,disabled:l.disabled,hasError:b,labelText:o!=null?o:"",tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input",styles:c,$secured:!!u,focused:y}),i.jsx(nn,{id:`${l.id}--error`,hasError:b,errorMessage:g,styles:c})]})});default:return i.jsxs(Zw,{styles:c,children:[o&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:n.name},children:o}),i.jsxs(em,{children:[a&&i.jsx(dg,{children:i.jsx(fo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:h,tabIndex:-1,"aria-label":u?"show value":"hide value",children:u?i.jsx(ds,{"aria-hidden":!0,height:16,width:16}):i.jsx(us,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(zw,{...l,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholderChar:" ",placeholder:void 0,"aria-invalid":b,"aria-errormessage":`${l.id}--error`,"aria-describedby":`${l.id}--error`,styles:c,$fontFamily:x,$secured:!!u,...A}),i.jsx(Yw,{value:p,readOnly:!0,disabled:l.disabled,hasError:b,placeholder:l.placeholder,tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input",styles:c,$fontFamily:x,$secured:!!u})]}),i.jsx(nn,{id:`${l.id}--error`,hasError:b,errorMessage:g,styles:c})]})}},tm="•";function e_(e,t){return Array.isArray(t)?e.split("").map((n,r)=>t[r]instanceof RegExp?tm:n).join(""):tm.repeat(e.length)}const t_=C("div").withConfig({displayName:"ThemedFormInternationalDb__OutlinedLabelContainer",componentId:"sc-qpdgwp-0"})(["",""],({styles:e})=>Dn(e)),n_=({allowedIdTypes:e,countryOptions:t,idTypeOptions:n,hideCountryIfPrefilled:r,hideTypeIfPrefilled:o,hideCountryIfSingleChoice:a,hideTypeIfSingleChoice:s,fieldKeyIdbCountry:c,fieldKeyIdbType:l,fieldKeyIdbValue:d,label:u,labelIdbCountry:h,labelIdbType:m,labelIdbValue:p,placeholderIdbCountry:g,placeholderIdbType:b,placeholderIdbValue:x,validateIdbCountry:y,validateIdbType:v,validateIdbValue:_,serverErrorIdbCountry:A,serverErrorIdbType:T,serverErrorIdbValue:R,disabled:O,styles:D,setField:L,selectedCountry:H,selectedType:M,countryPrefilled:B,typePrefilled:V})=>{var re,ae,Ce,we,me,Ie,le,ee,ce,_e;const q=f.useMemo(()=>{const pe=e.find(Le=>Le["country-code"]===H&&Le["id-type"]===M),Je=pe==null?void 0:pe.placeholder,lt=!!(pe!=null&&pe.secure),ue=pe==null?void 0:pe.description,Pe=(pe==null?void 0:pe.mask)!=null&&pe.mask!==""?pe.mask.split("").map(Le=>{switch(Le){case"#":return/\d/;case"@":return/[a-z]/i;case"*":return/\w/;default:return Le}}):!1;return{description:ue,mask:Pe,placeholder:Je,secure:lt}},[e,H,M]),$=f.useMemo(()=>B&&r||t.length===1&&a,[t,B,r,a]),Q=f.useMemo(()=>V&&o||n.length===1&&s,[n,V,o,s]),G=f.useCallback(()=>{L(d,""),L(l,"")},[l,d,L]),Y=f.useCallback(()=>{L(d,"")},[d,L]);return i.jsxs(i.Fragment,{children:[u&&i.jsx(t_,{styles:(ae=(re=D==null?void 0:D["input-select-style"])==null?void 0:re.base)==null?void 0:ae.base,children:i.jsx(J,{wrapper:"label",wrapperProps:{style:{marginBottom:0}},children:u})}),!$&&i.jsxs(Te.Field,{"data-test":"idb-country",id:c,name:c,component:wl,disabled:O,validate:y,label:h,styles:(we=(Ce=D==null?void 0:D["input-select-style"])==null?void 0:Ce.base)==null?void 0:we.base,serverError:A,onChange:G,children:[i.jsx("option",{value:"",disabled:!0,children:g!=null?g:""}),t.map(pe=>i.jsx("option",{value:pe.code,children:pe.name},pe.code))]}),!Q&&i.jsxs(Te.Field,{"data-test":"idb-type",id:l,name:l,component:wl,disabled:O||!H,validate:v,label:m,styles:(Ie=(me=D==null?void 0:D["input-select-style"])==null?void 0:me.base)==null?void 0:Ie.base,serverError:T,onChange:Y,children:[i.jsx("option",{value:"",disabled:!0,children:b!=null?b:""}),n.map(pe=>i.jsx("option",{value:pe.idbType,children:pe.idbName},pe.idbType))]}),i.jsx(Te.Field,{"data-test":"idb-value",name:d,id:d,component:ug,disabled:O||!H||!M,parse:en,validate:_,label:p,mask:q==null?void 0:q.mask,placeholder:(q==null?void 0:q.placeholder)||x,secure:q==null?void 0:q.secure,styles:(ee=(le=D==null?void 0:D["input-text-style"])==null?void 0:le.base)==null?void 0:ee.base,serverError:R}),!!(q!=null&&q.description)&&i.jsx(ot,{styles:(_e=(ce=D==null?void 0:D["text-style"])==null?void 0:ce.base)==null?void 0:_e.base,children:q==null?void 0:q.description})]})},i_=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const o=`${e.name}.idb_country`,a=`${e.name}.idb_type`,s=`${e.name}.idb_value`,{"allowed-id-types":c,"hide-country-if-prefilled":l,"hide-type-if-prefilled":d,"hide-country-if-single-choice":u,"hide-type-if-single-choice":h,"prefill-idb-country":m,"prefill-idb-type":p,"prefill-idb-value":g,"validations-idb-country":b,"validations-idb-type":x,"validations-idb-value":y,label:v,"label-idb-country":_,"label-idb-type":A,"label-idb-value":T,"placeholder-idb-country":R,"placeholder-idb-type":O,"placeholder-idb-value":D,"error-idb-country":L,"error-idb-type":H,"error-idb-value":M,disabled:B,hidden:V,optional:q}=e.attributes,$=zn(t,r,o,m),Q=zn(t,r,a,p),G=zn(t,r,s,g),Y=$&&Q&&G,re=_t("",t.attributes["next-step"].name),ae=re(V),Ce=hn({optional:q,validations:b}),we=hn({optional:q,validations:x}),me=hn({optional:q,validations:y}),Ie=t.attributes["next-step"].name,le=Ke(Le=>Te.formValueSelector(Ie)(Le,o)),ee=Ke(Le=>Te.formValueSelector(Ie)(Le,a)),ce=f.useMemo(()=>Qh("country-code",c),[c]),_e=f.useMemo(()=>Object.keys(ce).map(Le=>({name:ce[Le][0]["country-name"],code:Le})),[ce]),pe=f.useMemo(()=>{var Fe;if(!le)return[];const Le=(Fe=ce[le])==null?void 0:Fe.map(nt=>({idbType:nt["id-type"],idbName:nt.name}));return Le==null?[]:Le},[ce,le]),Je=f.useMemo(()=>new Set(_e.map(({code:Le})=>Le)),[_e]),lt=f.useMemo(()=>{var Le;return m?new Set((Le=ce[m])==null?void 0:Le.map(({"id-type":Fe})=>Fe)):new Set},[m,ce]),ue=!!m&&Je.has(m),Pe=!!p&&lt.has(p);return f.useEffect(()=>{ae?(n.setField(o,""),n.setField(a,""),n.setField(s,"")):ue?(n.setField(o,m),Pe&&(n.setField(a,p),g&&n.setField(s,g))):_e.length===1&&n.setField(o,_e[0].code)},[ae]),f.useEffect(()=>{ae||pe.length===1&&n.setField(a,pe[0].idbType)},[ae,a,pe]),ae?null:i.jsx(i.Fragment,{children:i.jsx(n_,{allowedIdTypes:c,countryOptions:_e,idTypeOptions:pe,hideCountryIfPrefilled:l,hideTypeIfPrefilled:d,hideCountryIfSingleChoice:u,hideTypeIfSingleChoice:h,disabled:re(B),fieldKeyIdbCountry:o,fieldKeyIdbType:a,fieldKeyIdbValue:s,label:v,labelIdbCountry:_,labelIdbType:A,labelIdbValue:T,placeholderIdbCountry:R,placeholderIdbType:O,placeholderIdbValue:D,validateIdbCountry:Ce,validateIdbType:we,validateIdbValue:me,serverErrorIdbCountry:Y?L:null,serverErrorIdbType:Y?H:null,serverErrorIdbValue:Y?M:null,styles:e.styles,setField:n.setField,selectedCountry:le,selectedType:ee,countryPrefilled:ue,typePrefilled:Pe})})},r_=({component:e,inquiry:t,inquiryLoading:n,actionsApi:r})=>{const{disabled:o,error:a,hidden:s,label:c,mask:l,optional:d,placeholder:u,prefill:h,secure:m,validations:p}=e.attributes,g=e.name,b=zn(t,n,g,h),x=f.useMemo(()=>l!=null?l.split("").map(A=>{switch(A){case"#":return/\d/;case"@":return/[a-z]/i;case"*":return/\w/;default:return A}}):!1,[l]),y=_t(g,t.attributes["next-step"].name),v=hn({hidden:s,optional:d,validations:p}),_=y(s);return f.useEffect(()=>{_?r.setField(g,""):!_&&!qt(h)&&r.setField(g,h)},[_]),_?null:i.jsx(Te.Field,{name:g,id:g,component:ug,disabled:y(o),parse:en,validate:v,label:c,secure:m,mask:x,placeholder:u,serverError:b?a:null,styles:e.styles})},o_=C.div.withConfig({displayName:"ThemedFormMultiSelect__Container",componentId:"sc-1rmccfo-0"})([""," ",""],Bi,tc),a_=C("div").withConfig({displayName:"ThemedFormMultiSelect__StyledContainer",componentId:"sc-1rmccfo-1"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),s_=C(Zl).withConfig({displayName:"ThemedFormMultiSelect__StyledIconCaretDown",componentId:"sc-1rmccfo-2"})(["margin-right:",";display:inline-block;pointer-events:none;rect[fill],path[fill]{fill:",";}"],I.Spacing[4],e=>{var t,n;return e.$componentStyles?k((t=e.$componentStyles["stroke-color"])==null?void 0:t.chevron.base):(n=e.theme.colorFont)!=null?n:Be.gray50}),c_=(e,t,n)=>({...e,container:(r,o)=>({...r,width:"100%",...e.container!=null&&e.container({},o)}),control:(r,o)=>{var a;return{...r,backgroundColor:n.colorInputBackground,borderRadius:Math.min(parseInt((a=n.borderRadius)!=null?a:un.base,10),parseInt(un.rounded)),borderColor:o.menuIsOpen||o.isFocused?n.colorPrimary:n.colorInputBorder,width:"100%",minHeight:Vi.input,boxShadow:o.isFocused?`0 0 0 1px ${n.colorPrimary}`:`0 0 0 0 ${n.colorPrimary}`,"&:hover":{},transition:it.Fast,...t?{borderColor:Be.red100,color:Be.red100,boxShadow:o.isFocused?`0 0 0 1px ${Be.red100}`:`0 0 0 0 ${Be.red100}`}:void 0,...e.control!=null&&e.control({},o)}},clearIndicator:(r,o)=>({...r,paddingRight:11,...e.clearIndicator!=null&&e.clearIndicator({},o)}),indicatorSeparator:(r,o)=>({...r,display:"none",...e.indicatorSeparator!=null&&e.indicatorSeparator({},o)}),menu:(r,o)=>({...r,backgroundColor:n.colorDropdownBackground,boxShadow:gi.High,zIndex:At.dropdown,...e.menu!=null&&e.menu({},o)}),menuList:(r,o)=>({...r,padding:sn,...e.menuList!=null&&e.menuList({},o)}),multiValue:(r,o)=>{var a;return{...r,backgroundColor:(a=n.colorButtonPrimary)!=null?a:n.colorPrimary,color:n.colorFontButtonPrimary,fontFamily:n.fontFamily,paddingLeft:sn/2,paddingRight:o.isDisabled?sn*1.5:0,...e.multiValue!=null&&e.multiValue({},o)}},multiValueLabel:(r,o)=>{var a;return{...r,color:n.colorFontButtonPrimary,fontWeight:parseInt((a=n.buttonFontWeight)!=null?a:pn.medium),...e.multiValueLabel!=null&&e.multiValueLabel({},o)}},multiValueRemove:(r,o)=>{var a,s;return{...r,color:n.colorFontButtonPrimary,transitionDuration:it.Fast,":hover":{backgroundColor:vt((a=n.colorButtonPrimary)!=null?a:n.colorPrimary).mix(vt("white"),.2).hex()},":active":{backgroundColor:vt((s=n.colorButtonPrimary)!=null?s:n.colorPrimary).mix(vt("white"),.4).hex()},...e.multiValueRemove!=null&&e.multiValueRemove({},o)}},option:(r,o)=>{var l;const a={...r,backgroundColor:"transparent",borderRadius:un.rounded,color:(l=n.colorFont)!=null?l:Be.gray20,display:"flex",fontFamily:n.fontFamily,alignItems:"center",padding:`${I.Spacing[3]} ${I.Spacing[2]}`,transitionDuration:it.Fast,":active":{backgroundColor:n.colorDropdownOption}},s=o.isFocused?{backgroundColor:n.colorDropdownOption,":active":{backgroundColor:n.colorDropdownOption}}:{},c=o.isDisabled?{backgroundColor:"transparent",color:Be.gray50,":active":{backgroundColor:"transparent"},overflow:"auto"}:{};return{...a,...s,...c,...e.option!=null&&e.option({},o)}},placeholder:(r,o)=>{var a;return{...r,color:(a=n.colorFont)!=null?a:Be.gray20,marginLeft:0,marginRight:0,opacity:.6,...t?{color:Be.red100}:void 0,...e.placeholder!=null&&e.placeholder({},o)}},valueContainer:(r,o)=>({...r,fontSize:parseInt(n.text.paragraph.md.fontSize,10),fontFamily:n.fontFamily,textDecoration:"none",outline:"0 !important",padding:`2px ${I.Spacing[4]}`,...e.valueContainer!=null&&e.valueContainer({},o)})});function Ya(e,t){var n;if(e){for(const r of Object.keys(t))if(t[r])return(n=k(e[r]))!=null?n:k(e.base);return k(e.base)}}const l_=(e,t,n)=>({...e,container:(r,o)=>({...r,width:"100%",...e.container!=null&&e.container({},o)}),control:(r,o)=>{var a,s,c,l,d,u,h,m,p,g,b,x,y;return{...r,borderTopWidth:E((s=(a=n["border-width"])==null?void 0:a.base.base)==null?void 0:s.top),borderBottomWidth:E((l=(c=n["border-width"])==null?void 0:c.base.base)==null?void 0:l.bottom),borderLeftWidth:E((u=(d=n["border-width"])==null?void 0:d.base.base)==null?void 0:u.left),borderRightWidth:E((m=(h=n["border-width"])==null?void 0:h.base.base)==null?void 0:m.right),backgroundColor:Ya(n["background-color"].base,{disabled:o.isDisabled,errored:t,focused:o.isFocused}),borderRadius:E(n["border-radius"].base.base),borderColor:Ya(n["border-color"].base,{disabled:o.isDisabled,errored:t,focused:o.isFocused,active:o.menuIsOpen}),width:"100%",minHeight:Vi.input,boxShadow:[(g=E((p=n["shadow-offset"].base.base)==null?void 0:p.x))!=null?g:"0",(x=E((b=n["shadow-offset"].base.base)==null?void 0:b.y))!=null?x:"0",E(n["shadow-radius"].base.base),o.isFocused?"1px":"0",k((y=n["shadow-color"])==null?void 0:y.base.base)].join(" "),"&:hover":{},transition:it.Fast,...t?{borderColor:Be.red100,color:Be.red100,boxShadow:o.isFocused?`0 0 0 1px ${Be.red100}`:`0 0 0 0 ${Be.red100}`}:void 0,...e.control!=null&&e.control({},o)}},clearIndicator:(r,o)=>({...r,paddingRight:11,...e.clearIndicator!=null&&e.clearIndicator({},o)}),indicatorSeparator:(r,o)=>({...r,display:"none",...e.indicatorSeparator!=null&&e.indicatorSeparator({},o)}),menu:(r,o)=>{var a,s;return{...r,boxShadow:gi.High,backgroundColor:k((s=(a=n["background-color"])==null?void 0:a.option)==null?void 0:s.base),zIndex:At.dropdown,...e.menu!=null&&e.menu({},o)}},menuList:(r,o)=>({...r,padding:sn,...e.menuList!=null&&e.menuList({},o)}),multiValue:(r,o)=>{var a,s;return{...r,backgroundColor:k((a=n["background-color"])==null?void 0:a.base.base),justifyContent:n.justify.base.base,color:k((s=n["text-color"])==null?void 0:s.base.base),fontFamily:n["font-family"].value.base,paddingLeft:sn/2,paddingRight:o.isDisabled?sn*1.5:0,width:"100%",margin:0,borderRadius:0,...e.multiValue!=null&&e.multiValue({},o)}},multiValueLabel:(r,o)=>({...r,color:Ya(n["text-color"].value,{disabled:o.isDisabled,errored:t,focused:o.isFocused}),fontWeight:dn(n["font-weight"].value.base),lineHeight:E(n["line-height"].value.base),fontSize:E(n["font-size"].value.base),...e.multiValueLabel!=null&&e.multiValueLabel({},o)}),multiValueRemove:(r,o)=>({...r,transitionDuration:it.Fast,opacity:"60%",":hover":{opacity:"80%"},":active":{opacity:"100%"},...e.multiValueRemove!=null&&e.multiValueRemove({},o)}),option:(r,o)=>{var l,d,u,h,m,p,g,b,x,y,v,_,A,T,R,O,D,L,H,M;const a={...r,paddingTop:E((l=n.margin.option.base)==null?void 0:l.top),paddingBottom:E((d=n.margin.option.base)==null?void 0:d.bottom),paddingLeft:E((u=n.margin.option.base)==null?void 0:u.left),paddingRight:E((h=n.margin.option.base)==null?void 0:h.right),borderRadius:un.rounded,color:k((m=n["text-color"])==null?void 0:m.value.base),display:"flex",fontFamily:(x=(g=(p=n["font-family"])==null?void 0:p.value)==null?void 0:g.base)!=null?x:(b=n["font-family"])==null?void 0:b.base.base,fontSize:E((y=n["font-size"].value)==null?void 0:y.base),fontWeight:dn((v=n["font-weight"].value)==null?void 0:v.base),letterSpacing:(A=E((_=n["letter-spacing"].value)==null?void 0:_.base))!=null?A:E(n["letter-spacing"].base.base),lineHeight:E((T=n["line-height"].value)==null?void 0:T.base),alignItems:"center",padding:`${I.Spacing[3]} ${I.Spacing[2]}`,transitionDuration:it.Fast,":active":{backgroundColor:k((O=(R=n["background-color"])==null?void 0:R.option)==null?void 0:O.active)}},s=o.isFocused?{backgroundColor:k((L=(D=n["background-color"])==null?void 0:D.option)==null?void 0:L.focused),":active":{backgroundColor:k((M=(H=n["background-color"])==null?void 0:H.option)==null?void 0:M.active)}}:{},c=o.isDisabled?{backgroundColor:"transparent",color:Be.gray50,":active":{backgroundColor:"transparent"},overflow:"auto"}:{};return{...a,...s,...c,...e.option!=null&&e.option({},o)}},placeholder:(r,o)=>({...r,color:Ya(n["text-color"].placeholder,{disabled:o.isDisabled,errored:t,focused:o.isFocused}),fontFamily:n["font-family"].placeholder.base,fontSize:E(n["font-size"].placeholder.base),fontWeight:dn(n["font-weight"].placeholder.base),letterSpacing:E(n["letter-spacing"].placeholder.base),lineHeight:E(n["line-height"].placeholder.base),marginLeft:0,marginRight:0,opacity:.6,...e.placeholder!=null&&e.placeholder({},o)}),valueContainer:(r,o)=>{var a,s,c,l;return{...r,fontSize:E((a=n["font-size"])==null?void 0:a.base.base),fontFamily:(s=n["font-family"])==null?void 0:s.base.base,fontWeight:dn((c=n["font-weight"])==null?void 0:c.base.base),letterSpacing:E(n["letter-spacing"].base.base),lineHeight:E(n["line-height"].base.base),color:k((l=n["text-color"])==null?void 0:l.base.base),textDecoration:"none",outline:"0 !important",padding:`2px ${I.Spacing[4]}`,...e.valueContainer!=null&&e.valueContainer({},o)}},input:r=>{var o;return{...r,color:k((o=n["text-color"])==null?void 0:o.base.base)}}}),d_=(e,t)=>f.useMemo(()=>({DropdownIndicator:n=>{const{value:r,isDisabled:o}=n.selectProps,a=f.useContext(tt);return Array.isArray(r)&&r.length>0?null:i.jsx(s_,{theme:a,disabled:o,$componentStyles:t})},MultiValueRemove:n=>{const{isDisabled:r}=n.selectProps;return r?null:i.jsx(wx.MultiValueRemove,{...n})},...e}),[]),nm=1e3,u_=({className:e,components:t,id:n,input:{value:r,onBlur:o,onChange:a,...s},isOptionDisabled:c=y=>!!y.disabled,label:l,meta:{error:d,submitFailed:u},onFocusOption:h,options:m,placeholder:p,styles:g={},componentStyles:b,...x})=>{const y=f.useContext(tt),v=d_(t,b),_=f.useMemo(()=>m.reduce((B,V,q)=>(B[V.value]=q,B),{}),[m]),A=f.useMemo(()=>r==null||r===""?[]:r.map(B=>_[B]).map(B=>m[B]),[r,_]),T=f.useMemo(()=>{const B={minMatchCharLength:1,threshold:.4,keys:[{name:"label",weight:.9},{name:"value",weight:.1}]};return new P0(m,B)},[m]),R=m.length>nm,O=f.useCallback(B=>new Promise(V=>{setTimeout(()=>V(T.search(B).map(({item:q})=>q)),R?250:0)}),[T]),D=f.useMemo(()=>R?m.slice(0,nm):m,[m]),L=f.useCallback(()=>o(void 0),[o,r]),H=f.useCallback(B=>{const V=(B!=null?B:[]).map(q=>_[q.value]).sort((q,$)=>q-$).map(q=>m[q].value);a(V)},[a,_,m]),M=!!(d&&u);if(b){const B=l_(g,M,b);return i.jsxs(a_,{className:e,styles:b,children:[l&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:n},children:l}),i.jsx(Tu,{...s,id:n,isMulti:!0,isSearchable:!0,menuPlacement:"auto",loadOptions:O,defaultOptions:D,...x,isDisabled:x.disabled||x.isDisabled,isOptionDisabled:c,onBlur:L,onChange:H,value:A,options:m,placeholder:p,className:e,styles:B,components:v,onFocusOption:h,"aria-invalid":M,"aria-errormessage":`${n}--error`,"aria-describedby":`${n}--error`}),i.jsx(nn,{id:`${n}--error`,hasError:M,errorMessage:d,styles:b})]})}else{const B=c_(g,M,y);return i.jsxs(o_,{children:[l&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:n},children:l}),i.jsx(Tu,{...s,id:n,isMulti:!0,isSearchable:!0,menuPlacement:"auto",loadOptions:O,defaultOptions:D,...x,isDisabled:x.disabled||x.isDisabled,isOptionDisabled:c,onBlur:L,onChange:H,value:A,options:m,placeholder:p,className:e,styles:B,components:v,onFocusOption:h,"aria-invalid":M,"aria-errormessage":`${n}--error`,"aria-describedby":`${n}--error`}),i.jsx(nn,{id:`${n}--error`,hasError:M,errorMessage:d,styles:b})]})}},m_=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,placeholder:l,prefill:d,validations:u}=e.attributes,h=e.name,m=_t(h,t.attributes["next-step"].name),p=hn({hidden:o,optional:s,validations:u}),g=m(o);return f.useEffect(()=>{g?n.setField(h,""):!g&&!qt(d)&&n.setField(h,d)},[g]),g?null:i.jsx(Te.Field,{id:h,name:h,component:u_,disabled:m(r),validate:p,label:a,placeholder:l,options:c.map(b=>({label:b.text,value:b.value})),componentStyles:e.styles})},h_=/^-?\d*\.?\d*$/,p_=/\d+/g;function f_(e){return h_.test(e)}const g_=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:d=[],precision:u}=e.attributes,h=e.name,m=_t(h,t.attributes["next-step"].name),p=hn({hidden:o,optional:s,validations:d}),g=m(o),[b,x]=f.useState(null);f.useEffect(()=>{g?n.setField(h,""):!g&&!qt(l)&&n.setField(h,l)},[g]);const y=f.useCallback((_,A)=>{var L;if(_==null||!_.trim())return x(null),null;if(!f_(_))return A;const[T,R]=(L=_.match(p_))!=null?L:[];if((R==null?void 0:R.length)>u||[T,R].join("").length>16)return A;if(_.endsWith(".")||_.endsWith("0"))x(_);else{if(_==="-")return x(_),A;x(null)}const D=parseFloat(b==="-"?-_:_);return 0<D&&D<1e-6?1e-6:D},[]),v=f.useCallback(_=>b!=null?b:_==null?"":_,[b]);return g?null:i.jsx(Te.Field,{normalize:y,format:v,name:h,id:h,component:$i,disabled:m(r),parse:en,validate:p,label:a,placeholder:c,type:"text",inputmode:"decimal",styles:e.styles})},b_=e=>e.includes("Android"),C_=({id:e,hasError:t,hasWarning:n,enableAutofocus:r,onBlur:o,onChange:a,styles:s,...c})=>{const l=f.useCallback(u=>u==null?a(""):a(u),[a]),d=f.useMemo(()=>!b_(navigator.userAgent),[navigator.userAgent]);return i.jsx("div",{dir:"ltr",children:i.jsx(D0,{autoFocus:r,smartCaret:d,onChange:l,...c,onBlur:()=>o==null?void 0:o(void 0),"aria-invalid":t,"aria-errormessage":`${e}--error`,"aria-describedby":`${e}--error`,id:e,autoComplete:"tel-national"})})},mg=C(C_).withConfig({displayName:"PhoneInput",componentId:"sc-1ug4ee2-0"})(["",";display:flex;padding:0;"," & .PhoneInputCountry{padding-left:","px;margin-right:0;","}}& .PhoneInputInput{",";height:","px;padding:"," "," "," ","px;&,&:not(:disabled){background-color:transparent;border:none;box-shadow:none;}&:disabled{background-color:",";}","}& .PhoneInputCountrySelectArrow{border-color:",";border-style:solid;border-width:0 0 2px 2px;color:transparent;content:'';display:block;height:8px;margin:-4px 0 0 8px;opacity:1;transform:rotate(-45deg);transition:transform 0.1s,border-color 0.2s ease;width:8px;}&:focus-within .PhoneInputCountrySelectArrow{border-color:",";}"],e=>Pr(e,e.theme,e.styles),({disabled:e,styles:t})=>{var n,r;return e&&W(["border-color:",";"],t!=null?k((r=(n=t==null?void 0:t["border-color"])==null?void 0:n.base)==null?void 0:r.disabled):I.Color.CoreSlate200)},F.base*2,({disabled:e,styles:t})=>{var n,r,o,a,s;return e&&W(["&,select{background-color:",";border-color:",";"],(o=k((r=(n=t==null?void 0:t["background-color"])==null?void 0:n.base)==null?void 0:r.disabled))!=null?o:Sl,t!=null?k((s=(a=t==null?void 0:t["border-color"])==null?void 0:a.base)==null?void 0:s.disabled):I.Color.CoreSlate200)},e=>Pr(e,e.theme,e.styles),parseFloat(Vi.input)-2,F.inputPadding,F.inputPadding,F.inputPadding,F.base,({styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["background-color"])==null?void 0:t.base)==null?void 0:n.disabled))!=null?r:Sl},({styles:e,hasError:t})=>t&&W(["&:not(:focus-within){color:",";&::placeholder{color:",";}}"],({theme:n})=>{var r,o,a;return(a=k((o=(r=e==null?void 0:e["text-color"])==null?void 0:r.error)==null?void 0:o.base))!=null?a:n.colorError},({theme:n})=>{var r,o,a;return(a=k((o=(r=e==null?void 0:e["text-color"])==null?void 0:r.error)==null?void 0:o.base))!=null?a:n.colorError}),Be.gray20,e=>e.theme.colorPrimary),x_=C("div").withConfig({displayName:"PhoneInputField__Container",componentId:"sc-188oy23-0"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),v_=e=>{const{id:t,className:n,input:r,meta:{error:o,submitFailed:a,warning:s},autoFocus:c,label:l,placeholder:d,"data-test":u="form",defaultCountry:h,serverError:m,styles:p,...g}=e,b=a&&(o||s)||m,x=!!b;return i.jsxs(x_,{className:n,styles:p,children:[l&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:t},children:l}),i.jsx(mg,{...r,...g,autoFocus:c,hasError:x,"aria-invalid":x,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,id:t,placeholder:d,defaultCountry:h,"data-test":u,styles:p}),i.jsx(nn,{id:`${t}--error`,"data-test":`${u}-error`,hasError:x,errorMessage:b,styles:p})]})},y_=({component:e,inquiry:t,inquiryLoading:n,actionsApi:r})=>{const{disabled:o,error:a,hidden:s,label:c,optional:l,placeholder:d,prefill:u,validations:h,"country-code":m,"disable-country-code-selection":p,"phone-number-format":g}=e.attributes,b=e.name,x=zn(t,n,b,u),y=_t(b,t.attributes["next-step"].name),v=hn({hidden:s,optional:l,validations:h}),_=y(s);if(f.useEffect(()=>{_?r.setField(b,""):!_&&!qt(u)&&r.setField(b,u)},[_]),_)return null;let A;return g===fl.International?A=!0:g===fl.National?A=!1:A=void 0,i.jsx(Te.Field,{id:b,name:b,component:v_,disabled:y(o),parse:en,validate:v,label:c,placeholder:d,defaultCountry:m,initialValueFormat:A?null:"national",countrySelectProps:p?I_:void 0,countries:p?[m]:void 0,addInternationalOption:!p,international:A,serverError:x?a:null,styles:e.styles})},I_={disabled:!0,arrowComponent:()=>null},S_=C("div").withConfig({displayName:"ThemedFormRadioGroup__Container",componentId:"sc-df00c1-0"})(["",""],Bi),w_=C("div").withConfig({displayName:"ThemedFormRadioGroup__MaterialContainer",componentId:"sc-df00c1-1"})([""," padding-top:",";"],No,I.Spacing[2]),__=C("fieldset").withConfig({displayName:"ThemedFormRadioGroup__ItemContainer",componentId:"sc-df00c1-2"})(["display:flex;flex-direction:column;"]),R_=C(J).attrs(()=>({wrapper:"legend"})).withConfig({displayName:"ThemedFormRadioGroup__Legend",componentId:"sc-df00c1-3"})(["",""],({styles:e})=>Dn(e)),A_=C("label").withConfig({displayName:"ThemedFormRadioGroup__LineItem",componentId:"sc-df00c1-4"})(["position:relative;display:flex;align-items:baseline;margin:0 ",";& + &{margin-top:",";}"],I.Spacing[2],I.Spacing[2]),T_=C("input").withConfig({displayName:"ThemedFormRadioGroup__RadioStyled",componentId:"sc-df00c1-5"})(["margin-top:-1px;margin-right:0.5em;"]),E_=C(J).attrs(()=>({wrapper:"p"})).withConfig({displayName:"ThemedFormRadioGroup__InputRadioGroupOptionLabel",componentId:"sc-df00c1-6"})(["p + p{margin:0 !important;}",""],({styles:e,disabled:t})=>({display:"inline-block",marginBottom:0,fontFamily:$t(e==null?void 0:e["font-family"].base.base),fontSize:E(e==null?void 0:e["font-size"].base.base),fontWeight:dn(e==null?void 0:e["font-weight"].base.base),letterSpacing:E(e==null?void 0:e["letter-spacing"].base.base),lineHeight:E(e==null?void 0:e["line-height"].base.base),color:t?Gi.color.text.disabled:k(e==null?void 0:e["text-color"].base.base),a:{color:k(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:k(e==null?void 0:e["text-color-highlight"].base.base)}})),k_=C(J).attrs(()=>({wrapper:"p"})).withConfig({displayName:"ThemedFormRadioGroup__InputRadioGroupOptionDescription",componentId:"sc-df00c1-7"})(["p + p{margin:0 !important;}",""],({styles:e,disabled:t})=>({display:"inline-block",marginBottom:0,fontFamily:$t(e==null?void 0:e["font-family"].description.base),fontSize:E(e==null?void 0:e["font-size"].description.base),fontWeight:dn(e==null?void 0:e["font-weight"].description.base),letterSpacing:E(e==null?void 0:e["letter-spacing"].description.base),lineHeight:E(e==null?void 0:e["line-height"].description.base),color:t?Gi.color.text.disabled:k(e==null?void 0:e["text-color"].description.base),a:{color:k(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:k(e==null?void 0:e["text-color-highlight"].base.base)}})),N_=e=>{const{id:t,disabled:n,options:r,input:o,meta:{error:a,submitFailed:s},label:c,styles:l,...d}=e,{inputStyle:u}=f.useContext(tt),h=!!(a&&s),m=f.useCallback(g=>{o.onChange(g.currentTarget.value)},[o.onChange]),p=()=>i.jsxs(i.Fragment,{children:[i.jsxs(__,{id:t,"aria-invalid":h,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,children:[c&&i.jsx(R_,{styles:l,children:c}),r.map(({text:g,value:b,"description-text":x},y)=>{const v=`${o.name}_${y}`,_=o.value===b.toString();return i.jsxs(A_,{isSelected:_,htmlFor:v,children:[i.jsx(T_,{...o,...d,id:v,"aria-label":g,"aria-describedby":x?`${v}-description`:void 0,disabled:n,onChange:m,type:"radio",value:b,checked:b===o.value,"aria-invalid":h}),i.jsxs(ng,{spacing:I.Spacing[0],children:[i.jsx(E_,{styles:l,disabled:n,children:g}),x&&i.jsx(k_,{id:`${v}-description`,styles:l,disabled:n,children:x})]})]},b)})]}),i.jsx(nn,{id:`${t}--error`,hasError:h,errorMessage:a,styles:l})]});switch(u){case Pt.Material:return i.jsx(w_,{children:p()});case Pt.Outlined:default:return i.jsx(S_,{children:p()})}},j_=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,prefill:l,validations:d}=e.attributes,u=e.name,h=_t(u,t.attributes["next-step"].name),m=hn({hidden:o,optional:s,validations:d}),p=h(o);return f.useEffect(()=>{p?n.setField(u,""):!p&&!qt(l)&&n.setField(u,l)},[p]),p?null:i.jsx(Te.Field,{id:u,name:u,component:N_,options:c,disabled:h(r),validate:m,label:a,styles:e.styles})},P_=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,placeholder:l,prefill:d,validations:u}=e.attributes,h=e.name,m=_t(h,t.attributes["next-step"].name),p=hn({hidden:o,optional:s,validations:u}),g=m(o);return f.useEffect(()=>{g?n.setField(h,""):!g&&!qt(d)&&n.setField(h,d)},[g]),g?null:i.jsxs(Te.Field,{id:h,name:h,component:wl,disabled:m(r),validate:p,label:a,styles:e.styles,children:[i.jsx("option",{value:"",disabled:!0,children:l!=null?l:""}),c.map(b=>i.jsx("option",{value:b.value,children:b.text},b.value))]})},D_={[na.Text]:"text",[na.Email]:"email",[na.NumberPad]:"number"},O_=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"input-type":o=na.Text,disabled:a,hidden:s,label:c,optional:l,placeholder:d,prefill:u,validations:h,error:m}=e.attributes,p=e.name,g=zn(t,r,e.name,u),b=_t(p,t.attributes["next-step"].name),x=hn({hidden:s,optional:l,validations:h}),y=b(s);return f.useEffect(()=>{y?n.setField(p,""):!y&&!qt(u)&&n.setField(p,u)},[y]),y?null:i.jsx(Te.Field,{name:p,id:p,component:$i,disabled:b(a),parse:en,validate:x,label:c,placeholder:d,type:D_[o],serverError:g?m:null,styles:e.styles})},L_=C("textarea").withConfig({displayName:"MaterialTextArea__TextArea",componentId:"sc-e9r5pm-0"})([""," height:",";resize:",";"],Td,e=>e.rows?"unset":Vi.textArea,e=>e.resize||"none"),F_=C(J).withConfig({displayName:"MaterialTextArea__StyledMarkdown",componentId:"sc-e9r5pm-1"})([""," ",";"],Ad,({hasError:e,hasValue:t})=>(e||t)&&W(["top:-14px;font-size:",";"],Yt.small)),M_=C("div").withConfig({displayName:"MaterialTextArea__Container",componentId:"sc-e9r5pm-2"})(["position:relative;background-color:",";"],({theme:e})=>e.colorModalBackground);function V_({className:e,focused:t,hasError:n,hasWarning:r,labelText:o,styles:a,...s}){return i.jsxs(M_,{className:e,children:[i.jsx(L_,{focused:t,hasError:n,hasWarning:r,spellCheck:!1,styles:a,...s}),i.jsx(F_,{wrapper:"label",wrapperProps:{htmlFor:s.id},focused:t,hasError:n,hasValue:!!s.value,hasWarning:r,styles:a,children:o})]})}const hg=C("textarea").attrs(()=>({spellCheck:!1})).withConfig({displayName:"TextArea",componentId:"sc-1yx2okk-0"})(["",";height:",";resize:",";"],e=>Pr(e,e.theme,e.styles),e=>e.rows?"unset":Vi.textArea,e=>e.resize||"none"),B_=C("div").withConfig({displayName:"ThemedFormTextArea__OutlinedContainer",componentId:"sc-kz4u3a-0"})([""," ",""],({styles:e})=>qi(e),({styles:e})=>Dn(e)),q_=C("div").withConfig({displayName:"ThemedFormTextArea__MaterialContainer",componentId:"sc-kz4u3a-1"})(["",""],No),U_=e=>{const{id:t,className:n,input:r,meta:{error:o,submitFailed:a},autoFocus:s,label:c,placeholder:l,styles:d,"data-test":u="form",...h}=e,{inputStyle:m}=f.useContext(tt),p=!!(o&&a);switch(m){case Pt.Material:return i.jsxs(q_,{className:n,children:[i.jsx(V_,{labelText:c||l,...r,...h,autoFocus:s,hasError:p,"aria-invalid":p,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,id:t,"data-test":u,styles:d}),i.jsx(nn,{id:`${t}--error`,"data-test":`${u}-error`,hasError:p,errorMessage:o,styles:d})]});case Pt.Outlined:default:return i.jsxs(B_,{className:n,styles:d,children:[c&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:t},children:c}),i.jsx(hg,{...r,...h,autoFocus:s,hasError:p,"aria-invalid":p,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,id:t,placeholder:l,"data-test":u,styles:d}),i.jsx(nn,{id:`${t}--error`,"data-test":`${u}-error`,hasError:p,errorMessage:o,styles:d})]})}},H_=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:d,"allow-resize":u,rows:h}=e.attributes,m=e.name,p=_t(m,t.attributes["next-step"].name),g=hn({hidden:o,optional:s,validations:d}),b=p(o);return f.useEffect(()=>{b?n.setField(m,""):!b&&!qt(l)&&n.setField(m,l)},[b]),b?null:i.jsx(Te.Field,{name:m,id:m,component:U_,disabled:p(r),parse:en,validate:g,label:a,rows:h,resize:u?"vertical":"none",placeholder:c,styles:e.styles})},$_=C.div.withConfig({displayName:"LanguageSelector__LanguageWrapper",componentId:"sc-nq5bg2-0"})(["position:relative;display:flex;align-items:center;select{appearance:none;background-color:transparent;color:#696a7b;font-size:",";margin:-",";padding:",";padding-right:",";&:focus-visible{outline:"," auto 1px;}}&::after{",";height:0;width:0;pointer-events:none;right:-",";}"],Yt.h4,I.Spacing[2],I.Spacing[2],I.Spacing[4],({theme:e})=>e.colorPrimary,nc,I.Spacing[2]),G_=C.div.withConfig({displayName:"LanguageSelector__GlobeSpacer",componentId:"sc-nq5bg2-1"})(["padding-right:4px;svg{display:block;}"]),W_=e=>{const{component:t,inquiry:n}=e,[r,o]=K(),a=t.attributes["enabled-locales"];return a.length===1?i.jsx("div",{"data-test":"ui-component__language-selector","aria-disabled":!0}):i.jsxs($_,{children:[i.jsx(G_,{children:i.jsx(kp,{"aria-hidden":!0})}),i.jsx("select",{"aria-label":r("intro.language-select-label"),"data-test":"ui-component__language-selector",dir:"ltr",onChange:s=>e.actionsApi.handleLanguageChange(n,o,s.target.value),defaultValue:o.language,children:Object.keys(Nr).filter(s=>a.includes(s)).map(s=>i.jsx("option",{value:s,lang:s,children:Nr[s]},s))})]})},z_=({actionsApi:e,component:t,inquiryLoading:n})=>{const[r]=K(),{loading:o,error:a,callback:s}=It(async()=>{try{const c=await Vl((await te.postResourceSingletonActionNew(S.Persona,"authentication-initiate")).meta);await e.onSubmit(t.name,{[t.name]:{"client-key":c.response.userHandle,"public-key":c,"expected-origin":window.location.origin}})}catch(c){c.name!=="NotAllowedError"&&Z(c,"info")}},[e.onSubmit,t.name]);return Et({error:a,onNetworkError:()=>e.showMessage(r("errors.network")),onError:c=>{c.name!=="NotAllowedError"&&Z(c,"info")}}),i.jsx(ge,{onClick:s,disabled:o||n,isPending:o,styles:{height:{base:{base:{unit:"px",value:48}}},width:{base:{base:{unit:"%",value:100}}},justify:{base:{base:So.Start}},margin:{base:{base:null}},padding:{base:{base:null}},translate:{base:{base:null,focused:{x:{unit:"px",value:0},y:{unit:"px",value:-2}},active:null,disabled:null}},"font-family":{base:{base:null}},"font-size":{base:{base:{unit:"px",value:16}}},"font-weight":{base:{base:ed.Medium}},"letter-spacing":{base:{base:{unit:"px",value:0}}},"line-height":{base:{base:{unit:"px",value:24}}},"text-color":{base:{base:{unit:"hex",value:I.Color.PrimaryWhite},focused:{unit:"hex",value:I.Color.PrimaryWhite},active:{unit:"hex",value:I.Color.PrimaryWhite},disabled:{unit:"hex",value:"#9194a6"}}},"background-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-radius":{base:{base:{unit:"px",value:25}}},"border-width":{base:{base:{top:{unit:"px",value:2},bottom:{unit:"px",value:2},left:{unit:"px",value:2},right:{unit:"px",value:2}}}},"shadow-color":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-offset":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-radius":{base:{base:null,focused:null,active:null,disabled:null}}},children:t.attributes.label})},Y_=({actionsApi:e,component:t,inquiryLoading:n})=>{const[r]=K(),{loading:o,error:a,callback:s}=It(async()=>{const c=(await te.postResourceSingletonActionNew(S.Persona,"registration-initiate")).meta,l=await Zh(c);await e.onSubmit(t.name,{[t.name]:{"client-key":c.user.id,"public-key":l,"expected-origin":window.location.origin}})},[e.onSubmit,t.name]);return Et({error:a,onNetworkError:()=>e.showMessage(r("errors.network")),onError:c=>{c.name!=="NotAllowedError"&&Z(c,"info")}}),i.jsx(ge,{onClick:s,disabled:o||n,isPending:o,styles:{height:{base:{base:{unit:"px",value:48}}},width:{base:{base:{unit:"%",value:100}}},justify:{base:{base:So.Start}},margin:{base:{base:null}},padding:{base:{base:null}},translate:{base:{base:null,focused:{x:{unit:"px",value:0},y:{unit:"px",value:-2}},active:null,disabled:null}},"font-family":{base:{base:null}},"font-size":{base:{base:{unit:"px",value:16}}},"font-weight":{base:{base:ed.Medium}},"letter-spacing":{base:{base:{unit:"px",value:0}}},"line-height":{base:{base:{unit:"px",value:24}}},"text-color":{base:{base:{unit:"hex",value:I.Color.PrimaryWhite},focused:{unit:"hex",value:I.Color.PrimaryWhite},active:{unit:"hex",value:I.Color.PrimaryWhite},disabled:{unit:"hex",value:"#9194a6"}}},"text-transform":{base:{base:td.None}},"background-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-radius":{base:{base:{unit:"px",value:25}}},"border-width":{base:{base:{top:{unit:"px",value:2},bottom:{unit:"px",value:2},left:{unit:"px",value:2},right:{unit:"px",value:2}}}},"shadow-color":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-offset":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-radius":{base:{base:null,focused:null,active:null,disabled:null}}},children:t.attributes.label})},K_=C.div.withConfig({displayName:"PersonaBranding__Wordmark",componentId:"sc-mgcrqn-0"})(["padding-top:",";margin-bottom:-3px;float:right;"],I.Spacing[2]),im="persona-branding-title",Q_=e=>{const{t}=K();return i.jsx(K_,{children:i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"81",height:"33",viewBox:"0 0 81 33",fill:"none","aria-labelledby":im,children:[i.jsx("title",{id:im,children:t("intro.persona-logo-label")}),i.jsx("path",{d:"M3.38883 7.08998C2.85483 7.08998 2.39583 7.00998 2.01183 6.84698C1.62783 6.68498 1.33683 6.47198 1.13883 6.20798C0.947658 5.96257 0.83757 5.66376 0.823832 5.35298C0.822997 5.32794 0.827314 5.30298 0.836516 5.27968C0.845719 5.25637 0.85961 5.2352 0.87733 5.21748C0.895049 5.19976 0.91622 5.18587 0.939528 5.17666C0.962837 5.16746 0.987787 5.16314 1.01283 5.16398H1.81383C1.88583 5.16398 1.93983 5.17898 1.97583 5.20898C2.0249 5.24037 2.06516 5.28373 2.09283 5.33498C2.15283 5.53898 2.29083 5.70998 2.50683 5.84798C2.72283 5.98598 3.01683 6.05498 3.38883 6.05498C3.81483 6.05498 4.13583 5.98598 4.35183 5.84798C4.45312 5.78601 4.53636 5.69853 4.59322 5.59429C4.65008 5.49004 4.67857 5.37269 4.67583 5.25398C4.67828 5.1768 4.66431 5.09997 4.63483 5.0286C4.60535 4.95723 4.56104 4.89293 4.50483 4.83998C4.39683 4.73198 4.23183 4.63998 4.00983 4.56098C3.79383 4.48298 3.46983 4.38698 3.03783 4.27298C2.32983 4.10498 1.81083 3.88298 1.48083 3.60698C1.15683 3.32498 0.994832 2.92698 0.994832 2.40998C0.994832 2.06198 1.08783 1.75298 1.27383 1.48298C1.4833 1.19913 1.76656 0.978132 2.09283 0.843985C2.45283 0.687985 2.86983 0.609985 3.34383 0.609985C3.83583 0.609985 4.26183 0.696985 4.62183 0.870985C4.98183 1.04498 5.25483 1.26398 5.44083 1.52798C5.63283 1.78598 5.73483 2.04398 5.74683 2.30198C5.74781 2.32711 5.74359 2.35217 5.73445 2.37559C5.72531 2.39902 5.71144 2.42031 5.69371 2.43814C5.67598 2.45597 5.65476 2.46995 5.63138 2.47922C5.608 2.48848 5.58296 2.49282 5.55783 2.49198H4.72083C4.66456 2.49549 4.60867 2.48061 4.5616 2.44958C4.51452 2.41856 4.4788 2.37307 4.45983 2.31998C4.42383 2.12798 4.30383 1.96998 4.09983 1.84298C3.89583 1.71098 3.64383 1.64498 3.34383 1.64498C3.00783 1.64498 2.74383 1.70798 2.55183 1.83498C2.45973 1.89278 2.38457 1.97392 2.33399 2.07017C2.28341 2.16642 2.2592 2.27435 2.26383 2.38298C2.2579 2.5342 2.30934 2.68208 2.40783 2.79698C2.50383 2.90498 2.65383 3.00098 2.85783 3.08498C3.06783 3.16898 3.36783 3.26198 3.75783 3.36498C4.28583 3.48498 4.70583 3.61898 5.01783 3.76898C5.33583 3.91898 5.56983 4.10898 5.71983 4.33598C5.86983 4.56398 5.94483 4.85598 5.94483 5.20898C5.94483 5.59298 5.83683 5.92898 5.62083 6.21698C5.41083 6.49898 5.11083 6.71498 4.72083 6.86498C4.33683 7.01498 3.89283 7.08998 3.38883 7.08998ZM8.54183 6.99998C8.51337 7.00051 8.48511 6.99519 8.4588 6.98435C8.43248 6.97351 8.40867 6.95739 8.38883 6.93698C8.36842 6.91714 8.3523 6.89333 8.34146 6.86701C8.33063 6.8407 8.32531 6.81244 8.32583 6.78398V0.924985C8.32336 0.866191 8.34258 0.808538 8.37983 0.762985C8.40114 0.742031 8.42649 0.725639 8.45434 0.714807C8.4822 0.703976 8.51196 0.698932 8.54183 0.699985H12.5018C12.5317 0.698932 12.5614 0.703976 12.5893 0.714807C12.6171 0.725639 12.6425 0.742031 12.6638 0.762985C12.6848 0.784293 12.7011 0.809646 12.712 0.837499C12.7228 0.865351 12.7279 0.895119 12.7268 0.924985V1.51898C12.7279 1.54885 12.7228 1.57861 12.712 1.60647C12.7011 1.63432 12.6848 1.65967 12.6638 1.68098C12.6182 1.71823 12.5606 1.73745 12.5018 1.73498H9.54183V3.32798H12.3038C12.3337 3.32693 12.3634 3.33197 12.3913 3.3428C12.4191 3.35363 12.4445 3.37003 12.4658 3.39098C12.4872 3.41008 12.5039 3.43377 12.5148 3.46026C12.5257 3.48676 12.5305 3.51538 12.5288 3.54398V4.10198C12.5299 4.13185 12.5248 4.16161 12.514 4.18947C12.5031 4.21732 12.4868 4.24267 12.4658 4.26398C12.4202 4.30123 12.3626 4.32045 12.3038 4.31798H9.54083V5.96498H12.5738C12.6037 5.96393 12.6334 5.96897 12.6613 5.9798C12.6891 5.99063 12.7145 6.00703 12.7358 6.02798C12.7568 6.04929 12.7731 6.07464 12.784 6.10249C12.7948 6.13035 12.7999 6.16011 12.7988 6.18998V6.78398C12.7999 6.81385 12.7948 6.84361 12.784 6.87147C12.7731 6.89932 12.7568 6.92467 12.7358 6.94598C12.6902 6.98323 12.6326 7.00245 12.5738 6.99998H8.54183ZM17.6518 7.08998C16.8238 7.08998 16.1818 6.87698 15.7258 6.45098C15.2758 6.02498 15.0358 5.42498 15.0058 4.65098C14.9985 4.38705 14.9955 4.12301 14.9968 3.85898C14.9968 3.48698 14.9998 3.21698 15.0068 3.04898C15.0368 2.28098 15.2788 1.68398 15.7348 1.25898C16.1968 0.825985 16.8358 0.609985 17.6518 0.609985C18.1858 0.609985 18.6518 0.702985 19.0468 0.889985C19.4428 1.06998 19.7488 1.31798 19.9648 1.63598C20.1808 1.94798 20.2948 2.30198 20.3068 2.69798V2.71598C20.3068 2.76398 20.2868 2.80598 20.2438 2.84198C20.2086 2.87176 20.1639 2.88775 20.1178 2.88698H19.2628C19.1908 2.88698 19.1368 2.87198 19.1008 2.84198C19.0648 2.81198 19.0348 2.75498 19.0108 2.67198C18.9148 2.29298 18.7558 2.02898 18.5338 1.87898C18.3118 1.72298 18.0148 1.64498 17.6438 1.64498C16.7788 1.64498 16.3288 2.12798 16.2938 3.09498C16.2863 3.34357 16.283 3.59228 16.2838 3.84098C16.2838 4.17698 16.2868 4.43198 16.2938 4.60598C16.3288 5.57198 16.7788 6.05598 17.6438 6.05598C18.0148 6.05598 18.3118 5.97698 18.5338 5.82098C18.7618 5.66498 18.9208 5.40098 19.0108 5.02898C19.0288 4.94498 19.0558 4.88898 19.0918 4.85898C19.1426 4.82613 19.2024 4.81004 19.2628 4.81298H20.1178C20.1718 4.81298 20.2178 4.83098 20.2528 4.86698C20.2948 4.90298 20.3128 4.94798 20.3068 5.00198C20.2991 5.38459 20.1803 5.7567 19.9648 6.07298C19.7488 6.38498 19.4428 6.63398 19.0468 6.81998C18.6508 6.99998 18.1868 7.08998 17.6518 7.08998ZM25.2358 7.08998C24.4258 7.08998 23.7958 6.88298 23.3458 6.46998C22.8958 6.05498 22.6708 5.42798 22.6708 4.58798V0.924985C22.6683 0.866191 22.6875 0.808538 22.7248 0.762985C22.7461 0.742031 22.7715 0.725639 22.7993 0.714807C22.8272 0.703976 22.8569 0.698932 22.8868 0.699985H23.7058C23.7344 0.698269 23.763 0.703045 23.7895 0.713955C23.816 0.724865 23.8397 0.741626 23.8588 0.762985C23.8798 0.784293 23.8961 0.809646 23.907 0.837499C23.9178 0.865351 23.9229 0.895119 23.9218 0.924985V4.58798C23.9218 5.06798 24.0358 5.43098 24.2638 5.67798C24.4918 5.91798 24.8158 6.03798 25.2358 6.03798C25.6558 6.03798 25.9758 5.91798 26.1988 5.67798C26.4268 5.43098 26.5408 5.06798 26.5408 4.58798V0.924985C26.5397 0.895119 26.5448 0.865351 26.5556 0.837499C26.5665 0.809646 26.5828 0.784293 26.6038 0.762985C26.6251 0.742031 26.6505 0.725639 26.6783 0.714807C26.7062 0.703976 26.7359 0.698932 26.7658 0.699985H27.5758C27.6044 0.698269 27.633 0.703045 27.6595 0.713955C27.686 0.724865 27.7097 0.741626 27.7288 0.762985C27.7498 0.784293 27.7661 0.809646 27.777 0.837499C27.7878 0.865351 27.7929 0.895119 27.7918 0.924985V4.58798C27.7918 5.42798 27.5668 6.05498 27.1168 6.46898C26.6728 6.88298 26.0458 7.08998 25.2358 7.08998ZM30.7068 6.99998C30.6783 7.00051 30.6501 6.99519 30.6238 6.98435C30.5974 6.97351 30.5736 6.95739 30.5538 6.93698C30.5334 6.91714 30.5173 6.89333 30.5064 6.86701C30.4956 6.8407 30.4903 6.81244 30.4908 6.78398V0.924985C30.4883 0.866191 30.5075 0.808538 30.5448 0.762985C30.5661 0.742031 30.5915 0.725639 30.6193 0.714807C30.6472 0.703976 30.6769 0.698932 30.7068 0.699985H33.0368C33.7698 0.699985 34.3428 0.870985 34.7568 1.21298C35.1768 1.55498 35.3868 2.04098 35.3868 2.67098C35.3868 3.10898 35.2788 3.47798 35.0628 3.77798C34.8528 4.07198 34.5588 4.28498 34.1808 4.41798L35.4948 6.71198C35.5115 6.74275 35.5207 6.777 35.5218 6.81198C35.5221 6.83762 35.5166 6.86299 35.5057 6.8862C35.4947 6.90941 35.4787 6.92984 35.4588 6.94598C35.4426 6.96309 35.423 6.97671 35.4014 6.98599C35.3797 6.99528 35.3564 7.00004 35.3328 6.99998H34.5128C34.4332 7.00451 34.3544 6.98234 34.2888 6.93698C34.2335 6.88542 34.1878 6.82448 34.1538 6.75698L32.9928 4.62398H31.7418V6.78398C31.7418 6.84398 31.7208 6.89498 31.6788 6.93698C31.6597 6.95834 31.636 6.9751 31.6095 6.98601C31.583 6.99692 31.5544 7.0017 31.5258 6.99998H30.7058H30.7068ZM33.0108 3.60698C33.3708 3.60698 33.6408 3.52698 33.8208 3.36398C34.0068 3.20198 34.0998 2.96798 34.0998 2.66198C34.0998 2.35598 34.0068 2.11898 33.8198 1.95198C33.6398 1.78298 33.3698 1.69898 33.0098 1.69898H31.7418V3.60698H33.0108ZM38.1118 6.99998C38.0833 7.00051 38.0551 6.99519 38.0288 6.98435C38.0024 6.97351 37.9786 6.95739 37.9588 6.93698C37.9384 6.91714 37.9223 6.89333 37.9114 6.86701C37.9006 6.8407 37.8953 6.81244 37.8958 6.78398V0.924985C37.8933 0.866191 37.9125 0.808538 37.9498 0.762985C37.9711 0.742031 37.9965 0.725639 38.0243 0.714807C38.0522 0.703976 38.0819 0.698932 38.1118 0.699985H42.0718C42.1017 0.698932 42.1314 0.703976 42.1593 0.714807C42.1871 0.725639 42.2125 0.742031 42.2338 0.762985C42.2548 0.784293 42.2711 0.809646 42.282 0.837499C42.2928 0.865351 42.2979 0.895119 42.2968 0.924985V1.51898C42.2979 1.54885 42.2928 1.57861 42.282 1.60647C42.2711 1.63432 42.2548 1.65967 42.2338 1.68098C42.1882 1.71823 42.1306 1.73745 42.0718 1.73498H39.1118V3.32798H41.8738C41.9037 3.32693 41.9334 3.33197 41.9613 3.3428C41.9891 3.35363 42.0145 3.37003 42.0358 3.39098C42.0572 3.41008 42.0739 3.43377 42.0848 3.46026C42.0957 3.48676 42.1005 3.51538 42.0988 3.54398V4.10198C42.0999 4.13185 42.0948 4.16161 42.084 4.18947C42.0731 4.21732 42.0568 4.24267 42.0358 4.26398C41.9902 4.30123 41.9326 4.32045 41.8738 4.31798H39.1108V5.96498H42.1438C42.1737 5.96393 42.2034 5.96897 42.2313 5.9798C42.2591 5.99063 42.2845 6.00703 42.3058 6.02798C42.3268 6.04929 42.3431 6.07464 42.354 6.10249C42.3648 6.13035 42.3699 6.16011 42.3688 6.18998V6.78398C42.3699 6.81385 42.3648 6.84361 42.354 6.87147C42.3431 6.89932 42.3268 6.92467 42.3058 6.94598C42.2602 6.98323 42.2026 7.00245 42.1438 6.99998H38.1118ZM45.0598 6.99998C45.0315 7.00037 45.0034 6.99498 44.9773 6.98415C44.9512 6.97332 44.9275 6.95727 44.9078 6.93698C44.8874 6.91714 44.8713 6.89333 44.8604 6.86701C44.8496 6.8407 44.8443 6.81244 44.8448 6.78398V0.924985C44.8423 0.866191 44.8615 0.808538 44.8988 0.762985C44.92 0.742155 44.9452 0.725834 44.9729 0.715007C45.0005 0.704179 45.0301 0.699069 45.0598 0.699985H47.2558C49.0198 0.699985 49.9198 1.51598 49.9558 3.14798C49.9678 3.49598 49.9738 3.72998 49.9738 3.84998C49.9738 3.96398 49.9678 4.19498 49.9558 4.54298C49.9318 5.38298 49.7058 6.00398 49.2808 6.40598C48.8548 6.80198 48.1948 6.99998 47.3008 6.99998H45.0598ZM47.2568 5.96498C47.7608 5.96498 48.1238 5.85498 48.3458 5.63198C48.5678 5.40398 48.6848 5.03198 48.6958 4.51598C48.7088 4.15598 48.7148 3.93098 48.7148 3.84098C48.7148 3.74498 48.7088 3.52298 48.6968 3.17498C48.6848 2.68298 48.5588 2.31998 48.3188 2.08598C48.0848 1.85198 47.7158 1.73598 47.2118 1.73598H46.0958V5.96598H47.2558L47.2568 5.96498ZM56.8598 6.99998C56.781 7.0042 56.7035 6.97849 56.6428 6.92798C56.5869 6.87619 56.5517 6.80581 56.5438 6.72998L55.4738 0.960985L55.4638 0.888985C55.4638 0.834985 55.4818 0.789985 55.5178 0.753985C55.5546 0.720015 55.6027 0.700793 55.6528 0.699985H56.4448C56.5948 0.699985 56.6788 0.759985 56.6968 0.879985L57.4438 4.95698L58.2538 2.31998C58.3138 2.16998 58.4138 2.09498 58.5508 2.09498H59.0368C59.1868 2.09498 59.2828 2.16998 59.3248 2.31998L60.1448 4.94798L60.8898 0.879985C60.9018 0.813985 60.9258 0.769985 60.9618 0.744985C61.0157 0.711779 61.0786 0.696061 61.1418 0.699985H61.9338C61.9818 0.699985 62.0238 0.717985 62.0598 0.753985C62.0775 0.771603 62.0915 0.792672 62.1008 0.815891C62.1101 0.83911 62.1145 0.863987 62.1138 0.888985C62.1138 0.918985 62.1108 0.942985 62.1048 0.960985L61.0348 6.73098C61.0048 6.91098 60.8988 7.00098 60.7188 7.00098H60.1158C60.0415 7.00379 59.9685 6.98122 59.9088 6.93698C59.8558 6.89649 59.8178 6.83949 59.8008 6.77498L58.7938 3.76998L57.7858 6.77598C57.7258 6.92598 57.6178 7.00098 57.4618 7.00098H56.8588L56.8598 6.99998ZM64.7378 6.99998C64.7093 7.00051 64.6811 6.99519 64.6548 6.98435C64.6285 6.97351 64.6046 6.95739 64.5848 6.93698C64.5644 6.91714 64.5483 6.89333 64.5374 6.86701C64.5266 6.8407 64.5213 6.81244 64.5218 6.78398V0.915985C64.5201 0.887382 64.5249 0.858762 64.5358 0.832266C64.5467 0.805771 64.5634 0.782086 64.5848 0.762985C64.6046 0.742575 64.6285 0.726453 64.6548 0.715616C64.6811 0.70478 64.7093 0.699459 64.7378 0.699985H65.5838C65.6124 0.698269 65.641 0.703045 65.6675 0.713955C65.694 0.724865 65.7177 0.741626 65.7368 0.762985C65.7582 0.782086 65.7749 0.805771 65.7858 0.832266C65.7967 0.858762 65.8015 0.887382 65.7998 0.915985V6.78398C65.7998 6.84398 65.7788 6.89498 65.7368 6.93698C65.7177 6.95834 65.694 6.9751 65.6675 6.98601C65.641 6.99692 65.6124 7.0017 65.5838 6.99998H64.7378ZM70.1628 6.99998C70.1343 7.00051 70.1061 6.99519 70.0798 6.98435C70.0534 6.97351 70.0296 6.95739 70.0098 6.93698C69.9894 6.91714 69.9733 6.89333 69.9624 6.86701C69.9516 6.8407 69.9463 6.81244 69.9468 6.78398V1.80698H68.2818C68.2533 1.80751 68.2251 1.80219 68.1988 1.79135C68.1724 1.78051 68.1486 1.76439 68.1288 1.74398C68.1084 1.72414 68.0923 1.70033 68.0814 1.67401C68.0706 1.6477 68.0653 1.61944 68.0658 1.59098V0.924985C68.0633 0.866191 68.0826 0.808538 68.1198 0.762985C68.1411 0.742031 68.1665 0.725639 68.1943 0.714807C68.2222 0.703976 68.2519 0.698932 68.2818 0.699985H72.8718C72.9017 0.698932 72.9314 0.703976 72.9593 0.714807C72.9871 0.725639 73.0125 0.742031 73.0338 0.762985C73.0548 0.784293 73.0711 0.809646 73.082 0.837499C73.0928 0.865351 73.0979 0.895119 73.0968 0.924985V1.59098C73.0968 1.65098 73.0768 1.70198 73.0338 1.74398C73.0125 1.76493 72.9871 1.78133 72.9593 1.79216C72.9314 1.80299 72.9017 1.80803 72.8718 1.80698H71.2158V6.78398C71.2158 6.84398 71.1958 6.89498 71.1528 6.93698C71.1315 6.95793 71.1061 6.97433 71.0783 6.98516C71.0504 6.99599 71.0207 7.00103 70.9908 6.99998H70.1628ZM75.5768 6.99998C75.5483 7.00051 75.5201 6.99519 75.4938 6.98435C75.4674 6.97351 75.4436 6.95739 75.4238 6.93698C75.4034 6.91714 75.3873 6.89333 75.3764 6.86701C75.3656 6.8407 75.3603 6.81244 75.3608 6.78398V0.924985C75.3583 0.866191 75.3775 0.808538 75.4148 0.762985C75.4361 0.742031 75.4615 0.725639 75.4893 0.714807C75.5172 0.703976 75.5469 0.698932 75.5768 0.699985H76.3958C76.4244 0.698269 76.453 0.703045 76.4795 0.713955C76.506 0.724865 76.5297 0.741626 76.5488 0.762985C76.5698 0.784293 76.5861 0.809646 76.597 0.837499C76.6078 0.865351 76.6129 0.895119 76.6118 0.924985V3.24698H79.2668V0.924985C79.2643 0.866191 79.2835 0.808538 79.3208 0.762985C79.3421 0.742031 79.3675 0.725639 79.3953 0.714807C79.4232 0.703976 79.4529 0.698932 79.4828 0.699985H80.2928C80.3227 0.698932 80.3524 0.703976 80.3803 0.714807C80.4081 0.725639 80.4335 0.742031 80.4548 0.762985C80.4758 0.784293 80.4921 0.809646 80.503 0.837499C80.5138 0.865351 80.5189 0.895119 80.5178 0.924985V6.78498C80.5187 6.81468 80.5136 6.84426 80.5028 6.87193C80.4919 6.8996 80.4756 6.92479 80.4548 6.94598C80.4092 6.98323 80.3516 7.00245 80.2928 6.99998H79.4828C79.4543 7.00051 79.4261 6.99519 79.3998 6.98435C79.3734 6.97351 79.3496 6.95739 79.3298 6.93698C79.3094 6.91714 79.2933 6.89333 79.2824 6.86701C79.2716 6.8407 79.2663 6.81244 79.2668 6.78398V4.37198H76.6118V6.78398C76.6118 6.84398 76.5908 6.89498 76.5488 6.93698C76.5297 6.95834 76.506 6.9751 76.4795 6.98601C76.453 6.99692 76.4244 7.0017 76.3958 6.99998H75.5758H75.5768Z",fill:"#696A7B"}),i.jsx("path",{d:"M1.30249 26.5206H11.8271C12.1842 26.5206 12.4743 26.8105 12.4743 27.1678V28.0224C12.4743 28.3795 12.1843 28.6696 11.8271 28.6696H1.30236C0.945239 28.6696 0.655273 28.3796 0.655273 28.0225V27.1679C0.655273 26.8108 0.945239 26.5206 1.30249 26.5206Z",fill:"#696A7B"}),i.jsx("path",{d:"M11.6595 20.7002L8.91541 19.1157C8.82582 19.064 8.82582 18.9348 8.91541 18.8831L11.6595 17.2989C11.9691 17.1201 12.0751 16.7243 11.8964 16.4147L11.4691 15.6747C11.2903 15.3651 10.8945 15.2591 10.5851 15.4378L7.84096 17.022C7.75138 17.0738 7.6395 17.0092 7.6395 16.9057V13.7372C7.6395 13.3798 7.34981 13.09 6.99229 13.09H6.1377C5.78031 13.09 5.49062 13.3797 5.49062 13.7371V16.9057C5.49062 17.0092 5.37874 17.0738 5.28916 17.022L2.54503 15.4378C2.23546 15.259 1.83966 15.3651 1.66103 15.6747L1.23381 16.4147C1.05505 16.7243 1.16115 17.1201 1.47072 17.2987L4.21485 18.883C4.30443 18.9347 4.30443 19.0639 4.21485 19.1156L1.47072 20.7C1.16115 20.8788 1.05518 21.2746 1.23381 21.584L1.66103 22.324C1.83979 22.6336 2.23559 22.7396 2.54503 22.561L5.28916 20.9766C5.37874 20.9248 5.49062 20.9894 5.49062 21.0929V24.2615C5.49062 24.6189 5.78031 24.9086 6.1377 24.9086H6.99229C7.34967 24.9086 7.6395 24.6189 7.6395 24.2614V21.0927C7.6395 20.9893 7.75138 20.9247 7.84096 20.9764L10.5851 22.5608C10.8947 22.7396 11.2903 22.6335 11.4691 22.324L11.8964 21.5839C12.0752 21.2743 11.9691 20.8785 11.6595 20.6999V20.7002Z",fill:"#696A7B"}),i.jsx("path",{d:"M18.9218 21.1036C19.4864 20.2111 20.6523 19.5914 21.8546 19.5914C24.3136 19.5914 26.2625 21.6318 26.2625 24.2368C26.2625 26.8418 24.3138 28.8815 21.8546 28.8815C20.6523 28.8815 19.4866 28.2624 18.9218 27.3699V32.3461C18.9218 32.4202 18.8616 32.4804 18.7875 32.4804H16.9063C16.8321 32.4804 16.772 32.4202 16.772 32.3461V19.9447C16.772 19.8705 16.8321 19.8103 16.9063 19.8103H18.7875C18.8616 19.8103 18.9218 19.8705 18.9218 19.9447V21.1036ZM21.4717 21.4858C19.9781 21.4858 18.8302 22.6703 18.8302 24.2368C18.8302 25.8034 19.9781 26.9871 21.4717 26.9871C22.9839 26.9871 24.1311 25.8034 24.1311 24.2368C24.1311 22.6703 22.9839 21.4858 21.4717 21.4858Z",fill:"#696A7B"}),i.jsx("path",{d:"M34.5 25.569C34.7966 25.76 35.5737 26.2603 35.86 26.4445C35.9206 26.4835 35.9402 26.5641 35.9034 26.6261C35.0375 28.085 33.5755 28.8815 31.9059 28.8815C29.4097 28.8815 27.3149 26.8597 27.3149 24.2368C27.3149 21.6138 29.4097 19.5914 31.8694 19.5914C34.4549 19.5914 36.2796 21.5919 36.2434 24.6321C36.2426 24.7055 36.1817 24.765 36.1083 24.765H29.3373C29.5557 26.1677 30.6305 27.0423 31.9058 27.0423C33.0925 27.0423 33.7612 26.5235 34.3119 25.614C34.3516 25.5484 34.4355 25.5275 34.5 25.569ZM29.4282 23.2893H34.1095C33.9641 22.2874 33.1805 21.4134 31.8694 21.4134C30.7215 21.4134 29.7739 22.142 29.4282 23.2893Z",fill:"#696A7B"}),i.jsx("path",{d:"M43.0782 19.9394C43.0974 19.8733 43.0635 19.8042 43.0001 19.7776C42.809 19.6974 42.5861 19.6465 42.2358 19.6465C41.125 19.6465 40.2326 20.32 39.7953 21.1945V19.9446C39.7953 19.8705 39.7352 19.8103 39.661 19.8103H37.7798C37.7057 19.8103 37.6455 19.8705 37.6455 19.9446V28.529C37.6455 28.6031 37.7057 28.6633 37.7798 28.6633H39.661C39.7352 28.6633 39.7953 28.6031 39.7953 28.529V24.1459C39.7953 22.7066 40.6878 21.7591 41.981 21.7591C42.1329 21.7591 42.2773 21.7696 42.4164 21.791C42.4841 21.8013 42.5491 21.7627 42.5682 21.6971C42.6703 21.3452 42.9776 20.2859 43.0782 19.9394Z",fill:"#696A7B"}),i.jsx("path",{d:"M43.4079 26.4151L45.0178 25.831C45.0879 25.8056 45.1637 25.8428 45.19 25.9127C45.4812 26.6816 46.0647 27.2062 46.894 27.2062C47.5496 27.2062 48.1507 26.8054 48.1507 26.0768C48.1507 24.4186 43.8152 25.53 43.8152 22.3604C43.8152 20.8303 45.1085 19.5916 46.9299 19.5916C48.4235 19.5916 49.5438 20.405 49.9649 21.5742C49.9906 21.6452 49.9492 21.7234 49.8771 21.7458L48.2554 22.2493C48.187 22.2706 48.1164 22.2324 48.0919 22.1651C47.8765 21.5722 47.4548 21.2677 46.8576 21.2677C46.293 21.2677 45.8192 21.6319 45.8192 22.2152C45.8192 23.7998 50.1912 22.7069 50.1912 25.9489C50.1912 27.6615 48.6247 28.8818 46.8391 28.8818C45.2281 28.8818 43.7889 27.9873 43.3249 26.5822C43.3023 26.514 43.3403 26.44 43.4079 26.4155V26.4151Z",fill:"#696A7B"}),i.jsx("path",{d:"M55.7888 19.5914C58.3387 19.5914 60.4886 21.6138 60.4886 24.2368C60.4886 26.8598 58.3387 28.8815 55.7888 28.8815C53.2382 28.8815 51.1069 26.8597 51.1069 24.2368C51.1069 21.6138 53.2382 19.5914 55.7888 19.5914ZM55.7888 26.9871C57.3004 26.9871 58.4482 25.8034 58.4482 24.2368C58.4482 22.6703 57.3003 21.4858 55.7888 21.4858C54.2952 21.4858 53.1473 22.6703 53.1473 24.2368C53.1473 25.8034 54.2952 26.9871 55.7888 26.9871Z",fill:"#696A7B"}),i.jsx("path",{d:"M65.7719 21.5098C64.5875 21.5098 63.8046 22.4208 63.8046 23.823V28.5345C63.8046 28.6086 63.7444 28.6688 63.6703 28.6688H61.7891C61.715 28.6688 61.6548 28.6086 61.6548 28.5345V19.9501C61.6548 19.876 61.715 19.8158 61.7891 19.8158H63.6703C63.7444 19.8158 63.8046 19.876 63.8046 19.9501V20.9996C64.3872 20.1801 65.2982 19.5969 66.5371 19.5969C68.5404 19.5969 69.7061 20.9818 69.7061 22.8031V28.5345C69.7061 28.6086 69.646 28.6688 69.5718 28.6688H67.6913C67.6171 28.6688 67.557 28.6086 67.557 28.5345V23.3864C67.557 22.2385 66.9014 21.51 65.772 21.51L65.7719 21.5098Z",fill:"#696A7B"}),i.jsx("path",{d:"M80.3451 19.9446V28.529C80.3451 28.6031 80.2849 28.6633 80.2108 28.6633H78.3296C78.2555 28.6633 78.1953 28.6031 78.1953 28.529V27.37C77.6492 28.2625 76.4833 28.8816 75.281 28.8816C72.822 28.8816 70.8726 26.8419 70.8726 24.2369C70.8726 21.6319 72.822 19.5916 75.281 19.5916C76.4833 19.5916 77.6491 20.2112 78.1953 21.1037V19.9448C78.1953 19.8706 78.2555 19.8105 78.3296 19.8105H80.2108C80.2849 19.8105 80.3451 19.8706 80.3451 19.9448V19.9446ZM75.6454 26.9871C77.1575 26.9871 78.3048 25.8033 78.3048 24.2368C78.3048 22.6703 77.1575 21.4858 75.6454 21.4858C74.1518 21.4858 73.0038 22.6703 73.0038 24.2368C73.0038 25.8033 74.1518 26.9871 75.6454 26.9871Z",fill:"#696A7B"})]})})},pg=({component:e,inquiry:t})=>{var s;const{text:n,hidden:r}=e.attributes;return Ar(ec((s=e.styles)==null?void 0:s["font-family"].base.base)),_t(e.name,t.attributes["next-step"].name)(r)?null:i.jsx(Oa,{"data-test":e.type,styles:e.styles,children:i.jsx(J,{children:n})})},Z_=({component:e,inquiry:t})=>i.jsx(pg,{component:{...e,type:Ee.Text},inquiry:t}),J_=C(Gh).withConfig({displayName:"QrCode__StyledQrCode",componentId:"sc-vi0n8g-0"})(({styles:e})=>{var t,n,r,o,a,s,c,l;return{marginTop:(n=E((t=e==null?void 0:e.margin.base.base)==null?void 0:t.top))!=null?n:0,marginBottom:(o=E((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom))!=null?o:0,marginLeft:(s=E((a=e==null?void 0:e.margin.base.base)==null?void 0:a.left))!=null?s:0,marginRight:(l=E((c=e==null?void 0:e.margin.base.base)==null?void 0:c.right))!=null?l:0,alignSelf:e==null?void 0:e.justify.base.base}}),X_=({component:e,inquiry:t})=>{var s,c,l;const{value:n,hidden:r}=e.attributes;return _t(e.name,t.attributes["next-step"].name)(r)||!n?null:i.jsx(J_,{"data-test":e.type,value:n,height:void 0,width:E((s=e.styles)==null?void 0:s.width.base.base),bgColor:k((c=e.styles)==null?void 0:c["fill-color"].base.base),fgColor:k((l=e.styles)==null?void 0:l["stroke-color"].base.base),styles:e.styles,includeMargin:!0})},e3=C.div.attrs(()=>({"aria-hidden":!0})).withConfig({displayName:"Spacer__SpacerDiv",componentId:"sc-vj0pq0-0"})(({styles:e,height:t})=>{var n;return{height:(n=E(e==null?void 0:e.height.base.base))!=null?n:t,width:E(e==null?void 0:e.width.base.base),flex:"none"}}),t3=({component:e,inquiry:t})=>{const{hidden:n}=e.attributes;return _t(e.name,t.attributes["next-step"].name)(n)?null:i.jsx(e3,{"data-test":e.type,height:e.attributes.height,styles:e.styles})},n3=C.span.withConfig({displayName:"TableStatic__TableStaticContainer",componentId:"sc-fy6bs8-0"})(["font-family:",";color:",";font-size:",";line-height:",";"],({theme:{fontFamilyTitle:e}})=>$t(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody),i3=C.table.withConfig({displayName:"TableStatic__Table",componentId:"sc-fy6bs8-1"})(["th,td{padding:",";}"],I.Spacing[2]),rm=({tag:e="td",children:t})=>e==="td"?i.jsx("td",{children:i.jsx(J,{children:t})}):i.jsx("th",{children:i.jsx(J,{children:t})}),r3=({component:{attributes:{header:e,rows:t}}})=>i.jsx(n3,{children:i.jsxs(i3,{children:[e&&e.length>0&&i.jsx("thead",{children:i.jsx("tr",{children:e.map(n=>i.jsx(rm,{tag:"th",children:n},n))})}),i.jsx("tbody",{children:t.map(n=>i.jsx("tr",{children:n.map(r=>i.jsx(rm,{children:r},r))},n.join()))})]})}),o3=({component:e,inquiry:t})=>{var s;const{text:n,hidden:r}=e.attributes;return Ar(ec((s=e.styles)==null?void 0:s["font-family"].base.base)),_t(e.name,t.attributes["next-step"].name)(r)?null:i.jsx(wd,{"data-test":e.type,styles:e.styles,children:i.jsx(J,{children:n})})};function Po(e){const{component:t,inquiry:n,actionsApi:r,inquiryLoading:o}=e;switch(t.type){case Ee.ButtonAction:return i.jsx(vI,{inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Ee.ButtonCancel:return i.jsx(yI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.ButtonComplete:return i.jsx(II,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.ButtonCreatePersona:return i.jsx(kI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.ButtonDeviceHandoff:return i.jsx(NI,{component:t,actionsApi:r,inquiryLoading:o});case Ee.ButtonLink:return i.jsx(jI,{inquiry:n,component:t});case Ee.ButtonSubmit:return i.jsx(PI,{inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Ee.ButtonVerifyWithPersona:return i.jsx(OI,{inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Ee.Footer:return i.jsx(BI,{...e,component:t});case Ee.QrCode:return i.jsx(X_,{component:t,inquiry:n});case Ee.Spacer:return i.jsx(t3,{component:t,inquiry:n});case Ee.HorizontalStack:return i.jsx(UI,{...e,component:t});case Ee.ClickableStack:return i.jsx(FI,{...e,inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Ee.ImageLocal:return i.jsx(YI,{component:t,inquiry:n});case Ee.ImageRemote:return i.jsx(Mf,{component:t,inquiry:n});case Ee.LanguageSelector:return i.jsx(W_,{component:t,inquiry:n,actionsApi:r});case Ee.PersonaBranding:return i.jsx(Q_,{component:t});case Ee.PrivacyPolicy:return i.jsx(Z_,{component:t,inquiry:n});case Ee.TableStatic:return i.jsx(r3,{component:t});case Ee.Text:return i.jsx(pg,{component:t,inquiry:n});case Ee.Title:return i.jsx(o3,{component:t,inquiry:n});case Ee.InputAddress:return i.jsx(_S,{component:t,inquiry:n,inquiryLoading:o,actionsApi:r});case Ee.InputCheckbox:return i.jsx(LS,{component:t,inquiry:n,actionsApi:r});case Ee.InputCheckboxGroup:return i.jsx(US,{component:t,inquiry:n,actionsApi:r});case Ee.InputConfirmationCode:return i.jsx(QS,{component:t,inquiry:n,actionsApi:r});case Ee.InputCurrency:return i.jsx(sw,{component:t,inquiry:n,actionsApi:r});case Ee.InputDate:return i.jsx(xw,{component:t,inquiry:n,actionsApi:r});case Ee.InputMaskedText:return i.jsx(r_,{component:t,inquiry:n,inquiryLoading:o,actionsApi:r});case Ee.InputMultiSelect:return i.jsx(m_,{component:t,inquiry:n,actionsApi:r});case Ee.InputNumber:return i.jsx(g_,{component:t,inquiry:n,actionsApi:r});case Ee.InputPhoneNumber:return i.jsx(y_,{component:t,inquiry:n,inquiryLoading:o,actionsApi:r});case Ee.InputRadioGroup:return i.jsx(j_,{component:t,inquiry:n,actionsApi:r});case Ee.InputSelect:return i.jsx(P_,{component:t,inquiry:n,actionsApi:r});case Ee.InputText:return i.jsx(O_,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.InputCreditCard:return i.jsx(ew,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.InputTextArea:return i.jsx(H_,{component:t,inquiry:n,actionsApi:r});case Ee.PasskeyAuthentication:return i.jsx(z_,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.PasskeyRegistration:return i.jsx(Y_,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.InputESignature:return i.jsx(Bw,{component:t,inquiry:n,actionsApi:r});case Ee.InputFileUpload:return i.jsx($w,{component:t,inquiry:n,actionsApi:r});case Ee.InputInternationalDb:return i.jsx(i_,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.GovernmentIdNfcScan:return i.jsx(qI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Ee.CombinedStepButton:case Ee.CombinedStepImagePreview:case Ee.MDoc:return null;case Ee.BusinessSearch:return null;case Ee.Home:return null;case Ee.Stepper:return null;case Ee.GovernmentIdTypeSelect:return null;default:Z(new Error("Unknown UI component"),"warning",{component:t.type,inquiry:n.id}),ct(t)}}const a3=C("div").withConfig({displayName:"InquiryCompleteView__Header",componentId:"sc-yruq5d-0"})(["margin-bottom:","px;"],sn*8),om=({onComplete:e,hasCompleteAction:t,isChildFlow:n,config:r})=>{var s,c,l,d,u,h;const[o]=K(),a=t&&!n;return f.useEffect(()=>{a&&e()},[]),a?null:n?i.jsxs("div",{"data-test":"inquiry-complete-view",children:[i.jsxs(a3,{children:[i.jsx(dt,{children:(l=(c=(s=r.localizations)==null?void 0:s["child-flow-page"])==null?void 0:c.title)!=null?l:o("success.title-exchange-flow")}),i.jsx(ot,{children:i.jsx(J,{children:(h=(u=(d=r.localizations)==null?void 0:d["child-flow-page"])==null?void 0:u.prompt)!=null?h:o("success.prompt-exchange-flow")})})]}),i.jsx($e,{"aria-label":"return to original device pictograph",children:i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ql,{})})})]}):i.jsx("div",{"data-test":"inquiry-complete-view",children:i.jsx(Po,{component:{name:"success_animated_checkmark",type:Ee.ImageLocal,attributes:{"image-key":ie.AnimatedCheck}},inquiry:null,inquiryLoading:!1,actionsApi:null})})},s3=C.form.withConfig({displayName:"InquiryUiView__Form",componentId:"sc-e8wtsw-0"})(["display:flex;flex-direction:column;"]),gr=f.memo(({inquiry:e,inquiryTemplateVersion:t,nextStep:n=e.attributes["next-step"],currentSession:r,handleLanguageChange:o,showMessage:a,onTransitionSubmit:s,onTransitionAction:c,onComplete:l,onCancel:d,route:u,setComponent:h})=>{var g,b;const m=(r==null?void 0:r.relationships["parent-session"].data)!=null,[p]=K();if((g=t==null?void 0:t.attributes)!=null&&g["require-native-mobile-flow"]&&!yl(e))return i.jsx(Ti,{to:"/inquiry/app-handoff"});switch(n.type){case Ae.Ui:{if(yl(e)&&(r!=null&&r.attributes["show-return-to-original-device-screen"])){const y={localizations:{...n.config.localizations,"child-flow-page":{title:p("success.title-exchange-flow"),prompt:p("success.prompt-exchange-flow")},...n.config}};return i.jsx(om,{config:y,onComplete:l,hasCompleteAction:vi(e),isChildFlow:m})}const x=(b=e.attributes["loop-step-name"])!=null?b:n.name;return i.jsx(d3,{inquiry:e,nextStep:n,form:x,onTransitionSubmit:s,onTransitionAction:c,onComplete:l,onCancel:d,handleLanguageChange:o,showMessage:a,route:u,setComponent:h})}case Ae.Document:return i.jsx(Ti,{to:"/inquiry/documents/prompt"});case Ae.Integration:return i.jsx(Ti,{to:"/inquiry/integration"});case Ae.GovernmentId:return i.jsx(Ti,{to:"/inquiry/government-id/select"});case Ae.Selfie:return i.jsx(Ti,{to:"/inquiry/selfie/center/prompt"});case Ae.SelfieReflection:return i.jsx(Ti,{to:"/inquiry/selfie-reflection/prompt"});case Ae.VerifyWithPersona:return i.jsx(Ti,{to:"/inquiry/verify-with-persona/passkey-authentication"});case Ae.Complete:return i.jsx(om,{config:n.config,onComplete:l,hasCompleteAction:vi(e),isChildFlow:m});default:return Z(new Error("Unsupported step type for InquiryUiView"),"warning",{type:n.type}),N.onError({status:400,code:"invalid_config"}),i.jsx(Ti,{to:"/verify/invalid/config"})}},c3);gr.displayName="InquiryUiView";function c3(e,t){var a,s;const n=e.inquiry.attributes["next-step"].name===t.inquiry.attributes["next-step"].name;return((a=e.inquiry.attributes["wait-for-transition"])==null?void 0:a["polling-mode"])!==an.NONE&&((s=t.inquiry.attributes["wait-for-transition"])==null?void 0:s["polling-mode"])===an.NONE&&n?!1:n&&e.uiStatus===tn.Transitioning&&t.uiStatus===tn.Ready?e.inquiry.attributes["next-step"].type===Ae.Ui&&t.inquiry.attributes["next-step"].type===Ae.Ui&&JSON.stringify(e.inquiry.attributes["next-step"].config.components)===JSON.stringify(t.inquiry.attributes["next-step"].config.components):(e.uiStatus===tn.Transitioning||e.uiStatus===tn.Blocked)&&t.uiStatus===tn.Ready}const l3=({inquiry:e,nextStep:t,handleLanguageChange:n,showMessage:r,onTransitionSubmit:o,onTransitionAction:a,onComplete:s,onCancel:c,handleSubmit:l,change:d,route:u,setComponent:h})=>{const{components:m}=t.config,p=Ke(v=>{var _,A;return(A=(_=v.ui)==null?void 0:_.status)!=null?A:tn.Ready}),g=p===tn.Transitioning||p===tn.Blocked,b=f.useCallback((v,_={})=>l(async A=>{for(const T in _)d(T,_[T]);await o({...A,..._},v)})(),[l,o,d]),x=f.useCallback(v=>{l(v)()},[l]),y=f.useMemo(()=>({handleLanguageChange:n,showMessage:r,setField:d,onSubmit:b,onActionButtonClick:a,onComplete:s,onCancel:c,route:u,setComponent:h,validateFormWithCallback:x}),[n,r,d,b,a,s,c,u,h,x]);return i.jsx(s3,{"data-test":"inquiry-ui-view__form",children:m.map((v,_)=>i.jsx(Po,{component:v,inquiry:e,inquiryLoading:g,actionsApi:y},`${v.name}-${_}`))})},d3=Te.reduxForm({})(l3);function fg(e){var c,l,d,u,h,m,p,g,b,x,y,v,_,A,T,R,O,D,L,H,M,B,V,q,$,Q,G,Y,re,ae,Ce,we,me,Ie,le,ee,ce,_e,pe,Je,lt,ue,Pe,Le,Fe,nt,Qe,Ne,de,be,Se,ve,He,Ve,ze,St,wt,Ut,gt,Hn;const t=(c=e==null?void 0:e.attributes)!=null?c:{},n=(l=t["color-primary"])!=null?l:I.Color.CorePurple700,r=(d=t["icon-color-primary"])!=null?d:vt(n).mix(vt("white"),.4).hex(),o=t["font-size-body"]?`calc(${t["font-size-body"]} * 1.5);`:"",a=t["font-size-header"]?`calc(${t["font-size-header"]} * 1.25);`:"",s=t["font-size-small"]?`calc(${t["font-size-small"]} * 1.5);`:"";return{...Gi,borderRadius:(u=t["border-radius"])!=null?u:un.rounded,borderRadiusModal:(h=t["border-radius-modal"])!=null?h:"1px",borderWidth:(m=t["border-width"])!=null?m:"2px",buttonBackgroundImage:t["button-background-image"],buttonFontWeight:(p=t["button-font-weight"])!=null?p:xl.Medium,buttonPosition:(g=t["button-position"])!=null?g:Is.Inline,buttonShadowStrength:t["button-shadow-strength"],buttonTextTransform:t["button-text-transform"],colorButtonPrimary:(b=t["color-button-primary"])!=null?b:n,colorButtonSecondary:(x=t["color-button-secondary"])!=null?x:n,colorButtonSecondaryFill:t["color-button-secondary-fill"],colorButtonPrimaryFillDisabled:(y=t["color-button-primary-fill-disabled"])!=null?y:I.Color.CoreSlate300,colorButtonSecondaryFillDisabled:(v=t["color-button-secondary-fill-disabled"])!=null?v:I.Color.CoreSlate300,colorError:(_=t["color-error"])!=null?_:I.Color.CoreRed900,colorFont:(A=t["color-font"])!=null?A:I.Color.CoreSlate1000,colorFontButtonPrimary:(T=t["color-font-button-primary"])!=null?T:I.Color.CoreSlate50,colorFontButtonSecondary:t["color-font-button-secondary"],colorFontSmall:(R=t["color-font-small"])!=null?R:I.Color.CoreSlate1000,colorFontTitle:(O=t["color-font-title"])!=null?O:I.Color.CoreSlate1000,colorIconHeader:(D=t["color-icon-header"])!=null?D:I.Color.CoreSlate700,colorInputBackground:(H=(L=t["color-input-background"])!=null?L:t["color-modal-background"])!=null?H:I.Color.PrimaryWhite,colorInputBorder:(M=t["color-input-border"])!=null?M:I.Color.CoreSlate500,colorFooterBackground:(B=t["color-modal-background"])!=null?B:I.Color.CoreSlate50,colorLink:(V=t["color-link"])!=null?V:n,colorDropdownBackground:(q=t["color-dropdown-background"])!=null?q:I.Color.PrimaryWhite,colorDropdownOption:($=t["color-dropdown-option"])!=null?$:I.Color.CoreSlate50,colorModalBackground:(Q=t["color-modal-background"])!=null?Q:I.Color.PrimaryWhite,colorPrimary:n,colorProgressBar:(G=t["color-progress-bar"])!=null?G:n,colorSuccess:(Y=t["color-success"])!=null?Y:I.Color.CoreGreen500,colorWarning:(re=t["color-warning"])!=null?re:I.Color.CoreYellow900,colorDivider:(ae=t["color-divider"])!=null?ae:I.Color.CoreSlate200,fontFamily:(Ce=t["font-family"])!=null?Ce:Gi.text.fontFamily.base,fontFamilyTitle:(we=t["font-family-title"])!=null?we:Gi.text.fontFamily.base,fontUrl:t["font-url"],fontSizeBody:(me=t["font-size-body"])!=null?me:Yt.p,fontSizeHeader:(Ie=t["font-size-header"])!=null?Ie:Yt.h2,fontSizeSmall:(le=t["font-size-small"])!=null?le:"10px",headerFontWeight:(ee=t["header-font-weight"])!=null?ee:xl.Medium,headerMarginBottom:(ce=t["header-margin-bottom"])!=null?ce:I.Spacing[4],iconColorPrimary:r,iconColorHighlight:(_e=t["icon-color-highlight"])!=null?_e:vt(r).mix(vt("white"),.85).hex(),iconColorStroke:(pe=t["icon-color-stroke"])!=null?pe:vt(n).mix(vt("black"),.71).saturate(.3).hex(),iconColorBackground:(Je=t["icon-color-background"])!=null?Je:I.Color.PrimaryWhite,iconColorGovernmentIdType:(lt=t["icon-color-government-id-type"])!=null?lt:n,inputStyle:(ue=t["input-style"])!=null?ue:Pt.Outlined,lineHeightBody:(Pe=t["line-height-body"])!=null?Pe:o,lineHeightHeader:(Le=t["line-height-header"])!=null?Le:a,lineHeightSmall:(Fe=t["line-height-small"])!=null?Fe:s,logoData:t["logo-data"],logoFilename:t["logo-filename"],logoHeight:t["logo-height"],logoUrl:t["logo-url"],logoWidth:t["logo-width"],pageTransition:(nt=t["page-transition"])!=null?nt:Pi.Slide,textAlign:(Qe=t["text-align"])!=null?Qe:Zs.Default,textDecorationLineLink:(Ne=t["text-decoration-line-link"])!=null?Ne:Af.Underline,usStateInputMethod:(de=t["us-state-input-method"])!=null?de:Qs.Input,navbarLogoDisplay:(be=t["navbar-logo-display"])!=null?be:Oi.None,navbarLogoHeight:t["navbar-logo-height"],iconStyle:(Se=t["icon-style"])!=null?Se:Gr.Default,processingDisplayStyle:(ve=t["processing-display-style"])!=null?ve:ka.Default,verticalOptionsStyle:(He=t["vertical-options-style"])!=null?He:Wi.Default,governmentIdPictographPosition:(Ve=t["government-id-pictograph-position"])!=null?Ve:Wt.Center,idBackPictographHeight:t["id-back-pictograph-height"],idBackPictographUrl:t["id-back-pictograph-url"],idFrontPictographHeight:t["id-front-pictograph-height"],idFrontPictographUrl:t["id-front-pictograph-url"],passportFrontPictographHeight:t["passport-front-pictograph-height"],passportFrontPictographUrl:t["passport-front-pictograph-url"],passportSignaturePictographHeight:t["passport-signature-pictograph-height"],passportSignaturePictographUrl:t["passport-signature-pictograph-url"],governmentIdSelectPictographHeight:(ze=t["government-id-select-pictograph-height"])!=null?ze:"none",governmentIdSelectPictographUrl:t["government-id-select-pictograph-url"],deviceHandoffTermsTextPosition:(St=t["device-handoff-terms-text-position"])!=null?St:_n.BelowButton,selfiePictographUrl:t["selfie-pictograph-url"],selfiePictographHeight:t["selfie-pictograph-height"],selfieCenterPictographUrl:t["selfie-center-pictograph-url"],selfieCenterPictographHeight:t["selfie-center-pictograph-height"],selfieLeftPictographUrl:t["selfie-left-pictograph-url"],selfieLeftPictographHeight:t["selfie-left-pictograph-height"],selfieRightPictographUrl:t["selfie-right-pictograph-url"],selfieRightPictographHeight:t["selfie-right-pictograph-height"],documentPictographHeight:t["document-pictograph-height"],documentPictographPosition:(wt=t["document-pictograph-position"])!=null?wt:Wt.Center,documentPictographUrl:t["document-pictograph-url"],failedPictographHeight:t["failed-pictograph-height"],failedPictographPosition:(Ut=t["failed-pictograph-position"])!=null?Ut:Wt.Center,failedPictographUrl:t["failed-pictograph-url"],successPictographHeight:t["success-pictograph-height"],successPictographPosition:(gt=t["success-pictograph-position"])!=null?gt:Wt.Center,successPictographUrl:t["success-pictograph-url"],exitPictographHeight:t["exit-pictograph-height"],exitPictographPosition:(Hn=t["exit-pictograph-position"])!=null?Hn:Wt.Center,exitPictographUrl:t["exit-pictograph-url"],loadingPictographHeight:t["loading-pictograph-height"],loadingPictographUrl:t["loading-pictograph-url"],cameraSupportPictographHeight:t["camera-support-pictograph-height"],cameraSupportPictographUrl:t["camera-support-pictograph-url"]}}const Pd=fg(),u3=e=>{var R,O,D;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s,setCreatePersonaStatus:c,setNextInquiry:l,cachedInquiryTransitionParams:d,debugForcedStatus:u,transitionInquiryFromVerifyWithPersonaStep:h}=e,m=Dt(),[p]=K(),g=n.type===Ee.ButtonCreatePersona||n.type===Ee.ButtonVerifyWithPersona?(O=(R=n==null?void 0:n.attributes)==null?void 0:R.pages)==null?void 0:O["passkey-registration"]:null,b=n.type===Ee.ButtonCreatePersona&&!!((D=n==null?void 0:n.attributes)!=null&&D["auto-complete-on-dismiss"])&&vi(t),x=g==null?void 0:g["ui-step"],y=g==null?void 0:g["component-name-mapping"],v=n.type===Ee.ButtonCreatePersona?n.attributes["has-reusable-persona-on-device"]:!1;f.useEffect(()=>{z.logAmplitude("reusable-persona.create.passkey-registration-page.entered")},[]),f.useEffect(()=>{t.attributes["reusable-persona-status"]&&m.push("/inquiry/create-persona/success")},[]),f.useEffect(()=>{v&&y&&"update-button"in y&&setTimeout(()=>{const L=document.getElementById(y["update-button"]);L&&L.click()},100)},[v,y]);const _=f.useCallback(()=>{Wr(t,a)},[t,a]),{error:A,callback:T}=It(async(L,H)=>{var M,B;if(y&&"update-button"in y&&H===y["update-button"]){z.logAmplitude("reusable-persona.create.passkey-registration-page.update-create-btn-clicked");const V=await Vl((await te.postResourceSingletonActionNew(S.Persona,"authentication-initiate")).meta);z.logAmplitude("reusable-persona.verify.passkey-authentication-page.submitted"),await te.postResourceSingletonActionNew(S.Persona,"authentication-submit-with-update",void 0,{meta:{"authentication-params":{"client-key":V.response.userHandle,"public-key":V,"expected-origin":window.location.origin}}}),c(En.PersonaUpdated),m.push("/inquiry/create-persona/update-success")}else if(H===(y==null?void 0:y["confirm-button"])){z.logAmplitude("reusable-persona.create.passkey-registration-page.confirm-btn-clicked");const V=(await te.postResourceSingletonActionNew(S.Persona,"registration-initiate")).meta,q=await Zh(V);z.logAmplitude("reusable-persona.create.passkey-registration-page.submitted");const $=n.type===Ee.ButtonVerifyWithPersona&&!(N.isReusablePersonaPopup&&window.opener)?{"from-component":n.name,"from-step":t.attributes["next-step"].name,"component-data":Object.entries(d).map(([G,Y])=>({name:G,value:Y})),"workflow-initial-variables":{"debug-forced-status":u}}:{},{data:Q}=await te.postResourceSingletonActionNew(S.Persona,"registration-submit",void 0,{meta:{"registration-params":{"client-key":V.user.id,"public-key":q,"expected-origin":window.location.origin},"transition-params":$}});c(En.PersonaCreated),N.isReusablePersonaPopup&&window.opener?(window.opener.postMessage(bs.CREATED),n.type===Ee.ButtonVerifyWithPersona&&Q&&((M=V==null?void 0:V.user)!=null&&M.id)&&h(Q,V.user.id,JSON.stringify(q),n.name,{"debug-forced-status":u},d,!0)):n.type===Ee.ButtonVerifyWithPersona&&Q&&l({inquiry:Q}),m.push("/inquiry/create-persona/success")}else H===(y==null?void 0:y["cancel-button"])?(z.logAmplitude("reusable-persona.create.passkey-registration-page.not-now-btn-clicked"),c(En.CtaDismissed),N.isReusablePersonaPopup?window.opener?(window.opener.postMessage(bs.DISMISSED),setTimeout(()=>window.close(),100)):((B=window.opener)==null||B.focus(),window.close()):b?_():m.goBack()):y!=null&&y["verify-with-persona-button"]&&H===(y==null?void 0:y["verify-with-persona-button"])&&m.push("/inquiry/verify-with-persona/passkey-authentication")},[x,y,b,_,d]);return Et({error:A,onError:()=>{console.error("Reusable Persona API Error:",A),e.showMessage(p("error.message"))},onNetworkError:L=>{console.error("Reusable Persona Network Error:",L),e.showMessage("Unexpected error, please try again.")}}),x==null||t==null?null:i.jsx(ya,{theme:Pd,children:i.jsx(gr,{inquiry:t,nextStep:x,currentSession:r,uiStatus:o,onTransitionSubmit:T,onTransitionAction:async()=>{},onComplete:_,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:m.push,showMessage:e.showMessage,setComponent:e.setComponent})})};function m3(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData,cachedInquiryTransitionParams:e.inquiry.cachedInquiryTransitionParams,debugForcedStatus:e.test.forcedStatus}}const h3={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setComponent:Ki,showMessage:se,setCreatePersonaStatus:Jo,setNextInquiry:vs,transitionInquiryFromVerifyWithPersonaStep:_f},p3=ke(m3,h3),f3=p3(u3),g3=({assetUrl:e,height:t,fallback:n,"aria-label":r})=>{const[o,a]=f.useState(),[s,c]=f.useState(0);switch(fr({loader:async()=>{if(Vp(e)!=="json"){c(2);return}try{const{data:l}=await di.get(e);a(l)}catch(l){ar({error:l,method:"GET",uri:e})}c(1)},deps:[e],onError:()=>c(2),onNetworkError:()=>c(2)}),s){case 0:return null;case 2:return n;case 1:return i.jsx(Gn,{role:"img","aria-label":r,animationData:o,style:{height:`min(${t}, 1000px)`,width:"auto"}})}},b3="none",C3=C.div.withConfig({displayName:"CustomizablePictograph__ImageContainer",componentId:"sc-1x7saia-0"})([""," > img,svg{","}"],({height:e})=>e!=null&&`height: ${e};`,({height:e})=>e!=null&&`height: ${e};`),Kt=({url:e,children:t,className:n,height:r,vectorEffect:o,"aria-label":a,themed:s=!0,primaryColor:c,highlightColor:l,backgroundColor:d,strokeColor:u})=>{const h=f.useContext(tt),m=h==null?void 0:h[e];if(m===b3)return null;if(!m){if(t==null)return null;const p=f.cloneElement(t,{"aria-label":a});return s?i.jsx(ye,{vectorEffect:o,className:n,$primaryColor:c,$highlightColor:l,$backgroundColor:d,$strokeColor:u,children:p}):i.jsx("div",{className:n,children:p})}switch(Vp(m)){case"png":case"svg":case"jpg":case"gif":return i.jsx(C3,{height:h[r],children:i.jsx("img",{src:m,"aria-label":a,alt:a})});case"json":return i.jsx(f.Suspense,{fallback:null,children:i.jsx(g3,{assetUrl:m,height:h[r],fallback:t!=null&&f.cloneElement(t,{"aria-label":a}),"aria-label":a})});default:throw new Error(`Invalid pictograph ${h[e]}. Valid extensions are: .png, .svg, .jpg, .gif, .json.`)}},x3=mi(["from{transform:translate(-50%,-50%) rotate(0deg);}to{transform:translate(-50%,-50%) rotate(360deg);}"]),v3=C(ye).withConfig({displayName:"LoadingSpinner__ThemedContainer",componentId:"sc-qbuihf-0"})(["position:relative;"]),y3=C("div").withConfig({displayName:"LoadingSpinner__Loop",componentId:"sc-qbuihf-1"})(["img,svg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:"," 5s linear infinite;}"],x3),I3=C("div").withConfig({displayName:"LoadingSpinner__Scanner",componentId:"sc-qbuihf-2"})(["display:inline-flex;align-items:center;position:absolute;top:-16px;left:50%;transform:translateX(-50%);"]),S3=()=>{const e=f.useContext(tt);return(e==null?void 0:e.loadingPictographUrl)?i.jsx(Kt,{url:"loadingPictographUrl",height:"loadingPictographHeight"}):i.jsxs(v3,{id:"loading-spinner","aria-busy":!0,"aria-live":"polite",role:"alert",children:[i.jsx(y3,{children:i.jsx(SC,{})}),i.jsxs(I3,{children:[i.jsx(wC,{}),i.jsx(_C,{})]})]})},w3=mi(["0%{opacity:0;}49.9999%{opacity:0;}50%{opacity:1;}100%{opacity:1;}"]),_3=C("div").withConfig({displayName:"LoadingSpinner__FullScreenSpinnerContainer",componentId:"sc-qbuihf-3"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);animation:"," ",";"],w3,Ra.medium),vn=()=>i.jsx(_3,{children:i.jsx(S3,{})}),R3=e=>({uiStatus:e.ui.status}),A3={loadCreatePersonaPopupFromCode:xy,setUiReady:mt,showMessage:se},T3=ke(R3,A3);function E3(e){const{i18n:t,t:n}=K();return fr({loader:async()=>{const{uiStatus:r,loadCreatePersonaPopupFromCode:o,setUiReady:a}=e;await o(t,N.inquiryParams.code,N.inquiryParams.component),r===tn.Initializing&&(N.onEvent(Oe.Ready),a())},deps:[],onError:()=>e.showMessage(n("errors.network")),onNetworkError:()=>e.showMessage(n("errors.network"))}),i.jsx(vn,{})}const k3=T3(E3),N3=e=>{var y,v,_,A,T;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,nextInquiry:s,routeToNextStep:c,featureFlags:l}=e,d=Dt();let u=null;n.type===Ee.ButtonCreatePersona?u=(v=(y=n==null?void 0:n.attributes)==null?void 0:y.pages)==null?void 0:v.success:n.type===Ee.ButtonVerifyWithPersona&&(u=(A=(_=n==null?void 0:n.attributes)==null?void 0:_.pages)==null?void 0:A["passkey-success"]);const h=n.type===Ee.ButtonCreatePersona&&!!((T=n==null?void 0:n.attributes)!=null&&T["auto-complete-on-dismiss"])&&vi(t),m=u==null?void 0:u["ui-step"],p=u==null?void 0:u["component-name-mapping"];f.useEffect(()=>{z.logAmplitude("reusable-persona.create.success-page.entered")},[]);const g=f.useCallback(()=>{Wr(t,a)},[t,a]),{error:b,callback:x}=It(async(R,O)=>{var D;O===(p==null?void 0:p["continue-button"])&&(z.logAmplitude("reusable-persona.create.success-page.dismissed"),N.isReusablePersonaPopup?((D=window.opener)==null||D.focus(),window.close()):(n.type===Ee.ButtonVerifyWithPersona&&c(s),h?g():d.go(-2)))},[m,p,h,g]);return Et({error:b,onError:()=>{e.showMessage("Unexpected error, please try again.")},onNetworkError:()=>e.showMessage("Unexpected error, please try again.")}),m==null||t==null?null:i.jsx(ya,{theme:Pd,children:i.jsx(gr,{inquiry:t,nextStep:m,currentSession:r,uiStatus:o,onTransitionSubmit:x,onTransitionAction:async()=>{},onComplete:g,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:d.push,showMessage:e.showMessage,setComponent:e.setComponent})})};function j3(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData,nextInquiry:e.verifyWithPersona.nextInquiry}}const P3={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setComponent:Ki,showMessage:se,transitionInquiry:xd,pollInquiry:jn,routeToNextStep:Gt},D3=ke(j3,P3),O3=D3(N3),L3=e=>{var b,x,y;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s}=e,c=Dt();let l=null;n.type===Ee.ButtonCreatePersona&&(l=(x=(b=n==null?void 0:n.attributes)==null?void 0:b.pages)==null?void 0:x["update-success"]);const d=n.type===Ee.ButtonCreatePersona&&!!((y=n==null?void 0:n.attributes)!=null&&y["auto-complete-on-dismiss"])&&vi(t),u=l==null?void 0:l["ui-step"],h=l==null?void 0:l["component-name-mapping"];f.useEffect(()=>{z.logAmplitude("reusable-persona.create.update-success-page.entered")},[]);const m=f.useCallback(()=>{Wr(t,a)},[t,a]),{error:p,callback:g}=It(async(v,_)=>{var A;_===(h==null?void 0:h["continue-button"])&&(z.logAmplitude("reusable-persona.create.success-page.dismissed"),N.isReusablePersonaPopup?((A=window.opener)==null||A.focus(),window.close()):d?m():c.go(-2))},[u,h,d,m]);return Et({error:p,onError:()=>{e.showMessage("Unexpected error, please try again.")},onNetworkError:()=>e.showMessage("Unexpected error, please try again.")}),u==null||t==null?null:i.jsx(ya,{theme:Pd,children:i.jsx(gr,{inquiry:t,nextStep:u,currentSession:r,uiStatus:o,onTransitionSubmit:g,onTransitionAction:async()=>{},onComplete:m,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:c.push,showMessage:e.showMessage,setComponent:e.setComponent})})};function F3(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData,nextInquiry:e.verifyWithPersona.nextInquiry}}const M3={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setComponent:Ki,showMessage:se,transitionInquiry:xd,pollInquiry:jn,routeToNextStep:Gt},V3=ke(F3,M3),B3=V3(L3),q3=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,Dd=new RegExp(q3.source,"i"),U3=/^\d{5}(-?\d{4})?$/,H3=/^[A-Z]([A-Z]?\d[A-Z]|\d{1,2}|[A-Z]\d{1,2}) \d[A-Z][A-Z]$/i,gg=Te.Field,li=C("div").withConfig({displayName:"FormGroup",componentId:"sc-qe6azv-0"})(["margin-bottom:",";label{",";font-weight:500;font-family:inherit;margin-bottom:",";transition-duration:",";}&:focus-within label{color:",";}"],I.Spacing[4],ui.sm,I.Spacing[2],it.Fast,e=>e.theme.colorPrimary);function $3(){const[e,t]=f.useState(am());return f.useEffect(()=>{function n(){t(am())}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),e}function am(){var e,t;return{height:((e=document==null?void 0:document.documentElement)==null?void 0:e.clientHeight)||(window==null?void 0:window.innerHeight),width:((t=document==null?void 0:document.documentElement)==null?void 0:t.clientWidth)||(window==null?void 0:window.innerWidth)}}const G3=1e-4,W3=C("div").withConfig({displayName:"Footer__Container",componentId:"sc-16qv69m-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;margin:0 auto;position:absolute;z-index:",";left:0;right:0;bottom:0;@media ","{position:fixed;}padding-top:","px;padding-bottom:",";padding-left:",";padding-right:",";padding-left:calc("," + env(safe-area-inset-left));padding-right:calc("," + env(safe-area-inset-right));"],At.footer,xt.isMobile,F.base,F.widgetPadding,F.widgetPadding,F.widgetPadding,F.widgetPadding,F.widgetPadding),bg=({children:e,className:t})=>{const[n,r]=f.useState(F.base*7),o=f.useRef();return f.useLayoutEffect(()=>{var s,c;const a=((c=(s=o.current)==null?void 0:s.getBoundingClientRect().height)!=null?c:0)-parseInt(F.widgetPadding);a>=0&&Math.abs(a-n)>G3&&r(a)}),i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-hidden":!0,style:{height:n}}),i.jsx(W3,{"data-test":"footer",ref:o,className:t,children:e})]})},ft=({children:e})=>{const t=f.useContext(tt),[n,r]=f.useState(!1),{height:o}=$3();switch(f.useEffect(()=>{r(window.matchMedia(xt.isSmallVertical).matches)},[o]),t==null?void 0:t.buttonPosition){case Is.Bottom:return n?i.jsx(i.Fragment,{children:e}):i.jsx(bg,{children:e});case Is.Inline:default:return i.jsx(i.Fragment,{children:e})}},z3=C("div").withConfig({displayName:"ThemedFormInput__OutlinedContainer",componentId:"sc-19frg26-0"})(["margin-bottom:","px;"],F.base*2),Y3=C("div").withConfig({displayName:"ThemedFormInput__MaterialContainer",componentId:"sc-19frg26-1"})(["margin-bottom:","px;position:relative;padding-top:","px;"],F.base,F.base*2),sm=C("div").withConfig({displayName:"ThemedFormInput__FormError",componentId:"sc-19frg26-2"})(["color:",";font-size:",";margin-top:","px;"],e=>{var t;return((t=e==null?void 0:e.theme)==null?void 0:t.colorError)||Be.red100},Yt.small,F.base),Zn=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},autoFocus:a,label:s,placeholder:c,id:l,"data-test":d="form",...u}=e,{inputStyle:h}=f.useContext(tt),m=!!(r&&o);switch(h){case Pt.Material:return i.jsxs(Y3,{className:t,children:[i.jsx(dr,{labelText:s||c,...n,...u,autoFocus:a,hasError:m,"aria-invalid":m?"true":void 0,id:l,"data-test":d}),i.jsx(sm,{"data-test":`${d}-error`,role:"alert",props:e,children:m&&r})]});case Pt.Outlined:default:return i.jsxs(z3,{className:t,children:[s&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:l},children:s}),i.jsx(zi,{...n,...u,autoFocus:a,hasError:m,"aria-invalid":m?"true":void 0,id:l,placeholder:c,"data-test":d}),i.jsx(sm,{"data-test":`${d}-error`,role:"alert",props:e,children:m&&r})]})}},K3=C("p").withConfig({displayName:"ThemedParagraph__Paragraph",componentId:"sc-2v8g2c-0"})(["font-family:",";color:",";font-size:",";line-height:",";text-align:",";"],({theme:{fontFamily:e}})=>$t(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody,({theme:e})=>e.textAlign),qe=({styles:e,...t})=>i.jsx(i.Fragment,{children:e!=null?i.jsx(Oa,{...t,styles:e}):i.jsx(K3,{...t})}),cm=C.div.withConfig({displayName:"FormEmailAddress__DisclaimerContainer",componentId:"sc-1ocvk5j-0"})(["display:block;margin-top:","px;",""],F.base,({position:e,theme:t})=>e===_n.AboveButton&&W(["padding-bottom:","px;border-bottom:1px solid ",";margin-bottom:","px;"],F.base*2,t.colorDivider,F.base*2)),Q3=C(qe).withConfig({displayName:"FormEmailAddress__Disclaimer",componentId:"sc-1ocvk5j-1"})(["color:",";font-size:",";line-height:",";&,a{font-size:",";line-height:",";}"],({theme:e})=>e.colorFontSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall);function Z3({handleSubmit:e,labelContinue:t,pristine:n,submitting:r,buttonStyle:o,disclaimerStyle:a,disclaimerText:s,disclaimerPosition:c=_n.BelowButton,disabled:l}){const[d]=K(),u=f.useMemo(()=>({emailAddress:[bt(d("database.form.validate-email-valid"),ur(Dd)),bt(d("database.form.validate-email-required"),Rn)]}),[d]),h=i.jsx(i.Fragment,{children:a!=null?i.jsx(qe,{styles:a,children:i.jsx(J,{children:s!=null?s:d("to-email.disclaimer")})}):i.jsx(Q3,{children:i.jsx(J,{children:s!=null?s:d("to-email.disclaimer")})})});return i.jsxs("form",{onSubmit:e,"data-test":"form-email-address",children:[i.jsxs(li,{children:[i.jsx("label",{htmlFor:"email-address",children:d("email-address.form.label")}),i.jsx(gg,{autoComplete:"email",id:"email-address",name:"email-address",component:Zn,disabled:l||r,inputMode:"email",placeholder:"you@example.com",validate:u.emailAddress})]}),c===_n.AboveButton&&i.jsx(cm,{position:_n.AboveButton,children:h}),i.jsxs(ft,{children:[i.jsx(ge,{type:"submit",buttonType:ne.Primary,styles:o,disabled:r,isPending:r,tabIndex:n||r?-1:0,children:t}),c===_n.BelowButton&&i.jsx(cm,{position:_n.BelowButton,children:h})]})]})}const Od=Te.reduxForm({form:"email-address"})(Z3),J3=C("div").withConfig({displayName:"InquiryDeviceHandoffEmailPromptView__Header",componentId:"sc-3sr1jl-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]);function X3({assets:e,handleEmailOneTimeLink:t,localizations:n,prefill:r,disabled:o}){var d,u,h;const[a]=K(),{base:s,buttons:c}=Xi(),{deviceHandoffTermsTextPosition:l=_n.BelowButton}=f.useContext(tt);return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(J3,{children:[i.jsx(dt,{styles:s==null?void 0:s.titleStyle,children:i.jsx(J,{children:(d=n==null?void 0:n.title)!=null?d:a("to-mobile.title")})}),i.jsx(ot,{styles:s==null?void 0:s.textStyle,children:i.jsx(J,{children:(u=n==null?void 0:n.prompt)!=null?u:a("to-email.prompt")})})]}),i.jsx(Od,{onSubmit:t,labelContinue:(h=n==null?void 0:n["btn-submit"])!=null?h:a("to-email.btn-submit"),buttonStyle:c==null?void 0:c.primary,disclaimerStyle:s==null?void 0:s.disclaimerStyle,disclaimerText:n==null?void 0:n.disclaimer,disclaimerPosition:l,disabled:o,initialValues:{"email-address":r}})]})}var _l=(e=>(e.SavePhoneNumber="one-time-link/SAVE_PHONE_NUMBER",e.SaveEmailAddress="one-time-link/SAVE_EMAIL_ADDRESS",e))(_l||{});function rc(e){return{payload:{phoneNumber:e},type:"one-time-link/SAVE_PHONE_NUMBER"}}function oc(e){return{payload:{emailAddress:e},type:"one-time-link/SAVE_EMAIL_ADDRESS"}}function eR(e){var d;const[t]=K(),{error:n,callback:r}=It(async u=>{const h=u["email-address"],{inquiry:m}=e,p={attributes:{"email-address":h},id:m.id,type:m.type};e.saveEmailAddress(h),await te.postResourceAction(p,"email-one-time-link"),z.logAmplitude("one-time-link.sent",{method:"email"}),N.onEvent(Oe.OneTimeLinkSent,{method:"email"}),e.history.push("/inquiry/device-handoff/email/sent")},[e.inquiry,e.history]);Et({error:n,onError:u=>{u.status===409?e.showMessage(t("errors.inquiry-conflict")):e.showMessage(t("errors.network"))},onNetworkError:()=>e.showMessage(t("errors.network"))});const o=(d=e.inquiry)==null?void 0:d.attributes["next-step"],{assets:a,localizations:s,prefill:c,disabled:l}=f.useMemo(()=>{var u;return((u=e.component)==null?void 0:u.type)===Ee.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-email-prompt-page"],localizations:e.component.attributes.localizations["device-handoff-email-prompt-page"],prefill:e.component.attributes["device-handoff-email-prefill"],disabled:e.component.attributes["device-handoff-email-disabled"]}:o!=null&&wo(o)?{assets:o.config.assets["device-handoff-email-prompt-page"],localizations:o.config.localizations["device-handoff-email-prompt-page"],prefill:o.config["device-handoff-email-prefill"],disabled:o.config["device-handoff-email-disabled"]}:{assets:{"header-pictograph":null},localizations:void 0,prefill:"",disabled:!1}},[o,e.component]);return e.inquiry==null?null:i.jsx(pr,{value:e.styles,children:i.jsx(X3,{assets:a,handleEmailOneTimeLink:r,localizations:s,prefill:c,disabled:l})})}function tR(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:pi(e)}}const nR={saveEmailAddress:oc,showMessage:se},iR=ke(tR,nR),rR=iR(eR),oR=C("div").withConfig({displayName:"InquiryDeviceHandoffEmailSentView__Header",componentId:"sc-1o129vd-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function aR({assets:e,localizations:t,emailAddress:n,resendOneTimeLink:r}){var u,h,m,p,g;const[o]=K(),{base:a,buttons:s}=Xi(),[c,{enable:l}]=st(),d=()=>{c||(r(),l())};return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(oR,{children:[i.jsx(dt,{styles:a==null?void 0:a.titleStyle,children:i.jsx(J,{children:(u=t==null?void 0:t.title)!=null?u:o("mobile-sent.title")})}),i.jsx(ot,{styles:a==null?void 0:a.textStyle,children:i.jsx(J,{children:t!=null&&t.prompt?jp.compile(t.prompt,{data:!1,knownHelpersOnly:!0})({client:{emailAddress:n}}):o("mobile-sent.prompt-email",{emailAddress:n})})})]}),i.jsx($e,{"aria-label":"email pictograph",children:i.jsx(Ye,{customImage:e["email-pictograph"],alt:"email pictograph",children:i.jsx(ye,{$primaryColor:k((h=a==null?void 0:a.fill)==null?void 0:h.color),$highlightColor:k((m=a==null?void 0:a.fill)==null?void 0:m.highlightColor),$backgroundColor:k((p=a==null?void 0:a.fill)==null?void 0:p.backgroundColor),$strokeColor:k((g=a==null?void 0:a.stroke)==null?void 0:g.color),children:i.jsx(Ls,{})})})}),t!=null&&t["btn-resend"]?i.jsxs(i.Fragment,{children:[i.jsx(We,{height:2}),i.jsx(ge,{id:"inquiry-device-handoff-email-sent__resend-btn",onClick:d,type:"button",buttonType:ne.Secondary,styles:s==null?void 0:s[ne.Secondary],children:t["btn-resend"]})]}):i.jsx(ot,{styles:a==null?void 0:a.textStyle,children:i.jsxs(Bn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-email__resend-link",onClick:d,children:"resend the secure link"})]})})]})}const lm=3e3;let Lc;function sR(e){var d;const[t]=K(),n=(d=e.inquiry)==null?void 0:d.attributes["next-step"],{assets:r,localizations:o}=f.useMemo(()=>{var u;return((u=e.component)==null?void 0:u.type)===Ee.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-email-sent-page"],localizations:e.component.attributes.localizations["device-handoff-email-sent-page"]}:n!=null&&wo(n)?{assets:n.config.assets["device-handoff-email-sent-page"],localizations:n.config.localizations["device-handoff-email-sent-page"]}:{assets:{"header-pictograph":null,"email-pictograph":null},localizations:void 0}},[n,e.component]);f.useEffect(()=>(e.inquiry==null&&N.redirectToStart(),l(),()=>clearTimeout(Lc)),[]);const{inquiry:a,emailAddress:s}=e,c=f.useCallback(async()=>{e.clearMessages();try{const u={attributes:{"email-address":s},id:a.id,type:a.type};await te.postResourceAction(u,"email-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch{e.showMessage(t("mobile-sent.failed-to-resend"))}},[a,e.showMessage,e.clearMessages]),l=f.useCallback(async()=>{try{const{data:u,meta:h}=await te.getResource(Zt(e.inquiry.type),e.inquiry.id);if((h==null?void 0:h["device-handed-off-at"])!=null){e.saveInquiry(u),e.history.push("/inquiry/device-handoff/started");return}switch(u.attributes.status){case fe.Created:case fe.Pending:Lc=window.setTimeout(l,lm);return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(u),e.routeToNextStep(u);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ct(u.attributes.status)}}catch(u){if(u instanceof Ct)Lc=window.setTimeout(l,lm);else if(u instanceof pt&&u.status!==401)e.showMessage(t("errors.session-expired"));else throw u}},[a]);return a==null?null:i.jsx(pr,{value:e.styles,children:i.jsx(aR,{assets:r,localizations:o,emailAddress:s,resendOneTimeLink:c})})}function cR(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,emailAddress:e.oneTimeLink.emailAddress,styles:pi(e)}}const lR={clearMessages:Lt,showMessage:se,saveInquiry:Ot,routeToNextStep:Tt,saveEmailAddress:oc},dR=ke(cR,lR),uR=dR(sR),mR=qn()(uR),hR=C.button.withConfig({displayName:"VerticalOption__OptionBlock",componentId:"sc-78m1oi-0"})(["border:0;margin:0;padding:0;background:transparent;box-sizing:border-box;color:inherit;text-align:inherit;display:flex;justify-content:space-between;align-items:center;cursor:pointer;"," ",""],()=>{const e=N.isInline?"0px":`-${N.widgetPadding.left}px`,t=N.isInline?"0px":`-${N.widgetPadding.right}px`;return`
      width: calc(100% - ${e} - ${t});
      margin-left: ${e};
      margin-right: ${t};
    `},({styles:e,buttonType:t})=>{const n=r=>(e==null?void 0:e.border)!=null?`${E(e.border.width.top)} solid ${k(e.border.color)}`:`1px solid ${r}`;switch(t){case"outline":return W(["padding-top:",";padding-bottom:",";padding-left:",";padding-right:",";border-top:",";:last-of-type{border-bottom:",";}:hover,:focus{background-color:",";}"],I.Spacing[4],I.Spacing[4],I.Spacing[5],I.Spacing[5],n(Be.gray50),n(Be.gray50),({theme:r})=>e!=null&&e.backgroundColor?k(e.backgroundColor.focused):r.colorDropdownOption);case"outline_light":return W(["padding-top:18px;padding-bottom:18px;padding-left:0;padding-right:",";border-top:",";border-bottom:",";& + &{border-top:none;}color:",";margin-left:0;width:calc(100% + ","px);font-weight:500;:focus-within{background-color:",";}"],I.Spacing[5],({theme:r})=>n(r.colorDivider),({theme:r})=>n(r.colorDivider),({theme:r})=>r.colorFontTitle,N.widgetPadding.left,({theme:r})=>e!=null&&e.backgroundColor?k(e.backgroundColor.focused):r.colorDropdownOption)}}),pR=C("span").withConfig({displayName:"VerticalOption__Text",componentId:"sc-78m1oi-1"})(["flex-grow:1;"]),fR=C(Ql).withConfig({displayName:"VerticalOption__StyledChevron",componentId:"sc-78m1oi-2"})(["path{stroke:",";}"],({styles:e,theme:t})=>{var n;return((n=e==null?void 0:e.stroke)==null?void 0:n.color)!=null?k(e.stroke.color):t.colorFontTitle});function Ld({id:e,"data-id":t,"data-test":n,buttonType:r="outline",onClick:o,icon:a,children:s,styles:c}){return i.jsxs(hR,{id:e,"data-id":t,"data-test":n,onClick:o,type:"button",buttonType:r,styles:{backgroundColor:c==null?void 0:c.backgroundColor,border:c==null?void 0:c.border},children:[a,i.jsx(pR,{children:c!=null?i.jsx(Oa,{styles:c.textStyle,children:s}):s}),i.jsx(fR,{styles:c==null?void 0:c.chevron})]})}const Fd=132,gR=256,bR=C("div").withConfig({displayName:"InquiryDeviceHandoffPromptView__Header",componentId:"sc-1plfyk1-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),CR=C(ge).withConfig({displayName:"InquiryDeviceHandoffPromptView__OptionButton",componentId:"sc-1plfyk1-1"})(["width:100%;",""],({styles:e})=>e==null&&W(["& + &{margin-top:",";}"],I.Spacing[4])),xR=C(ge).withConfig({displayName:"InquiryDeviceHandoffPromptView__CopyToClipboardButton",componentId:"sc-1plfyk1-2"})(({styles:e,textStyles:t})=>({backgroundColor:"transparent !important",border:0,borderBottom:"1px solid",borderRadius:0,boxShadow:"unset !important",margin:0,padding:0,textTransform:"unset",transform:"none !important",width:"initial",borderColor:`${k(e==null?void 0:e["text-color"].base.base)} !important`,fontFamily:$t(t==null?void 0:t["font-family"].base.base),fontSize:E(t==null?void 0:t["font-size"].base.base),fontWeight:dn(t==null?void 0:t["font-weight"].base.base),letterSpacing:E(t==null?void 0:t["letter-spacing"].base.base),lineHeight:E(t==null?void 0:t["line-height"].base.base),svg:{height:E(t==null?void 0:t["font-size"].base.base),width:E(t==null?void 0:t["font-size"].base.base)}})),vR=C.div.withConfig({displayName:"InquiryDeviceHandoffPromptView__QrCodeContainer",componentId:"sc-1plfyk1-3"})(["height:","px;margin-bottom:",";display:flex;flex-direction:column;align-items:center;"],Fd,I.Spacing[6]),yR=C.span.withConfig({displayName:"InquiryDeviceHandoffPromptView__IconContainer",componentId:"sc-1plfyk1-4"})(["line-height:0;margin-right:10px;"]),IR=C.div.withConfig({displayName:"InquiryDeviceHandoffPromptView__Container",componentId:"sc-1plfyk1-5"})(["display:flex;flex-direction:column;"]);function SR({assets:e,deviceHandoffOptions:t,deviceHandoffListStyle:n="button",handleEmailDeviceHandoff:r,handleSmsDeviceHandoff:o,link:a,shortlink:s,copyShortlink:c,localizations:l}){var y,v,_,A,T;const[d]=K(),{base:u,buttons:h}=Xi(),m=n==="button"?ft:f.Fragment,p=l==null?void 0:l["qr-code"],g=p?_R(p.length):Fd,b=p||a,x=s!=null&&N.canCopyToClipboard;return i.jsxs(IR,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(bR,{children:[i.jsx(dt,{styles:u==null?void 0:u.titleStyle,children:i.jsx(J,{children:(y=l==null?void 0:l.title)!=null?y:d("to-mobile.title")})}),i.jsx(ot,{styles:u==null?void 0:u.textStyle,children:i.jsx(J,{children:(v=l==null?void 0:l.description)!=null?v:d("to-mobile.description")})})]}),t.includes(on.Qr)&&i.jsx(vR,{style:{height:`${g}px`},children:!!b&&i.jsxs(i.Fragment,{children:[i.jsx($e,{height:g,width:g,"aria-label":d("qr-code.prompt"),role:"img",marginBottom:s?"0":void 0,children:i.jsx(_d,{value:b,accessibleTitle:d("qr-code.prompt"),"data-test":"device-handoff-qr__qr-code",bgColor:k(u==null?void 0:u.backgroundColor),fgColor:k((T=(A=(_=u==null?void 0:u.textStyle)==null?void 0:_["text-color"])==null?void 0:A.base)==null?void 0:T.base)})}),x&&i.jsx(xR,{onClick:c,id:"device-handoff-qr__copy-shortlink",suffixIcon:i.jsx(Wh,{}),styles:h==null?void 0:h.secondary,textStyles:u==null?void 0:u.disclaimerStyle,children:s})]})}),i.jsx(m,{children:(t!=null?t:[]).map((R,O)=>i.jsx(wR,{isPrimary:O===0,option:R,assets:e,deviceHandoffOptions:t,handleEmailDeviceHandoff:r,handleSmsDeviceHandoff:o,localizations:l,deviceHandoffListStyle:n},R))})]})}function wR({assets:e,handleSmsDeviceHandoff:t,handleEmailDeviceHandoff:n,isPrimary:r,localizations:o,option:a,deviceHandoffListStyle:s}){var l,d;const[c]=K();switch(a){case on.Sms:return i.jsx(dm,{id:"button__sms",isPrimary:r,"data-test":"to-mobile__via-sms",onClick:t,icon:i.jsx(Ye,{customImage:e["icon-sms"],alt:"mobile phone icon"}),deviceHandoffListStyle:s,children:(l=o==null?void 0:o["via-sms"])!=null?l:c("to-mobile.via-sms")});case on.Email:return i.jsx(dm,{id:"button__email",isPrimary:r,"data-test":"to-mobile__via-email",onClick:n,icon:i.jsx(Ye,{customImage:e["icon-email"],alt:"email icon"}),deviceHandoffListStyle:s,children:(d=o==null?void 0:o["via-email"])!=null?d:c("to-mobile.via-email")});case on.Qr:return null;default:ct(a)}}const dm=({"data-test":e,children:t,icon:n,id:r,isPrimary:o,onClick:a,deviceHandoffListStyle:s="outline"})=>{const{buttons:c}=Xi(),l={id:r,"data-test":e,onClick:a},d=o?ne.Primary:ne.Secondary;return s==="button"?i.jsx(CR,{...l,type:"button",styles:c==null?void 0:c[d],buttonType:d,children:t}):i.jsx(Ld,{...l,buttonType:s,icon:n!=null&&i.jsx(yR,{"data-test":"option-vertical__pictograph",children:n}),children:t})};function _R(e){return zh(Fd,gR,Math.floor(Math.sqrt(e)*16))}const um=3e3,RR=e=>{var x;const t=Dt(),n=Xt("inquiry:hide-sms-device-handoff-option-inverse"),[r]=K(),[o,a]=f.useState({long:void 0,short:void 0}),[s,{disable:c}]=st(!0);let l;fr({loader:async()=>{var v,_;const y=await te.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"generate-one-time-link");a({long:(v=y==null?void 0:y.meta)==null?void 0:v["one-time-link-url"],short:(_=y==null?void 0:y.meta)==null?void 0:_["one-time-link-url-short"]}),z.logAmplitude("one-time-link.sent",{method:"qr"}),N.onEvent(Oe.OneTimeLinkSent,{method:"qr"})},deps:[],onError:y=>{var v;y.status===403&&((v=y.errors[0])==null?void 0:v.code)==="max_session_limit_error"?t.push("/verify/invalid/inquiry"):y.status===409?e.showMessage(r("errors.inquiry-conflict")):e.showMessage(r("errors.network"))},onNetworkError:()=>e.showMessage(r("errors.network"))}),f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}return d(),()=>{clearTimeout(l),c()}},[]);const d=f.useCallback(async()=>{try{const{data:y,meta:v}=await te.getResource(Zt(e.inquiry.type),e.inquiry.id);if((v==null?void 0:v["device-handed-off-at"])!=null){e.saveInquiry(y),e.history.push("/inquiry/device-handoff/started");return}switch(y.attributes.status){case fe.Created:case fe.Pending:s&&(l=window.setTimeout(d,um));return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(y),e.routeToNextStep(y);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(r("errors.session-expired"));return;default:ct(y.attributes.status)}}catch(y){if(y instanceof Ct)l=window.setTimeout(d,um);else if(y instanceof pt&&y.status!==401)e.showMessage(r("errors.session-expired"));else throw y}},[e.inquiry,s]),u=f.useCallback(async()=>{o.short!=null&&await Ef(o.short)&&e.showMessage(r("to-mobile.link-copied"))},[o.short]),h=(x=e.inquiry)==null?void 0:x.attributes["next-step"],{assets:m,localizations:p,deviceHandoffOptions:g,deviceHandoffListStyle:b}=f.useMemo(()=>{var y;if(((y=e.component)==null?void 0:y.type)===Ee.ButtonDeviceHandoff){let v=e.component.attributes["device-handoff-options"];return n||(v=v.filter(_=>_!==on.Sms)),{assets:e.component.attributes.assets["device-handoff-prompt-page"],localizations:e.component.attributes.localizations["device-handoff-prompt-page"],deviceHandoffOptions:v,deviceHandoffListStyle:e.component.attributes["device-handoff-list-style"]}}else if(h!=null&&wo(h)){let v=h.config["device-handoff-options"];return n||(v=v.filter(_=>_!==on.Sms)),{assets:h.config.assets["device-handoff-prompt-page"],localizations:h.config.localizations["device-handoff-prompt-page"],deviceHandoffOptions:v,deviceHandoffListStyle:h.config["device-handoff-list-style"]}}else return{assets:{"header-pictograph":null,"icon-email":null,"icon-sms":null},localizations:void 0,deviceHandoffOptions:[],deviceHandoffListStyle:void 0}},[h,e.component,n]);return e.inquiry==null?null:i.jsx(pr,{value:e.styles,children:i.jsx(SR,{link:o.long?`${o.long}&device-handoff-method=${on.Qr}`:void 0,shortlink:o.short,copyShortlink:u,localizations:p,handleSmsDeviceHandoff:()=>t.push("/inquiry/device-handoff/sms"),handleEmailDeviceHandoff:()=>t.push("/inquiry/device-handoff/email"),deviceHandoffOptions:g,deviceHandoffListStyle:b,assets:m})})};function AR(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:pi(e)}}const TR={clearMessages:Lt,showMessage:se,saveInquiry:Ot,routeToNextStep:Tt},ER=ke(AR,TR),kR=ER(RR),NR=({children:e,color:t,...n})=>i.jsx("span",{...n,children:e}),Md=C(NR).withConfig({displayName:"Text__Span",componentId:"sc-1yv5kz8-0"})(["color:",";",";"],({color:e="primary",theme:t})=>e==null?"inherit":t.color.text[e],Kx);C(Md).attrs(()=>({as:"h1"})).withConfig({displayName:"Text__Display",componentId:"sc-1yv5kz8-1"})(["",""],({size:e})=>Qx[e]);C(Md).withConfig({displayName:"Text__HeadingComponent",componentId:"sc-1yv5kz8-2"})(["",""],({size:e})=>Up[e]);const ac=C(Md).attrs(({as:e="p"})=>({as:e})).withConfig({displayName:"Text__Paragraph",componentId:"sc-1yv5kz8-3"})([""," color:",";"],({size:e="md",weight:t="normal"})=>{if(t!=="normal"){if(["md","lg"].includes(e))return ui[e+t.charAt(0).toUpperCase()+t.slice(1)];console.error(`Weight '${t}' does not exist for size '${e}'.`)}return ui[e]},({color:e="secondary",theme:t})=>t.color.text[e]),jR=C(ac).attrs({as:"label"}).withConfig({displayName:"Text__Label",componentId:"sc-1yv5kz8-4"})(["color:",";"],({color:e="primary",theme:t})=>t.color.text[e]);C(ac).withConfig({displayName:"Text__TabularNumber",componentId:"sc-1yv5kz8-5"})(["font-variant-numeric:tabular-nums;color:",";"],({color:e="primary",theme:t})=>t.color.text[e]);const PR=C("div").withConfig({displayName:"FormControl__Container",componentId:"sc-1gbm02v-0"})(["margin-bottom:",";"],I.Spacing[4]),DR=C(ac).withConfig({displayName:"FormControl__FormError",componentId:"sc-1gbm02v-1"})(["color:",";margin-top:",";white-space:pre-line;"],I.Color.TextDanger,I.Spacing[1]),OR=e=>typeof e=="string"?e:e.displayName||"Component";function Vd(e){var t;return t=class extends f.Component{constructor(r){super(r)}render(){const{className:r,input:o,meta:{error:a,warning:s,submitFailed:c,touched:l},autoFocus:d,...u}=this.props,h=!!((a||s)&&(c||l));return i.jsxs(PR,{className:r,children:[i.jsx(e,{...o,...u,hasError:h,warning:s,id:this.id}),h&&i.jsx(DR,{id:this.errorId,role:"alert",children:a})]})}get id(){const{id:r,input:{name:o}}=this.props;return r||o}get errorId(){return`${this.id}--error`}},t.displayName=`FormControl(${OR(e)})`,t}const mm=Vd(zi),LR=Vd(hg),Cg=Vd(mg),hm=C.div.withConfig({displayName:"FormPhoneNumber__DisclaimerContainer",componentId:"sc-iqabde-0"})(["display:block;margin-top:","px;",""],F.base,({position:e,theme:t})=>e===_n.AboveButton&&W(["padding-bottom:","px;border-bottom:1px solid ",";margin-bottom:","px;"],F.base*2,t.colorDivider,F.base*2)),FR=C(qe).withConfig({displayName:"FormPhoneNumber__Disclaimer",componentId:"sc-iqabde-1"})(["color:",";font-size:",";line-height:",";&,a{font-size:",";line-height:",";}"],({theme:e})=>e.colorFontSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),MR=C(qe).withConfig({displayName:"FormPhoneNumber__ThemedDisclaimer",componentId:"sc-iqabde-2"})(["",""],({styles:e})=>{const t=e;return{fontSize:E(t["font-size"].base.base),lineHeight:E(t["line-height"].base.base),"& , a":{fontSize:E(t["font-size"].base.base),lineHeight:E(t["line-height"].base.base)}}});function VR(e){const{defaultCountry:t,handleSubmit:n,labelContinue:r,pristine:o,submitting:a,onCountryChange:s=()=>null,buttonStyle:c,disclaimerStyle:l,disclaimerText:d,disclaimerPosition:u=_n.BelowButton,disabled:h}=e,[m]=K(),p=f.useMemo(()=>({phoneNumber:[bt(m("database.form.validate-phone-number-valid"),Zf),bt(m("database.form.validate-phone-number-required"),Rn)]}),[m]),g=i.jsx(i.Fragment,{children:l!=null?i.jsx(MR,{styles:l,children:i.jsx(J,{children:d!=null?d:m("to-mobile.disclaimer")})}):i.jsx(FR,{children:i.jsx(J,{children:d!=null?d:m("to-mobile.disclaimer")})})});return i.jsxs("form",{onSubmit:n,children:[i.jsxs(li,{children:[i.jsx("label",{htmlFor:"phone-number",children:m("phone-number.form.label")}),i.jsx(Te.Field,{autoComplete:"phone",component:Cg,disabled:h||a,id:"phone-number",name:"phone-number",type:"tel",defaultCountry:t,validate:p.phoneNumber,onCountryChange:s})]}),u===_n.AboveButton&&i.jsx(hm,{position:_n.AboveButton,children:g}),i.jsxs(ft,{children:[i.jsx(ge,{type:"submit",buttonType:ne.Primary,styles:c,disabled:a,isPending:a,tabIndex:o||a?-1:0,children:r}),u===_n.BelowButton&&i.jsx(hm,{position:_n.BelowButton,children:g})]})]})}const Bd=Te.reduxForm({form:"phone-number"})(VR),BR=C("div").withConfig({displayName:"InquiryDeviceHandoffSmsPromptView__Header",componentId:"sc-5qwbcz-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function qR({assets:e,defaultCountry:t,handleSmsOneTimeLink:n,localizations:r,prefill:o,disabled:a}){var u,h,m;const[s]=K(),{base:c,buttons:l}=Xi(),{deviceHandoffTermsTextPosition:d=_n.BelowButton}=f.useContext(tt);return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(BR,{children:[i.jsx(dt,{styles:c==null?void 0:c.titleStyle,children:i.jsx(J,{children:(u=r==null?void 0:r.title)!=null?u:s("to-mobile.title")})}),i.jsx(ot,{styles:c==null?void 0:c.textStyle,children:i.jsx(J,{children:(h=r==null?void 0:r.prompt)!=null?h:s("to-mobile.prompt")})})]}),i.jsx(Bd,{onSubmit:n,labelContinue:(m=r==null?void 0:r["btn-submit"])!=null?m:s("to-mobile.btn-submit"),defaultCountry:t,disclaimerStyle:c==null?void 0:c.disclaimerStyle,disclaimerText:r==null?void 0:r.disclaimer,buttonStyle:l==null?void 0:l.primary,disclaimerPosition:d,disabled:a,initialValues:{"phone-number":o}})]})}function UR(e){var d;const[t]=K(),{error:n,callback:r}=It(async u=>{const h=u["phone-number"],{inquiry:m}=e,p={attributes:{"phone-number":h},id:m.id,type:m.type};e.savePhoneNumber(h),await te.postResourceAction(p,"sms-one-time-link"),z.logAmplitude("one-time-link.sent",{method:"sms"}),N.onEvent(Oe.OneTimeLinkSent,{method:"sms"}),e.history.push("/inquiry/device-handoff/sms/sent")},[e.inquiry,e.history]);Et({error:n,onError:u=>{var h,m,p,g,b,x,y,v;u.status===409?e.showMessage(t("errors.inquiry-conflict")):u.status===400&&((m=(h=u.errors)==null?void 0:h[0])==null?void 0:m.code)==="unsubscribed_error"?e.showMessage(t("mobile-sent.sms-unsubscribed")):u.status===422&&(((g=(p=u.errors)==null?void 0:p[0])==null?void 0:g.code)==="invalid_number_error"||((x=(b=u.errors)==null?void 0:b[0])==null?void 0:x.details)==="landline_detected_error")?e.showMessage(t("mobile-sent.invalid-number")):u.status===422&&((v=(y=u.errors)==null?void 0:y[0])==null?void 0:v.code)==="region_not_supported_error"?e.showMessage(t("mobile-sent.region-not-supported")):e.showMessage(t("mobile-sent.failed-to-resend"))},onNetworkError:()=>e.showMessage(t("errors.network"))});const o=(d=e.inquiry)==null?void 0:d.attributes["next-step"],{assets:a,localizations:s,prefill:c,disabled:l}=f.useMemo(()=>{var u;return((u=e.component)==null?void 0:u.type)===Ee.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-sms-prompt-page"],localizations:e.component.attributes.localizations["device-handoff-sms-prompt-page"],prefill:e.component.attributes["device-handoff-phone-number-prefill"],disabled:e.component.attributes["device-handoff-phone-number-disabled"]}:o!=null&&wo(o)?{assets:o.config.assets["device-handoff-sms-prompt-page"],localizations:o.config.localizations["device-handoff-sms-prompt-page"],prefill:o.config["device-handoff-phone-number-prefill"],disabled:o.config["device-handoff-phone-number-disabled"]}:{assets:{"header-pictograph":null},localizations:void 0,prefill:"",disabled:!1}},[o,e.component]);return e.inquiry==null?null:i.jsx(pr,{value:e.styles,children:i.jsx(qR,{assets:a,defaultCountry:e.defaultCountry,handleSmsOneTimeLink:r,localizations:s,prefill:c,disabled:l})})}function HR(e){return{defaultCountry:e.locale.localeInfo.country_code,inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:pi(e)}}const $R={savePhoneNumber:rc,showMessage:se},GR=ke(HR,$R),WR=GR(UR),zR=C("div").withConfig({displayName:"InquiryDeviceHandoffSmsSentView__Header",componentId:"sc-dx6akj-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function YR({assets:e,localizations:t,phoneNumber:n,resendOneTimeLink:r}){var h,m,p,g,b;const o=Bl(n,"National"),[a]=K(),{base:s,buttons:c}=Xi(),[l,{enable:d}]=st(),u=()=>{l||(r(),d())};return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(zR,{children:[i.jsx(dt,{styles:s==null?void 0:s.titleStyle,children:i.jsx(J,{children:(h=t==null?void 0:t.title)!=null?h:a("mobile-sent.title")})}),i.jsx(ot,{styles:s==null?void 0:s.textStyle,children:t!=null&&t.prompt?i.jsx(J,{children:jp.compile(t.prompt,{data:!1,knownHelpersOnly:!0})({client:{phoneNumber:o}})}):i.jsx(Bn,{i18nKey:"mobile-sent.prompt",components:[i.jsx("bdo",{dir:"ltr"},0)],values:{phoneNumber:o}})})]}),i.jsx($e,{"aria-label":"SMS pictograph",children:i.jsx(Ye,{customImage:e["sms-pictograph"],alt:"SMS pictograph",children:i.jsx(ye,{$primaryColor:k((m=s==null?void 0:s.fill)==null?void 0:m.color),$highlightColor:k((p=s==null?void 0:s.fill)==null?void 0:p.highlightColor),$backgroundColor:k((g=s==null?void 0:s.fill)==null?void 0:g.backgroundColor),$strokeColor:k((b=s==null?void 0:s.stroke)==null?void 0:b.color),children:i.jsx(Ls,{})})})}),t!=null&&t["btn-resend"]?i.jsxs(i.Fragment,{children:[i.jsx(We,{height:2}),i.jsx(ge,{id:"inquiry-device-handoff-sms-sent__resend-btn",onClick:u,type:"button",buttonType:ne.Secondary,styles:c==null?void 0:c[ne.Secondary],children:t["btn-resend"]})]}):i.jsx(ot,{styles:s==null?void 0:s.textStyle,children:i.jsxs(Bn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-sms__resend-link",onClick:u,children:"resend the secure link"})]})})]})}const pm=3e3;let Fc;function KR(e){var d;const[t]=K();f.useEffect(()=>(e.inquiry==null&&N.redirectToStart(),a(),()=>clearTimeout(Fc)),[]);const{inquiry:n,phoneNumber:r}=e,o=f.useCallback(async()=>{var u;e.clearMessages();try{const h={attributes:{"phone-number":r},id:n.id,type:n.type};await te.postResourceAction(h,"sms-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch(h){h.status===400&&((u=h.errors)==null?void 0:u[0].title)==="Phone number unsubscribed"?e.showMessage(t("mobile-sent.sms-unsubscribed")):e.showMessage(t("mobile-sent.failed-to-resend"))}},[n,e.showMessage,e.clearMessages]),a=f.useCallback(async()=>{try{const{data:u,meta:h}=await te.getResource(Zt(e.inquiry.type),e.inquiry.id);if((h==null?void 0:h["device-handed-off-at"])!=null){e.saveInquiry(u),e.history.push("/inquiry/device-handoff/started");return}switch(u.attributes.status){case fe.Created:case fe.Pending:Fc=window.setTimeout(a,pm);return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(u),e.routeToNextStep(u);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ct(u.attributes.status)}}catch(u){if(u instanceof Ct)Fc=window.setTimeout(a,pm);else if(u instanceof pt&&u.status!==401)e.showMessage(t("errors.session-expired"));else throw u}},[n]),s=(d=e.inquiry)==null?void 0:d.attributes["next-step"],{assets:c,localizations:l}=f.useMemo(()=>{var u;return((u=e.component)==null?void 0:u.type)===Ee.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-sms-sent-page"],localizations:e.component.attributes.localizations["device-handoff-sms-sent-page"]}:s!=null&&wo(s)?{assets:s.config.assets["device-handoff-sms-sent-page"],localizations:s.config.localizations["device-handoff-sms-sent-page"]}:{assets:{"header-pictograph":null,"sms-pictograph":null},localizations:void 0}},[s,e.component]);return n==null?null:i.jsx(pr,{value:e.styles,children:i.jsx(YR,{assets:c,localizations:l,phoneNumber:r,resendOneTimeLink:o})})}function QR(e){return{inquiry:e.inquiry.inquiry,phoneNumber:e.oneTimeLink.phoneNumber,component:e.inquiry.component,styles:pi(e)}}const ZR={clearMessages:Lt,showMessage:se,saveInquiry:Ot,savePhoneNumber:rc,routeToNextStep:Tt},JR=ke(QR,ZR),XR=JR(KR),eA=qn()(XR),tA=C("div").withConfig({displayName:"InquiryDeviceHandoffStartedView__Header",componentId:"sc-yj3xbg-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function nA({assets:e,localizations:t,resumeOnDevice:n}){var s,c,l,d,u,h;const[r]=K(),{base:o,buttons:a}=Xi();return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(tA,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(J,{children:(s=t==null?void 0:t.title)!=null?s:r("handed-off.title")})}),i.jsx(ot,{styles:o==null?void 0:o.textStyle,children:i.jsx(J,{children:(c=t==null?void 0:t.prompt)!=null?c:r("handed-off.prompt")})})]}),i.jsx($e,{"aria-label":"return to original device pictograph",children:i.jsx(Ye,{customImage:e["device-pictograph"],alt:"device pictograph",children:i.jsx(ye,{$primaryColor:k((l=o==null?void 0:o.fill)==null?void 0:l.color),$highlightColor:k((d=o==null?void 0:o.fill)==null?void 0:d.highlightColor),$backgroundColor:k((u=o==null?void 0:o.fill)==null?void 0:u.backgroundColor),$strokeColor:k((h=o==null?void 0:o.stroke)==null?void 0:h.color),children:i.jsx(RC,{})})})}),t!=null&&t["btn-resume"]?i.jsxs(i.Fragment,{children:[i.jsx(We,{height:2}),i.jsx(ge,{id:"inquiry-device-handoff-started__resume-btn",onClick:n,type:"button",buttonType:ne.Secondary,styles:a==null?void 0:a[ne.Secondary],children:t["btn-resume"]})]}):i.jsx(ot,{styles:o==null?void 0:o.textStyle,children:i.jsx("a",{id:"device-handoff-started__resume-link",onClick:n,children:i.jsx(Bn,{i18nKey:"handed-off.btn-resume",children:"Fallback Resume Button"})})})]})}const fm=3e3;let Mc;function iA(e){var d;const t=Dt(),[n]=K(),r=(d=e.inquiry)==null?void 0:d.attributes["next-step"],{assets:o,localizations:a}=f.useMemo(()=>{var u;return((u=e.component)==null?void 0:u.type)===Ee.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-started-page"],localizations:e.component.attributes.localizations["device-handoff-started-page"]}:r!=null&&wo(r)?{assets:r.config.assets["device-handoff-started-page"],localizations:r.config.localizations["device-handoff-started-page"]}:{assets:{"header-pictograph":null,"device-pictograph":null},localizations:void 0}},[r,e.component]);f.useEffect(()=>(e.inquiry==null&&N.redirectToStart(),l(),()=>clearTimeout(Mc)),[]);const{inquiry:s}=e,c=f.useCallback(async()=>{e.clearMessages(),await te.postResourceSingletonActionNew(S.CurrentInquirySession,"resume");const u=(await te.getResource(Zt(s.type),s.id)).data;e.saveInquiry(u),e.routeToNextStep(u,{historyToClear:t})},[s,e,t]),l=f.useCallback(async()=>{try{const u=(await te.getResource(Zt(s.type),s.id)).data;switch(u.attributes.status){case fe.Created:case fe.Pending:Mc=window.setTimeout(l,fm);return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(u),e.routeToNextStep(u,{historyToClear:t});return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ct(u.attributes.status)}}catch(u){if(u instanceof Ct)Mc=window.setTimeout(l,fm);else if(u instanceof pt&&u.status!==401)e.showMessage(n("errors.session-expired"));else throw u}},[s]);return s==null?null:i.jsx(pr,{value:e.styles,children:i.jsx(nA,{assets:o,localizations:a,resumeOnDevice:c})})}function rA(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:pi(e)}}const oA={clearMessages:Lt,showMessage:se,saveInquiry:Ot,routeToNextStep:Tt},aA=ke(rA,oA),sA=aA(iA),cA=qn()(sA),xg=f.createContext(jf()),Yr=()=>f.useContext(xg),sc=({children:e,value:t})=>{const n=f.useMemo(()=>jf(t),[t]);return i.jsx(xg.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n.buttons,children:e})})};var Nt=(e=>(e[e.Prompt=0]="Prompt",e[e.TakePhoto=1]="TakePhoto",e[e.Check=2]="Check",e[e.Review=3]="Review",e[e.Pending=4]="Pending",e[e.Failed=5]="Failed",e))(Nt||{});const pa=e=>{switch(e){case Nt.Prompt:return"/inquiry/documents/prompt";case Nt.TakePhoto:return"/inquiry/documents/capture";case Nt.Check:return"/inquiry/documents/check";case Nt.Review:return"/inquiry/documents/review";case Nt.Pending:return"/inquiry/documents/pending";case Nt.Failed:return"/inquiry/documents/failed";default:ct(e)}},lA=[0,1,0,1,-4,1,0,1,0];function gm(e){var c;const t=Math.max(Math.max(e.width,e.height)/75,1),n=(c=Ms(e))==null?void 0:c.data;if(!n)return 0;const r=new Uint8ClampedArray(5625);let o=0;for(let l=0;l<n.length;l+=4*Math.floor(t)){const d=n[l],u=n[l+1],h=n[l+2],m=(d+u+h)/3;r[o]=m,o++}const a=dA(r,lA,75,75);return uA(a)}function dA(e,t,n,r){const o=Math.round(Math.sqrt(t.length)),a=Math.floor(o/2),s=new Uint8ClampedArray(5625);for(let c=0;c<r;c++)for(let l=0;l<n;l++){const d=c*n+l;let u=0;for(let h=0;h<o;h++)for(let m=0;m<o;m++){const p=Math.min(r-1,Math.max(0,c+h-a)),g=Math.min(n-1,Math.max(0,l+m-a)),b=p*n+g,x=t[h*o+m];u+=e[b]*x}s[d]=u}return s}function uA(e){const t=O0(e);return e.reduce((r,o)=>r+(o-t)**2,0)/e.length}function mA(e,t,n=1,r=99){const o=Math.floor(n/100*t),a=Math.floor(r/100*t);let s,c,l=0;for(let u=0,h=e.length;u<h;u++)if(l+=e[u],l>o){s=u;break}const d=t-a;l=0;for(let u=e.length-1;u>=0;u--)if(l+=e[u],l>d){c=u;break}return c-s}function wr(e,t={x:0,y:0,width:e.width,height:e.height}){var h;const n=e.getContext("2d",{willReadFrequently:!0});if(n==null)return null;let r;try{if(r=(h=n.getImageData(t.x,t.y,t.width,t.height))==null?void 0:h.data,!r)return null}catch(m){if(m instanceof RangeError||m instanceof DOMException||m instanceof Error&&m.name==="NS_ERROR_OUT_OF_MEMORY")return null;throw m}const o=r.length/4;let a=0;const s=new Array(256).fill(0);for(let m=0,p=r.length;m<p;m+=4){const g=r[m],b=r[m+1],x=r[m+2],y=(g+b+x)/3,v=Math.floor(y);s[v]++,a+=y}const c=a/o;let l=0;for(let m=0,p=r.length;m<p;m+=4){const g=r[m],b=r[m+1],x=r[m+2],v=((g+b+x)/3-c)/255;l+=v**2}const d=Math.sqrt(l/o),u=mA(s,o);return{luminosity:c/255,rmsContrast:d/.5,lowHighContrast:u/255}}const hA=254;function oo(e,t=hA){var c;const n=(c=Ms(e))==null?void 0:c.data;if(n==null)return 0;let r=0;const o=e.height,a=e.width,s=Math.max(Math.max(o,a)/150,1);for(let l=0;l<o;l+=s)for(let d=0;d<a;d+=s){const u=(l*a+d)*4,h=1-Math.abs(d-a/2)/a*2,m=1-Math.abs(l-o/2)/o*2,p=h*m;n[u]>=t&&n[u+1]>=t&&n[u+2]>=t&&(r+=p*p)}return r/(o/s*(a/s))}class Jn{constructor(t){this.showTriggeredCount=0,this.hideTriggeredCount=0,this.config=t}get isShowing(){return this.showTriggeredCount>=this.config.showAfterFrames}runTick(t){this.isShowing?this.config.shouldShow(t)?this.hideTriggeredCount=0:(this.hideTriggeredCount++,this.hideTriggeredCount>=this.config.hideAfterFrames&&(this.showTriggeredCount=0)):this.config.shouldShow(t)?(this.showTriggeredCount++,this.showTriggeredCount>=this.config.showAfterFrames&&(this.hideTriggeredCount=0)):this.showTriggeredCount=0}getType(){return this.config.type}getPrompt({t,localizations:n}){return this.config.getPrompt({t,localizations:n})}}class qd{constructor(t){this.triggers=t}runTick(t){for(const n of this.triggers)n.runTick(t)}getTriggered(){for(const t of this.triggers)if(t.isShowing)return t}}const _s=300,go="image/jpeg",Rs=.95,bm=6,Cm=2;class Rl{constructor({canvasBuffer:t,filter:n,frameBufferSize:r,skipBlankCaptureCheck:o}){if(this.blankCanvasDataUri="",this.capturedFrames=[],this.filter=gm,this.frameBufferSize=bm,this.capture=()=>{const a=this.canvasBuffer.toDataURL(go,Rs);a.length<=this.blankCanvasDataUri.length||this.captureFrame({clarityScore:this.filter(this.canvasBuffer),dateRecorded:new Date().getTime(),dataUri:a})},this.manualCapture=a=>{this.captureFrame({clarityScore:Number.MAX_SAFE_INTEGER,dateRecorded:new Date().getTime(),dataUri:a})},this.canvasBuffer=t,this.filter=n!=null?n:gm,this.frameBufferSize=r!=null?r:bm,!o){const[a,s]=Ci();a.height=t.height,a.width=t.width,this.blankCanvasDataUri=a.toDataURL(go,Rs),s()}}hasCaptures(){return this.capturedFrames.length>0}captureCount(){return this.capturedFrames.length}leastBlurryImages(){const t=cl(this.capturedFrames),n=L0(this.capturedFrames,1),r=sl(n,a=>{var s;return((s=a==null?void 0:a.clarityScore)!=null?s:0)*-1}),o=sl(r.slice(0,Cm),[a=>a.dateRecorded,a=>this.capturedFrames.indexOf(a)]);return t!=null&&o.push(t),o.map(a=>a.dataUri)}async processLastFrame(t){const n=cl(this.capturedFrames);if(n)return await t(n.dataUri)}captureFrame(t){this.capturedFrames.length>Cm&&t.dataUri.length<Br&&t.clarityScore===0||(this.capturedFrames.push(t),this.capturedFrames.length>this.frameBufferSize&&this.capturedFrames.shift())}}function As(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach(t=>t.stop()),e.getAudioTracks().forEach(t=>t.stop())):e.getTracks?e.getTracks().forEach(t=>t.stop()):e.stop&&e.stop())}async function La(e,t,n=1){const{maxAttempts:r=3,onRetry:o,onRetriesExhausted:a=s=>{throw s}}=t!=null?t:{};try{return await Promise.resolve(e())}catch(s){if(n<r)return o==null||o(s,n),await La(e,t,n+1);a(s)}}let pA=class{async prepare(t,n){return La(()=>this._prepare(t,n),{onRetry:()=>{},onRetriesExhausted:r=>{throw Z(new Error("Retrying VideoClient.prepare due to error"),"warning",{message:r.message,name:r.name,tags:null,breadcrumbs:[{level:"warning",message:"VideoClient.prepare errored"}]}),r}})}async _prepare(t,n){if(rr({level:"info",message:"VideoClient.prepare started",data:{mediaConstraints:t}}),this.stream!=null)return;if(this.stream=await navigator.mediaDevices.getUserMedia(t),rr({level:"info",message:"VideoClient.prepare completed",data:{mediaConstraints:t}}),ex()||Yl()||N.isWebView||n!=null&&n["inquiry:dispose-video-client-early-all-web-clients"]){rr({level:"info",message:"VideoClient.prepare calling early dispose",data:{mediaConstraints:t}}),this.dispose();return}const r=document.createElement("video");let o;r.srcObject!==void 0?r.srcObject=this.stream:(o=window.URL.createObjectURL(this.stream),r.src=o),new Promise(a=>{const s=()=>{window.URL.revokeObjectURL(o),r.removeEventListener("loadedmetadata",s),a()};r.addEventListener("loadedmetadata",s)})}dispose(){rr({level:"info",message:"VideoClient.dispose destroyed video stream"}),As(this.stream),this.stream=void 0}};const An=new pA,fA=.92,Ud=()=>{const e=f.useRef([]),t=f.useRef(!0),n=f.useRef({...vp});return{logCameraInspectionSnapshot:r=>{if(r)try{const o=e.current;if(o.length>=5)return;if(t.current){const a=wp(r==null?void 0:r.toDataURL("image/jpeg",fA));a!=null&&(o.push(a),t.current=!1)}else t.current=!0}catch(o){Z(o)}},logCameraInspectionFromStream:async r=>{if(!r||n.current.kind)return;let o={...n.current,...Ip(r)};n.current=o,o={...o,...await Sp(r,!1)},n.current=o},getCameraInspectionData:({includeSmallImages:r})=>({...n.current,streamStability:yp({snapshots:e.current,includeSmallImages:r})})}},gA=C("div").withConfig({displayName:"HintPrompt__Wrapper",componentId:"sc-om4c1v-0"})(["color:",";text-align:center;display:flex;flex:auto;align-items:center;justify-content:space-around;padding-left:",";padding-right:",";height:",";"],e=>e.color?e.color:e.theme.colorFont,I.Spacing[6],I.Spacing[6],I.Spacing[8]);function bA({activeTrigger:e,color:t,localizations:n}){const[r]=K();return i.jsx(gA,{color:t,children:i.jsx("p",{role:"alert",children:e.getPrompt({t:r,localizations:n})})})}const CA=C.button.withConfig({displayName:"PreviewThumbnail__PreviewButton",componentId:"sc-19w4k11-0"})(["position:relative;background:white;display:flex;align-items:center;justify-content:center;height:40px;width:40px;padding:2px;border-radius:",";flex:none;min-height:0;"],un.rounded),xA=C.div.withConfig({displayName:"PreviewThumbnail__FileCount",componentId:"sc-19w4k11-1"})(["position:absolute;top:-8px;right:-8px;height:16px;width:16px;border-radius:",";background-color:",";color:",";font-size:10px;font-weight:",";"],un.circle,({theme:e,styles:t})=>{var n,r,o,a;return(a=(o=k((r=(n=t==null?void 0:t["background-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:e.colorButtonPrimary)!=null?a:e.colorPrimary},({theme:e,styles:t})=>{var n,r,o;return(o=k((r=(n=t==null?void 0:t["text-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:e.colorFontButtonPrimary},pn.medium),vA=C.img.withConfig({displayName:"PreviewThumbnail__Thumbnail",componentId:"sc-19w4k11-2"})(["height:100%;width:100%;object-fit:cover;image-orientation:from-image;border-radius:",";"],un.rounded),yA=C(ye).withConfig({displayName:"PreviewThumbnail__StyledThemedSvg",componentId:"sc-19w4k11-3"})(["display:flex;align-items:center;justify-content:center;"]);function IA(e){var t;return(t=e==null?void 0:e.includes("image"))!=null?t:!1}const SA=({files:e=[],onClick:t})=>{const n=kf();if(e.length===0)return null;const r=zt(e);return i.jsxs(CA,{onClick:t,id:"preview-thumbnail__button","data-test":"preview-thumbnail__button",children:[i.jsx(xA,{styles:n==null?void 0:n.primary,children:e.length}),r!=null&&IA(r["file-type"])?i.jsx(vA,{src:r.url,"data-test":"preview-thumbnail__image"}):i.jsx(yA,{"data-test":"preview-thumbnail__icon-file",children:i.jsx(Bs,{})})]})},wA=450,_A=C.div.withConfig({displayName:"BaseScanner__ScannerWrapper",componentId:"sc-17olqux-0"})(["",""],({templatePreferredDimensionsEnabled:e})=>e?`
    @media ${xt.isNotMobile} {
      max-width: ${wA}px;
      margin-left: auto;
      margin-right: auto;
    }
    `:""),RA=C("div").withConfig({displayName:"BaseScanner__VideoWrapper",componentId:"sc-17olqux-1"})(["background:",";overflow:hidden;position:relative;width:100%;&::after{content:'';display:block;padding-bottom:75%;}video{position:absolute;top:50%;transform-origin:top;transform:scaleX(",") scaleY(",") translateY(-50%);}"],Be.black,e=>(e.mirrored?-1:1)*(e.zoomFactor||1),e=>e.zoomFactor||1),AA=C.button.withConfig({displayName:"BaseScanner__TorchButton",componentId:"sc-17olqux-2"})(["background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;height:40px;width:40px;svg{height:100%;width:100%;}",""],({active:e})=>e&&W(["svg path{fill:white;}"])),TA=C("div").withConfig({displayName:"BaseScanner__HintWrapper",componentId:"sc-17olqux-3"})(["background-color:",";margin-bottom:","px;padding:","px ","px;display:flex;align-items:center;"," ",""],Be.black,F.base*2,F.base,F.base*4,({hasTorch:e})=>e&&`padding-right: ${F.base}px;`,({hasCaptures:e})=>e&&`padding-left: ${F.base}px;`);function cc(e){var q,$,Q;const t=kf(),n=f.useRef(void 0),r=f.useRef(void 0),o=f.useRef(),a=f.useRef();f.useEffect(()=>{const[G,Y]=Ci();return a.current=G,e.disableCaptureClient||(g.current=new Rl({canvasBuffer:a.current})),Y},[]);const{logCameraInspectionFromStream:s,logCameraInspectionSnapshot:c,getCameraInspectionData:l}=Ud(),d=f.useRef(new qd(e.triggerConfigs.map(G=>new Jn(G)))),[u,h]=f.useState(d.current.getTriggered()),[m,p]=f.useState(!1),g=f.useRef(null),b=f.useRef(),[x,{toggle:y}]=st(),[v,_]=f.useState(!1),[A,T]=f.useState(!1),[R,O]=f.useState(e.delayUntilManualCaptureMs===0||Pn()),D=Xt("inquiry:enable-template-preferred-dimensions-configuration")||!1,L=(q=e.renderButton)!=null?q:G=>i.jsx(ge,{...G,buttonType:ne.Primary,styles:t==null?void 0:t[ne.Primary]});f.useEffect(()=>{let G;return e.delayUntilManualCaptureMs>0&&(G=window.setTimeout(()=>O(!0),e.delayUntilManualCaptureMs)),()=>{clearTimeout(G)}},[]);const H=()=>{var G,Y,re;if(((Y=(G=o.current)==null?void 0:G.video)==null?void 0:Y.videoWidth)>0)try{mo({source:o.current.video,precreatedCanvas:a.current,zoomFactor:e.zoomFactor}),(re=g.current)==null||re.capture()}catch(ae){ae.name!=="NS_ERROR_NOT_AVAILABLE"&&e.handleFailed(ae,"capture")}r.current!=null&&(r.current=window.setTimeout(H,_s))},M=async(G,Y)=>{var re,ae;o.current.video&&(mo({source:o.current.video,precreatedCanvas:a.current,zoomFactor:e.zoomFactor}),(re=g.current)==null||re.capture(),Y||(Y=await e.paramsFromVideoFrame(o.current.video,a.current,g.current,d.current)),await e.handleCapture({imageSrcs:(ae=g.current)==null?void 0:ae.leastBlurryImages(),captureMethod:G,params:Y,cameraInspectionData:l({includeSmallImages:!1})}))},B=async()=>{var Y,re;const G=new Date().getTime();if(((re=(Y=o.current)==null?void 0:Y.video)==null?void 0:re.videoWidth)>0){const ae=await e.paramsFromVideoFrame(o.current.video,a.current,g.current,d.current);if(c(a.current),d.current.runTick(ae),h(d.current.getTriggered()),e.shouldSubmit(ae,d.current)){M(ut.Auto,ae);return}}if(n.current!=null){const ae=Math.max(0,e.detectInterval-(new Date().getTime()-G));n.current=window.setTimeout(B,ae)}};f.useEffect(()=>(n.current=window.setTimeout(B,e.detectInterval),e.disableCaptureClient||(r.current=window.setTimeout(H,_s)),()=>{clearTimeout(n.current),n.current=null,clearTimeout(r.current),r.current=null,An.dispose()}),[]),f.useEffect(()=>{var G;try{if(((G=b.current)==null?void 0:G.readyState)==="live"&&v){const Y={torch:x};A&&(Y.focusMode="continuous"),b.current.applyConstraints({advanced:[Y]})}}catch(Y){Z(new Error("Failed to enable torch"),"warning",{error:Y})}},[x]);const V=G=>{G&&(o.current=G,o.current.video.defaultMuted=!0,o.current.video.muted=!0,o.current.video.addEventListener("loadedmetadata",async()=>{const Y=o.current.stream;if(Y&&typeof ImageCapture<"u"){const re=Y.getVideoTracks()[0];if(re==null){e.handleFailed("Video track is null","load");return}if(re.readyState!=="live")return;try{if(await new ImageCapture(re).getPhotoCapabilities(),re.readyState!=="live")return;const ae=re.getCapabilities();re.applyConstraints.toString().includes("function")&&(ae.focusMode!=null&&re.applyConstraints({advanced:[{focusMode:"continuous"}]}),b.current=re,_(ae.torch!=null),T(ae.focusMode!=null))}catch(ae){ae.name!=="OperationError"&&Z(ae,"warning")}}}),o.current.video.addEventListener("canplay",async()=>{if(o.current.video&&(p(!0),o.current.video.paused))try{await o.current.video.play()}catch(Y){e.handleFailed(Y,"load")}}))};return i.jsxs(_A,{"data-test":"scanner","data-scanner-type":e.scannerType,templatePreferredDimensionsEnabled:D,children:[i.jsxs(RA,{mirrored:e.videoConstraints.facingMode==="user",zoomFactor:e.zoomFactor,children:[i.jsx(Os,{audio:!1,width:"100%",height:"initial",ref:V,"data-test":"base-scanner__verify",videoConstraints:e.videoConstraints,onUserMedia:s,onUserMediaError:G=>e.handleFailed(G,"load")}),e.overlay]}),i.jsxs(TA,{hasCaptures:(($=e.captures)==null?void 0:$.length)>0,hasTorch:v,children:[i.jsx(SA,{files:e.captures}),i.jsx(bA,{activeTrigger:(Q=e.triggerOverride)!=null?Q:u,color:Be.white}),v&&i.jsx(AA,{id:"scanner__button--torch",onClick:y,active:x,title:x?"Flash ON":"Flash OFF",children:i.jsx(Np,{})})]}),L({disabled:!m||!R,id:"scanner__button--capture","data-test":"scanner__button--capture",onClick:()=>M(ut.Manual,null),children:e.labelTakePhoto}),i.jsx(We,{height:1})]})}function lc(e){if(e==null||e.rmsContrast===0&&e.luminosity===0)return!1;const t=e.rmsContrast<.2||e.lowHighContrast<.2,n=e.rmsContrast>.3&&e.lowHighContrast>.5;return e.luminosity<.34&&!n||e.luminosity<.45&&t}const EA=100,kA=[{type:0,shouldShow:NA,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("document-scanner.hint.detected-low-light")},{type:1,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({t:e})=>e("document-scanner.hint.default")}];function NA(e){return lc(e.luminosityData)}function Al({delayUntilManualCaptureMs:e=0,handleCapture:t,handleError:n,labelTakePhoto:r,videoConstraints:o,captures:a,renderButton:s}){const c=Xt("inquiry:enable-low-light-detection-web"),l=async(u,h,m,p)=>{mo({source:u,precreatedCanvas:h});try{return{luminosityData:c?wr(h):null}}catch(g){n(g,"capture")}return{luminosityData:null}},d=(u,h)=>!1;return i.jsx(cc,{delayUntilManualCaptureMs:e,handleCapture:({imageSrcs:u,captureMethod:h})=>t(u,h),handleFailed:n,detectInterval:EA,labelTakePhoto:r,videoConstraints:o,triggerConfigs:kA,paramsFromVideoFrame:l,shouldSubmit:d,captures:a,scannerType:"document",renderButton:s,zoomFactor:1})}function jA({documentFiles:e,documentFileLimit:t,handleCapture:n,handleError:r,handleFinish:o,localizations:a,videoConstraints:s}){const{buttons:c}=Yr(),l=e.length>=t;return e.length===0?i.jsxs(i.Fragment,{children:[i.jsx(ai,{tabIndex:-1,children:a.prompt}),i.jsx(Al,{handleCapture:n,handleError:r,labelTakePhoto:a["btn-take-photo"],videoConstraints:s,captures:[]})]}):i.jsxs(i.Fragment,{children:[i.jsx(ai,{tabIndex:-1,children:a.prompt}),i.jsx(Al,{handleCapture:n,handleError:r,labelTakePhoto:a["btn-additional-photo"],videoConstraints:s,captures:e.map(d=>d.attributes.originals[0]),renderButton:d=>i.jsxs(i.Fragment,{children:[l?null:i.jsxs(i.Fragment,{children:[i.jsx(ge,{...d,buttonType:ne.Primary,styles:c==null?void 0:c[ne.Primary]}),c==null&&i.jsx(We,{height:1})]}),i.jsx(ge,{id:"documents-capture__submit",buttonType:ne.Secondary,styles:c==null?void 0:c[ne.Secondary],onClick:o,children:a["btn-finish"]})]})})]})}var $n=(e=>(e.SetDocument="document/SET_DOCUMENT",e.SetDocumentFiles="document_files/SET_DOCUMENT_FILES",e.ClearDocument="document/CLEAR_DOCUMENT",e.SetVideoConstraints="document/SET_VIDEO_CONSTRAINTS",e.UploadFile="document/UPLOAD_FILE",e.SetUploadProgress="document/SET_UPLOAD_PROGRESS",e.AddUploadedFile="document/ADD_UPLOADED_FILE",e.ClearUploadedFiles="document/CLEAR_UPLOADED_FILES",e.ClearUpload="document/CLEAR_UPLOAD",e.ClearAllUploads="document/CLEAR_ALL_UPLOADS",e.AddPendingDeletion="document/ADD_PENDING_DELETION",e.ClearPendingDeletion="document/CLEAR_PENDING_DELETION",e))($n||{});function vg(e){return{payload:{document:e},type:"document/SET_DOCUMENT"}}function yg(){return{payload:{},type:"document/CLEAR_DOCUMENT"}}function Ig(e){return{payload:{documentFiles:e},type:"document_files/SET_DOCUMENT_FILES"}}function Sg(e){return{payload:{videoConstraints:e},type:"document/SET_VIDEO_CONSTRAINTS"}}function dc(e){return{payload:{file:e},type:"document/UPLOAD_FILE"}}function Ts(e,t){return{payload:{file:e,progress:t},type:"document/SET_UPLOAD_PROGRESS"}}function PA(){return{payload:{},type:"document/CLEAR_UPLOADED_FILES"}}function DA(e){return{payload:{uploadedFile:e},type:"document/ADD_UPLOADED_FILE"}}function uc(e){return{payload:{file:e},type:"document/CLEAR_UPLOAD"}}function OA(e){return{payload:{fileId:e},type:"document/ADD_PENDING_DELETION"}}function LA(e){return{payload:{fileId:e},type:"document/CLEAR_PENDING_DELETION"}}const FA=e=>{const{inquiry:t,config:n,document:r,documentFiles:o,videoConstraints:a,styles:s,featureFlags:c}=e,l=Dt(),[d]=K();f.useEffect(()=>{if(t==null||r==null){N.redirectToStart();return}},[]),f.useEffect(()=>{try{c!=null&&c["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("documents.capture-page.entered",{})}catch{}},[]);const u=async(p,g)=>{var x;e.saveCaptureMethod(g),p=p.filter(y=>y!=null);const b=p[p.length-1];z.logAmplitude("document.camera.capture",{imageSize:b.length});try{e.uploadFile({filename:`${new Date().toISOString()}_0_${(x=n==null?void 0:n.kind)!=null?x:"generic"}.jpg`,fileType:"image/jpeg",dataUrl:b}),l.replace(pa(Nt.Check))}catch(y){h(y,"capture")}},h=(p,g)=>{g==="capture"&&e.showMessage(d("documents.capture.failed-screenshot")),p instanceof Error?(Z(p,"error",{state:g},{jira:"PER-10182"}),g==="load"&&(N.onEvent(Oe.LoadCameraFailed,{error:p.name,message:p.message}),l.push("/inquiry/support/camera"))):(Z(new Error(p),"error",{state:g},{jira:"PER-10182"}),g==="load"&&(N.onEvent(Oe.LoadCameraFailed,{message:p}),l.push("/inquiry/support/camera")))},m=()=>{l.replace(pa(Nt.Prompt))};return t==null||r==null||n==null?null:i.jsx(sc,{value:s,children:i.jsx(jA,{documentFiles:o,documentFileLimit:n["document-file-limit"],handleCapture:u,handleError:h,handleFinish:m,localizations:n.localizations["capture-page"],videoConstraints:a})})};function MA(e){return{inquiry:e.inquiry.inquiry,documentFiles:e.document.documentFiles,config:Na(e),document:Js(e),videoConstraints:e.document.videoConstraints,styles:ja(e.inquiry),featureFlags:e.inquiry.featureFlags}}const VA={saveCaptureMethod:hr,showMessage:se,uploadFile:dc},BA=ke(MA,VA),qA=qn()(BA(FA));function Hd(e){const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let n=0;for(;e>=1e3;)++n,e=e/1e3;return e.toFixed(e<10&&n>0?1:0)+" "+t[n]}var no=(e=>(e.Initiated="initiated",e.Submitted="submitted",e.Pending="pending",e.Processed="processed",e.Errored="errored",e))(no||{});const UA=1e3,HA=1e3,Vc=3,wg=999999,_g=3;function $A(e){return async t=>{const n={attributes:{...e},type:w.VerificationEmailAddress},r=(await te.postResourceCreate(n)).data;t(yi(r)),await te.postResourceAction(r,"email-confirmation-code"),t(yn("/verify/email-address/confirm"))}}function GA(e,t,n,r){return async o=>{const a={attributes:{...t},id:e.id,type:e.type},s=(await te.postResourceAction(a,"submit")).data;o(yi(s)),await o(mc(s,n,r))}}function WA(e,t,n){return async r=>{const o={attributes:{"country-code":e,...n},type:w.VerificationPhoneNumber},a=(await te.postResourceCreate(o,{meta:{"debug-forced-status":t}})).data;r(yi(a)),await te.postResourceAction(a,"sms-confirmation-code"),r(yn("/verify/phone-number/confirm"))}}function zA(e,t,n,r,o){return async a=>{const s={attributes:{...n},id:e.id,type:e.type};e=(await te.postResourceAction(s,"confirm")).data,a(yi(e)),e.attributes.status===kt.Confirmed&&t!==sd.None?a(yn("/verify/phone-number/info")):await a(mc(e,r,o))}}function YA(e,t,n,r){return async o=>{const a={attributes:{...t},id:e.id,type:e.type};e=(await te.postResourceAction(a,"submit")).data,o(yi(e)),await o(mc(e,n,r))}}function KA(e,t,n,r,o){return async a=>{const s={id:e.id,attributes:n,type:w.Inquiry};Ot((await te.updateResource(s)).data);const c=(await te.postResourceCreate({type:w.VerificationDatabase},{meta:{"debug-forced-status":t}})).data;a(yi(c));const l=(await te.postResourceAction(c,"submit")).data;a(yi(c)),o["verify:database-failed-screen"]?await a(Tg(l,r,"/verify/database/pending","/verify/database/failed",o)):await a(mc(l,r,o))}}function Rg(){return e=>{e(Ys())}}function Xr(e,t,n,r){const o=si(e,t);if(o)return r?{"capture-method":o.captureMethod,data:pd({filename:n,fileType:"image/jpeg",dataUrl:o.dataUrl})}:{"capture-method":o.captureMethod,data:{filename:n,data:gf(o.dataUrl)}}}function Ag(e,t,n,r,o,a){return async s=>{let c;const l={"center-photo":Xr(t,he.Center,"center_photo.jpeg",!0),"left-photo":Xr(t,he.Left,"left_photo.jpeg",!0),"right-photo":Xr(t,he.Right,"right_photo.jpeg",!0),"camera-properties":n};try{c=(await te.postResourceCreate({attributes:l,type:w.VerificationSelfie},{meta:{"debug-forced-status":o},contentType:"multipart/form-data"})).data}catch{c=(await te.postResourceCreate({attributes:{"center-photo":Xr(t,he.Center,"center_photo.jpeg",!1),"left-photo":Xr(t,he.Left,"left_photo.jpeg",!1),"right-photo":Xr(t,he.Right,"right_photo.jpeg",!1),"camera-properties":n},type:w.VerificationSelfie},{meta:{"debug-forced-status":o}})).data}try{[he.Center,he.Left,he.Right].forEach(d=>{const u=si(t,d);if(u==null)return;const{dataUrl:h,captureMethod:m}=u;h.length<Br&&Z(new Error("Selfie verification contains potentially blank image"),"warning",{},{captureMethod:m,side:d})})}catch(d){Z(d,"warning")}try{c=(await te.postResourceAction(c,"submit")).data}catch(d){throw Z(new Error("[PER-8408] Selfie created but failed to submit"),"error",{id:c.id,error:d}),d}s(yi(c)),await s(Do({verification:c,history:r,handleFailed:d=>{const u=d.included.find(h=>h.id===d.data.relationships.inquiry.data.id);s(Ot(u)),u.attributes["next-step"].type===w.VerificationSelfie?s(yn("/verify/selfie/failed")):s(Gt(u))},featureFlags:a}))}}function QA(e,t,n,r,o,a,s,c,l){return async d=>{var y,v,_,A;let u=Fu(t,n,r,o),h="multipart/form-data";d(bi(0));const m=T=>{var R;d(bi((R=T.progress)!=null?R:0))},p=new Date().getTime();let g,b;for(b=0;b<Vc;b++)try{g=await te.postResourceCreate(u,{meta:{"debug-forced-status":s},contentType:h,onUploadProgress:m});break}catch(T){if(T instanceof pt)switch(T.status){case 502:d(se(c("errors.network-upload")));return;case 413:d(se(c("errors.image-upload-too-large")));return;case 422:if(b===0)u=Fu(t,n,r,o,!1),h="application/json";else{const R=(y=T.errors)==null?void 0:y[0].code;switch(R){case Fn.DOCUMENT_GOVERNMENT_ID_DIMENSION_SIZE_ERROR:{const D=((v=T.errors)==null?void 0:v[0]).details.min_dimension_size;l!=null&&l["inquiry:remove-clear-memory-history"]?a.push(Qn(0,Ue.Prompt),{preventBackNavigation:!0}):(Vn(a),a.push(Qn(0,Ue.Prompt))),d(se(c("government-id.prompt.dimension-size-too-small",{minDimensionSize:D})));return}case Fn.DOCUMENT_GOVERNMENT_ID_TOO_SMALL:case Fn.DOCUMENT_GOVERNMENT_ID_ALL_BLACK_IMAGE:{l!=null&&l["inquiry:remove-clear-memory-history"]?a.push(Qn(0,Ue.Prompt),{preventBackNavigation:!0}):(Vn(a),a.push(Qn(0,Ue.Prompt))),d(se(c("government-id.prompt.failed-black-image")));return}default:{if(R&&/must be under \d+ bytes/.test(R)){const O=R.match(/must be under (\d+) bytes/);if(O){const D=Hd(parseInt(O[1]));d(se(c("documents.errors.file-size-exceeded",{fileSizeLimit:D})));return}}d(se(c("government-id.prompt.failed-select-image")));return}}}}else T instanceof Ct||Z(T,"error",{attempt:b});if(b===Vc-1)throw z.logAmplitude("government-id.submit.failed",{attempts:b,duration:new Date().getTime()-p}),T}try{[U.Front,U.Back,U.BarcodePdf417,U.FrontOrBack,U.PassportSignature].forEach(T=>{var R;(R=n[T])==null||R.forEach(O=>{if(O==null)return;const{dataUrl:D,fileType:L,captureMethod:H,captureFlow:M}=O;D.length<Br&&Z(new Error("Government ID verification contains potentially blank image"),"warning",{},{captureMethod:H,side:T,fileType:L,captureFlow:M})})})}catch(T){Z(T,"warning")}if((g==null?void 0:g.data)==null){Z(new Error("No data returned from create verification saga"),"warning",{response:g,governmentIdClass:t,captureMethod:ro(n).map(T=>{var R;return(R=zt(T))==null?void 0:R.captureMethod}),captureFlow:ro(n).map(T=>{var R;return(R=zt(T))==null?void 0:R.captureFlow}),uploads:{backSizes:(_=n.back)==null?void 0:_.map(T=>{var R;return(R=T.dataUrl)==null?void 0:R.length}),frontSizes:(A=n.front)==null?void 0:A.map(T=>{var R;return(R=T.dataUrl)==null?void 0:R.length})}}),d(se(c("government-id.prompt.failed-select-image")));return}const x=(await te.postResourceAction(g.data,"submit",{retryOptions:{retries:Vc,retryCondition:T=>{var R;return((R=T==null?void 0:T.response)==null?void 0:R.status)===409}}})).data;try{z.logAmplitude("government-id.submit.completed",{duration:new Date().getTime()-p,attempts:b+1,governmentIdClass:t,captureMethod:ro(n).map(T=>{var R;return(R=zt(T))==null?void 0:R.captureMethod}),captureFlow:ro(n).map(T=>{var R;return(R=zt(T))==null?void 0:R.captureFlow})})}catch{}d(yi(x)),await d(Tg(x,a,"/verify/government-id/pending","/verify/government-id/failed",l))}}function Tg(e,t,n,r,o){return async a=>{await a(Do({verification:e,history:t,handleFailed:s=>{const c=s.included.find(l=>l.id===s.data.relationships.inquiry.data.id);a(Ot(c)),c.attributes["next-step"].type===e.type?a(yn(r)):a(Gt(c))},handleIncomplete:()=>a(yn(n)),attemptsLeft:_g,featureFlags:o}))}}function mc(e,t,n){return async r=>{await r(Do({verification:e,history:t,handleFailed:o=>r(Qo(o)),featureFlags:n}))}}function ZA({documentId:e,history:t,forcedStatus:n,handleFailed:r,handlePassed:o,handleIncomplete:a,totalAttempts:s=_g,featureFlags:c}){return async l=>{const d=(await te.postResourceCreate({attributes:{"document-id":e},type:w.VerificationDocument},{meta:{"debug-forced-status":n},retryOptions:{retryCondition:h=>Li.isNetworkError(h)||Li.isRetryableError(h)}})).data,u=(await te.postResourceAction(d,"submit")).data;l(yi(u)),await l(Do({verification:u,history:t,attemptsLeft:s,handleFailed:r,handleIncomplete:a,handlePassed:o,featureFlags:c}))}}function Do({verification:e,history:t,handleFailed:n,handlePassed:r,handleSkipped:o,handleIncomplete:a,attemptsLeft:s=wg,featureFlags:c={}}){return l=>new Promise((d,u)=>{const h=()=>{a?(a(),d()):u()},m=x=>{c["inquiry:remove-clear-memory-history"]||Vn(t),r?(c["inquiry:remove-clear-memory-history"]&&t.replace(t.location.pathname,{preventBackNavigation:!0}),r(x)):c["inquiry:remove-clear-memory-history"]?l(Qo(x,c,!0)):l(Qo(x)),d()},p=x=>{c["inquiry:remove-clear-memory-history"]?t.replace(t.location.pathname,{preventBackNavigation:!0}):Vn(t),n?(n(x),d()):u()},g=x=>{c["inquiry:remove-clear-memory-history"]||Vn(t),o?(c["inquiry:remove-clear-memory-history"]&&t.replace(t.location.pathname,{preventBackNavigation:!0}),o(x)):c["inquiry:remove-clear-memory-history"]?l(Qo(x,c,!0)):l(Qo(x)),d()},b=(x,y,v)=>{y<=0?h():setTimeout(()=>{l(JA(x,y-1,v+HA,b,u,m,p,g))},v)};b(e,s,UA)})}function JA(e,t,n,r,o,a,s,c){return async l=>{try{const d=await te.getResource(Zt(e.type),e.id),u=d.data,h=e.attributes&&e.attributes.status;switch(u.attributes.status!==h&&l(yi(u)),u.attributes.status){case kt.Initiated:case kt.Confirmed:case kt.Submitted:case kt.TentativelyPassed:case kt.TentativelyFailed:r(u,t,n);return;case kt.Passed:a(d);return;case kt.RequiresRetry:case kt.Failed:case kt.Canceled:s(d);return;case kt.Skipped:c(d);return;default:ct(u.attributes.status)}}catch(d){d instanceof Ct||d instanceof pt&&d.status===502?r(e,t,n):o(d)}}}const Xn=(e,t)=>{switch(t){case Nt.Prompt:return`/verify/documents/${e}/prompt`;case Nt.TakePhoto:return`/verify/documents/${e}/capture`;case Nt.Check:return`/verify/documents/${e}/check`;case Nt.Review:throw new Error("Documents review step is not permitted in Inquiry 2.0.");case Nt.Pending:return`/verify/documents/${e}/pending`;case Nt.Failed:return`/verify/documents/${e}/failed`;default:ct(t)}},Oo=["image/jpeg","image/png"],XA=1e3,xm=3,Eg=90,e8=3;function $d(e,t,n,r){return o=>{n+1>=t.length?o(Gt(e,void 0,r)):(o(Ot(e)),o(typeof r=="boolean"?yn(Xn(n+1,Nt.Prompt),{preventBackNavigation:r}):yn(Xn(n+1,Nt.Prompt))))}}function t8({stepName:e,documentsToVerify:t,documentNumber:n,history:r,fileToUpload:o,t:a,forcedStatus:s,featureFlags:c={}}){return async l=>{const d=t[n],u={type:w.DocumentGeneric,attributes:{kind:d.kind,files:[pd(o)]}};l(Ts(o,0));const h=x=>{var y;l(Ts(o,(y=x.progress)!=null?y:0))},m=new Date().getTime();let p,g;for(g=0;g<xm;g++)try{p=(await te.postResourceCreate(u,{contentType:"multipart/form-data",onUploadProgress:h})).data;break}catch(x){if(x instanceof pt)switch(x.status){case 502:l(se(a("errors.network-upload")));return;case 413:l(se(Oo.includes(o.fileType)?a("errors.image-upload-too-large"):a("errors.file-upload-too-large")));return;case 422:l(se(a("documents.prompt.failed-select-image")));return}else x instanceof Ct||Z(x,"error",{attempt:g});if(g===xm-1)throw z.logAmplitude("document.submit.failed",{duration:new Date().getTime()-m}),x}const b=(await te.postResourceAction({id:p.id,type:p.type},"submit")).data;z.logAmplitude("document.submit.completed",{duration:new Date().getTime()-m,attempts:g+1}),l(ca(b,n)),await l(kg({document:b,stepName:e,documentsToVerify:t,documentNumber:n,history:r,forcedStatus:s,attemptsLeft:e8,featureFlags:c})),l(uc(o))}}function kg({document:e,stepName:t,documentsToVerify:n,documentNumber:r,history:o,forcedStatus:a,attemptsLeft:s=Eg,featureFlags:c={}}){return l=>l(n8({document:e,documentsToVerify:n,documentNumber:r,history:o,attemptsLeft:s,onSuccess:async d=>{const u=m=>{const p=m.included.find(g=>g.id===m.data.relationships.inquiry.data.id);p.attributes["next-step"].name===t?(l(Ot(p)),l(yn(Xn(r,Nt.Failed)))):l(Gt(p))},h=m=>{const p=m.included.find(b=>b.id===m.data.relationships.document.data.id),g=m.included.find(b=>b.id===m.data.relationships.inquiry.data.id);l(ca(p,r)),l($d(g,n,r))};await l(ZA({documentId:d.data.id,history:o,forcedStatus:a,handleFailed:u,handlePassed:h,totalAttempts:wg}))},onIncomplete:()=>{c["inquiry:remove-clear-memory-history"]?l(yn(Xn(r,Nt.Pending),{preventBackNavigation:!0})):(Vn(o),l(yn(Xn(r,Nt.Pending))))},featureFlags:c}))}function n8({document:e,documentsToVerify:t,documentNumber:n,history:r,onSuccess:o,onIncomplete:a,attemptsLeft:s=Eg,featureFlags:c={}}){return l=>new Promise((d,u)=>{const h=()=>{a?(a(),d()):u()},m=async b=>{c["inquiry:remove-clear-memory-history"]||Vn(r),l(ca(b.data,n)),o?(c["inquiry:remove-clear-memory-history"]&&l(jt(r.location.pathname,{preventBackNavigation:!0})),await o(b)):l($d(vm(b),t,n,c["inquiry:remove-clear-memory-history"])),d()},p=b=>{c["inquiry:remove-clear-memory-history"]||Vn(r),l(ca(b.data,n)),l(Ot(vm(b))),d(),c["inquiry:remove-clear-memory-history"]?l(yn(Xn(n,Nt.Failed),{preventBackNavigation:!0})):l(yn(Xn(n,Nt.Failed)))},g=(b,x)=>{x<=0?h():setTimeout(()=>{i8(b,x-1,g,u,m,p)},XA)};g(e,s)})}async function i8(e,t,n,r,o,a){try{const s=await te.getResource(S.DocumentGeneric,e.id),c=s.data;switch(c.attributes.status){case no.Initiated:case no.Submitted:case no.Pending:n(c,t);return;case no.Processed:o(s);return;case no.Errored:a(s);return;default:ct(c.attributes.status)}}catch(s){s instanceof Ct||s instanceof pt&&s.status===502?n(e,t):r(s)}}function vm(e){const t=e.data;return e.included.find(r=>{var o,a;return r.id===((a=(o=t.relationships.inquiry)==null?void 0:o.data)==null?void 0:a.id)})}const ym=3;function r8({kind:e,fileLimit:t,fieldKey:n}){return async r=>{const o=await te.postResourceCreate({type:w.Document,attributes:{kind:e,"file-limit":t}},{meta:{"field-key-document":n}}),a=o.data,s=o.included.find(c=>{var l;return c.id===((l=a.relationships.inquiry)==null?void 0:l.data.id)});if(s==null)throw new Error("Document fetch expected an inquiry to be returned, but no inquiry was sent.");F0.unstable_batchedUpdates(()=>{r(Ot(s)),r(vg(a)),r(Ig([])),r(PA())})}}function Ng(e){return async t=>{const{data:n,included:r}=await te.getResource(S.Document,e);t(vg(n));const o=r.filter(a=>a.type===w.DocumentFile);t(Ig(o))}}function jg({file:e,captureMethod:t,document:n,t:r}){return async o=>{var l,d,u,h,m,p,g,b,x,y;o(Ts(e,0));const a=v=>{var _;o(Ts(e,(_=v.progress)!=null?_:0))},s=new Date().getTime();let c;for(c=0;c<ym;c++)try{const v=await te.postResourceCreate({type:w.DocumentFile,attributes:{"document-id":n.id,"capture-method":t,originals:[fd(e)],name:e.filename}},{contentType:"multipart/form-data",onUploadProgress:a});N.inquiryParams["send-client-side-collected-data-in-events"]&&o(DA({file:e,fileId:v.data.id}));break}catch(v){if(v instanceof pt)switch(v.status){case 502:throw o(se(r("errors.network-upload"))),new mn({method:"POST"});case 413:throw o(se(Oo.includes(e.fileType)?r("errors.image-upload-too-large"):r("errors.file-upload-too-large"))),new mn({method:"POST"});case 422:if(((l=v.errors)==null?void 0:l[0].code)===Fn.DOCUMENT_GENERIC_DISABLED_FILE_TYPE_ERROR){const A=((d=v.errors)==null?void 0:d[0]).details,T=lr(A.uploaded_file_type).toUpperCase(),R=A.enabled_file_types.map(O=>lr(O).toUpperCase());o(se(r("documents.errors.disabled-file-type",{uploadedFileExtension:T,acceptedFileExtensions:R.join(", "),count:R.length})))}else if(((u=v.errors)==null?void 0:u[0].code)===Fn.DOCUMENT_GENERIC_FILE_SIZE_EXCEEDED_ERROR){const _=(h=v.errors)==null?void 0:h[0],A=Hd(_.details.file_size_limit);o(se(r("documents.errors.file-size-exceeded",{fileSizeLimit:A})))}else if(((m=v.errors)==null?void 0:m[0].code)===Fn.DOCUMENT_GENERIC_FILE_LIMIT_EXCEEDED_ERROR)o(se(r("documents.errors.file-limit-exceeded")));else if(((p=v.errors)==null?void 0:p[0].code)===Fn.DOCUMENT_GENERIC_PAGE_LIMIT_EXCEEDED_ERROR){const A=((g=v.errors)==null?void 0:g[0]).details.page_limit;o(se(r("documents.errors.page-limit-exceeded",{pageLimit:A,count:A})))}else((b=v.errors)==null?void 0:b[0].code)===Fn.DOCUMENT_GENERIC_MALFORMED_PDF_ERROR?o(se(r("documents.errors.malformed-pdf"))):((x=v.errors)==null?void 0:x[0].code)===Fn.DOCUMENT_GENERIC_MALFORMED_IMAGE_ERROR||((y=v.errors)==null?void 0:y[0].code)===Fn.DOCUMENT_GENERIC_MALFORMED_FILE_ERROR?o(se(r("documents.errors.malformed-file"))):o(se(r("documents.prompt.failed-select-image")));throw new mn({method:"POST"})}else v instanceof Ct||Z(v,"error",{attempt:c});if(c===ym-1)throw z.logAmplitude("document.submit.failed",{duration:new Date().getTime()-s}),v}}}function o8(e){return async()=>{await te.deleteResource(S.DocumentFile,e)}}function fa(e,t,n,r,o){var c,l,d,u,h;if(Es(e,n,r))return U.Front;if((e==null?void 0:e.idclasses)==null&&(o==null?void 0:o["id-configs"])==null)return;if(t==null)return n===0?U.Front:void 0;const s=(c=o==null?void 0:o["id-configs"].find(m=>m.class===t))!=null?c:e==null?void 0:e.idclasses.find(m=>m.class===t);if(s==null){const m=(l=e==null?void 0:e.idclasses)!=null?l:o==null?void 0:o["id-configs"];throw new Error(`No configuration for id class: ${t} out of: ${m==null?void 0:m.map(p=>p.class).join(", ")}`)}return(h=(u=(d=s["capture-page-configs"])==null?void 0:d[n])==null?void 0:u.side)!=null?h:s["requires-sides"][n]}function Vt(e,t){switch(t){case Ue.CaptureLeadInAnimation:return`/inquiry/government-id/${e}/capture-lead-in-animation`;case Ue.Prompt:return`/inquiry/government-id/${e}/prompt`;case Ue.TakePhoto:return`/inquiry/government-id/${e}/capture`;case Ue.Check:return`/inquiry/government-id/${e}/check`;case Ue.CheckUpload:return`/inquiry/government-id/${e}/check-upload`;case Ue.AutoclassificationFailure:return"/inquiry/government-id/autoclassification-failure";case Ue.AutoclassificationSelect:return"/inquiry/government-id/autoclassification-select";default:ct(t)}}function a8(e,t,n,r){var s,c;if(t==null&&n===1&&((s=e==null?void 0:e["auto-classification-config"])!=null&&s["is-enabled"]))return!1;const o=(c=r==null?void 0:r["id-configs"])!=null?c:e==null?void 0:e.idclasses;return o&&o.find(l=>{var d,u;return l.class===t&&((u=(d=l["capture-page-configs"])==null?void 0:d.length)!=null?u:l["requires-sides"].length)>n})?n>=2:n>=1}function er(e,t,n={}){const{localizations:r,"localization-overrides":o=[],"selected-country-code":a}=e,{idClass:s=null,side:c=null,specifiedCountryCode:l=null}=n,d=l||a,u=o.filter(p=>p.page===t&&(p["country-code"]===d||p["country-code"]==null)&&(p["id-class"]===s||p["id-class"]==null)&&(p.side===c||p.side==null)),h=M0(p=>-((p["country-code"]==null?0:100)+(p["id-class"]==null?0:10)+(p.side==null?0:1)),u),m=r==null?void 0:r[t];return Object.fromEntries(Object.keys(m!=null?m:{}).map(p=>{var x;const g=m[p],b=h.find(y=>y.key===p);return[p,(x=b==null?void 0:b.text)!=null?x:g]}))}function Tl(e){var n;const t=Object.values(e);return t!=null&&t.length?((n=zt(t[0]))==null?void 0:n.captureMethod)===ut.Upload:!1}function Es(e,t,n){var r;return((r=e==null?void 0:e["auto-classification-config"])==null?void 0:r["is-enabled"])&&t===0&&!n}function hc(e,t,n,r,o,a){var h,m;const s=Es(e,t,n),c=s?void 0:r;let l=e==null?void 0:e["selected-country-code"];!s&&((h=e==null?void 0:e["auto-classification-config"])!=null&&h["is-enabled"])&&(l=o);const d=(m=e==null?void 0:e["auto-classification-config"])!=null&&m["is-enabled"]?a.find(p=>p["country-code"]===o):void 0;return{governmentIdClass:c,selectedCountryCode:l,autoclassificationIdClassesConfigState:d,autoclassificationIdClassesConfig:s?void 0:d}}const s8=5e3,c8=100,l8=2e3,d8="https://t.withpersona.com";class Bt{constructor(){this.queue=[]}static getInstance(){return Bt.instance||(Bt.instance=new Bt),Bt.instance}static isEnabled(t){return t==null?void 0:t["inquiry:enable-te-cloud-run"]}static track({event:t,featureFlags:n,bypassFeatureFlag:r}){if(!r&&!Bt.isEnabled(n))return;const o=new Date().toISOString(),a={...t,created_at:o};this.getInstance().enqueueEvents([a])}updateQueue(t){return this.queue.length>=s8?(Z(new Error("TrackingEventsClient: Cannot enqueue anymore TrackingEvents"),"info"),!1):(this.queue.push(...t),!0)}enqueueEvents(t){this.updateQueue(t)&&(this.throttled||(this.throttled=V0(async()=>{if(!this.isAuthenticated())return;const n=[...this.queue];this.queue=[];const r=await this.sendAllEvents(n);r.length>0&&this.updateQueue(r)},l8)),this.throttled())}async sendAllEvents(t){if(t.length<=0)return[];const n=B0(t,c8),o=(await Promise.allSettled(n.map(a=>this.sendBatch(a)))).map((a,s)=>a.status==="rejected"?n[s]:[]).filter(a=>a.length>0);return uo(o)}async sendBatch(t){const n=await tx(JSON.stringify({events:t}));return di.post(`${d8}/t`,{e:n},{headers:{Authorization:`Bearer ${te==null?void 0:te.accessToken}`}})}isAuthenticated(){return te.accessToken!=null}}function yr(e){return e.split("/").slice(2).map(n=>q0(n)).join(".")}const u8=[Ae.Document,Ae.Integration,Ae.GovernmentId,Ae.Selfie,Ae.VerifyWithPersona];function m8(e,t){return e==="/verify"||e==="/inquiry/ui"&&t&&u8.includes(t)&&t!==Ae.Ui}const Pg=1e6,h8=5e3;class Dg{constructor(){this.params=null,this.timeout=null,this.startTime=null,this.subscribers={},this.onStartedRecording=()=>{var n,r;const t=!!this.startTime;this.startTime=Date.now(),this.notify("start",t),Bt.track({event:{type:"inquiry.video.start",data:{capture_method:this.type,step_name:(n=this.params)==null?void 0:n.stepName}},bypassFeatureFlag:(r=this.params)==null?void 0:r.trackingEventsEnabled})},this.handleComplete=t=>{var r,o,a;const n=this.getElapsedTime();this.notify("stop",t,n),Bt.track({event:{type:"inquiry.video.stop",data:{capture_method:this.type,asset_id:t.type==="stream"?t.objectId:void 0,elapsed_time:n,chunks_length:t.type==="upload"?(r=t.chunks)==null?void 0:r.length:0,step_name:(o=this.params)==null?void 0:o.stepName}},bypassFeatureFlag:(a=this.params)==null?void 0:a.trackingEventsEnabled}),this.destroy()},this.getElapsedTime=()=>this.startTime?Date.now()-this.startTime:0,this.stopRecording=()=>{var t,n;if(!this.timeout){const r=this.startTime!=null?Date.now()-this.startTime:0,o=(n=(t=this.params)==null?void 0:t.minRecordingTime)!=null?n:h8,a=r<o?o-r:0;this.timeout=setTimeout(()=>{this.stopCapture()},a)}return this},this.hasSubscribers=()=>Object.keys(this.subscribers).length>0,this.clearTimeouts=()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},this.clearSubscribers=()=>{this.subscribers={}},this.notify=(t,...n)=>{Object.values(this.subscribers).flat().filter(o=>o.event===t).forEach(o=>{var a;return(a=o.callback)==null?void 0:a.apply(null,n)})}}subscribe(t){const n=U0(),r=[];return t.onStart&&r.push({event:"start",callback:t.onStart}),t.onRecordingComplete&&r.push({event:"stop",callback:t.onRecordingComplete}),t.onError&&r.push({event:"error",callback:t.onError}),t.onTimeExceeded&&r.push({event:"time-exceeded",callback:t.onTimeExceeded}),this.subscribers[n]=r,n}unsubscribe(t){return t&&delete this.subscribers[t],this}get stream(){var t;return(t=this.params)==null?void 0:t.stream}}const p8=200,f8=12e4,g8=64e3;function b8(){const e=[Cl.VideoMp4,Cl.VideoWebm],t=["avc1","AVC1","h264","H264","h.264","H.264"],n=["=",":"],r=[];for(const o of e){for(const a of t)for(const s of n)r.push(`${o};codecs${s}${a}`);r.push(o)}return r}const C8=b8();function x8(){return window.MediaRecorder?C8.find(e=>MediaRecorder.isTypeSupported(e)):null}let v8=class extends Dg{constructor(){super(...arguments),this.chunks=[],this.dataAvailableCalled=!1,this.type="upload",this.handleDataAvailable=t=>{var n,r,o,a;this.dataAvailableCalled=!0,((n=t.data)==null?void 0:n.size)>0&&(this.chunks.push(t.data),this.getElapsedTime()>((o=(r=this.params)==null?void 0:r.maxRecordingTime)!=null?o:f8)&&(this.notify("time-exceeded"),Bt.track({event:{type:"inquiry.video.timeout",data:{capture_method:this.type}},bypassFeatureFlag:(a=this.params)==null?void 0:a.trackingEventsEnabled})))},this.onStoppedRecording=()=>{this.handleComplete({chunks:this.chunks,mimeType:this.mimeType,type:this.type})},this.handleError=t=>{var o,a,s;let n,r;t instanceof Event?(n=`Event: ${(o=t.error)==null?void 0:o.name}`,r=(a=t.error)==null?void 0:a.message):n=JSON.stringify(t),this.notify("error",n),Bt.track({event:{type:"inquiry.video.error",data:{capture_method:this.type,error_name:n,error_reason:r}},bypassFeatureFlag:(s=this.params)==null?void 0:s.trackingEventsEnabled})}}init(t){this.params=t;const{stream:n,onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s}=t;if(!this.isSupported()){o==null||o("MediaRecorder error: MediaRecorder is not supported");return}if(!n){o==null||o("MediaRecorder error: stream must be provided");return}if(this.mediaRecorderMimeType=x8(),!this.mediaRecorderMimeType){o==null||o("MediaRecorder error: mimetype not supported");return}return this.mimeType=this.mediaRecorderMimeType.split(";")[0],this.subscribe({onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s})}isRecording(){return!!this.mediaRecorder}isSupported(){return!!window.MediaRecorder}startRecording(){var t,n;this.createMediaRecorder(),this.mediaRecorder&&this.mediaRecorder.state!=="recording"&&this.mediaRecorder.start((n=(t=this.params)==null?void 0:t.timeSlice)!=null?n:p8)}stopCapture(){var t;this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&(Bt.track({event:{type:"inquiry.video.stop-request",data:{capture_method:this.type}},bypassFeatureFlag:(t=this.params)==null?void 0:t.trackingEventsEnabled}),this.mediaRecorder.stop())}get stream(){var t;return(t=this.params)==null?void 0:t.stream}destroy(){this.stopCapture(),this.clearSubscribers(),this.cleanUpMediaRecorder(),this.dataAvailableCalled=!1}cleanUpMediaRecorder(){if(!this.isRecording())return this;this.chunks=[],this.mediaRecorder&&(this.mediaRecorder.removeEventListener("start",this.onStartedRecording),this.mediaRecorder.removeEventListener("dataavailable",this.handleDataAvailable),this.mediaRecorder.removeEventListener("error",this.handleError),this.mediaRecorder.removeEventListener("stop",this.onStoppedRecording),this.mediaRecorder=null),this.clearTimeouts()}createMediaRecorder(){var t,n,r;try{if(!((t=this.params)!=null&&t.stream)||!this.mediaRecorderMimeType)throw new Error("LocalMediaRecorderClient: stream and mimetype must be provided");this.mediaRecorder=new MediaRecorder(this.params.stream,{mimeType:this.mediaRecorderMimeType,videoBitsPerSecond:(r=(n=this.params)==null?void 0:n.bitRate)!=null?r:Pg,audioBitsPerSecond:g8}),this.mediaRecorder.addEventListener("start",this.onStartedRecording),this.mediaRecorder.addEventListener("dataavailable",this.handleDataAvailable),this.mediaRecorder.addEventListener("error",this.handleError),this.mediaRecorder.addEventListener("stop",this.onStoppedRecording)}catch(o){this.notify("error",o)}}};const Im=new v8,y8="https://webrtc-consumer.withpersona.com",Og="Couldn't gather enough ICE Candidates",I8=1e3,Sm=1;let S8=class extends Dg{constructor(){super(...arguments),this.hasStarted=!1,this.heartbeatCount=0,this.heartbeatTimeout=void 0,this.missingHeartbeatLogged=!1,this.lastHeartbeatMessage=void 0,this.type="stream",this.createOfferAndSetDescriptions=(t,n)=>t.createOffer({offerToReceiveVideo:!1,offerToReceiveAudio:!1}).then(r=>{var o;return(o=this.peerConnection)==null?void 0:o.setLocalDescription(r)}).then(()=>new Promise((r,o)=>{var a,s,c,l;if(((a=this.peerConnection)==null?void 0:a.iceGatheringState)==="complete")r();else{let d=0;const u=Jh(250,()=>{d>=Sm&&(b(),r())}),h=setTimeout(()=>{d>=Sm?(b(),r()):(b(),this.logStats(this.peerConnection,"could_not_connect"),o(new Error(Og)))},I8),m=()=>{var x;((x=this.peerConnection)==null?void 0:x.iceGatheringState)==="complete"&&(b(),r())},p=x=>{},g=()=>{d++,u()},b=()=>{var x,y,v;u.cancel(),clearTimeout(h),(x=this.peerConnection)==null||x.removeEventListener("icegatheringstatechange",m),(y=this.peerConnection)==null||y.removeEventListener("icecandidateerror",p),(v=this.peerConnection)==null||v.removeEventListener("icecandidate",g)};(s=this.peerConnection)==null||s.addEventListener("icegatheringstatechange",m),(c=this.peerConnection)==null||c.addEventListener("icecandidateerror",p),(l=this.peerConnection)==null||l.addEventListener("icecandidate",g)}})).then(()=>{var a,s,c;const r=(a=this.peerConnection)==null?void 0:a.localDescription,o=(s=this.params)==null?void 0:s.stream.getVideoTracks()[0].getSettings();return di.post(`${this.getBaseUrl(n)}/connect`,{sdp:r==null?void 0:r.sdp,type:r==null?void 0:r.type,width:o==null?void 0:o.width,height:o==null?void 0:o.height,jwt:(c=this.params)==null?void 0:c.jwt})}).then(({data:{answer:r}})=>{var o;return(o=this.peerConnection)==null?void 0:o.setRemoteDescription(r)}),this.setEncodings=()=>{var t,n;(n=(t=this.peerConnection)==null?void 0:t.getSenders)==null||n.call(t).forEach(r=>{var o;if(((o=r.track)==null?void 0:o.kind)==="video"){const a=r.track.getSettings(),s=r.getParameters();s.encodings.forEach(c=>{var l,d;c.maxBitrate=(d=(l=this.params)==null?void 0:l.bitRate)!=null?d:Pg,a.width&&a.height&&(a.width>1024||a.height>720)&&(c.scaleResolutionDownBy=2)}),r.setParameters(s)}})},this.handleMessage=t=>{var n,r;switch(t.message_type){case"server_connected":this.onStartedRecording();break;case"uploaded_assets":{const o=t.object_id;this.clearHeartbeat(),this.handleComplete({objectId:o,type:this.type}),this.closePeerConnection();break}case"timed_out":this.handleTimeExceeded(),Bt.track({event:{type:"inquiry.video.timeout",data:{capture_method:this.type,step_name:(n=this.params)==null?void 0:n.stepName}},bypassFeatureFlag:(r=this.params)==null?void 0:r.trackingEventsEnabled});break;case"heartbeat":this.receiveHeartbeat(t);break}},this.sendMessage=t=>{var n,r,o;try{(n=this.dataChannel)==null||n.send(JSON.stringify({message:t}))}catch(a){Z(a,"warning",{dataChannelReadyState:(r=this.dataChannel)==null?void 0:r.readyState}),((o=this.dataChannel)==null?void 0:o.readyState)==="open"&&this.handleError(a)}},this.closePeerConnection=()=>{var t,n,r,o;if(((t=this.peerConnection)==null?void 0:t.connectionState)!=="closed"){(n=this.dataChannel)==null||n.close(),(r=this.peerConnection)!=null&&r.getTransceivers&&this.peerConnection.getTransceivers().forEach(a=>{try{a.stop()}catch{}});try{(o=this.peerConnection)==null||o.close()}catch{}}},this.handleError=t=>{var n,r,o;if(((n=Re.currentClient)==null?void 0:n.type)===this.type){this.notify("error",t);let a,s;t instanceof Error?(a=t.name,s=t.message):a=JSON.stringify(t),Bt.track({event:{type:"inquiry.video.error",data:{capture_method:this.type,error_name:a,error_reason:s,step_name:(r=this.params)==null?void 0:r.stepName}},bypassFeatureFlag:(o=this.params)==null?void 0:o.trackingEventsEnabled})}},this.handleTimeExceeded=()=>{this.notify("time-exceeded")},this.receiveHeartbeat=t=>{this.heartbeatCount++,this.lastHeartbeatMessage=t,this.heartbeatTimeout&&clearTimeout(this.heartbeatTimeout),this.missingHeartbeatLogged||(this.heartbeatTimeout=setTimeout(()=>{var n,r,o;this.missingHeartbeatLogged=!0,z.logAmplitude("webrtc.missing-heartbeat",{count:this.heartbeatCount,message:this.lastHeartbeatMessage}),Bt.track({event:{type:"inquiry.video.missing-heartbeat",data:{count:this.heartbeatCount,last_heartbeat_time:(n=this.lastHeartbeatMessage)==null?void 0:n.elapsed_time,step_name:(r=this.params)==null?void 0:r.stepName}},bypassFeatureFlag:(o=this.params)==null?void 0:o.trackingEventsEnabled})},2e3))},this.clearHeartbeat=()=>{this.heartbeatTimeout&&clearTimeout(this.heartbeatTimeout),this.heartbeatCount=0,this.lastHeartbeatMessage=void 0,this.missingHeartbeatLogged=!1},this.logStats=async(t,n)=>{var r;(r=t==null?void 0:t.getStats)==null||r.call(t).then(o=>{const a=[],s=[],c=[],l=[],d=[],u=[],h=[],m=[],p=[];let g=[];try{o.forEach(b=>{switch(b.type){case"media-source":{a.push(`${b.id}-${b.kind}`);break}case"transport":{g=[b.dtlsState,b.iceState,b.iceRole,b.packetsSent,b.packetsRecieved];break}case"candidate-pair":{const x=b.id;c.push(`${x}-${b.bytesSent}`),l.push(`${x}-${b.bytesReceived}`),d.push(`${x}-${b.state}`),u.push(`${x}-cp-${b.currentRoundTripTime}`);break}case"outbound-rtp":{h.push([b.id,b.framesEncoded,b.nackCount,b.firCount,b.averageRtcpInterval,b.totalPacketSendDelay].join("-"));break}case"remote-inbound-rtp":{m.push([b.localId,b.roundTripTime,b.totalRoundTripTime,b.fractionLost].join("-"));break}case"remote-outbound-rtp":{p.push([b.localId,b.roundTripTime,b.totalRoundTripTime].join("-"));break}case"codec":{s.push(b.mimeType);break}default:}})}catch{}z.logAmplitude("webrtc.stats",{state:n,kinds:a.join(","),transport:g.join(","),bytesSent:c.join(","),bytesReceived:l.join(","),candidatePairState:d.join(","),roundTripTimes:u.join(","),mimeTypes:s.join(","),outboundRtp:h.join(","),remoteInboundRtp:m.join(","),remoteOutboundRtp:p.join(",")})}).catch(o=>{})}}init(t){this.params=t;const{stream:n,onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s}=t;if(!this.isSupported()){o==null||o("MediaRecorder error: MediaRecorder is not supported");return}if(!n){o==null||o("MediaRecorder error: stream must be provided");return}if(!t.jwt){o==null||o("MediaRecorder error: jwt must be provided");return}return this.subscribe({onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s})}isConnected(){var t,n;return((t=this.peerConnection)==null?void 0:t.connectionState)==="connected"||((n=this.peerConnection)==null?void 0:n.iceConnectionState)==="connected"}get state(){var t,n;return((t=this.peerConnection)==null?void 0:t.connectionState)||((n=this.peerConnection)==null?void 0:n.iceConnectionState)}isSupported(){return!!window.RTCPeerConnection}isRecording(){return this.isConnected()}startRecording(){var t;if(this.hasStarted){z.logAmplitude("webrtc.start-recording-duplicate");return}if(this.hasStarted=!0,!((t=this.params)!=null&&t.jwt)){this.handleError(new Error("WebrtcMediaRecorderClient: missing jwt"));return}return this.getServerConfig(this.params.jwt).then(n=>{var r;return this.createPeerConnection(n,(r=this.params)==null?void 0:r.jwt)}).catch(n=>this.handleError(n)),this}stopCapture(){var t,n;return z.logAmplitude("webrtc.stop-recording"),Bt.track({event:{type:"inquiry.video.stop-request",data:{capture_method:this.type,step_name:(t=this.params)==null?void 0:t.stepName}},bypassFeatureFlag:(n=this.params)==null?void 0:n.trackingEventsEnabled}),this.isConnected()&&this.dataChannel&&this.sendMessage({message_type:"stop_recording"}),this}destroy(){this.closePeerConnection(),this.clearHeartbeat(),this.clearTimeouts(),this.clearSubscribers(),this.hasStarted=!1}getBaseUrl(t){const n=gs(t);return!n||(n==null?void 0:n.aud)==="persona"?y8:n.aud}getServerConfig(t){return di.get(`${this.getBaseUrl(t)}/server-config?jwt=${t}`).then(n=>n.data)}createPeerConnection(t,n){var o,a;const r=t?{iceTransportPolicy:"relay",iceServers:[{urls:[t.server_url],username:t.username,credential:t.credential}]}:{};return(o=this.params)!=null&&o.stream?(this.peerConnection=new RTCPeerConnection(r),this.peerConnection.createDataChannel("clientChannel",{ordered:!0}),(a=this.params)==null||a.stream.getTracks().forEach(s=>{var c,l,d,u;if((l=this.peerConnection)==null||l.addTrack(s,(c=this.params)==null?void 0:c.stream),s.kind==="video"){const h=(d=RTCRtpSender.getCapabilities)==null?void 0:d.call(RTCRtpSender,"video");if(h&&h.codecs){const m=h.codecs.filter(p=>p.mimeType.includes("video/VP"));if(m.length&&(u=this.peerConnection)!=null&&u.getTransceivers){const p=this.peerConnection.getTransceivers().find(g=>g.sender&&g.sender.track===s);p&&p.setCodecPreferences&&p.setCodecPreferences(m)}}}}),this.peerConnection.onconnectionstatechange=()=>{var s;switch((s=this.peerConnection)==null?void 0:s.connectionState){case"new":case"disconnected":case"closed":break;case"connected":this.setEncodings(),this.logStats(this.peerConnection,"connected");break;case"failed":this.logStats(this.peerConnection,"failed"),this.handleError(new Error("Connection failed"));break}},this.peerConnection.ondatachannel=s=>{this.dataChannel=s.channel,this.dataChannel.onmessage=c=>{try{const l=JSON.parse(c.data);this.handleMessage(l.message)}catch(l){this.handleError(l)}},this.dataChannel.addEventListener("open",()=>{this.sendMessage({message_type:"client_connected"})})},this.createOfferAndSetDescriptions(this.peerConnection,n)):(this.handleError(new Error("WebrtcMediaRecorderClient: missing stream")),Promise.resolve())}};const wm=new S8,w8=3,_8=1,_m=["stream","upload"],Bc={stream:2,upload:1};class R8{constructor(){this.attempts=0,this.current=void 0,this.lastSuccessfulClient=void 0,this.sessionStorageEnabled=!1,this.maxAttempts=w8}getNewClient(t){var n;if(t||(t=_m),this.sessionStorageEnabled){const r=this.getVideoErrorsMap(!0),o=(n=t.find(a=>typeof r[a]=="number"&&r[a]>0))!=null?n:t[0];return this.current=o==="stream"?wm:Im,this.current}else{let r;if(this.videoAttempts>0){const o=this.getClientFromAttempts(this.videoAttempts-1,t);o&&o.hasSubscribers()&&this.destroyClient(o,!0)}return this.lastSuccessfulClient?r=this.lastSuccessfulClient:r=this.getClientFromAttempts(this.videoAttempts,t),this.current=r,this.lastSuccessfulClient=void 0,r}}get currentClient(){return this.current}get videoAttempts(){return this.attempts}decrementAttempts(){this.attempts--}recordVideoAttempt(){this.attempts++}markClientSuccess(){this.lastSuccessfulClient=this.currentClient,this.decrementAttempts()}markClientError(t){if(!this.currentClient||!this.sessionStorageEnabled)return;const n=this.getVideoErrorsMap(),r=n[this.currentClient.type];typeof r=="number"&&(n[this.currentClient.type]=typeof t=="number"?t:r-1),this.setVideoErrorsMap(n)}shouldInitializeVideo(t,n){var a;const r=!!(n&&(n!=null&&n["inquiry:video-background"])),o=!!(t!=null&&t.includes("video"));return this.sessionStorageEnabled=(a=n==null?void 0:n["inquiry:video-use-session-storage"])!=null?a:!1,this.sessionStorageEnabled?(o||r)&&this.videoCanBeReattempted():o?this.videoAttempts<this.maxAttempts:r?this.videoAttempts<_8:!1}getVideoCaptureMethods(t,n){return t!=null&&t.includes("video")&&n?n:["upload"]}videoCanBeReattempted(){if(this.sessionStorageEnabled){const t=this.getVideoErrorsMap();return!!Object.keys(t).some(r=>typeof t[r]=="number"&&t[r]>0)}else return this.videoAttempts<this.maxAttempts}shouldReinitializeWithUpload(t,n){var o;const r=((o=this.currentClient)==null?void 0:o.type)==="stream"&&t instanceof Error&&(t==null?void 0:t.message)===Og;return r&&this.sessionStorageEnabled&&this.markClientError(0),r&&(n||_m).includes("upload")&&this.videoCanBeReattempted()}resetForTests(){this.attempts=0,this.current=void 0,this.lastSuccessfulClient=void 0}destroy(t=!1){this.destroyClient(this.current,t),this.current=void 0}getClientFromAttempts(t,n){return n[t%n.length]==="stream"?wm:Im}destroyClient(t,n=!1){n&&(t!=null&&t.stream)&&As(t.stream),t==null||t.destroy()}getVideoErrorsMap(t=!1){const n=gn.getSessionItem(Wn.InquiryVideoErrorsMap);let r;try{r=n?JSON.parse(n):Bc}catch{r=Bc}return t&&n==null&&this.setVideoErrorsMap(Bc),r}setVideoErrorsMap(t){gn.setSessionItem(Wn.InquiryVideoErrorsMap,JSON.stringify(t))}}const Re=new R8;function bo(e){return e?(e==null?void 0:e["audio-enabled"])&&(e==null?void 0:e["enabled-capture-file-types"].includes("video"))&&N.canRequestMicrophone:!1}function Lg(e,t,n,r){var a,s,c;if(!e||e.indexOf("video")<0||!(r!=null&&r["inquiry:video-background"]))return;let o=!1;if(t&&(t.type==="stream"?o=t.objectId!=null:o=t.chunks!=null&&t.chunks.length>0),Bt.track({event:{type:"inquiry.video.submit",data:{capture_method:t==null?void 0:t.type,has_video:o,step_name:n}},featureFlags:r}),(t==null?void 0:t.type)==="stream"&&(t==null?void 0:t.objectId)!=null){z.logAmplitude(`${n}.video.submit-success`,{type:t==null?void 0:t.type});return}if((t==null?void 0:t.type)==="upload"&&(t==null?void 0:t.chunks)!=null){z.logAmplitude(`${n}.video.submit-success`,{type:t==null?void 0:t.type,chunks:(a=t==null?void 0:t.chunks)==null?void 0:a.length,mimeType:t==null?void 0:t.mimeType});return}z.logAmplitude(`${n}.video.submit-failed`,{attempts:Re.videoAttempts,clientType:(s=Re.currentClient)==null?void 0:s.type,isDataAvailableCalled:((c=Re.currentClient)==null?void 0:c.type)==="upload"?Re.currentClient.dataAvailableCalled:void 0})}function ia(e,t){if(e==null)throw new Error("nullthrows: unexpected null or undefined");return e}async function Rm({inquiry:e,config:t,capturedSelfiesSubmitData:n,multipart:r=!0}){const o=t["selfie-type"],{capturedVideoData:a}=n;let{capturedSelfies:s}=n;if(o===Cn.ProfileAndCenter){const d=Ac(s,he.Center),u=Ac(s,he.Left),h=Ac(s,he.Right);if((d.length>1||u.length>1||h.length>1)&&z.logAmplitude("selfie.submit.duplicate-images",{capturedSelfiesMetadata:Du(s),center:d.length,left:u.length,right:h.length}),s=[si(s,he.Center),si(s,he.Left),si(s,he.Right),si(s,ld.Start)].filter(Boolean),s.length<3){const m=n.capturedSelfies,p={capturedSelfiesMetadata:Du(m),capturedVideoDataType:a==null?void 0:a.type};Z(new Error("Selfie ProfileAndCenter but client captured less than 3 poses"),"warning",p,{jira:"PER-28421"}),z.logAmplitude("selfie.submit.missing-images",p)}}let c=s.map(d=>{const u=o===Cn.OnlyCenter&&d.pose===he.Center?"photo":`${d.pose}_photo`;return{name:u,type:"image","capture-method":d.captureMethod,"captured-at":d.capturedAt,frames:Tr([{filename:`${u}.jpeg`,fileType:"image/jpeg",dataUrl:d.dataUrl}],r)}});(a==null?void 0:a.type)==="stream"?c=c.concat([{name:"video",type:"video","capture-method":ut.Auto,frames:[],"object-id":a.objectId}]):(a==null?void 0:a.type)==="upload"&&(c=c.concat([{name:"video",type:"video","capture-method":ut.Auto,frames:[bf(a.chunks,`video.${lr(a.mimeType)}`,a.mimeType)]}]));const l={type:o,files:c,"camera-properties":n.cameraInspectionData};return n.captureStartedAt&&(l["capture-started-at"]=n.captureStartedAt),{id:e.id,type:e.type,attributes:{fields:{[t["field-key-selfie"]]:l},"flow-type":N.flowType}}}function Gd({inquiry:e,config:t,capturedSelfiesSubmitData:n,debugForcedStatus:r,history:o,t:a,featureFlags:s}){return async c=>{var x,y,v,_,A,T;let l=await Rm({inquiry:e,config:t,capturedSelfiesSubmitData:n,multipart:!0}),d="multipart/form-data";Qv(n.capturedSelfies)||Lg(t==null?void 0:t["enabled-capture-file-types"],n.capturedVideoData,"selfie",s),c(bi(0));const u=R=>{var O;c(bi((O=R.progress)!=null?O:0))},h=new Date().getTime();c(Nn());let m,p;for(p=0;p<Mi;p++)try{m=await te.postResourceAction(l,"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":{"debug-forced-status":r}},contentType:d,onUploadProgress:u}),N.inquiryParams["send-client-side-collected-data-in-events"]&&c(Ta({name:e.attributes["next-step"].name,type:Ae.Selfie,data:n.capturedSelfies}));break}catch(R){if(R instanceof pt){let O=!1;switch(R.status){case 502:c(se(a("errors.network-upload")));break;case 409:if(((x=R.errors)==null?void 0:x[0].code)==="inconsistent_transition_error"){const{data:D}=await te.getResource(S.Inquiry,e.id);c(Tt(D))}else((y=R.errors)==null?void 0:y[0].code)==="pending_transition_error"?c(se(a("errors.network"))):c(se(a("errors.inquiry-conflict")));break;case 413:c(se(a("errors.image-upload-too-large")));break;case 422:if(p===0)l=await Rm({inquiry:e,config:t,capturedSelfiesSubmitData:n,multipart:!1}),d="application/json";else{c(se(a("government-id.prompt.failed-select-image")));break}default:O=!0}if(O===!1)throw c(mt()),new mn({method:"POST"})}else R instanceof Ct||Z(R,"error",{attempt:p});if(p===Mi-1)throw c(mt()),z.logAmplitude("selfie.submit.failed",{attempts:p,duration:new Date().getTime()-h}),R}try{[he.Center,he.Left,he.Right].forEach(R=>{var H,M;const O=si(n.capturedSelfies,R);if(O==null)return;const{dataUrl:D,captureMethod:L}=O;D.length<Br&&Z(new Error("Selfie verification contains potentially blank image"),"warning",{},{captureMethod:L,side:R,videoEnabled:(n.capturedVideoData!=null).toString(),videoCaptureMethod:(M=(H=n.capturedVideoData)==null?void 0:H.type)!=null?M:""})})}catch(R){Z(R,"warning")}if((m==null?void 0:m.data)==null){const R=t["selfie-type"];throw Z(new Error("No data returned from create verification saga"),"warning",{response:m,selfieType:R,captureMethod:(v=si(n.capturedSelfies,he.Center))==null?void 0:v.captureMethod,uploads:{centerSize:(_=si(n.capturedSelfies,he.Center))==null?void 0:_.dataUrl.length,leftSize:(A=si(n.capturedSelfies,he.Left))==null?void 0:A.dataUrl.length,rightSize:(T=si(n.capturedSelfies,he.Right))==null?void 0:T.dataUrl.length}}),c(se(a("government-id.prompt.failed-select-image"))),c(mt()),new mn({method:"POST"})}z.logAmplitude("selfie.submit.completed",{duration:new Date().getTime()-h,attempts:p+1});const{data:g}=m;c(Ot(g)),c(bi(0)),n.capturedVideoData&&Re.markClientSuccess(),wi(g)===an.BLOCKING?await c(jn(g,{historyToClear:o})):(c(mt()),c(Tt(g)))}}function Am({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,multipart:d=!0}){var x,y,v,_,A,T;const u=o[U.Front]||o[U.FrontOrBack],h=o[U.Back]||o[U.BarcodePdf417],m=o[U.PassportSignature],p=[{page:U.Front,"capture-method":(x=zt(u))==null?void 0:x.captureMethod,"capture-flow":(y=zt(u))==null?void 0:y.captureFlow,frames:Tr(u,d)},{page:U.Back,"capture-method":(v=zt(h))==null?void 0:v.captureMethod,"capture-flow":(_=zt(h))==null?void 0:_.captureFlow,frames:Tr(h,d)},{page:U.PassportSignature,"capture-method":(A=zt(m))==null?void 0:A.captureMethod,"capture-flow":(T=zt(m))==null?void 0:T.captureFlow,frames:Tr(m,d)}];l&&(l.type==="stream"?p.push({page:"front_and_back",type:"video","capture-flow":void 0,"capture-method":void 0,frames:[],"object-id":l.objectId}):l.type==="upload"&&p.push({page:"front_and_back",type:"video","capture-flow":void 0,"capture-method":void 0,frames:[bf(l.chunks,`video.${lr(l.mimeType)}`,l.mimeType)]}));const g={"client-extraction-source":s,"client-extraction-raws":a,"camera-properties":c,files:p.filter(R=>R.frames.length!==0||R["object-id"]!=null)},b={[t["field-key-idclass"]]:n,[t["field-key-document"]]:g};return r!=null&&t["field-key-country"]!=null&&(b[t["field-key-country"]]=r.toUpperCase()),{id:e.id,type:e.type,attributes:{fields:b,"flow-type":N.flowType}}}const Mi=3;function A8({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,manuallyClassifiedInAutoclassificationFlow:d,debugForcedStatus:u,history:h,t:m,opts:p={},featureFlags:g}){return async b=>{var D,L,H;let x=Am({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,multipart:!0}),y="multipart/form-data";Tl(o)||Lg(t==null?void 0:t["enabled-capture-file-types"],l,"government-id",g),b(bi(0));const v=M=>{var B;b(bi((B=M.progress)!=null?B:0))},_=new Date().getTime();b(Nn());let A,T;for(T=0;T<Mi;T++)try{A=await te.postResourceAction(x,"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"manually-classified-in-autoclassification-flow":d,"workflow-initial-variables":{"debug-forced-status":u}},contentType:y,onUploadProgress:v}),N.inquiryParams["send-client-side-collected-data-in-events"]&&b(Ta({name:e.attributes["next-step"].name,type:Ae.GovernmentId,data:o}));break}catch(M){if(M instanceof pt){let B=!1;switch(M.status){case 502:b(se(m("errors.network-upload")));break;case 401:return;case 409:switch((D=M.errors)==null?void 0:D[0].code){case"inconsistent_transition_error":{const{data:V}=await te.getResource(S.Inquiry,e.id);b(Tt(V));break}case"pending_transition_error":{b(se(m("errors.network")));break}default:b(se(m("errors.inquiry-conflict")))}break;case 413:b(se(m("errors.image-upload-too-large")));break;case 422:T===0?(x=Am({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,multipart:!1}),y="application/json",B=!0):Fg(M,h,b,m,g);break;default:B=!0}if(B===!1)throw b(mt()),new mn({method:"POST"})}else M instanceof Ct||Z(M,"error",{attempt:T});if(T===Mi-1)throw b(mt()),z.logAmplitude("government-id.submit.failed",{attempts:T,duration:new Date().getTime()-_}),M}try{[U.Front,U.Back,U.BarcodePdf417,U.FrontOrBack,U.PassportSignature].forEach(M=>{var B;(B=o[M])==null||B.forEach(V=>{var Y;if(V==null)return;const{dataUrl:q,fileType:$,captureMethod:Q,captureFlow:G}=V;q.length<Br&&Z(new Error("Government ID verification contains potentially blank image"),"warning",{},{captureMethod:Q,side:M,fileType:$,captureFlow:G,videoEnabled:(l!=null).toString(),videoCaptureMethod:(Y=l==null?void 0:l.type)!=null?Y:""})})})}catch(M){Z(M,"warning")}if((A==null?void 0:A.data)==null)throw Z(new Error("No data returned from create verification saga"),"warning",{response:A,governmentIdClass:n,captureMethod:ro(o).map(M=>{var B;return(B=zt(M))==null?void 0:B.captureMethod}),captureFlow:ro(o).map(M=>{var B;return(B=zt(M))==null?void 0:B.captureFlow}),uploads:{backSizes:(L=o.back)==null?void 0:L.map(M=>{var B;return(B=M.dataUrl)==null?void 0:B.length}),frontSizes:(H=o.front)==null?void 0:H.map(M=>{var B;return(B=M.dataUrl)==null?void 0:B.length})}}),b(se(m("government-id.prompt.failed-select-image"))),b(mt()),new mn({method:"POST"});z.logAmplitude("government-id.submit.completed",{duration:new Date().getTime()-_,attempts:T+1});const{data:R}=A;b(Ot(R)),b(bi(0)),l&&Re.markClientSuccess(),wi(R)===an.BLOCKING?b(yn("/inquiry/government-id/pending",{transition:p.transition})):(b(mt()),b(Tt(R)))}}var ra=(e=>(e.ACCEPTED="id_accepted",e.REJECTED="id_rejected",e.FAILED="classification_failed",e))(ra||{});function T8({inquiry:e,uploads:t,history:n,t:r,debugForcedStatus:o,featureFlags:a}){return async s=>{var h,m;const c=t[U.Front],l=fd(ia(zt(c)),!0);let d=null,u;for(u=0;u<Mi;u++)try{d=await te.postResourceAction({attributes:{image:l},id:e.id,type:e.type},"government-id-classification",{meta:{"workflow-initial-variables":{"debug-forced-status":o}},contentType:"multipart/form-data"});break}catch(p){if(p instanceof pt){let g=!1;switch(p.status){case 502:s(se(r("errors.network-upload")));break;case 409:switch((h=p.errors)==null?void 0:h[0].code){case"inconsistent_transition_error":{const{data:b}=await te.getResource(S.Inquiry,e.id);s(Tt(b));break}default:s(se(r("errors.inquiry-conflict")))}break;case 413:s(se(r("errors.image-upload-too-large")));break;case 422:Fg(p,n,s,r,a);break;default:g=!0}if(g===!1)throw s(mt()),new mn({method:"POST"})}else p instanceof Ct||Z(p,"error",{attempt:u});if(u===Mi-1)throw s(mt()),p}try{return d!=null&&d["country-code"]&&(d["country-code"]=d["country-code"].toUpperCase()),(m=d==null?void 0:d["id-classes-by-countries"])==null||m.forEach(p=>{p["country-code"]=p["country-code"].toUpperCase()}),ia(d)}catch(p){throw Z(p,"warning"),new mn({method:"POST"})}}}function Fg(e,t,n,r,o){var s,c,l,d;const a=(s=e.errors)==null?void 0:s[0].code;switch(a){case Fn.DOCUMENT_GOVERNMENT_ID_DIMENSION_SIZE_ERROR:{const h=(l=((c=e.errors)==null?void 0:c[0]).details)==null?void 0:l.min_dimension_size;o["inquiry:remove-clear-memory-history"]?t.push(Vt(0,Ue.Prompt),{preventBackNavigation:!0}):(Vn(t),t.push(Vt(0,Ue.Prompt))),n(se(r("government-id.prompt.dimension-size-too-small",{minDimensionSize:h}))),n(mt());return}case Fn.DOCUMENT_GOVERNMENT_ID_TOO_SMALL:case Fn.DOCUMENT_GOVERNMENT_ID_ALL_BLACK_IMAGE:{o["inquiry:remove-clear-memory-history"]?t.push(Vt(0,Ue.Prompt),{preventBackNavigation:!0}):(Vn(t),t.push(Vt(0,Ue.Prompt))),n(se(r("government-id.prompt.failed-black-image"))),n(mt());return}case Fn.DOCUMENT_GOVERNMENT_ID_DISABLED_FILE_TYPE_ERROR:{const h=((d=e.errors)==null?void 0:d[0]).details,m=lr(h.uploaded_file_type).toUpperCase(),p=h.enabled_file_types.map(g=>lr(g).toUpperCase());o["inquiry:remove-clear-memory-history"]?t.push(Vt(0,Ue.Prompt),{preventBackNavigation:!0}):(Vn(t),t.push(Vt(0,Ue.Prompt))),n(se(r("documents.errors.disabled-file-type",{uploadedFileExtension:m,acceptedFileExtensions:p.join(", "),count:p.length}))),n(mt());return}default:{if(a&&/must be under \d+ bytes/.test(a)){const u=a.match(/must be under (\d+) bytes/);if(u){const h=Hd(parseInt(u[1]));n(se(r("documents.errors.file-size-exceeded",{fileSizeLimit:h})));return}}n(se(r("government-id.prompt.failed-select-image")));break}}}function Mg({inquiry:e,debugForcedStatus:t,t:n,uploadedFiles:r}){return async o=>{var h,m;o(bi(0));const a=p=>{var g;o(bi((g=p.progress)!=null?g:0))},s=new Date().getTime();o(Nn());let c,l;for(l=0;l<Mi;l++)try{c=await te.postResourceAction({type:e.type,id:e.id,attributes:{"flow-type":N.flowType}},"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":{"debug-forced-status":t}},onUploadProgress:a}),N.inquiryParams["send-client-side-collected-data-in-events"]&&o(Ta({name:e.attributes["next-step"].name,type:Ae.Document,data:(r||[]).map(p=>p.file)}));break}catch(p){if(p instanceof pt){let g=!1;switch(p.status){case 502:o(se(n("errors.network-upload")));break;case 409:if(((h=p.errors)==null?void 0:h[0].code)==="inconsistent_transition_error"){const{data:b}=await te.getResource(S.Inquiry,e.id);o(Tt(b))}else((m=p.errors)==null?void 0:m[0].code)==="pending_transition_error"?o(se(n("errors.network"))):o(se(n("errors.inquiry-conflict")));break;case 413:o(se(n("errors.image-upload-too-large")));break;case 422:o(se(n("government-id.prompt.failed-select-image")));break;default:g=!0}if(g===!1)throw o(mt()),new mn({method:"POST"})}else p instanceof Ct||Z(p,"error",{attempt:l});if(l===Mi-1)throw o(mt()),z.logAmplitude("document.submit.failed",{attempts:l,duration:new Date().getTime()-s}),p}if((c==null?void 0:c.data)==null)throw Z(new Error("No data returned from create document verification saga"),"warning",{response:c}),o(se(n("government-id.prompt.failed-select-image"))),o(mt()),new mn({method:"POST"});z.logAmplitude("document.submit.completed",{duration:new Date().getTime()-s,attempts:l+1});const{data:d}=c;o(Ot(d)),o(yg()),wi(d)===an.BLOCKING?o(yn("/inquiry/documents/pending")):(o(mt()),o(Tt(d)))}}function Zq({inquiry:e,config:t,sessionId:n,debugForcedStatus:r,history:o,t:a}){return async s=>{var g,b;const c={id:e.id,type:e.type,attributes:{fields:{[t["field-key-selfie"]]:{type:"reflection","reflection-session-id":n,files:[]}},"flow-type":N.flowType}},l=new Date().getTime();s(Nn());const d="multipart/form-data";let u,h;for(h=0;h<Mi;h++)try{u=await te.postResourceAction(c,"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":{"debug-forced-status":r}},contentType:d});break}catch(x){if(x instanceof pt){let y=!1;switch(x.status){case 502:s(se(a("errors.network-upload")));break;case 409:if(((g=x.errors)==null?void 0:g[0].code)==="inconsistent_transition_error"){const{data:v}=await te.getResource(S.Inquiry,e.id);s(Tt(v))}else((b=x.errors)==null?void 0:b[0].code)==="pending_transition_error"?s(se(a("errors.network"))):s(se(a("errors.inquiry-conflict")));break;case 413:s(se(a("errors.image-upload-too-large")));break;case 422:s(se(a("government-id.prompt.failed-select-image")));break;default:y=!0}if(y===!1)throw s(mt()),new mn({method:"POST"})}else x instanceof Ct||Z(x,"error",{attempt:h});if(h===Mi-1)throw s(mt()),z.logAmplitude("selfie-reflection.submit.failed",{attempts:h,duration:new Date().getTime()-l}),x}if((u==null?void 0:u.data)==null){const x=t["selfie-type"];throw Z(new Error("No data returned from create verification saga"),"warning",{response:u,selfieType:x}),s(se(a("government-id.prompt.failed-select-image"))),s(mt()),new mn({method:"POST"})}z.logAmplitude("selfie-reflection.submit.completed",{duration:new Date().getTime()-l,attempts:h+1});const{data:m}=u;s(Ot(m)),s(bi(0)),wi(m)===an.BLOCKING?await s(jn(m,{historyToClear:o})):(s(mt()),s(Tt(m)))}}const E8=C.div.withConfig({displayName:"ConfirmFileUploadView__Container",componentId:"sc-1t7pp0y-0"})(["display:flex;flex-direction:column;"]),k8=C("div").withConfig({displayName:"ConfirmFileUploadView__Header",componentId:"sc-1t7pp0y-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),N8=C("div").withConfig({displayName:"ConfirmFileUploadView__ConfirmFileContainer",componentId:"sc-1t7pp0y-2"})(["background-color:",";border-radius:",";margin-bottom:","px;min-height:80px;padding:0px ","px;display:flex;flex-direction:row;justify-content:start;align-items:center;"],Be.gray4,un.rounded,F.base*8,F.base*2),j8=C.div.withConfig({displayName:"ConfirmFileUploadView__IconContainer",componentId:"sc-1t7pp0y-3"})(["margin-right:","px;display:flex;"],F.base),P8=C("div").withConfig({displayName:"ConfirmFileUploadView__FileNameContainer",componentId:"sc-1t7pp0y-4"})(["color:",";font-weight:",";word-break:break-all;"],Be.black,pn.semiBold),D8=C("div").withConfig({displayName:"ConfirmFileUploadView__Minify",componentId:"sc-1t7pp0y-5"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function Vg({customFileIcon:e,fileName:t,isProcessing:n,handleContinue:r,handleRetry:o,titleStyles:a,textStyles:s,buttonStyles:c,title:l,prompt:d,uploading:u,btnSubmit:h,btnRetake:m}){return i.jsxs(E8,{children:[i.jsxs(k8,{children:[i.jsx(dt,{styles:a,children:i.jsx(J,{children:l})}),i.jsx(ot,{styles:s,children:i.jsx(J,{children:d})})]}),i.jsxs(N8,{children:[i.jsx(j8,{children:i.jsx(Ye,{customImage:e,alt:"file icon",children:i.jsx(ye,{children:i.jsx(Bs,{})})})}),i.jsx(P8,{children:t})]}),i.jsxs(ft,{children:[i.jsx(ge,{buttonType:ne.Primary,styles:c==null?void 0:c[ne.Primary],disabled:n,onClick:r,"data-test":"confirm-file-upload__continue",children:n?i.jsxs("span",{children:[u,i.jsx(D8,{children:i.jsx(Ji,{})})]}):h}),c==null&&i.jsx(We,{height:2}),i.jsx(ge,{buttonType:ne.Secondary,styles:c==null?void 0:c[ne.Secondary],onClick:o,disabled:n,"data-test":"confirm-file-upload__retry",children:m})]})]})}const qc={},pc=f.memo(function({contentType:t,src:n,"data-test":r="image",environment:o,...a}){var b,x;const[s,{disable:c}]=st(!0);let l;try{l=new URL(n).pathname}catch{l=n}const[d,u]=f.useState(qc[l]),h=l==null?void 0:l.toLowerCase(),m=(h==null?void 0:h.endsWith(".png"))||(h==null?void 0:h.endsWith(".gif"))||(h==null?void 0:h.endsWith(".jpg"))||(h==null?void 0:h.endsWith(".jpeg"))||(n==null?void 0:n.startsWith("data:image/png;"))||(n==null?void 0:n.startsWith("data:image/jpeg;"))||(n==null?void 0:n.startsWith("blob:"))||t==="image/png"||t==="image/gif"||t==="image/jpg"||t==="image/jpeg",p=t==="image/svg+xml"||(h==null?void 0:h.endsWith(".svg"))||(n==null?void 0:n.startsWith("data:image/svg+xml")),g=(h==null?void 0:h.endsWith(".json"))||t==="application/json";return f.useEffect(()=>{if((!o||o==="production")&&!(n!=null&&n.startsWith("https://files.withpersona.com/")||n!=null&&n.startsWith("https://files.withpersona-staging.com/"))){c();return}p?di.get(n).then(({data:y})=>{const v=`data:image/svg+xml;base64,${btoa(y)}`;qc[l]=v,u(v)}).catch(y=>ar({error:y,method:"GET",uri:n})).finally(c):g&&di.get(n).then(({data:y})=>{var v;qc[l]=y,u(y),(v=a.onLoad)==null||v.call(a)}).catch(y=>{var v;(v=a.onError)==null||v.call(a),ar({error:y,method:"GET",uri:n})}).finally(c)},[n,m,g,p]),n?m?i.jsx("img",{...a,src:n,"data-test":r}):p&&d!=null?i.jsx("img",{...a,src:d,"data-test":r}):g&&d!=null?i.jsx(Gn,{role:"img",animationData:d,style:{height:(b=a.height)!=null?b:"auto",width:(x=a.width)!=null?x:"auto"}}):i.jsx("div",{"aria-label":s?"loading image":"no image","data-test":`${r}__${s?"loading":"empty"}`,className:a.className}):null});function Wd(e){return i.jsx(pc,{src:e.src,style:{imageOrientation:"from-image",...e.style},alt:e.alt})}const O8=450,L8=C.div.withConfig({displayName:"InquiryDocumentsCheckView__Container",componentId:"sc-o0bjv1-0"})(["display:flex;flex-direction:column;",""],({restrictInlineColumnWidth:e})=>e?`
      max-width: ${O8}px;
      margin-left: auto;
      margin-right: auto;
    `:""),F8=C("div").withConfig({displayName:"InquiryDocumentsCheckView__Header",componentId:"sc-o0bjv1-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),M8=C("div").withConfig({displayName:"InquiryDocumentsCheckView__ImagePositioner",componentId:"sc-o0bjv1-2"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],F.base*2),V8=C("div").withConfig({displayName:"InquiryDocumentsCheckView__Minify",componentId:"sc-o0bjv1-3"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function B8(e){const t=Ur(),{base:n,buttons:r}=Yr(),{currentUpload:o,currentUploadCaptureMethod:a,localizations:s,handleContinue:c,handleRetry:l,isProcessing:d}=e;return!Oo.includes(o.fileType)||a===ut.Upload?i.jsx(Vg,{fileName:o.filename,isProcessing:d,handleContinue:c,handleRetry:l,title:s["confirm-upload-title"],prompt:s["confirm-upload-prompt"],uploading:s["confirm-upload-uploading"],btnSubmit:s["confirm-upload-btn-submit"],btnRetake:s["confirm-upload-btn-retake"],titleStyles:n==null?void 0:n.titleStyle,textStyles:n==null?void 0:n.textStyle,buttonStyles:r}):i.jsxs(L8,{restrictInlineColumnWidth:!!t,children:[i.jsxs(F8,{children:[i.jsx(dt,{styles:n==null?void 0:n.titleStyle,children:i.jsx(J,{children:s.title})}),i.jsx(ot,{styles:n==null?void 0:n.textStyle,children:i.jsx(J,{children:s.prompt})})]}),i.jsx(M8,{children:i.jsx(Wd,{src:o.dataUrl,alt:"upload preview"})}),i.jsxs(ft,{children:[i.jsx(ge,{id:"documents-check__use-image",buttonType:ne.Primary,styles:r==null?void 0:r[ne.Primary],disabled:d,onClick:c,"data-test":"documents-check__continue",children:d?i.jsxs("span",{children:[s.uploading,i.jsx(V8,{children:i.jsx(Ji,{})})]}):s["btn-submit"]}),r==null&&i.jsx(We,{height:2}),i.jsx(ge,{id:"documents-check__retake",buttonType:ne.Secondary,styles:r==null?void 0:r[ne.Secondary],disabled:d,onClick:l,"data-test":"documents-check__retake",children:s["btn-retake"]})]})]})}const q8=e=>e.inquiry.currentStep,U8=e=>e.inquiry.documents,H8=e=>e.inquiry.verifications,fc=ti([q8],e=>e.type===Ae.DocumentsUpload?e.config:null),Fa=ti([fc,U8,H8],(e,t,n)=>{if(e==null)return[];const r=H0(c=>c.relationships.document.data.id,n==null?void 0:n.filter(c=>c.type===w.VerificationDocument)),o=Vh(t).filter(c=>{var l;return((l=r[c.id])==null?void 0:l.attributes.status)===kt.Passed}),a=$0(c=>c.attributes.kind,o);return e.required.reduce((c,l)=>(a[l.kind]>0?(a[l.kind]-=1,c.push({...l,submitted:!0})):c.push({...l,submitted:!1}),c),[])}),$8=ti([fc],e=>(e||{})["intro-screen"]),G8=ti([fc],e=>(e||{})["skip-intro-screen"]),Bg=e=>{var t;return(t=zt(e.document.uploads))==null?void 0:t.file};function W8(e){const{captureMethod:t,config:n,debugForcedStatus:r,document:o,fileToUpload:a,inquiry:s,uploadedFiles:c,styles:l,featureFlags:d}=e,u=(n==null?void 0:n["document-file-limit"])>1,h=Dt();f.useEffect(()=>{if(s==null||o==null||a==null){N.redirectToStart();return}return e.fileToUpload||(e.showMessage(m("errors.network")),h.goBack()),()=>{e.clearUpload(a)}},[]),f.useEffect(()=>{try{d!=null&&d["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("documents.check-page.entered",{})}catch{}},[]);const[m]=K(),{error:p,loading:g,callback:b}=It(async()=>{e.clearMessages(),a.dataUrl.length>ua&&e.showMessage(Oo.includes(a.fileType)?n.localizations["check-page"]["large-image-upload"]:n.localizations["check-page"]["large-file-upload"]),await e.createDocumentFile({file:a,captureMethod:t,document:o,t:m}),u?(e.loadDocument(o.id),h.replace(pa(Nt.TakePhoto))):await e.documentSubmit({inquiry:s,debugForcedStatus:r,t:m,uploadedFiles:c})},[s,a,r,m,u,c]);Et({error:p,onError:()=>e.showMessage(m("documents.prompt.failed-select-image")),onNetworkError:()=>e.showMessage(m("errors.network"))});const x=()=>{g||(h.goBack(),e.clearUpload(a))};return s==null||n==null||o==null||a==null?null:i.jsx(sc,{value:l,children:i.jsx(B8,{currentUpload:a,currentUploadCaptureMethod:t,handleContinue:b,handleRetry:x,isProcessing:g,localizations:n.localizations["check-page"]})})}function z8(e){return{captureMethod:e.verification.captureMethod,config:Na(e),debugForcedStatus:e.test.forcedStatus,document:Js(e),fileToUpload:Bg(e),inquiry:e.inquiry.inquiry,uploadedFiles:Tf(e),styles:ja(e.inquiry),featureFlags:e.inquiry.featureFlags}}const Y8={clearMessages:Lt,clearUpload:uc,createDocumentFile:jg,documentSubmit:Mg,loadDocument:Ng,showMessage:se},K8=ke(z8,Y8),Q8=K8(W8),Lo=({icon:e,...t})=>{const n=f.useContext(tt);if(n==null?void 0:n.loadingPictographUrl)return i.jsx(Kt,{url:"loadingPictographUrl",height:"loadingPictographHeight"});{let o;switch(e){case"document":o=TC;break;case"verification":o=AC;break;default:ct(e)}return i.jsx(ye,{...t,role:"img","aria-label":"loading animation",children:i.jsx(Gn,{"aria-busy":!0,"aria-live":"polite",role:"alert",animationData:o,style:{height:"160px",width:"auto"}})})}},Z8=C.div.withConfig({displayName:"InquiryDocumentsPendingView__Container",componentId:"sc-tvw84p-0"})(["display:flex;flex-direction:column;"]),J8=C("div").withConfig({displayName:"InquiryDocumentsPendingView__Header",componentId:"sc-tvw84p-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),X8=C("div").withConfig({displayName:"InquiryDocumentsPendingView__AnimationContainer",componentId:"sc-tvw84p-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],F.base*8);function eT({assets:e,localizations:t,textVerticalPosition:n}){const{base:r,processingPage:o}=Yr(),a=i.jsxs(J8,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(J,{children:t.title})}),i.jsx(ot,{styles:o==null?void 0:o.textStyle,children:i.jsx(J,{children:t.description})})]});return i.jsxs(Z8,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),n!=="end"&&a,i.jsx(X8,{children:i.jsx(Ye,{customImage:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(Lo,{icon:"document",$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color)})})}),n==="end"&&a]})}function tT(e){const{inquiry:t,config:n,styles:r,featureFlags:o}=e,[a]=K(),s=Dt();return f.useEffect(()=>{if(t==null){N.redirectToStart();return}},[]),Sa.useAsyncEffect(async()=>{t!=null&&e.pollInquiry(t,{historyToClear:s}).catch(()=>{e.showMessage(a("errors.network"),!0),s.goBack()})},[]),f.useEffect(()=>{try{o!=null&&o["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("documents.pending-page.entered",{})}catch{}},[]),t==null||n==null?null:i.jsx(sc,{value:r,children:i.jsx(eT,{assets:n.assets["pending-page"],localizations:n.localizations["pending-page"],textVerticalPosition:n["pending-page-text-vertical-position"]})})}const nT=e=>({document:Js(e),inquiry:e.inquiry.inquiry,config:Na(e),featureFlags:e.inquiry.featureFlags,styles:ja(e.inquiry)}),iT={showMessage:se,pollInquiry:jn},rT=ke(nT,iT),oT=rT(tT);function qg({onSelectImage:e,capture:t,disabled:n}){const r=f.useCallback(l=>{var u;const d=(u=l.target.files)==null?void 0:u[0];e(d)},[e]),o=f.useCallback(()=>{var l;(l=a.current)==null||l.click()},[]),a=f.useRef(null),s=f.useMemo(()=>({accept:"image/*",capture:t!=null?t:"environment",disabled:n!=null?n:!1,onChange:r,ref:a,style:{display:"none"},type:"file","data-cy":"file-upload"}),[t,n,r]),c=f.useMemo(()=>({disabled:n||a==null,onClick:o}),[n,o]);return{inputCaptureProps:s,buttonProps:c}}const aT=C(ge).withConfig({displayName:"ButtonInputCapture__StyledButton",componentId:"sc-1fq0gkp-0"})(["margin-bottom:","px;:last-of-type{margin-bottom:0;}"],F.base*2),Fo=({buttonType:e,capture:t,children:n,disabled:r,id:o,isPending:a,handleSelectImage:s,styles:c,"aria-label":l,"data-test":d})=>{const{inputCaptureProps:u,buttonProps:h}=qg({onSelectImage:s,capture:t,disabled:r});return c!=null?i.jsxs(i.Fragment,{children:[i.jsx("input",{...u,id:o}),i.jsx(ma,{...h,"data-test":d,styles:c,isPending:a,"aria-label":l,children:n})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{...u,id:o}),i.jsx(aT,{...h,"data-test":d,buttonType:e,isPending:a,"aria-label":l,children:n})]})};var at=(e=>(e.SelectCamera="SelectCamera",e.DeviceHandoff="DeviceHandoff",e.UploadImage="UploadImage",e))(at||{});const sT=C.div.withConfig({displayName:"DocumentsPrompt__Container",componentId:"sc-nw222o-0"})(["display:flex;flex-direction:column;"]),cT=C("div").withConfig({displayName:"DocumentsPrompt__Header",componentId:"sc-nw222o-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),lT=C(Kt).withConfig({displayName:"DocumentsPrompt__StyledCustomizablePictograph",componentId:"sc-nw222o-2"})(["width:100%;"]);function dT({allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,handleDeviceHandoff:r,handleDrop:o,handleDropRejected:a,handleInputCapture:s,handleSelectCamera:c,isProcessing:l,loading:d,localizations:u,multiFileSupported:h}){const{documentPictographPosition:m}=f.useContext(tt),{base:p}=Yr(),g=i.jsx($e,{height:null,width:null,"aria-label":"document pictograph",children:i.jsx(Ye,{customImage:n["document-pictograph"],alt:"document pictograph",children:i.jsx(lT,{url:"documentPictographUrl",height:"documentPictographHeight","aria-label":"document pictograph",vectorEffect:"initial",primaryColor:k(p==null?void 0:p.fill.color),highlightColor:k(p==null?void 0:p.fill.highlightColor),backgroundColor:k(p==null?void 0:p.fill.backgroundColor),strokeColor:k(p==null?void 0:p.stroke.color),children:i.jsx(In,{backgroundColor:k(p==null?void 0:p.fill.highlightColor),children:i.jsx(Gl,{height:80,width:"100%"})})})})});return i.jsxs(sT,{"data-test":"documents-prompt",children:[i.jsx(Ye,{customImage:n["header-pictograph"],alt:"header pictograph"}),m===Wt.Start&&g,i.jsxs(cT,{children:[i.jsx(dt,{styles:p==null?void 0:p.titleStyle,children:i.jsx(J,{children:u.title})}),i.jsx(ot,{"data-test":"documents-prompt__capture-options",styles:p==null?void 0:p.textStyle,children:i.jsx(J,{children:e.length>0?u.prompt:u["no-capture-options-prompt"]})})]}),m===Wt.Center&&g,i.jsx(ft,{children:i.jsx(uT,{allowedCaptureOptions:e,acceptedFileTypes:t,handleDeviceHandoff:r,handleDrop:o,handleDropRejected:a,handleInputCapture:s,handleSelectCamera:c,isProcessing:l,loading:d,localizations:u,multiFileSupported:h})})]})}function uT({allowedCaptureOptions:e,acceptedFileTypes:t,handleDeviceHandoff:n,handleDrop:r,handleDropRejected:o,handleInputCapture:a,handleSelectCamera:s,isProcessing:c,loading:l,localizations:d,multiFileSupported:u}){return i.jsx(hT,{id:"document-prompt__view",children:e.map((h,m)=>i.jsx(mT,{isPrimary:m===0,option:h,handleDeviceHandoff:n,handleDrop:r,handleDropRejected:o,handleInputCapture:a,handleSelectCamera:s,isProcessing:c,loading:l,localizations:d,multiFileSupported:u,acceptedFileTypes:t},h))})}function mT({handleDeviceHandoff:e,handleDrop:t,handleDropRejected:n,handleInputCapture:r,handleSelectCamera:o,isPrimary:a,isProcessing:s,loading:c,localizations:l,option:d,multiFileSupported:u,acceptedFileTypes:h}){const{getRootProps:m,getInputProps:p}=wa({onDrop:t,onDropRejected:n,multiple:!!u,accept:h}),{buttons:g}=Yr(),b=a?ne.Primary:ne.Secondary,x=s!=null||c;switch(d){case"web_camera":return i.jsx(Uc,{id:"document-prompt__button--web-camera","data-test":"document-prompt__button--web-camera",buttonType:b,disabled:x,styles:g==null?void 0:g[b],onClick:o,isPending:s===at.SelectCamera,children:i.jsx(Tm,{children:l["btn-capture"]})});case"mobile_camera":return i.jsx(Fo,{id:"document-prompt__button--mobile-camera","data-test":"document-prompt__button--mobile-camera",buttonType:b,disabled:x,styles:g==null?void 0:g[b],handleSelectImage:r,isPending:s===at.UploadImage,children:i.jsx(Tm,{children:l["btn-capture"]})});case"upload":return i.jsxs(Uc,{id:"document-prompt__button--upload","data-test":"document-prompt__button--upload",buttonType:b,disabled:x,styles:g==null?void 0:g[b],...m(),children:[i.jsx("input",{...p(),"data-cy":"file-upload","data-test":"document-prompt__input--upload"}),l["btn-upload"]]});case"device_handoff":return i.jsx(Uc,{id:"document-prompt__button--device-handoff","data-test":"document-prompt__button--device-handoff",buttonType:b,disabled:x,styles:g==null?void 0:g[b],onClick:e,isPending:s===at.DeviceHandoff,children:l["btn-device-handoff"]});default:ct(d)}}const hT=C.div.withConfig({displayName:"DocumentsPrompt__CaptureOptionsContainer",componentId:"sc-nw222o-3"})(["width:100%;"]),Uc=C(ge).withConfig({displayName:"DocumentsPrompt__OptionButton",componentId:"sc-nw222o-4"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],I.Spacing[4]),pT=C(qr).withConfig({displayName:"DocumentsPrompt__ImgCamera",componentId:"sc-nw222o-5"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),Tm=({children:e})=>e?i.jsx("span",{children:e}):i.jsx(pT,{"data-test":"document-prompt__image--camera"}),Uo=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32",...e},f.createElement("circle",{cx:16,cy:16,r:16,fill:"#631FFF"}),f.createElement("path",{stroke:"#fff",d:"M16 9v14M9 16h14"})),fT=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e},f.createElement("path",{stroke:"currentColor",d:"m13.335 6.667-6.667 6.667M6.668 6.667l6.667 6.667"})),ga=160,ba=120,gT=ga*2.25+sn*3,bT=ba*2.25+sn*3,CT=C.div.withConfig({displayName:"ImageGallery__ImageGalleryContainer",componentId:"sc-biogau-0"})(["display:grid;grid-gap:",";justify-content:center;grid-auto-flow:row;grid-auto-rows:","px;grid-template-columns:repeat(2,","px);overflow-x:auto;max-height:50vh;",";@media ","{max-height:60vh;}@media ","{grid-auto-rows:","px;grid-template-columns:repeat(2,","px);max-height:50vh;",";}"],I.Spacing[3],ga,ga,({multiRow:e})=>e&&`min-height: ${gT}px`,xt.isMobile,xt.isMobileSmall,ba,ba,({multiRow:e})=>e&&`min-height: ${bT}px`),Ug=W(["height:","px;width:","px;border-radius:4px;border:1px solid ",";@media ","{height:","px;width:","px;}"],ga,ga,I.Color.CoreSlate300,xt.isMobileSmall,ba,ba),Ho=C.div.withConfig({displayName:"ImageGallery__AddImageContainer",componentId:"sc-biogau-1"})([""," "," "," transition:background ",",border-color ",";"],Ug,({disabled:e})=>{if(!e)return W([":hover{background:",";}:focus-within{background:",";}"],I.Color.CoreSlate50,I.Color.CoreSlate50)},({disabled:e,isDragActive:t,isDragReject:n})=>{if(!e){if(n)return W(["border-color:",";background:",";"],I.Color.CoreRed400,I.Color.CoreRed100);if(t)return W(["background:",";"],I.Color.CoreSlate50)}},it.Fast,it.Fast),$o=C.button.withConfig({displayName:"ImageGallery__AddButton",componentId:"sc-biogau-2"})(["height:100%;width:100%;background:none;cursor:pointer;circle{fill:",";}path{stroke:",";}",""],({theme:e,styles:t})=>{var n;return(n=k(t==null?void 0:t.fill.color))!=null?n:e.colorButtonPrimary},({styles:e})=>{var t;return(t=k(e==null?void 0:e.stroke.color))!=null?t:I.Color.PrimaryWhite},({disabled:e})=>{if(e)return W(["cursor:default;circle{fill:",";}path{stroke:#898d9e;}"],I.Color.CoreSlate200)}),xT=C.figure.withConfig({displayName:"ImageGallery__PreviewImageContainer",componentId:"sc-biogau-3"})([""," background-color:",";position:relative;display:flex;flex-direction:column;"],Ug,({styles:e})=>{var t;return(t=k(e==null?void 0:e.fill.color))!=null?t:I.Color.CoreSlate50}),vT=C.button.withConfig({displayName:"ImageGallery__RemoveButton",componentId:"sc-biogau-4"})(["position:absolute;top:",";right:",";border-radius:10px;height:20px;width:20px;cursor:pointer;transition:background ",",box-shadow ",";background:",";svg{color:",";}&:disabled{cursor:not-allowed;background:",";}&:hover:not(:disabled){background:",";}&:focus-visible:not(:disabled){box-shadow:0 0 0 2px ",";}"],I.Spacing[2],I.Spacing[2],it.Fast,it.Fast,({styles:e})=>{var t;return(t=k(e==null?void 0:e.fill.color))!=null?t:I.Color.PrimaryWhite},({styles:e})=>{var t;return(t=k(e==null?void 0:e.stroke.color))!=null?t:I.Color.CoreSlate700},I.Color.CoreSlate200,I.Color.CoreSlate100,({styles:e})=>{var t;return(t=k(e==null?void 0:e.stroke.color))!=null?t:I.Color.CoreSlate700}),yT=C.div.withConfig({displayName:"ImageGallery__PreviewImageInner",componentId:"sc-biogau-5"})(["padding:",";flex:auto;min-height:0;display:flex;align-items:center;justify-content:center;"],I.Spacing[3]),IT=C.div.withConfig({displayName:"ImageGallery__AspectRatioGuard",componentId:"sc-biogau-6"})(["height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),ST=C.img.withConfig({displayName:"ImageGallery__Thumbnail",componentId:"sc-biogau-7"})(["height:auto;width:auto;max-height:100%;max-width:100%;image-orientation:from-image;"]),wT=C(ye).withConfig({displayName:"ImageGallery__StyledThemedSvg",componentId:"sc-biogau-8"})(["display:flex;align-items:center;justify-content:center;svg{height:48px;width:48px;}"]),_T=C.figcaption.withConfig({displayName:"ImageGallery__Caption",componentId:"sc-biogau-9"})(["height:32px;width:100%;flex:none;display:flex;align-items:center;background-color:",";border-bottom-left-radius:4px;border-bottom-right-radius:4px;padding:"," ",";"],I.Color.PrimaryWhite,I.Spacing[2],I.Spacing[3]),RT=C(ot).withConfig({displayName:"ImageGallery__CaptionText",componentId:"sc-biogau-10"})(["overflow-x:hidden;white-space:nowrap;text-overflow:ellipsis;"]);function AT(e){return(e==null?void 0:e.includes("image"))&&e!=="image/heic"}const TT=["application/pdf","image/jpeg","image/png","image/heic"],ET=({files:e,onChange:t,onRemove:n,onAddClick:r,onAddError:o,onDeviceHandoff:a,acceptedImageFormats:s=TT,allowedCaptureOptions:c,disabled:l,addFileDisabled:d,"data-test":u,captureOptionsDialogTitle:h,webCameraBtnLabel:m,mobileCameraBtnLabel:p,uploadBtnLabel:g,deviceHandoffBtnLabel:b,deleteDialogTitle:x,cancelBtnLabel:y,deleteBtnLabel:v,noCaptureOptionsPrompt:_,styles:A})=>{const T=f.useCallback(async R=>{const O=e[R];O.type==="uploaded"&&await n(O.id)},[n,e]);return i.jsx(i.Fragment,{children:i.jsxs(CT,{"data-test":u,multiRow:e.length>1,children:[e.slice().map((R,O)=>i.jsx(OT,{disabled:l,file:R,index:O,loading:!1,onRemove:T,deleteDialogTitle:x,cancelBtnLabel:y,deleteBtnLabel:v,styles:A},R.id)),d?null:i.jsx(kT,{onAdd:t,onAddClick:r,onAddError:o,onDeviceHandoff:a,acceptedImageFormats:s,allowedCaptureOptions:c,disabled:l,captureOptionsDialogTitle:h,webCameraBtnLabel:m,mobileCameraBtnLabel:p,uploadBtnLabel:g,deviceHandoffBtnLabel:b,noCaptureOptionsPrompt:_,styles:A})]})})},kT=({onAdd:e,onAddClick:t,onAddError:n,onDeviceHandoff:r,disabled:o,acceptedImageFormats:a,allowedCaptureOptions:s,captureOptionsDialogTitle:c,webCameraBtnLabel:l,mobileCameraBtnLabel:d,uploadBtnLabel:u,deviceHandoffBtnLabel:h,noCaptureOptionsPrompt:m,styles:{base:p,imagePreview:g,buttons:b}})=>{const[x,{enable:y,disable:v}]=st(),{getRootProps:_,getInputProps:A,isDragActive:T,isDragReject:R}=wa({onDrop:H=>{e(H),v()},onDropRejected:n,multiple:!0,accept:a}),O=f.useCallback(H=>e([H]),[e]),{inputCaptureProps:D,buttonProps:L}=qg({onSelectImage:H=>{O(H),v()},capture:"environment",disabled:o});if(s.length===1)switch(s[0]){case"web_camera":return i.jsx(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image__web-camera",children:i.jsx($o,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",onClick:t,disabled:L.disabled,styles:g==null?void 0:g.plusIcon,children:i.jsx(Uo,{})})});case"mobile_camera":return i.jsxs(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image__mobile-camera",children:[i.jsx("input",{...D}),i.jsx($o,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",styles:g==null?void 0:g.plusIcon,...L,children:i.jsx(Uo,{})})]});case"upload":return i.jsx(Ho,{isDragActive:T,isDragReject:R,disabled:o,"data-test":"add-image__upload",children:i.jsxs($o,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",..._(),disabled:o,styles:g==null?void 0:g.plusIcon,children:[i.jsx("input",{...A(),"data-cy":"file-upload"}),i.jsx(Uo,{})]})});case"device_handoff":return i.jsx(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image__device-handoff",children:i.jsx($o,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",onClick:r,disabled:L.disabled,styles:g==null?void 0:g.plusIcon,children:i.jsx(Uo,{})})});default:ct(s[0])}else return i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:x,onClose:v,"data-test":"capture-options-dialog","aria-labelledby":"capture-options-dialog__title","aria-describedby":"capture-options-dialog__description",styles:p==null?void 0:p.modal,children:[i.jsx(dt,{styles:p==null?void 0:p.titleStyle,children:i.jsx(J,{children:c})}),i.jsx(We,{height:1}),s.length===0&&i.jsx(ot,{styles:p==null?void 0:p.textStyle,children:i.jsx(J,{children:m})}),s.includes("web_camera")&&i.jsxs(i.Fragment,{children:[i.jsx(ge,{id:"add-image__dialog--btn-web-camera","data-test":"add-image__dialog--btn-web-camera",buttonType:ne.Primary,styles:b==null?void 0:b[ne.Primary],onClick:()=>{t(),v()},disabled:o,children:i.jsx(Em,{children:l})}),b==null&&i.jsx(We,{height:1.5})]}),s.includes("mobile_camera")&&i.jsxs(i.Fragment,{children:[i.jsx("input",{...D}),i.jsx(ge,{id:"add-image__dialog--btn-mobile-camera","data-test":"add-image__dialog--btn-mobile-camera",buttonType:ne.Primary,styles:b==null?void 0:b[ne.Primary],disabled:o,...L,children:i.jsx(Em,{children:d})}),b==null&&i.jsx(We,{height:1.5})]}),s.includes("upload")&&i.jsxs(i.Fragment,{children:[i.jsxs(ge,{id:"add-image__dialog--btn-upload","data-test":"add-image__dialog--btn-upload",buttonType:ne.Secondary,styles:b==null?void 0:b[ne.Secondary],disabled:o,..._(),children:[i.jsx("input",{...A(),"data-cy":"file-upload"}),u]}),b==null&&i.jsx(We,{height:1.5})]}),s.includes("device_handoff")&&i.jsx(i.Fragment,{children:i.jsx(ge,{id:"add-image__dialog--btn-device-handoff","data-test":"add-image__dialog--btn-device-handoff",buttonType:ne.Secondary,styles:b==null?void 0:b[ne.Secondary],onClick:()=>{r(),v()},disabled:o,children:h})})]}),i.jsx(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image--multiple-capture-options",children:i.jsx($o,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",onClick:y,disabled:L.disabled,styles:g==null?void 0:g.plusIcon,children:i.jsx(Uo,{})})})]})},NT=C.div.withConfig({displayName:"ImageGallery__LoadingContainer",componentId:"sc-biogau-11"})(["position:absolute;cursor:default;height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;"]),jT=C.div.withConfig({displayName:"ImageGallery__LoadingBackdrop",componentId:"sc-biogau-12"})(["position:absolute;height:100%;width:100%;background:",";opacity:0.8;border-radius:4px;.fade-enter-done &{opacity:0.8;}.fade-exit &{opacity:0.8;}"],I.Color.PrimaryWhite),PT=mi(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),DT=C(Uh).withConfig({displayName:"ImageGallery__AnimatedLoaderIcon",componentId:"sc-biogau-13"})(["z-index:1;margin:",";animation:"," 1s linear infinite;"],I.Spacing[2],PT),OT=({file:e,disabled:t,index:n,loading:r,onRemove:o,deleteDialogTitle:a,deleteBtnLabel:s,cancelBtnLabel:c,styles:{base:l,imagePreview:d,buttons:u}})=>{var v;const[h,{enable:m,disable:p}]=st(),g=!r&&e.type==="uploaded",b=f.useCallback(async()=>{p(),await o(n)},[o,n]),x=e.type==="uploading"&&e.progress<100,y=e.type==="uploaded"&&e.deleting;return i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:h,onClose:p,"data-test":"delete-dialog","aria-labelledby":"delete-dialog__title","aria-describedby":"delete-dialog__description",styles:l==null?void 0:l.modal,children:[i.jsx(dt,{styles:l==null?void 0:l.titleStyle,children:a}),i.jsx(We,{height:1}),i.jsx(ge,{buttonType:ne.Primary,styles:u==null?void 0:u[ne.Primary],id:"delete-dialog__btn-delete","data-test":"delete-dialog__btn-delete",onClick:b,children:s}),u==null&&i.jsx(We,{height:1.5}),i.jsx(ge,{buttonType:ne.Secondary,styles:u==null?void 0:u[ne.Secondary],id:"delete-dialog__btn-cancel","data-test":"delete-dialog__btn-cancel",onClick:p,children:c})]}),i.jsxs(xT,{styles:d==null?void 0:d.cropArea,children:[g&&!y&&i.jsx(vT,{id:"preview-image__remove-btn","data-test":"preview-image__remove-btn","aria-label":"Remove image",disabled:t,onClick:m,styles:d==null?void 0:d.xIcon,children:i.jsx(fT,{})}),(x||y)&&i.jsxs(NT,{children:[i.jsx(DT,{}),i.jsx(jT,{})]}),i.jsx(yT,{children:AT(e.fileType)?i.jsx(IT,{children:i.jsx(ST,{src:e.url,"data-test":"preview-image__thumbnail","data-chromatic":"ignore"})}):i.jsx(wT,{"data-test":"preview-image__icon-file",children:i.jsx(Bs,{})})}),i.jsx(_T,{title:e.filename,"data-test":"preview-image__caption",children:i.jsx(RT,{styles:(v=d==null?void 0:d.imageName)==null?void 0:v.textStyle,children:e.filename})})]})]})},LT=C(qr).withConfig({displayName:"ImageGallery__ImgCamera",componentId:"sc-biogau-14"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),Em=({children:e})=>e?i.jsx(i.Fragment,{children:e}):i.jsx(LT,{"data-test":"government-id-prompt__image--camera"}),FT=C.div.withConfig({displayName:"DocumentsReview__Container",componentId:"sc-12z5v8n-0"})(["display:flex;flex-direction:column;"]),MT=C("div").withConfig({displayName:"DocumentsReview__Header",componentId:"sc-12z5v8n-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),VT=C(ge).withConfig({displayName:"DocumentsReview__SubmitButton",componentId:"sc-12z5v8n-2"})(["position:static;"]);function BT({allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,documentFiles:r,documentFileLimit:o,handleAddError:a,handleAddFiles:s,handleDeviceHandoff:c,handleRemoveFile:l,handleSelectCamera:d,handleSubmit:u,loading:h,localizations:m,submitting:p,uploads:g,pendingDeletions:b}){const x=Yr(),{base:y,buttons:v}=x,_=r.length>0&&g.length===0&&b.length===0&&!h&&!p,A=f.useMemo(()=>{const T=r.map(({id:O,attributes:{name:D,originals:L}})=>({type:"uploaded",filename:D,url:L[0].url,fileType:L[0]["file-type"],id:O,deleting:b.includes(O)})),R=g.map(O=>({type:"uploading",filename:O.file.filename,url:O.file.dataUrl,fileType:O.file.fileType,progress:O.progress,id:String(O.id)}));return[...T,...R]},[r,g,b]);return i.jsxs(FT,{"data-test":"documents-review",children:[i.jsx(Ye,{customImage:n["header-pictograph"],alt:"header pictograph"}),i.jsxs(MT,{children:[i.jsx(dt,{styles:y==null?void 0:y.titleStyle,children:i.jsx(J,{children:m.title})}),i.jsx(ot,{styles:y==null?void 0:y.textStyle,children:i.jsx(J,{children:m.prompt})})]}),i.jsx(ET,{"data-test":"documents-review__image-gallery",disabled:h,addFileDisabled:g.length>0||b.length>0||A.length>=o,allowedCaptureOptions:e,acceptedImageFormats:t,files:A,onAddClick:d,onAddError:a,onChange:s,onDeviceHandoff:c,onRemove:l,captureOptionsDialogTitle:m["capture-options-dialog-title"],webCameraBtnLabel:m["btn-capture"],mobileCameraBtnLabel:m["btn-capture"],uploadBtnLabel:m["btn-upload"],deviceHandoffBtnLabel:m["btn-device-handoff"],deleteDialogTitle:m["delete-dialog-title"],cancelBtnLabel:m["btn-cancel"],deleteBtnLabel:m["btn-delete"],noCaptureOptionsPrompt:m["no-capture-options-prompt"],styles:x}),i.jsx(We,{height:4}),i.jsx(ft,{children:i.jsx(VT,{id:"documents-review__btn-submit","data-test":"documents-review__btn-submit",buttonType:ne.Primary,styles:v==null?void 0:v[ne.Primary],onClick:u,isPending:p,disabled:!_,children:m["btn-submit"]})})]})}function qT({allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,documentFiles:r,documentFileLimit:o,handleAddFiles:a,handleDeviceHandoff:s,handleDrop:c,handleDropRejected:l,handleInputCapture:d,handleRemoveFile:u,handleSelectCamera:h,handleSubmit:m,hideCameraPermissionsDialog:p,isProcessing:g,loading:b,localizations:x,openCameraPermissionsDialog:y,page:v,showCameraPermissionsDialog:_,submitting:A,uploads:T,pendingDeletions:R,multiFileSupported:O,skipPromptPage:D}){const{base:L,buttons:H}=Yr(),M=f.useCallback(async()=>{try{await h()}catch{y()}},[]);if(D&&e.length===0)return i.jsx(vn,{});const B=v==="review"||O&&r.length+T.length>0;return i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:_,onClose:p,styles:L==null?void 0:L.modal,"data-test":"camera-permissions-dialog","aria-labelledby":"camera-permissions-dialog__title","aria-describedby":"camera-permissions-dialog__description",children:[i.jsx(dt,{id:"camera-permissions-dialog__title",styles:L==null?void 0:L.titleStyle,children:i.jsx(J,{children:x["camera-permissions-title"]})}),i.jsx(ot,{id:"camera-permissions-dialog__description",styles:L==null?void 0:L.textStyle,children:i.jsx(J,{children:x["camera-permissions-prompt"]})}),i.jsx(We,{height:2}),i.jsx(ge,{type:"button",id:"camera-permissions-dialog__btn",styles:H==null?void 0:H[ne.Primary],onClick:p,children:x["camera-permissions-btn-continue-web"]})]}),B?i.jsx(BT,{assets:n,allowedCaptureOptions:e,acceptedFileTypes:t,documentFiles:r,documentFileLimit:o,handleAddError:l,handleAddFiles:a,handleDeviceHandoff:s,handleRemoveFile:u,handleSelectCamera:M,handleSubmit:m,loading:b,localizations:x,submitting:A,uploads:T,pendingDeletions:R}):i.jsx(dT,{allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,handleDeviceHandoff:s,handleDrop:c,handleDropRejected:l,handleInputCapture:d,handleSelectCamera:M,isProcessing:g,loading:b,localizations:x,multiFileSupported:O})]})}const UT=1.5,HT=720,km=1920,$T=720,Nm=1080;function zd(){return Yl()?UT:1}function Hg({currentSide:e,facingMode:t,isGovidRedesign:n=!1,isMicroblink:r=!1,enableVideoRecording:o=!1,featureFlags:a={}}){const s=zd();if(n){const c=o&&Yl()?{min:1}:void 0;let l={min:480,ideal:2160,max:2160},d={min:640,ideal:1350,max:1350};return a["inquiry:do-not-use-max-dimensions-video-constraint"]&&(l={ideal:2160},d={ideal:1350}),(a["inquiry:use-low-resolution-govid-redesign"]||a["inquiry:video-low-res-android"]&&nx()&&o)&&(r?(l={min:480,ideal:1920,max:1920},d={min:640,ideal:1080,max:1920}):(l={ideal:1280},d={ideal:960})),ni()?{facingMode:t,width:d,height:l,aspectRatio:c}:{facingMode:t,height:d,width:l,aspectRatio:c}}if(r||s>1)return{facingMode:t,width:{min:640,ideal:1920*s,max:1920*s},height:{min:480,ideal:1080*s,max:1920*s},aspectRatio:1};switch(e){case U.Back:case U.BarcodePdf417:return{facingMode:t,width:{ideal:1280*s},height:{ideal:960*s}};default:return{facingMode:t,width:{ideal:1280*s},height:{ideal:960*s}}}}function $g({facingMode:e}){return{facingMode:e,width:{ideal:1280},height:{ideal:960}}}async function Gg({featureFlags:e,highResolution:t=!1}){let n={facingMode:"user"};if(t&&(n={...n,width:{min:HT,max:km},height:{min:$T,max:Nm}}),e!=null&&e["inquiry:select-device-by-device-id"]&&ix()){const r=await navigator.mediaDevices.getUserMedia({video:!0});As(r);const a=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="videoinput"&&l.label!=="Front Ultra Wide Camera");let s=0,c=null;for(const l of a)try{const d=l.deviceId,u=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:d}}}),m=u.getVideoTracks()[0].getSettings(),p=m.width||0,g=m.height||0,b=p*g;b>s&&p<km&&g<Nm&&(s=b,c=d),As(u)}catch(d){Z(d,"warning")}if(c!=null)return{deviceId:c}}return n}const GT=e=>{var le;const{config:t,debugForcedStatus:n,document:r,documentFiles:o,featureFlags:a,hasCamera:s,inquiry:c,uploads:l,uploadedFiles:d,pendingDeletions:u,addPendingDeletion:h,clearPendingDeletion:m,styles:p}=e,g=((le=t==null?void 0:t["document-file-limit"])!=null?le:0)>1,[b,x]=f.useState(void 0),[y,v]=f.useState([]),[_,{enable:A,disable:T}]=st(),{t:R}=K(),O=Dt();f.useEffect(()=>{if(c==null){N.redirectToStart();return}},[]),f.useEffect(()=>{if(t!=null)if(s==null)e.checkCamera();else{const ee=$y(t,s);ee.length===1?Ie(ee[0]):v(ee)}},[s,t]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("documents.prompt-page.entered",{})}catch{}},[]);const{loading:D}=fr({loader:async()=>{t!=null&&((r==null?void 0:r.id)!==t["document-id"]&&e.clearDocument(),t["document-id"]!=null?await e.loadDocument(t["document-id"]):await e.createDocument({kind:t.kind,fileLimit:t["document-file-limit"],fieldKey:t["field-key-document"]}))},deps:[],skip:t==null,onError:ee=>{throw ee},onNetworkError:ee=>{throw ee}}),{error:L,callback:H}=It(async ee=>{if(r!=null)try{await e.createDocumentFile({file:ee,captureMethod:ut.Upload,document:r,t:R})}catch(ce){throw e.clearUpload(ee),ce}},[r,R]);Et({error:L,onError:()=>e.showMessage(R("documents.prompt.failed-select-image")),onNetworkError:()=>e.showMessage(R("errors.network"))});const{error:M,callback:B}=It(async ee=>{await e.deleteDocumentFile(ee),r!=null&&await e.loadDocument(r.id)},[r]);Et({error:M,onError:()=>e.showMessage(R("errors.network")),onNetworkError:()=>e.showMessage(R("errors.network"))});const{loading:V,error:q,callback:$}=It(async()=>{e.clearMessages(),await e.documentSubmit({inquiry:c,debugForcedStatus:n,t:R,uploadedFiles:d})},[c,n,R,d]);Et({error:q,onError:()=>e.showMessage(R("errors.network")),onNetworkError:()=>e.showMessage(R("errors.network"))});const Q=async(ee,ce)=>{try{const _e=await Ao(ee),pe={filename:`${new Date().toISOString()}_${ce}_${ee.name}`,fileType:ee.type,dataUrl:_e};return e.uploadFile(pe),pe}catch(_e){switch(z.logAmplitude("document.upload.errored",{file:{type:ee==null?void 0:ee.type}}),_e.name){case"NotReadableError":e.showMessage(R("documents.prompt.failed-select-image-permissions"));break;default:e.showMessage(R("documents.prompt.failed-select-image"))}}},G=async ee=>{h(ee);try{await B(ee)}finally{m(ee)}},Y=async ee=>{N.onEvent(Oe.DocumentUpload);const ce=(await Promise.all(ee.map((_e,pe)=>Q(_e,pe)))).filter(_e=>_e!=null);if(ce.length===0){x(void 0);return}if(g)try{await Promise.all(ce.map(H)),r!=null&&e.loadDocument(r.id).then(()=>ce.map(e.clearUpload))}finally{x(void 0)}else e.saveCaptureMethod(ut.Upload),O.push(pa(Nt.Check))},re=async ee=>{e.clearMessages(),x(at.SelectCamera),z.logAmplitude("document.camera.preload");try{const ce=$g({facingMode:Vs()});e.setVideoConstraints(ce),await An.prepare({video:ce},a),ee(pa(Nt.TakePhoto))}catch(ce){const _e=ce;throw z.logAmplitude("document.camera.errored",{error:{name:_e.name,message:_e.message}}),N.onEvent(Oe.LoadCameraFailed,{error:_e.name,message:_e.message}),x(void 0),_e}},ae=ee=>{e.clearMessages(),x(at.UploadImage),z.logAmplitude("document.upload",{method:"drop",files:ee.map(ce=>({name:ce==null?void 0:ce.name,type:ce==null?void 0:ce.type,size:ce==null?void 0:ce.size}))}),Y(ee)},Ce=ee=>{if(t==null)return;e.clearMessages();const ce=t["accepted-file-types"],_e=ee.filter(({file:pe})=>!ce.includes(pe.type));_e.length>0?e.showMessage(R("documents.errors.disabled-file-type",{uploadedFileExtension:lr(_e[0].file.type),acceptedFileExtensions:ce.map(lr).join(", "),count:ce.length})):e.showMessage(R("documents.prompt.failed-select-image")),x(void 0)},we=ee=>{e.clearMessages(),x(at.UploadImage),z.logAmplitude("document.camera.upload",{method:"input_capture",files:[{name:ee==null?void 0:ee.name,type:ee==null?void 0:ee.type,size:ee==null?void 0:ee.size}]}),Y([ee])},me=ee=>{b==null&&(e.clearMessages(),x(at.DeviceHandoff),ee("/inquiry/device-handoff/prompt"))},Ie=async ee=>{switch(ee){case"device_handoff":me(O.replace);break;case"web_camera":case"mobile_camera":case"upload":v([ee]);break;default:ct(ee)}};return c==null||t==null||s==null?null:i.jsx(sc,{value:p,children:i.jsx(qT,{allowedCaptureOptions:y,acceptedFileTypes:t["accepted-file-types"],assets:t.assets["prompt-page"],documentFiles:o,documentFileLimit:t["document-file-limit"],handleAddFiles:Y,handleDeviceHandoff:()=>me(O.push),handleDrop:ae,handleDropRejected:Ce,handleInputCapture:we,handleRemoveFile:G,handleSelectCamera:()=>re(O.push),handleSubmit:$,hideCameraPermissionsDialog:T,isProcessing:b,loading:D,localizations:t.localizations["prompt-page"],openCameraPermissionsDialog:A,page:t["start-page"],showCameraPermissionsDialog:_,submitting:V,uploads:l,pendingDeletions:u,multiFileSupported:g,skipPromptPage:!1})})};function WT(e){return{config:Na(e),debugForcedStatus:e.test.forcedStatus,document:Js(e),documentFiles:e.document.documentFiles,featureFlags:e.inquiry.featureFlags,hasCamera:e.ui.hasCamera,inquiry:e.inquiry.inquiry,uploads:e.document.uploads,pendingDeletions:e.document.pendingDeletions,uploadedFiles:Tf(e),styles:ja(e.inquiry)}}const zT={createDocumentFile:jg,checkCamera:$r,clearDocument:yg,clearMessages:Lt,clearUpload:uc,createDocument:r8,documentSubmit:Mg,loadDocument:Ng,deleteDocumentFile:o8,saveCaptureMethod:hr,setVideoConstraints:Sg,showMessage:se,uploadFile:dc,addPendingDeletion:OA,clearPendingDeletion:LA},YT=ke(WT,zT),KT=YT(GT),Wg=f.createContext(Pf()),On=()=>f.useContext(Wg),Yi=({children:e,value:t})=>{const n=f.useMemo(()=>Pf(t),[t]);return i.jsx(Wg.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n.buttons,children:e})})},QT=C.div.withConfig({displayName:"InquiryGovernmentIdAutoclassificationFailureView__FailureReasonPictograph",componentId:"sc-15hry4i-0"})(["display:flex;flex-direction:column;align-items:",";"],({justify:e})=>e!=null?e:"center");function ZT({localizations:e,autoclassificationFailureReason:t,handleContinue:n}){var R,O,D,L,H,M,B,V,q,$,Q,G,Y,re,ae,Ce,we,me,Ie,le,ee,ce,_e,pe,Je,lt,ue,Pe,Le;const{base:r,buttons:o,imageLocal:a}=On(),s=t===ra.REJECTED,c=E((O=(R=a==null?void 0:a.illustration)==null?void 0:R.height)==null?void 0:O.base.base),l=E((L=(D=a==null?void 0:a.illustration)==null?void 0:D.width)==null?void 0:L.base.base),d=E((B=(M=(H=a==null?void 0:a.illustration)==null?void 0:H.margin)==null?void 0:M.base.base)==null?void 0:B.top),u=E(($=(q=(V=a==null?void 0:a.illustration)==null?void 0:V.margin)==null?void 0:q.base.base)==null?void 0:$.bottom),h=E((Y=(G=(Q=a==null?void 0:a.illustration)==null?void 0:Q.margin)==null?void 0:G.base.base)==null?void 0:Y.left),m=E((Ce=(ae=(re=a==null?void 0:a.illustration)==null?void 0:re.margin)==null?void 0:ae.base.base)==null?void 0:Ce.right),p=(we=a==null?void 0:a.illustration)==null?void 0:we.justify.base.base,g=k((le=(Ie=(me=a==null?void 0:a.illustration)==null?void 0:me["fill-color"])==null?void 0:Ie.base)==null?void 0:le.base),b=k((ce=(ee=a==null?void 0:a.illustration)==null?void 0:ee["fill-color"])==null?void 0:ce.background.base),x=k((pe=(_e=a==null?void 0:a.illustration)==null?void 0:_e["fill-color"])==null?void 0:pe.highlight.base),y=k((ue=(lt=(Je=a==null?void 0:a.illustration)==null?void 0:Je["stroke-color"])==null?void 0:lt.base)==null?void 0:ue.base),v={$primaryColor:g,$backgroundColor:b,$highlightColor:x,$strokeColor:y},_=Wf[ie.IdFrontIcon],A=(Pe=s?e==null?void 0:e["id-class-rejected-title"]:e==null?void 0:e["unable-to-classify-document-title"])!=null?Pe:"Failed to autoclassify",T=(Le=s?e==null?void 0:e["id-class-rejected-continue-button-text"]:e==null?void 0:e["unable-to-classify-document-continue-button-text"])!=null?Le:"Continue";return i.jsxs(i.Fragment,{children:[i.jsx(dt,{id:"autoclassification-failure__title",styles:r==null?void 0:r.titleStyle,children:i.jsx(J,{children:A})}),i.jsx(QT,{role:"img","aria-label":"Failed icon",justify:p,children:i.jsx(ye,{...v,children:i.jsx(ap,{style:{width:l!=null?l:E(_.width),height:c!=null?c:E(_.height),marginTop:d,marginBottom:u,marginLeft:h,marginRight:m}})})}),i.jsx(We,{height:6}),i.jsx(ge,{type:"button",id:"autoclassification-failure__btn",buttonType:ne.Primary,styles:o==null?void 0:o[ne.Primary],onClick:n,children:T})]})}const JT=e=>{const{autoclassificationFailureReason:t,history:n,config:r,styles:o}=e,a=()=>{n.push(Vt(0,Ue.AutoclassificationSelect))},s=r?er(r,"auto-classification-page"):void 0;return i.jsx(Yi,{value:o,children:i.jsx(ZT,{localizations:s,autoclassificationFailureReason:t,handleContinue:a})})};function XT(e){return{styles:Qi(e.inquiry),inquiry:e.inquiry.inquiry,config:hi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,autoclassificationFailureReason:e.verification.autoclassificationFailureReason,uiStatus:e.ui.status}}const eE={showMessage:se},tE=ke(XT,eE),nE=tE(JT),iE=C("div").withConfig({displayName:"InquiryGovernmentIdAutoclassificationSelectView__Container",componentId:"sc-hjv5m4-0"})([""," text-transform:capitalize;"],Bi),rE=C("div").withConfig({displayName:"InquiryGovernmentIdAutoclassificationSelectView__OutlinedLabelContainer",componentId:"sc-hjv5m4-1"})(["",""],({styles:e})=>Dn(e));function oE({config:e,localizations:t,idClassesByCountries:n,selectIdTypeAndContinue:r,defaultCountry:o}){var R,O,D,L;const{base:a,buttons:s,inputSelect:c}=On(),[l,d]=f.useState(()=>n.map(H=>H["country-code"]).includes(o)?o:""),[u,h]=f.useState(""),m=f.useMemo(()=>n.map(H=>({text:H["country-name"],value:H["country-code"]})),[n]),p=f.useMemo(()=>e?er(e,"select-page",{specifiedCountryCode:l===""?void 0:l}):null,[e,l]),g=f.useMemo(()=>{const H=n.filter(M=>M["country-code"]===l);return H.length===0?[]:H[0]["id-configs"].map(M=>({text:(()=>{var V;return p&&(V=vl(p,l===""?void 0:l,M.class))!=null?V:M.class})(),value:M.class}))},[n,p,l]),b=()=>{l!==""&&u!==""&&r(l,u)},x=H=>{H!==l&&h(""),d(H)},y=H=>{h(H)},v=(R=t==null?void 0:t["manual-classification-title"])!=null?R:"Select your country and ID type",_=(O=t==null?void 0:t["country-input-title"])!=null?O:"Country",A=(D=t==null?void 0:t["id-class-input-title"])!=null?D:"Accepted IDs",T=(L=t==null?void 0:t["manual-classification-continue-button-text"])!=null?L:"Continue";return i.jsxs(i.Fragment,{children:[i.jsx(dt,{id:"autoclassification-select__title",styles:a==null?void 0:a.titleStyle,children:i.jsx(J,{children:v})}),i.jsx(jm,{styles:c==null?void 0:c.base,id:"autoclassification-select__country",label:_,value:l,options:m,handleChange:x}),l&&i.jsx(jm,{styles:c==null?void 0:c.base,id:"autoclassification-select__id_class",label:A,value:u,options:g,handleChange:y}),i.jsx("div",{children:i.jsx(ge,{type:"button",id:"autoclassification-select__continue_btn",buttonType:ne.Primary,styles:s==null?void 0:s[ne.Primary],disabled:l===""||u==="",onClick:b,children:T})})]})}function jm({styles:e,id:t,label:n,value:r,options:o,handleChange:a}){return i.jsxs(rE,{styles:e,children:[i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:t},children:n}),i.jsx(iE,{children:i.jsxs(jd,{value:r,onChange:s=>a(s.target.value),id:t,styles:e,children:[i.jsx("option",{value:""}),o.map(s=>i.jsx("option",{value:s.value,children:s.text},s.value))]})})]})}const aE=e=>{const{idClassesByCountries:t,history:n,config:r,styles:o}=e;f.useEffect(()=>{e.resetAutoclassificationState()},[]);const a=(c,l)=>{e.saveAutoclassificationIdSelection(c,l),n.push(Vt(0,Ue.Prompt))},s=r?er(r,"auto-classification-page"):void 0;return i.jsx(Yi,{value:o,children:i.jsx(oE,{localizations:s,config:r,idClassesByCountries:t,selectIdTypeAndContinue:a,defaultCountry:e.defaultCountry})})};function sE(e){return{styles:Qi(e.inquiry),inquiry:e.inquiry.inquiry,config:hi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,idClassesByCountries:e.verification.idClassesByCountries,defaultCountry:e.locale.localeInfo.country_code}}const cE={saveAutoclassificationIdSelection:oy,resetAutoclassificationState:hd},lE=ke(sE,cE),dE=lE(aE),uE=C("nav").withConfig({displayName:"Navbar__Nav",componentId:"sc-hxvjv3-0"})(["position:absolute;z-index:",";pointer-events:none;top:0;top:env(safe-area-inset-top);left:0;right:0;box-sizing:content-box;display:flex;flex-wrap:none;align-items:center;justify-content:space-between;height:",";margin:0;padding:",";padding-bottom:",";padding-left:calc("," + env(safe-area-inset-left));padding-right:calc("," + env(safe-area-inset-right));border-bottom:",";background-color:",";"],At.navbar,I.Spacing[5],F.widgetPadding,I.Spacing[4],F.widgetPadding,F.widgetPadding,({styles:e})=>e!=null?`${e.borderWidth} solid ${e.borderColor}`:"",({styles:e})=>e==null?void 0:e.backgroundColor),Pm=C(fo).withConfig({displayName:"Navbar__NavOption",componentId:"sc-hxvjv3-1"})(["height:",";width:",";margin:-",";padding:",";svg{color:",";}"],I.Spacing[5],I.Spacing[5],I.Spacing[1],I.Spacing[1],({iconColor:e,theme:t})=>e!=null?e:t.colorIconHeader),mE=C(pc).withConfig({displayName:"Navbar__OrganizationLogo",componentId:"sc-hxvjv3-2"})(["display:block;object-fit:contain;height:",";"],({theme:e})=>{var t;return(t=e.navbarLogoHeight)!=null?t:`${I.Spacing[5]}`}),hE=C.div.withConfig({displayName:"Navbar__LogoContainer",componentId:"sc-hxvjv3-3"})(["flex:auto;display:flex;max-width:100%;max-height:100%;",";"],({logoDisplay:e})=>{switch(e){case Oi.None:return W(["visibility:hidden;"]);case Oi.Start:return W(["&:not(:first-child){margin-left:",";}justify-content:flex-start;"],I.Spacing[5]);case Oi.End:return W(["&:not(:last-child){margin-right:",";}justify-content:flex-end;"],I.Spacing[5]);case Oi.Center:return W(["&:not(:first-child){margin-right:",";}&:not(:last-child){margin-left:",";}justify-content:center;"],I.Spacing[5],I.Spacing[5])}}),zg=({onBack:e,onClose:t,showBackButton:n,showCloseButton:r,styles:o,colorIconHeader:a,logoContentType:s,logoDisplay:c=Oi.None,logoUrl:l,loading:d,id:u,"data-test":h="navbar"})=>i.jsxs(uE,{id:u,"data-test":h,styles:o,children:[n&&i.jsx(Pm,{onClick:e,id:"navbar__back-link","data-test":"navbar__back-link",disabled:d,iconColor:a,"aria-label":"back",children:i.jsx(yx,{"aria-hidden":!0})}),i.jsx(hE,{logoDisplay:c,role:"presentation",children:c!==Oi.None&&l!=null&&i.jsx(mE,{contentType:s,"data-test":"navbar__logo",alt:"logo",src:l})}),r&&i.jsx(Pm,{onClick:t,id:"navbar__close-link","data-test":"navbar__close-link",disabled:d,iconColor:a,"aria-label":"close",children:i.jsx(Rp,{"aria-hidden":!0})})]}),Yg="navbar__inquiry-dynamic-flow",pE=["/widget","/verify","/inquiry/create-persona/passkey-registration","/inquiry/create-persona/success","/inquiry/verify-with-persona/passkey-authentication","/inquiry/verify-with-persona/success","/inquiry/verify-with-persona/error","/inquiry/create-persona/update-success"],fE=["/widget","/verify","/inquiry/device-handoff/email","/inquiry/device-handoff/prompt","/inquiry/device-handoff/sms","/inquiry/device-handoff/sms/sent","/inquiry/documents/capture","/inquiry/documents/check","/inquiry/documents/pending","/inquiry/documents/prompt","/inquiry/government-id/:step/capture","/inquiry/government-id/:step/check","/inquiry/government-id/:step/prompt","/inquiry/government-id/pending","/inquiry/government-id/select","/inquiry/selfie/center/prompt","/inquiry/selfie/record","/inquiry/selfie/check","/inquiry/selfie-reflection","/inquiry/create-persona/passkey-registration","/inquiry/create-persona/success","/inquiry/verify-with-persona/passkey-authentication","/inquiry/verify-with-persona/success","/inquiry/verify-with-persona/error","/inquiry/create-persona/update-success"],gE=["/inquiry/ui","/inquiry/documents/prompt","/inquiry/government-id/select","/inquiry/selfie/center/prompt"],bE=["/inquiry/create-persona/passkey-registration","/inquiry/create-persona/success","/inquiry/verify-with-persona/passkey-authentication","/inquiry/verify-with-persona/success","/inquiry/verify-with-persona/error","/inquiry/create-persona/update-success"],CE=["/inquiry/inactive","/verify/invalid"],xE=()=>{var V,q,$,Q,G,Y,re,ae,Ce,we,me,Ie,le,ee,ce,_e,pe,Je,lt,ue,Pe,Le,Fe,nt;const e=Ke(Qe=>Qe.ui.status),t=Ke(Qe=>Qe.inquiry.inquiry),n=Ke(Qe=>Qe.inquiry.featureFlags),r=Ke(Qe=>!!Qe.inquiry.popupUrl),o=($=(q=(V=t.attributes["next-step"])==null?void 0:V.config)==null?void 0:q.localizations)==null?void 0:$["cancel-dialog"],a=Ke(pi),s=Ke(Qe=>Qe.ui.showConfirmCancelDialog),c=Ps(),{t:l}=K(),d=Dt(),u=Vr(),[h,{enable:m,disable:p}]=st(!1);f.useEffect(()=>{m();const Qe=setTimeout(p,500);return()=>{clearTimeout(Qe)}},[u]);const g=f.useMemo(()=>{var Qe;return!(d.index==null||d.index<=0||n["inquiry:remove-clear-memory-history"]&&((Qe=u.state)!=null&&Qe.preventBackNavigation)||gE.some(Ne=>Sn(u.pathname,{path:Ne,exact:!0,strict:!1}))||bE.some(Ne=>Sn(u.pathname,{path:Ne,exact:!0,strict:!1})))},[d.index,u.pathname,u.state,n]),b=f.useMemo(()=>t.attributes["next-step"].config["back-step-enabled"]?!g:!1,[t,g]),{error:x,callback:y}=It(async()=>{b?c(Iy(t)):g?d.goBack():Z(new Error("Tried to navigate back when neither transition nor history back permitted"),"warning")},[u.pathname,b,g,t]),v=f.useRef(Date.now());f.useEffect(()=>{v.current=Date.now()},[u.pathname]),Et({error:x,onError:()=>{c(se("Unexpected error, please try again."))},onNetworkError:()=>c(se("Unexpected error, please try again."))});const _=()=>{CE.some(Qe=>Sn(u.pathname,{path:Qe,exact:!1,strict:!1}))?A():c(mr())},A=()=>{vd(),N.onEvent(Oe.Exit,{inquiryId:t.id,sessionToken:te.accessToken},{inquiry:t}),n["inquiry:remove-clear-memory-history"]?d.push("/widget",{preventBackNavigation:!0}):(Vn(d),d.push("/widget")),c(Sc())},T=e===tn.Blocked,R=e===tn.Transitioning,O=t.attributes["next-step"].config["cancel-button-enabled"]&&!N.isHosted&&!N.isInline&&!Sd(t)&&!pE.some(Qe=>Sn(u.pathname,{path:Qe,exact:!0,strict:!1}))&&!T&&!r,D=(b||g)&&!T&&!N.isReusablePersonaPopup,L=t.attributes.logo;let H=L==null?void 0:L.display;(!H||fE.some(Qe=>Sn(u.pathname,{path:Qe,exact:!0,strict:!1})))&&(H=Oi.None);const M={backgroundColor:k((G=(Q=a==null?void 0:a["background-color"])==null?void 0:Q.header)==null?void 0:G.base),borderColor:k((re=(Y=a==null?void 0:a["border-color"])==null?void 0:Y.header)==null?void 0:re.base),borderWidth:E((we=(Ce=(ae=a==null?void 0:a["border-width"])==null?void 0:ae.header)==null?void 0:Ce.base)==null?void 0:we.bottom)},B={backgroundColor:(Ie=(me=a==null?void 0:a["background-color"])==null?void 0:me.base)==null?void 0:Ie.base,padding:(ee=(le=a==null?void 0:a.padding)==null?void 0:le.modal)==null?void 0:ee.base,border:{radius:(_e=(ce=a==null?void 0:a["border-radius"])==null?void 0:ce.modal)==null?void 0:_e.base}};return i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:s,onClose:()=>c(Sc()),styles:B,"data-test":"confirm-exit-dialog","aria-labelledby":"confirm-exit-dialog__title","aria-describedby":"confirm-exit-dialog__description",children:[i.jsx(dt,{id:"confirm-exit-dialog__title",styles:(pe=a==null?void 0:a["title-style"])==null?void 0:pe.base.base,children:i.jsx(J,{children:(Je=o==null?void 0:o.title)!=null?Je:l("exit.title")})}),i.jsx(ot,{id:"confirm-exit-dialog__description",styles:(lt=a==null?void 0:a["text-style"])==null?void 0:lt.base.base,children:i.jsx(J,{children:(ue=o==null?void 0:o.prompt)!=null?ue:l("exit.prompt")})}),i.jsx(We,{height:2}),i.jsx(ge,{id:"confirm-exit-dialog__button--close","data-test":"confirm-exit-dialog__button--close",buttonType:ne.Primary,styles:(Pe=a==null?void 0:a["button-primary-style"])==null?void 0:Pe.base.base,onClick:A,children:(Le=o==null?void 0:o["btn-submit"])!=null?Le:l("exit.btn-submit")}),a==null&&i.jsx(We,{height:1.5}),i.jsx(ge,{id:"confirm-exit-dialog__button--resume","data-test":"confirm-exit-dialog__button--resume",buttonType:ne.Secondary,styles:(Fe=a==null?void 0:a["button-secondary-style"])==null?void 0:Fe.base.base,onClick:()=>c(Sc()),children:(nt=o==null?void 0:o["btn-resume"])!=null?nt:i.jsx(Bn,{i18nKey:"exit.or-go-back",defaults:"Or <0>click here to resume</0>",components:[i.jsx(f.Fragment,{children:"click here to resume"},0)],children:"Or click here to resume"})})]}),i.jsx(zg,{id:Yg,"data-test":"navbar__inquiry-dynamic-flow",onBack:y,onClose:_,styles:M,showBackButton:D,showCloseButton:O,colorIconHeader:k(a==null?void 0:a["text-color"]["header-button"].base),logoContentType:L==null?void 0:L["content-type"],logoDisplay:H,logoUrl:L==null?void 0:L.url,loading:R||h})]})},vE=C.div.withConfig({displayName:"AboveFrameHint__AboveFrameHintContainer",componentId:"sc-1eqi7b5-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:-16px;transform:translateY(-100%);border-radius:4px;padding:8px 16px;background-color:rgba(255,255,255,0.15);color:",";width:100%;text-align:center;font-size:14px;line-height:150%;z-index:1;transition:opacity ",";opacity:",";"],I.Color.PrimaryWhite,it.Fast,({visible:e})=>e?1:0),yE=({text:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{e&&n(e)},[e]),i.jsx(vE,{visible:!!e,children:i.jsx("div",{role:"alert",children:e||t})})},IE=1,SE=1,wE=14,_E=C.div.withConfig({displayName:"CaptureFrameLabel__CaptureFrameLabelFrame",componentId:"sc-1quv8d1-0"})(["position:relative;align-items:flex-start;background:rgb(230,230,230);color:",";padding:","px 12px;display:flex;border-radius:",";height:",";width:100%;transition:",";"],({styles:e})=>e!=null?k(e==null?void 0:e["text-color"].base.base):I.Color.CoreSlate800,wE,({borderRadius:e})=>e,({height:e})=>e!=null?e:"auto",({collapsed:e})=>`height ${SE}s,
    border-radius ${IE}s steps(1, ${e?"jump-end":"jump-start"})`),RE=C.div.withConfig({displayName:"CaptureFrameLabel__CaptureFrameLabelContents",componentId:"sc-1quv8d1-1"})(["display:flex;align-items:center;font-size:14px;line-height:150%;img,svg{height:auto !important;width:40px !important;}svg{path{mix-blend-mode:normal !important;}}"]),AE=C("div").withConfig({displayName:"CaptureFrameLabel__CaptureFrameLabelText",componentId:"sc-1quv8d1-2"})(["align-self:center;margin-left:12px;"]),TE=C.span.withConfig({displayName:"CaptureFrameLabel__PictographContainer",componentId:"sc-1quv8d1-3"})(["flex:1 0 auto;height:auto !important;width:40px !important;"]),EE=(e,t,n)=>{var o,a,s,c,l;let r;return n==="pp"||n==="ipp"?t===U.PassportSignature?r=e["passport-signature-pictograph"]:r=e["passport-front-pictograph"]:t===U.Back?r=e["id-back-pictograph"]:t===U.BarcodePdf417?r=e["barcode-pdf417-pictograph"]:t===U.Front||t===U.FrontOrBack?r=e["id-front-pictograph"]:t===U.PassportSignature&&(r=e["passport-signature-pictograph"]),((c=(s=(a=(o=r==null?void 0:r.styles)==null?void 0:o.width)==null?void 0:a.base)==null?void 0:s.base)==null?void 0:c.value)===0||((l=r==null?void 0:r.attributes)==null?void 0:l.width)==="0px"},kE=({assets:e,currentSide:t,governmentIdClass:n,styles:r})=>{if(n==="pp"||n==="ipp")switch(t){case U.PassportSignature:return i.jsx(Ye,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(ye,{style:{lineHeight:0},$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(Ru,{})})});default:return i.jsx(Ye,{customImage:e["passport-front-pictograph"],alt:"passport front pictograph",children:i.jsx(ye,{style:{lineHeight:0},$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(EC,{})})})}switch(t){case U.Back:return i.jsx(Ye,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(ye,{style:{lineHeight:0},$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(jC,{style:{height:"46px",width:"74px"}})})});case U.BarcodePdf417:return i.jsx(Ye,{customImage:e["barcode-pdf417-pictograph"],alt:"Barcode PDF417 pictograph",children:i.jsx(ye,{style:{lineHeight:0},$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(NC,{style:{height:"46px",width:"74px"}})})});case U.Front:case U.FrontOrBack:return i.jsx(Ye,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(ye,{style:{lineHeight:0},$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(kC,{style:{height:"46px",width:"74px"}})})});case U.PassportSignature:return i.jsx(Ye,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(ye,{style:{lineHeight:0},$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(Ru,{})})});default:return null}},NE=(e,t)=>{var o;const{captureHintIcon:n}=On();if(e.text==null||e.text.length===0)return null;const r=!EE(e.assets,e.side,e.idClass);return i.jsx(_E,{collapsed:!1,height:(o=e.height)!=null?o:"auto",styles:e.styles,borderRadius:e.borderRadius,children:i.jsxs(RE,{ref:t,children:[r&&i.jsx(TE,{"aria-hidden":"true",children:i.jsx(kE,{assets:e.assets,currentSide:e.side,governmentIdClass:e.idClass,styles:n})}),i.jsx(AE,{children:e.text})]})})},Kg=f.forwardRef(NE),jE=C.div.withConfig({displayName:"InFrameHint__InFrameHintContainer",componentId:"sc-rbdkd8-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";text-align:center;font-size:14px;line-height:150%;z-index:1;width:80%;transition:opacity ",";opacity:",";"],I.Color.PrimaryWhite,it.Fast,({visible:e})=>e?1:0),PE=C.div.withConfig({displayName:"InFrameHint__InFrameHintContainerInner",componentId:"sc-rbdkd8-1"})(["background-color:rgba(0,0,0,0.5);border-radius:4px;padding:8px 16px;min-width:50%;"]),DE=({text:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{e&&n(e)},[e]),i.jsx(jE,{visible:!!e,children:i.jsx(PE,{role:"alert",children:e||t})})},OE=C(Fs).withConfig({displayName:"IdCornersGuide__CornerTopLeft",componentId:"sc-1mt1yfs-0"})(["position:absolute;top:",";left:",";path{stroke:",";transition:stroke ",";}"],I.Spacing[3],I.Spacing[3],({$highlightCorners:e})=>e?I.Color.CoreGreen400:null,it.Fast),LE=C(Fs).withConfig({displayName:"IdCornersGuide__CornerTopRight",componentId:"sc-1mt1yfs-1"})(["position:absolute;top:",";right:",";transform:rotate(90deg);path{stroke:",";transition:stroke ",";}"],I.Spacing[3],I.Spacing[3],({$highlightCorners:e})=>e?I.Color.CoreGreen400:null,it.Fast),FE=C(Fs).withConfig({displayName:"IdCornersGuide__CornerBottomRight",componentId:"sc-1mt1yfs-2"})(["position:absolute;bottom:",";right:",";transform:rotate(180deg);path{stroke:",";transition:stroke ",";}"],I.Spacing[3],I.Spacing[3],({$highlightCorners:e})=>e?I.Color.CoreGreen400:null,it.Fast),ME=C(Fs).withConfig({displayName:"IdCornersGuide__CornerBottomLeft",componentId:"sc-1mt1yfs-3"})(["position:absolute;bottom:",";left:",";transform:rotate(270deg);path{stroke:",";transition:stroke ",";}"],I.Spacing[3],I.Spacing[3],({$highlightCorners:e})=>e?I.Color.CoreGreen400:null,it.Fast);function gc({highlightCorners:e}){return i.jsxs(i.Fragment,{children:[i.jsx(OE,{$highlightCorners:e,"aria-hidden":!0}),i.jsx(LE,{$highlightCorners:e,"aria-hidden":!0}),i.jsx(ME,{$highlightCorners:e,"aria-hidden":!0}),i.jsx(FE,{$highlightCorners:e,"aria-hidden":!0})]})}const VE=C("div").withConfig({displayName:"IdBackGuide__Positioner",componentId:"sc-ojzxwa-0"})(["",";width:100%;"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]));function BE({mirrored:e=!1,hideGuide:t=!1,highlightCorners:n=!1}){return i.jsx(VE,{"data-test":"id-back-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(gc,{highlightCorners:n}),i.jsx(cp,{style:{objectFit:"cover",opacity:t?0:1,transition:`opacity ${it.Fast}`}})]})})}const qE=C("div").withConfig({displayName:"IdBarcodeGuide__Positioner",componentId:"sc-1bbdq8d-0"})(["",";width:100%;"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]));function UE({mirrored:e=!1,hideGuide:t=!1}){return i.jsx(qE,{"data-test":"id-back-guide",mirrored:e,children:i.jsx("div",{style:{paddingBottom:"35%",position:"relative",width:"100%"},children:i.jsx("div",{style:{position:"absolute",inset:"17.75%"},children:i.jsx(PC,{style:{height:"100%",objectFit:"cover",opacity:t?0:1,position:"absolute",transition:`opacity ${it.Fast}`,width:"100%"}})})})})}const HE=C("div").withConfig({displayName:"IdCornersOnlyGuide__Positioner",componentId:"sc-1ico4mx-0"})(["",";width:100%;"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"])),$E=C("div").withConfig({displayName:"IdCornersOnlyGuide__SimpleGuide",componentId:"sc-1ico4mx-1"})(["padding-bottom:65.97%;width:100%;"]);function GE({mirrored:e=!1,highlightCorners:t=!1}){return i.jsx(HE,{"data-test":"id-corners-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(gc,{highlightCorners:t}),i.jsx($E,{})]})})}const WE=C("div").withConfig({displayName:"IdFrontGuide__Positioner",componentId:"sc-ezk9hl-0"})(["",";width:100%;"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]));function zE({mirrored:e=!1,hideGuide:t=!1,highlightCorners:n=!1}){return i.jsx(WE,{"data-test":"id-front-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(gc,{highlightCorners:n}),i.jsx(lp,{style:{objectFit:"cover",opacity:t?0:1,transition:`opacity ${it.Fast}`}})]})})}const YE=C("div").withConfig({displayName:"IdFrontRightPortraitGuide__Positioner",componentId:"sc-2hpaxj-0"})(["",";width:100%;"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]));function KE({mirrored:e=!1,hideGuide:t=!1,highlightCorners:n=!1}){return i.jsx(YE,{"data-test":"id-front-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(gc,{highlightCorners:n}),i.jsx(DC,{style:{objectFit:"cover",opacity:t?0:1,transition:`opacity ${it.Fast}`}})]})})}const QE=C("div").withConfig({displayName:"MrzTwoLineGuide__Positioner",componentId:"sc-1thhldn-0"})(["position:relative;left:0;right:0;top:100%;bottom:100%;",";visibility:",";width:100%;"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]),({hideGuide:e})=>e?"hidden":"visible");function ZE({mirrored:e=!1,hideGuide:t=!1}){return i.jsx(QE,{"data-test":"mrz-two-line-guide",mirrored:e,hideGuide:t,children:i.jsx(dp,{})})}const JE=mi(["0%{opacity:100;}100%{opacity:0;}"]),XE=C("div").withConfig({displayName:"OverlayImage__Flash",componentId:"sc-1sy16p7-0"})(["position:absolute;top:0;left:0;height:100%;width:100%;background-color:",";opacity:0;animation:"," 1s;"],I.Color.PrimaryWhite,JE),e6=C("div").withConfig({displayName:"OverlayImage__Positioner",componentId:"sc-1sy16p7-1"})(["transform:translate(-50%,-50%);width:100%;position:absolute;top:50%;left:50%;& > div,& > img{margin:auto;}"]),Dm=C("div").withConfig({displayName:"OverlayImage__SimpleGuide",componentId:"sc-1sy16p7-2"})(["padding-bottom:65.97%;width:100%;"]),t6=C("div").withConfig({displayName:"OverlayImage__BarcodeImageContainer",componentId:"sc-1sy16p7-3"})(["position:absolute;margin-left:20%;margin-right:20%;padding-top:17%;width:60%;top:50%;transform:translateY(-50%);"]),n6=C(up).withConfig({displayName:"OverlayImage__IdBarcodeGenericGuideStyled",componentId:"sc-1sy16p7-4"})(["top:0;left:0;position:absolute;width:100%;height:100%;"]),i6=e=>{const{captureOverlay:t,hideGuide:n,highlightCorners:r,isShortBarcodeOverlay:o,showFlash:a}=e,s=()=>{switch(t==null?void 0:t["overlay-fallback"]){case ir.Passport:return i.jsx(ZE,{hideGuide:n});case ir.IdFront:return i.jsx(zE,{hideGuide:n,highlightCorners:r});case ir.IdFrontRightPortrait:return i.jsx(KE,{hideGuide:n,highlightCorners:r});case ir.IdBack:return i.jsx(BE,{hideGuide:n,highlightCorners:r});case ir.Barcode:return o?i.jsx(UE,{}):i.jsx(Dm,{children:i.jsx(t6,{children:i.jsx(n6,{preserveAspectRatio:"none"})})});case ir.CornersOnly:return i.jsx(GE,{highlightCorners:r});case ir.Empty:default:return i.jsx(Dm,{})}};return i.jsxs(i.Fragment,{children:[i.jsx(e6,{children:i.jsx(Ye,{customImage:t==null?void 0:t.overlay,alt:"ID capture overlay",children:s()})}),a&&i.jsx(XE,{})]})},Yd=1,Qg=1,r6=8,o6=3,Zg=e=>{var t,n;return(n=E((t=e==null?void 0:e.border)==null?void 0:t.radius))!=null?n:`${r6}px`},ao=e=>{var t,n,r;return(r=E((n=(t=e==null?void 0:e.border)==null?void 0:t.width)==null?void 0:n.top))!=null?r:`${o6}px`},a6=e=>{var t,n;return(n=k((t=e==null?void 0:e.border)==null?void 0:t.color))!=null?n:I.Color.PrimaryWhite},Jg=e=>`calc(${Zg(e)} - ${ao(e)})`,so=.8,Kd=.8,Qd=.4242,eo=14,Om=window.requestIdleCallback!=null,s6=C("div").withConfig({displayName:"ScannerOverlay__FullscreenPage",componentId:"sc-msiqna-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;display:flex;flex-direction:column;"]),Zd=e=>{var r,o,a,s;const t=f.useRef(),n=k((a=(o=(r=e==null?void 0:e.styles)==null?void 0:r.captureOverlayHeaderButton)==null?void 0:o.stroke)==null?void 0:a.color);return i.jsxs(i.Fragment,{children:[i.jsx(c6,{svgColor:n}),i.jsx(s6,{ref:(s=e.overlayRef)!=null?s:t,children:i.jsx(C6,{...e})})]})},c6=va(["nav#","{background-color:unset;svg{path{","}}}"],Yg,({svgColor:e})=>`stroke: ${e!=null?e:I.Color.PrimaryWhite};`),l6=C.div.withConfig({displayName:"ScannerOverlay__ImageContainerWrapper",componentId:"sc-msiqna-1"})(["position:relative;"]),d6=C.div.withConfig({displayName:"ScannerOverlay__ImageContainer",componentId:"sc-msiqna-2"})(["height:",";position:relative;transform:",";transition:all ","s;"],({height:e})=>e,({mirrored:e})=>e?"scale(-1, 1)":null,Yd),u6=C("div").withConfig({displayName:"ScannerOverlay__ImageContainerSizer",componentId:"sc-msiqna-3"})(["top:0;left:0;padding-bottom:",";overflow:hidden;"],({isShortBarcodeOverlay:e})=>e?"35%":"66%"),Xg=C("div").withConfig({displayName:"ScannerOverlay__CaptureFrame",componentId:"sc-msiqna-4"})(["backface-visibility:hidden;height:100%;width:100%;overflow:hidden;transform:",";position:",";top:",";"],({isAnimated:e,isReverseSide:t})=>t?"rotateY(180deg)":e?"scale(1)":null,({isReverseSide:e})=>e?"absolute":null,({isReverseSide:e})=>e?0:null),m6=C("div").withConfig({displayName:"ScannerOverlay__VerticalPositioner",componentId:"sc-msiqna-5"})(["position:absolute;top:calc( "," - "," );background:",";width:calc(80% + 2 * (","));margin-left:calc(10% - ",");margin-right:calc(10% - ",");perspective:",";transform:",";transition:",";"],({collapsed:e,isShortBarcodeOverlay:t})=>e?"50%":t?"35%":"25%",({styles:e})=>ao(e),({collapsed:e})=>e?"black":"transparent",({styles:e})=>ao(e),({styles:e})=>ao(e),({styles:e})=>ao(e),({animated:e})=>e?"1000px":null,({animated:e,collapsed:t,collapsedVerticalOffset:n})=>e&&t?`translate3d(0, ${n!=null?n:"-50%"}, 0)`:null,({animated:e})=>e?`all ${Yd}s`:null),h6=C("div").withConfig({displayName:"ScannerOverlay__FlipCard",componentId:"sc-msiqna-6"})(["border:",";border-radius:",";position:relative;width:100%;height:100%;overflow:",";transform-style:",";transform:",";transition:",";"],({styles:e})=>`${ao(e)} solid ${a6(e)}`,({styles:e})=>Zg(e),({flipped:e})=>e?null:"hidden",({animated:e})=>e?"preserve-3d":null,({animated:e,flipped:t})=>e&&t?"rotateY(180deg)":null,({animated:e})=>e?`transform ${Qg}s`:null),p6=C("div").withConfig({displayName:"ScannerOverlay__UnderOverlayComponentsWrapper",componentId:"sc-msiqna-7"})(["position:absolute;bottom:-16px;transform:translateY(100%);z-index:1;transition:opacity ",";opacity:",";width:100%;"],it.Fast,({visible:e})=>e?1:0),f6=C.div.withConfig({displayName:"ScannerOverlay__RealCaptureWindow",componentId:"sc-msiqna-8"})(["position:absolute;overflow:hidden;top:","%;height:","%;left:","%;width:","%;video{object-fit:cover;height:100%;width:100%;}"],({visibleToRealCaptureWindowHeightRatio:e})=>(100-100/e)/2,({visibleToRealCaptureWindowHeightRatio:e})=>100/e,({visibleToRealCaptureWindowWidthRatio:e})=>(100-100/e)/2,({visibleToRealCaptureWindowWidthRatio:e})=>100/e),g6=e=>{var t,n,r,o;return i.jsxs(Xg,{isReverseSide:!1,isAnimated:e.isAnimated,children:[i.jsxs(l6,{children:[i.jsxs(d6,{ref:e.previewViewfinderRef,mirrored:e.mirrored,height:e.imageContainerHeight,onTransitionEnd:()=>{var a;(a=e.onTransitionEnd)==null||a.call(e)},children:[i.jsx(f6,{ref:e.overlayCaptureWindowRef,visibleToRealCaptureWindowWidthRatio:so,visibleToRealCaptureWindowHeightRatio:e.isShortBarcodeOverlay?Qd:Kd,children:(t=e.renderCaptureWindowContents)==null?void 0:t.call(e)}),i.jsx(u6,{ref:e.imageContainerSizerRef,isShortBarcodeOverlay:e.isShortBarcodeOverlay}),i.jsx(i6,{captureOverlay:(n=e.captureOverlay)!=null?n:null,isShortBarcodeOverlay:e.isShortBarcodeOverlay,hideGuide:e.hideGuide,highlightCorners:!!e.hasDetectedQuad,showFlash:e.capturing})]}),!e.isShortBarcodeOverlay&&i.jsx(DE,{text:e.inFrameText})]}),i.jsx(Kg,{collapsed:!1,borderRadius:Jg((r=e.styles)==null?void 0:r.captureBox),ref:e.captureFrameLabelRef,styles:(o=e.styles)==null?void 0:o.hint,assets:e.assets,side:e.requiresSide,idClass:e.governmentIdClass,text:e.captureFrameLabel,height:e.captureFrameLabelHeight})]})},b6=e=>{var t,n;return e.reverseSide?i.jsx(Xg,{isReverseSide:!0,isAnimated:e.isAnimated,"aria-hidden":"true",children:i.jsx(Kg,{ref:e.captureFrameLabelRef,collapsed:!1,borderRadius:Jg((t=e.styles)==null?void 0:t.captureBox),styles:(n=e.styles)==null?void 0:n.hint,assets:e.assets,side:e.reverseSide,idClass:e.governmentIdClass,text:e.reverseCaptureFrameLabel})}):null},C6=e=>{var T,R;const t=f.useRef(null),[n,r]=f.useState(e.collapsed||e.expandOnMount),[o,a]=f.useState(n?0:"auto"),s=f.useRef(null),c=f.useRef(null),[l,d]=f.useState(e.flipped),[u,h]=f.useState("auto"),[m,p]=f.useState(null),g=f.useRef(null),b=(T=e.previewViewfinderRef)!=null?T:g;f.useEffect(()=>{var D,L,H,M,B;const O=e.captureOverlay?(D=t.current)==null?void 0:D.clientHeight:(L=b.current)==null?void 0:L.scrollHeight;x()?e.collapsed&&!n?(a(O+"px"),Om?window.requestIdleCallback(()=>{var V,q;a(0),p(`${-(((q=(V=s.current)==null?void 0:V.scrollHeight)!=null?q:0)+eo*2)/2}px`),r(!0)},{timeout:500}):setTimeout(()=>{var V,q;a(0),p(`${-(((q=(V=s.current)==null?void 0:V.scrollHeight)!=null?q:0)+eo*2)/2}px`),r(!0)},50)):(a(e.collapsed?0:O||"auto"),e.collapsed&&p(`${-(((M=(H=s.current)==null?void 0:H.scrollHeight)!=null?M:0)+eo*2)/2}px`),r(e.collapsed)):e.expandOnMount?(a(O+"px"),r(!1)):(B=e.onReady)==null||B.call(e)},[e.collapsed]),f.useEffect(()=>{var O,D;x()&&e.flipped&&!l&&(h(`${((D=(O=s.current)==null?void 0:O.scrollHeight)!=null?D:0)+eo*2}px`),Om?window.requestIdleCallback(()=>{var H,M;const L=((M=(H=c.current)==null?void 0:H.scrollHeight)!=null?M:0)+eo*2;h(`${L}px`),p(`-${L/2}px`),d(!0)},{timeout:500}):setTimeout(()=>{var H,M;const L=((M=(H=c.current)==null?void 0:H.scrollHeight)!=null?M:0)+eo*2;h(`${L}px`),p(`-${L/2}px`),d(!0)},50))},[e.flipped]);const x=Zi(),y=e.isShortBarcodeOverlay&&e.hint||e.prompt,v=e.isShortBarcodeOverlay?null:e.hint,_=e.capturing||e.hasDetectedQuad||!!v,A=e.isAnimated||e.expandOnMount||e.collapsed||e.flipped;return i.jsxs(m6,{animated:A,collapsed:n,collapsedVerticalOffset:m,isShortBarcodeOverlay:e.isShortBarcodeOverlay,children:[i.jsx(yE,{text:n?null:y}),i.jsxs(h6,{animated:A,flipped:l,styles:(R=e.styles)==null?void 0:R.captureBox,children:[i.jsx(g6,{...e,previewViewfinderRef:b,imageContainerSizerRef:t,captureFrameLabelRef:s,captureFrameLabelHeight:u,imageContainerHeight:o,hideGuide:_,inFrameText:v,onTransitionEnd:()=>{var O;a(n?0:"auto"),(O=e.onReady)==null||O.call(e)},isAnimated:A}),i.jsx(b6,{...e,captureFrameLabelRef:c,captureFrameLabelHeight:u,reverseSide:e.reverseSide,isAnimated:A})]}),e.renderUnderOverlayComponents&&i.jsx(p6,{visible:!0,children:e.renderUnderOverlayComponents()})]})};function Ii(e,t,n,r,o){const a=n==null?void 0:n.toLowerCase(),s=r,c=(d=>{switch(d){case U.Back:return"back";case U.BarcodePdf417:return"barcode";case U.Front:return"front";case U.FrontOrBack:return"front-or-back";case U.PassportSignature:return"passport-signature"}})(o),l=uo(t.map(d=>G0([a&&s&&c?`${d}.${a}.${s}.${c}`:null,a&&s?`${d}.${a}.${s}.default`:null,a&&c?`${d}.${a}.unknown.${c}`:null,a?`${d}.${a}.unknown.default`:null,a&&s?`${d}.${a}.${s}`:null,a?`${d}.${a}.unknown`:null,s&&c?`${d}.${s}.${c}`:null,s?`${d}.${s}.default`:null,c?`${d}.unknown.${c}`:null,`${d}.unknown.default`,s?`${d}.${s}`:null,`${d}.unknown`])));return e(l)}function Er(e,t,n){return(t==="pp"||t==="ipp")&&n===U.Front?e["passport-portrait-capture-frame-label"]:(t==="pp"||t==="ipp")&&n===U.PassportSignature?e["passport-signature-capture-frame-label"]:n===U.BarcodePdf417?e["barcode-capture-frame-label"]:n===U.Back?e["id-back-capture-frame-label"]:e["id-front-capture-frame-label"]}const x6=720,v6=C("div").withConfig({displayName:"InquiryGovernmentIdCaptureLeadInAnimationView__VideoWrapperFullscreen",componentId:"sc-117p6m6-0"})(["background:",";overflow:hidden;position:relative;min-height:","px;display:flex;justify-content:center;",";",";"],I.Color.PrimaryBlack,Aa,({flowType:e,useDynamicHeight:t,preferredDimensions:n})=>e===rt.Inline||n&&e===rt.Embedded?`
      height: ${t?"100vh":`${x6}px`};
    `:`
      @media ${xt.isMobile} {
        height: 100%;
        min-height: 140vw;
      }

      @media ${xt.isNotMobile} {
        ${n!=null&&n["minimum-height"]?`min-height: ${E(n["minimum-height"])};`:""}
      }
    `,N.isDashboardFLE&&"height: 100%;"),y6=450,I6=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureLeadInAnimationView__VideoWrapperColumnSizer",componentId:"sc-117p6m6-1"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${y6}px`:null),S6=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureLeadInAnimationView__TitlePositioner",componentId:"sc-117p6m6-2"})(["position:absolute;top:72px;left:10%;right:10%;*{color:"," !important;}z-index:",";"],I.Color.PrimaryWhite,At.navbar);function w6({assets:e,localizations:t,featureFlags:n,governmentIdClass:r,requiresSide:o,handleRouteToCaptureView:a}){const{base:s,captureFeedBox:c,captureHint:l,captureOverlayHeaderButton:d}=On(),u=Xt("inquiry:enable-dynamic-height-for-camera-capture-on-desktop"),h=Ur(),m=o===U.BarcodePdf417,p=()=>i.jsx(Zd,{styles:{base:s,captureBox:c,captureOverlayHeaderButton:d,hint:l==null?void 0:l.textStyle},assets:e,isShortBarcodeOverlay:m,governmentIdClass:r,requiresSide:o,captureFrameLabel:Er(t,r,o),isAnimated:!0,collapsed:!0,expandOnMount:!0,onReady:a}),g=()=>t.title?i.jsx(S6,{children:i.jsx(dt,{styles:s==null?void 0:s.titleStyle,children:t.title})}):null;return i.jsx(v6,{flowType:N.flowType,useDynamicHeight:u,preferredDimensions:h!=null?h:null,children:i.jsxs(I6,{restrictInlineColumnWidth:N.isInline||!!h,children:[g(),p()]})})}const _6=e=>{const{config:t,featureFlags:n,inquiry:r,match:o,history:a,governmentIdClass:s,autoclassificationCountryCode:c,didAutoclassificationIdSelection:l,idClassesByCountries:d,styles:u}=e,h=parseInt(o.params.step,10),{governmentIdClass:m,selectedCountryCode:p,autoclassificationIdClassesConfig:g}=hc(t,h,l,s,c,d),b=fa(t,m,h,l,g);f.useEffect(()=>{try{n!=null&&n["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("government-id.capture-page-animation.entered",{currentSide:b,selectedCountryCode:p,governmentIdClass:m})}catch{}},[]);const x=f.useCallback(()=>{a.replace(Vt(h,Ue.TakePhoto))},[]);f.useEffect(()=>{const v=setTimeout(()=>{x()},1e3);return()=>clearTimeout(v)},[x]);const y=(t==null?void 0:t["govid-design-version"])===To.V1;if(r==null||r.attributes["next-step"].type!==Ae.GovernmentId)return null;if(y){const v=er(t,"capture-page",{idClass:m,side:b});return i.jsx(Yi,{value:u,children:i.jsx(w6,{assets:t.assets["capture-page"],localizations:v,requiresSide:b,featureFlags:n,governmentIdClass:m,handleRouteToCaptureView:x})})}return i.jsx(Ti,{to:Vt(h,Ue.TakePhoto)})};function R6(e){return{styles:Qi(e.inquiry),inquiry:e.inquiry.inquiry,config:hi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,idClassesByCountries:e.verification.idClassesByCountries}}const A6=ke(R6),T6=A6(_6),E6=C("div").withConfig({displayName:"IdBackGuide__Positioner",componentId:"sc-rt087u-0"})(["position:relative;right:0;top:100%;bottom:100%;"]);function k6(){return i.jsx(E6,{"data-test":"id-back__guide",children:i.jsx(cp,{})})}const N6=C("div").withConfig({displayName:"IdFrontGuide__Positioner",componentId:"sc-1y06jqx-0"})(["position:relative;right:0;top:100%;bottom:100%;",";"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]));function j6({mirrored:e=!1}){return i.jsx(N6,{"data-test":"id-front__guide",mirrored:e,children:i.jsx(lp,{})})}const P6=C("div").withConfig({displayName:"MrzTwoLineGuide__Positioner",componentId:"sc-vy0g9h-0"})(["position:relative;left:0;right:0;top:100%;bottom:100%;",";"],({mirrored:e})=>e&&W(["transform:scale(-1,1);"]));function D6({mirrored:e=!1}){return i.jsx(P6,{"data-test":"mrz-two-line__guide",mirrored:e,children:i.jsx(dp,{})})}const O6=C("div").withConfig({displayName:"ScannerOverlay__CropPositioner",componentId:"sc-e4tdwi-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;"]),L6=C("div").withConfig({displayName:"ScannerOverlay__OverlayCrop",componentId:"sc-e4tdwi-1"})(["position:relative;height:100%;width:100%;overflow:hidden;"]),eb=e=>i.jsx(O6,{children:i.jsx(L6,{children:i.jsx(U6,{...e})})}),F6=C("div").withConfig({displayName:"ScannerOverlay__OverlayBarcode",componentId:"sc-e4tdwi-2"})(["position:absolute;margin:30% 20%;padding-bottom:17%;width:60%;"]),M6=C("div").withConfig({displayName:"ScannerOverlay__ImageStyled",componentId:"sc-e4tdwi-3"})(["svg{position:absolute;width:100%;height:100%;}"]),V6=C("div").withConfig({displayName:"ScannerOverlay__SimpleGuide",componentId:"sc-e4tdwi-4"})(["padding-bottom:65.97%;width:100%;"]),B6=C(up).withConfig({displayName:"ScannerOverlay__IdBarcodeGenericGuideStyled",componentId:"sc-e4tdwi-5"})(["position:absolute;width:100%;height:100%;"]),Ka=C("div").withConfig({displayName:"ScannerOverlay__OverlayWhole",componentId:"sc-e4tdwi-6"})(["position:absolute;border-radius:",";border:2px dashed ",";margin:13% 10%;padding-bottom:48%;width:80%;box-shadow:0 0 1px 1000px rgba(0,0,0,0.5);"],un.base,Be.white),Lm=C("div").withConfig({displayName:"ScannerOverlay__OverlayPortrait",componentId:"sc-e4tdwi-7"})(["position:absolute;border-radius:",";border:2px dashed ",";margin:10% 10%;width:80%;box-shadow:0 0 1px 1000px rgba(0,0,0,0.5);"],un.base,Be.white),q6=C("div").withConfig({displayName:"ScannerOverlay__OverlayMrzTwoLine",componentId:"sc-e4tdwi-8"})(["position:absolute;border-radius:",";border:2px dashed ",";margin:12% 10% 8% 10%;width:80%;box-shadow:0 0 1px 1000px rgba(0,0,0,0.7);"],un.base,Be.white),U6=e=>e.governmentIdClass==null||e.simple?i.jsx(Ka,{}):e.requiresSide===U.PassportSignature?i.jsx(Ka,{}):["nric"].includes(e.governmentIdClass)?i.jsx(Ka,{}):["pp","visa","ipp"].includes(e.governmentIdClass)?i.jsx(q6,{children:i.jsx(D6,{mirrored:e.mirrored})}):e.requiresSide===U.Front?i.jsx(Lm,{children:i.jsx(j6,{mirrored:e.mirrored})}):e.requiresSide===U.Back?i.jsx(Lm,{children:e.hideBackOverlay?i.jsx(V6,{}):i.jsx(k6,{})}):e.requiresSide===U.BarcodePdf417?i.jsxs(F6,{children:[i.jsx(M6,{children:i.jsx(OC,{})}),i.jsx(B6,{})]}):i.jsx(Ka,{}),Hc={face_landmark_68_tiny_model:"/models/face_landmark_68_tiny_model-3d0e8318bd1874a21015ff887f41c03f",tiny_face_detector_model:"/models/tiny_face_detector_model-9499032ee06807904f86686070eef43a","tfjs-backend-wasm":"/models/tfjs-backend-wasm-72a5ed4aab8999e7889369bf544c3cc9","microblink-6-0-1":"/models/microblink-6-0-1-9f3870776964632feb811a9e786fdce0","microblink-6-0-1-lightweight":"/models/microblink-6-0-1-lightweight-a8d380a5978d86845c9a0486a00095b0","microblink-6-7-2":"/models/microblink-6-7-2-359ea93b70830a909cda35598a5ccf06"};function kr(e){if(Hc&&e in Hc)return new URL(Hc[e],"https://cdn.withpersona.com").href;throw new Error(`Model ${e} not found in modelMappings`)}let H6=class{constructor(){this.loaded=!1,this.tfOptimizationFlagsSet=!1,this.wasmPathSet=!1}isMediaLoaded(t){return _x(t)}isLoaded(){return this.loaded}async initTensorflow(){if(!this.isTestMode())try{if(!this.wasmPathSet){const t=kr("tfjs-backend-wasm")+"/";tr.setWasmPaths(t),this.wasmPathSet=!0}this.setTfOptimizationFlags(),await tr.ready(),this.loaded||z.logAmplitude("inquiry.tf.loaded",{backend:tr.getBackend()})}catch(t){Z(t,"warning",{source:"FaceApiClient.loadModels",wasmPathSet:this.wasmPathSet})}}async loadModels(){this.isTestMode()||(await this.initTensorflow(),await La(async()=>{if(this.promiseTinyFaceDetector==null){const t=kr("tiny_face_detector_model");t!=null&&(this.promiseTinyFaceDetector=Rx(t))}if(this.promiseFaceLandmarkTiny==null){const t=kr("face_landmark_68_tiny_model");t!=null&&(this.promiseFaceLandmarkTiny=Ax(t))}await Promise.all([this.promiseTinyFaceDetector,this.promiseFaceLandmarkTiny]),this.loaded=!0}))}async detectFaces(t,{inputSize:n,scoreThreshold:r}){return await Tx(t,new Ex({inputSize:n!=null?n:416,scoreThreshold:r!=null?r:.4}))}async detectLandmarks(t){return await kx(t)}resetLoadStatus(){this.promiseTinyFaceDetector=void 0,this.promiseFaceLandmarkTiny=void 0}isTestMode(){return Pn()||!1}getBackend(){try{return tr.getBackend()}catch{return"errored"}}async setBackend(t){const n=this.getBackend(),r=await tr.setBackend(t);return z.logAmplitude("inquiry.tf.set-backend",{backend:t,currentBackend:n,successfullySet:r}),r}setTfOptimizationFlags(){if(!this.tfOptimizationFlagsSet){try{tr.ENV.set("WEBGL_DELETE_TEXTURE_THRESHOLD",0)}catch(t){Z(t,"warning")}try{tr.ENV.set("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",!0)}catch(t){Z(t,"warning")}try{tr.ENV.set("WEBGL_EXP_CONV",!0)}catch(t){Z(t,"warning")}this.tfOptimizationFlagsSet=!0}}};const yt=new H6;var tb=(e=>(e[e.FrontSide=0]="FrontSide",e[e.Capture=1]="Capture",e[e.HoldStill=2]="HoldStill",e[e.None=3]="None",e))(tb||{});const $6=300,Fm=.3,G6=.27,W6=.32,z6=[{type:0,shouldShow:Y6,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.back-side")},{type:1,shouldShow:e=>e.requiresSide===U.BarcodePdf417?e.detectedGuards>=2:e.detectedGuards>=1,showAfterFrames:3,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:2,shouldShow:e=>e.detectedGuards>=1,showAfterFrames:1,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:3,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function Y6(e){if(e.faceBoundingBox==null)return!1;const t=e.faceBoundingBox.left+e.faceBoundingBox.width/2;return(t<Fm||t>1-Fm)&&e.faceBoundingBox.width<G6+.05&&e.faceBoundingBox.height<W6+.05}async function K6(e,t){const n=Ms(e);if(n==null)return{detectedGuards:0};const r=window.ZXing;if(r){const o=new r.BitmapLuminanceSource(n),a=new r.Common.HybridBinarizer(o),s=new r.BinaryBitmap(a);return Q6(e,s,t)}else return{detectedGuards:0}}function Q6(e,t,n){const r=window.ZXing;for(const o of n){switch(o){case 90:t=t.rotateCounterClockwise();break;case 180:t=t.rotateCounterClockwise().rotateCounterClockwise();break}const a=r.PDF417.Internal.Detector.detectSingle(t,null,!1);if(a.Points.length>0){const s=r.PDF417.PDF417Reader.decode(t,null,!1);return{decodedResult:s.length>0&&s[0].Text,detectedGuards:a.Points[0].filter(Boolean).length/4,scannedImage:e.toDataURL("image/jpeg")}}}return{detectedGuards:0}}function Z6(e){const t=/\d{6}(\d{2})\w+/.exec(e),n=t&&t[1],r={firstName:["02","03"].indexOf(n)!==-1?"DCT":"DAC",lastName:n==="01"?"DAB":"DCS",middleName:"DAD",dateOfBirth:"DBB",street1:"DAG",street2:"DAH",city:"DAI",state:"DAJ",postalCode:"DAK",issuingCountry:"DCG"},o={};for(const a of Object.keys(r)){const s=r[a],c=new RegExp(`\\s*${s}(.+)(\\n|$)`).exec(e);o[a]=c&&c[1].trim()}return o}const J6=8e3,X6=.3,nb=({delayUntilManualCaptureMs:e=J6,handleCapture:t,handleError:n,labelTakePhoto:r,overlay:o,requiresSide:a,zoomFactor:s,videoConstraints:c})=>{f.useEffect(()=>{yt.loadModels()},[]);const[l,d]=f.useState(!1),u=f.useRef([]),h=async(p,g,b,x)=>{mo({source:p,precreatedCanvas:g,zoomFactor:s});const y=await K6(g,[0]);let v=!1;if(y.decodedResult&&y.scannedImage){const T=Z6(y.decodedResult);if(T.firstName&&T.lastName&&T.middleName&&T.dateOfBirth){const R=JSON.stringify({firstName:T.firstName,lastName:T.lastName,middleName:T.middleName,dateOfBirth:T.dateOfBirth});v=u.current.includes(R),v?b==null||b.manualCapture(y.scannedImage):u.current=[...u.current,R]}}let _=[];if(!l&&!v)try{_=await yt.detectFaces(g,{scoreThreshold:X6})}catch(T){n(T,"capture"),d(!0)}let A;return _.length===1&&(A=_[0].box.rescale({width:1/g.width,height:1/g.height})),{successfullyScanned:v,detectedGuards:y.detectedGuards,requiresSide:a,faceBoundingBox:A}},m=(p,g)=>p.successfullyScanned||g.getTriggered().getType()===tb.Capture;return i.jsx(cc,{handleCapture:({imageSrcs:p,captureMethod:g})=>t(p,g),handleFailed:n,detectInterval:$6,labelTakePhoto:r,videoConstraints:c,triggerConfigs:z6,paramsFromVideoFrame:h,shouldSubmit:m,overlay:o,delayUntilManualCaptureMs:e,zoomFactor:s,scannerType:"barcode"})};class ln extends Error{constructor(t){super(t.message),this.name="MicroblinkError",this.originalError=t}static fromString(t){return new ln({message:t})}}let e4=class{constructor(){this.recognizer=null,this.fullDocumentRecognizer=null,this.recognizerRunner=null,this.initializingRunner=!1,this.captureSide=null,this.idClass=null,this.currentQuad=null,this.currentFullDocumentQuad=null,this.attemptedReset=!1,this.onClassifiedCallback=null,this.requireFullBack=!1,this.allowIncompleteBarcode=!1,this.currentInstanceNumber=0}async preload(t="advanced",n=null){if(!Pn()&&!this.isLoaded()){if(this.loadSDKPromise==null){const r=new z0(ib(window.location.host));r.engineLocation=kr("microblink-6-7-2");const a=`importScripts('${kr("microblink-6-7-2")}/BlinkIDWasmSDK.worker.min.js')`,s=new Blob([a],{type:"application/javascript"});this.currentWorkerBlobUrl||(this.currentWorkerBlobUrl=URL.createObjectURL(s)),r.workerLocation=this.currentWorkerBlobUrl,r.allowHelloMessage=!1,r.wasmType=n,r.blinkIdVariant=t==="advanced"?"full":"lightweight",this.loadSDKPromise=La(async()=>Y0(r).then(c=>(this.wasmSDK=c,this.wasmSDK)).catch(c=>{throw this.loadSDKPromise=null,typeof c=="string"?ln.fromString(c):new ln(c)}))}await this.loadSDKPromise}}isLoaded(){return this.wasmSDK!=null}async initialize(t,n=void 0,r={requireFullBack:!1,allowIncompleteBarcode:!1}){return Pn()?-1:(this.currentQuad=null,this.attemptedReset=!1,this.onClassifiedCallback=null,this.recognizer&&this.recognizerRunner&&this.captureSide===t&&this.idClass===n?this.currentInstanceNumber:(this.currentInstanceNumber++,this.captureSide=t,this.idClass=n,this.requireFullBack=t===U.Back&&r.requireFullBack,this.allowIncompleteBarcode=t===U.Back&&r.allowIncompleteBarcode,new Promise(o=>{this.preload().then(()=>clearTimeout(this.faceApiFallbackTimeout)).then(()=>this.startRunner()).then(()=>o(this.currentInstanceNumber)).catch(a=>typeof a=="string"?ln.fromString(a):new ln(a))})))}async startRunner(){var n;if(!this.captureSide||this.initializingRunner)return;this.initializingRunner=!0;const t=performance.now();if(await this.tearDown(!1),!!this.captureSide){if(this.captureSide===U.Back&&this.allowIncompleteBarcode){this.recognizer=await yc(this.wasmSDK);const r=await this.recognizer.currentSettings();r.recognitionModeFilter.enableBarcodeId=!0,r.recognitionModeFilter.enableMrzPassport=!1,r.recognitionModeFilter.enableMrzVisa=!1,r.recognitionModeFilter.enableMrzId=!1,r.recognitionModeFilter.enablePhotoId=!1,r.recognitionModeFilter.enableFullDocumentRecognition=!0,r.enableBlurFilter=!0,r.enableGlareFilter=!0,await this.recognizer.updateSettings(r)}else if(this.captureSide===U.BarcodePdf417||this.captureSide===U.Back)this.recognizer=await K0(this.wasmSDK);else if(this.captureSide===U.Front){this.recognizer=await yc(this.wasmSDK);const r=await this.recognizer.currentSettings();r.recognitionModeFilter.enableBarcodeId=!1,r.recognitionModeFilter.enableMrzPassport=this.idClass==="pp",r.recognitionModeFilter.enableMrzVisa=!1,r.recognitionModeFilter.enableMrzId=!1,r.classifierCallback=o=>{var a;return(a=this.onClassifiedCallback)==null?void 0:a.call(this,o)},r.enableBlurFilter=!0,r.enableGlareFilter=!0,await((n=this.recognizer)==null?void 0:n.updateSettings(r))}else Z(new Error(`Unsupported side for Microblink Client: ${this.captureSide}`),"warning");if(this.requireFullBack){this.fullDocumentRecognizer=await yc(this.wasmSDK);const r=await this.fullDocumentRecognizer.currentSettings();r.recognitionModeFilter.enableBarcodeId=!1,r.recognitionModeFilter.enableMrzPassport=!1,r.recognitionModeFilter.enableMrzVisa=!1,r.recognitionModeFilter.enableMrzId=!1,r.recognitionModeFilter.enablePhotoId=!1,r.recognitionModeFilter.enableFullDocumentRecognition=!0,r.enableBlurFilter=!0,r.enableGlareFilter=!0,await this.fullDocumentRecognizer.updateSettings(r)}if(this.requireFullBack||this.allowIncompleteBarcode){const r={onQuadDetection:o=>{this.currentQuad?Bm(o)>Bm(this.currentQuad)?this.currentFullDocumentQuad=o:(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=o):this.currentQuad=o}};this.recognizerRunner=await vu(this.wasmSDK,(this.requireFullBack?[this.recognizer,this.fullDocumentRecognizer]:[this.recognizer]).filter(o=>o!=null),!0,r)}else{const r={onQuadDetection:o=>{(this.captureSide===U.Front||!this.currentQuad)&&(this.currentQuad=o)}};this.recognizerRunner=await vu(this.wasmSDK,[this.recognizer].filter(o=>o!=null),!1,r)}this.initializingRunner=!1,z.logAmplitude("government-id.microblink.initialize-runners",{durationSeconds:(performance.now()-t)/1e3,side:this.captureSide,idClass:this.idClass})}}async processImage(t,n){var s,c,l,d,u,h,m,p,g,b,x;if(!this.recognizerRunner||!this.recognizer)return null;this.currentQuad=null,this.currentFullDocumentQuad=null,this.onClassifiedCallback=n;const r=Ms(t);if(r==null)return null;const o=new Q0(r,Z0.NoRotation,!0);if(!o.imageData)return null;await this.recognizerRunner.processImage(o).catch(async y=>{const v=typeof y=="string"?y:y.message;if((v.indexOf(yu.WORKER_IMAGE_PROCESS_FAILURE)!==-1||v.indexOf(yu.WORKER_RUNNER_DELETED)!==-1)&&!this.attemptedReset)return this.attemptedReset=!0,await this.tearDown(!1),await this.startRunner(),null;throw typeof y=="string"?ln.fromString(y):new ln(y)});const a=(c=(s=this.recognizer)==null?void 0:s.recognizerName)!=null?c:"MicroblinkUnknown";if(this.requireFullBack){const y=await((l=this.recognizer)==null?void 0:l.getResult()),v=await((d=this.fullDocumentRecognizer)==null?void 0:d.getResult());!this.currentFullDocumentQuad&&this.currentQuad&&(y==null?void 0:y.state)===_r.Empty&&(v==null?void 0:v.state)!==_r.Empty&&Qa(this.currentQuad,null)&&(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=null);const _=Qa(this.currentFullDocumentQuad,this.currentQuad)?this.currentFullDocumentQuad:null,A=(y==null?void 0:y.state)!=null&&(y==null?void 0:y.state)!==_r.Empty&&!_;return{recognitionResult:y,detectedQuad:_,hasBlur:(h=(u=v==null?void 0:v.imageAnalysisResult)==null?void 0:u.blurDetected)!=null?h:!1,hasGlare:(p=(m=v==null?void 0:v.imageAnalysisResult)==null?void 0:m.glareDetected)!=null?p:!1,hasIncompleteBack:A,recognizerName:a}}else{const y=await((g=this.recognizer)==null?void 0:g.getResult());let v=this.currentQuad;this.allowIncompleteBarcode&&(v=Qa(this.currentFullDocumentQuad,null)?this.currentFullDocumentQuad:Qa(this.currentQuad,null)?this.currentQuad:null);const _=y!=null&&"imageAnalysisResult"in y?y.imageAnalysisResult:void 0;return{recognitionResult:y,detectedQuad:v,hasBlur:(b=_==null?void 0:_.blurDetected)!=null?b:!1,hasGlare:(x=_==null?void 0:_.glareDetected)!=null?x:!1,hasIncompleteBack:null,recognizerName:a}}}needsTeardown(){return this.recognizerRunner!=null||this.recognizer!=null||this.fullDocumentRecognizer!=null}async tearDownInstance(t){t===this.currentInstanceNumber&&this.tearDown()}async tearDown(t=!0){const n=this.recognizerRunner,r=this.recognizer,o=this.fullDocumentRecognizer;this.recognizer=null,this.recognizerRunner=null,this.fullDocumentRecognizer=null,this.currentWorkerBlobUrl&&(URL.revokeObjectURL(this.currentWorkerBlobUrl),this.currentWorkerBlobUrl=void 0),t&&(this.captureSide=null,this.requireFullBack=!1,this.allowIncompleteBarcode=!1),this.currentQuad=null,this.currentFullDocumentQuad=null;try{await Promise.allSettled([n==null?void 0:n.delete(),r==null?void 0:r.delete(),o==null?void 0:o.delete()])}catch{}}};const Mm=[U.Front,U.Back,U.BarcodePdf417],t4=["pp"];let El={"withpersona.com":{key:null,expiresAt:null},"withpersona-staging.com":{key:null,expiresAt:null},"*.withpersona.com":{key:null,expiresAt:null},"*.withpersona-staging.com":{key:null,expiresAt:null}};try{El=JSON.parse('{"withpersona.com":{"key":"sRwAAAYPd2l0aHBlcnNvbmEuY29thpUVKHnfmIvdibPDghXCop2mZ9gE/CGYH8QslNJecCQfDVRv7r5kV0NFmyN8KWsD9ZWjiaJnclTjRFME8UCKBDi7m4IzQw9TsGfuNA2ZdP9JwJGz++8F+3p9/1w6ndXfIqil+sF8QMHlTXfw0JukUt60qGSpA9oSZ6gNXrMizqXHWiUUbx6l7g1LkL2gjcMOIPfkxu704L/lplxspRxevoHjgr9epQ==","expiresAt":"2026-06-09"},"*.withpersona.com":{"key":"sRwAAAYRKi53aXRocGVyc29uYS5jb22q2VqlctXIE+DL6va9pIVBYDMqJu6BCIKcb7LD9fSCMztfF8rD802Ra+xNfBeJB7yxKb+9he18NtOAtgW17bg3CWIZ2D0Nn2sKcL2xwAce1UeeUBQ5OUdK4Bsw6gHFBd3pr5XtoN41zv7rCHSqlJLHQSlLNNLoXEys7lCOGTQTtMZEkRFxJ1B8RKX+mvMvvvPPzmaC+dEbyjvElNxRQhpR1TYZVqQIY+B1","expiresAt":"2026-06-09"},"withpersona-staging.com":{"key":"sRwAAAYXd2l0aHBlcnNvbmEtc3RhZ2luZy5jb22+UDZGEA8YgF3AvK+uCAxnzhgmsrXoz030fP+lIjjwPMquHH2iyjAGe3zRH9VxpWxmsJM+I42EcO/fZ/9fDVYrhLNURRFI761oDE1y9f+h/nz/uqHTlbLeWApWtnvwkywXuO0KhTM00ZhYIi1OO+M3EaB7xSo5s7qGmjI2T0oIwsPFbA8Em9NcMs0GYJwePBVbH/kr9FXHiHcGCSARlird4uKE4TQoxpk=","expiresAt":"2026-06-09"},"*.withpersona-staging.com":{"key":"sRwAAAYZKi53aXRocGVyc29uYS1zdGFnaW5nLmNvbd8DgK6h/E1CelG5fEjmfzkO09G3+bHMY70e6GeTv6lsL4+WwTVMAXX9YnGr3o9KGhBUJnJc+y5czTE2xwuY+JcI7KSLULx3V73Tmox/In52wss9lEp7XYC7+1qtRbysdBAwbW+UupAS0XlzPypz+xCmrS9Ei6ERRtbRJXBqCfVo9YTfEcdlobiUVxoYGK2jyCfvcfj/h77zplQsSuzUPfWG9efBYtpJ2A==","expiresAt":"2026-06-09"}}')}catch{}const n4=14*24*60*60*1e3,ib=e=>{var o;let t=e.split(":")[0];if(!El[t]&&t.split(".").length===3){const a=t.split(".");a[0]="*",t=a.join(".")}const{key:n,expiresAt:r}=(o=El[t])!=null?o:{};try{r!=null&&(t==="withpersona.com"||t==="*.withpersona.com")&&new Date(r).getTime()-new Date().getTime()<n4&&Z(new Error(`Microblink license key is expiring in less than 14 days at ${r}. Request a renewal in #microblink-persona and update MICROBLINK_LICENSES in .env.`),"error",{expiresAt:r,domain:t})}catch(a){Z(a)}return n},Ca=e=>ib(e)!=null&&W0(),xa=(e,t=void 0,n,r)=>{if(t4.includes(n)&&e===U.Front||r["inquiry:enable-microblink-web-front-everywhere"]&&e===U.Front||r["inquiry:enable-microblink-web-back-everywhere"]&&e===U.Back)return!0;switch(t){case"US":switch(n){case"dl":case"id":return Mm.includes(e);default:return!1}case"CA":if(!r["inquiry:enable-microblink-canada"])return!1;switch(n){case"dl":case"id":return Mm.includes(e);default:return!1}case"JP":return!1;default:return!1}},i4={[j.NONE]:"NONE",[j.ALBANIA]:"ALBANIA",[j.ALGERIA]:"ALGERIA",[j.ARGENTINA]:"ARGENTINA",[j.AUSTRALIA]:"AUSTRALIA",[j.AUSTRIA]:"AUSTRIA",[j.AZERBAIJAN]:"AZERBAIJAN",[j.BAHRAIN]:"BAHRAIN",[j.BANGLADESH]:"BANGLADESH",[j.BELGIUM]:"BELGIUM",[j.BOSNIA_AND_HERZEGOVINA]:"BOSNIA_AND_HERZEGOVINA",[j.BRUNEI]:"BRUNEI",[j.BULGARIA]:"BULGARIA",[j.CAMBODIA]:"CAMBODIA",[j.CANADA]:"CANADA",[j.CHILE]:"CHILE",[j.COLOMBIA]:"COLOMBIA",[j.COSTA_RICA]:"COSTA_RICA",[j.CROATIA]:"CROATIA",[j.CYPRUS]:"CYPRUS",[j.CZECHIA]:"CZECHIA",[j.DENMARK]:"DENMARK",[j.DOMINICAN_REPUBLIC]:"DOMINICAN_REPUBLIC",[j.EGYPT]:"EGYPT",[j.ESTONIA]:"ESTONIA",[j.FINLAND]:"FINLAND",[j.FRANCE]:"FRANCE",[j.GEORGIA]:"GEORGIA",[j.GERMANY]:"GERMANY",[j.GHANA]:"GHANA",[j.GREECE]:"GREECE",[j.GUATEMALA]:"GUATEMALA",[j.HONG_KONG]:"HONG_KONG",[j.HUNGARY]:"HUNGARY",[j.INDIA]:"INDIA",[j.INDONESIA]:"INDONESIA",[j.IRELAND]:"IRELAND",[j.ISRAEL]:"ISRAEL",[j.ITALY]:"ITALY",[j.JORDAN]:"JORDAN",[j.KAZAKHSTAN]:"KAZAKHSTAN",[j.KENYA]:"KENYA",[j.KOSOVO]:"KOSOVO",[j.KUWAIT]:"KUWAIT",[j.LATVIA]:"LATVIA",[j.LITHUANIA]:"LITHUANIA",[j.MALAYSIA]:"MALAYSIA",[j.MALDIVES]:"MALDIVES",[j.MALTA]:"MALTA",[j.MAURITIUS]:"MAURITIUS",[j.MEXICO]:"MEXICO",[j.MOROCCO]:"MOROCCO",[j.NETHERLANDS]:"NETHERLANDS",[j.NEW_ZEALAND]:"NEW_ZEALAND",[j.NIGERIA]:"NIGERIA",[j.PAKISTAN]:"PAKISTAN",[j.PANAMA]:"PANAMA",[j.PARAGUAY]:"PARAGUAY",[j.PHILIPPINES]:"PHILIPPINES",[j.POLAND]:"POLAND",[j.PORTUGAL]:"PORTUGAL",[j.PUERTO_RICO]:"PUERTO_RICO",[j.QATAR]:"QATAR",[j.ROMANIA]:"ROMANIA",[j.RUSSIA]:"RUSSIA",[j.SAUDI_ARABIA]:"SAUDI_ARABIA",[j.SERBIA]:"SERBIA",[j.SINGAPORE]:"SINGAPORE",[j.SLOVAKIA]:"SLOVAKIA",[j.SLOVENIA]:"SLOVENIA",[j.SOUTH_AFRICA]:"SOUTH_AFRICA",[j.SPAIN]:"SPAIN",[j.SWEDEN]:"SWEDEN",[j.SWITZERLAND]:"SWITZERLAND",[j.TAIWAN]:"TAIWAN",[j.THAILAND]:"THAILAND",[j.TUNISIA]:"TUNISIA",[j.TURKEY]:"TURKEY",[j.UAE]:"UAE",[j.UGANDA]:"UGANDA",[j.UK]:"UK",[j.UKRAINE]:"UKRAINE",[j.USA]:"USA",[j.VIETNAM]:"VIETNAM",[j.BRAZIL]:"BRAZIL",[j.NORWAY]:"NORWAY",[j.OMAN]:"OMAN",[j.ECUADOR]:"ECUADOR",[j.EL_SALVADOR]:"EL_SALVADOR",[j.SRI_LANKA]:"SRI_LANKA",[j.PERU]:"PERU",[j.URUGUAY]:"URUGUAY",[j.BAHAMAS]:"BAHAMAS",[j.BERMUDA]:"BERMUDA",[j.BOLIVIA]:"BOLIVIA",[j.CHINA]:"CHINA",[j.EUROPEAN_UNION]:"EUROPEAN_UNION",[j.HAITI]:"HAITI",[j.HONDURAS]:"HONDURAS",[j.ICELAND]:"ICELAND",[j.JAPAN]:"JAPAN",[j.LUXEMBOURG]:"LUXEMBOURG",[j.MONTENEGRO]:"MONTENEGRO",[j.NICARAGUA]:"NICARAGUA",[j.SOUTH_KOREA]:"SOUTH_KOREA",[j.VENEZUELA]:"VENEZUELA",[j.AFGHANISTAN]:"AFGHANISTAN",[j.ALAND_ISLANDS]:"ALAND_ISLANDS",[j.AMERICAN_SAMOA]:"AMERICAN_SAMOA",[j.ANDORRA]:"ANDORRA",[j.ANGOLA]:"ANGOLA",[j.ANGUILLA]:"ANGUILLA",[j.ANTARCTICA]:"ANTARCTICA",[j.ANTIGUA_AND_BARBUDA]:"ANTIGUA_AND_BARBUDA",[j.ARMENIA]:"ARMENIA",[j.ARUBA]:"ARUBA",[j.BAILIWICK_OF_GUERNSEY]:"BAILIWICK_OF_GUERNSEY",[j.BAILIWICK_OF_JERSEY]:"BAILIWICK_OF_JERSEY",[j.BARBADOS]:"BARBADOS",[j.BELARUS]:"BELARUS",[j.BELIZE]:"BELIZE",[j.BENIN]:"BENIN",[j.BHUTAN]:"BHUTAN",[j.BONAIRE_SAINT_EUSTATIUS_AND_SABA]:"BONAIRE_SAINT_EUSTATIUS_AND_SABA",[j.BOTSWANA]:"BOTSWANA",[j.BOUVET_ISLAND]:"BOUVET_ISLAND",[j.BRITISH_INDIAN_OCEAN_TERRITORY]:"BRITISH_INDIAN_OCEAN_TERRITORY",[j.BURKINA_FASO]:"BURKINA_FASO",[j.BURUNDI]:"BURUNDI",[j.CAMEROON]:"CAMEROON",[j.CAPE_VERDE]:"CAPE_VERDE",[j.CARIBBEAN_NETHERLANDS]:"CARIBBEAN_NETHERLANDS",[j.CAYMAN_ISLANDS]:"CAYMAN_ISLANDS",[j.CENTRAL_AFRICAN_REPUBLIC]:"CENTRAL_AFRICAN_REPUBLIC",[j.CHAD]:"CHAD",[j.CHRISTMAS_ISLAND]:"CHRISTMAS_ISLAND",[j.COCOS_ISLANDS]:"COCOS_ISLANDS",[j.COMOROS]:"COMOROS",[j.CONGO]:"CONGO",[j.COOK_ISLANDS]:"COOK_ISLANDS",[j.CUBA]:"CUBA",[j.CURACAO]:"CURACAO",[j.DEMOCRATIC_REPUBLIC_OF_THE_CONGO]:"DEMOCRATIC_REPUBLIC_OF_THE_CONGO",[j.DJIBOUTI]:"DJIBOUTI",[j.DOMINICA]:"DOMINICA",[j.EAST_TIMOR]:"EAST_TIMOR",[j.EQUATORIAL_GUINEA]:"EQUATORIAL_GUINEA",[j.ERITREA]:"ERITREA",[j.ESWATINI]:"ESWATINI",[j.ETHIOPIA]:"ETHIOPIA",[j.FALKLAND_ISLANDS]:"FALKLAND_ISLANDS",[j.FAROE_ISLANDS]:"FAROE_ISLANDS",[j.FEDERATED_STATES_OF_MICRONESIA]:"FEDERATED_STATES_OF_MICRONESIA",[j.FIJI]:"FIJI",[j.FRENCH_GUIANA]:"FRENCH_GUIANA",[j.FRENCH_POLYNESIA]:"FRENCH_POLYNESIA",[j.FRENCH_SOUTHERN_TERRITORIES]:"FRENCH_SOUTHERN_TERRITORIES",[j.GABON]:"GABON",[j.GAMBIA]:"GAMBIA",[j.GIBRALTAR]:"GIBRALTAR",[j.GREENLAND]:"GREENLAND",[j.GRENADA]:"GRENADA",[j.GUADELOUPE]:"GUADELOUPE",[j.GUAM]:"GUAM",[j.GUINEA]:"GUINEA",[j.GUINEA_BISSAU]:"GUINEA_BISSAU",[j.GUYANA]:"GUYANA",[j.HEARD_ISLAND_AND_MCDONALD_ISLANDS]:"HEARD_ISLAND_AND_MCDONALD_ISLANDS",[j.IRAN]:"IRAN",[j.IRAQ]:"IRAQ",[j.ISLE_OF_MAN]:"ISLE_OF_MAN",[j.IVORY_COAST]:"IVORY_COAST",[j.JAMAICA]:"JAMAICA",[j.KIRIBATI]:"KIRIBATI",[j.KYRGYZSTAN]:"KYRGYZSTAN",[j.LAOS]:"LAOS",[j.LEBANON]:"LEBANON",[j.LESOTHO]:"LESOTHO",[j.LIBERIA]:"LIBERIA",[j.LIBYA]:"LIBYA",[j.LIECHTENSTEIN]:"LIECHTENSTEIN",[j.MACAU]:"MACAU",[j.MADAGASCAR]:"MADAGASCAR",[j.MALAWI]:"MALAWI",[j.MALI]:"MALI",[j.MARSHALL_ISLANDS]:"MARSHALL_ISLANDS",[j.MARTINIQUE]:"MARTINIQUE",[j.MAURITANIA]:"MAURITANIA",[j.MAYOTTE]:"MAYOTTE",[j.MOLDOVA]:"MOLDOVA",[j.MONACO]:"MONACO",[j.MONGOLIA]:"MONGOLIA",[j.MONTSERRAT]:"MONTSERRAT",[j.MOZAMBIQUE]:"MOZAMBIQUE",[j.MYANMAR]:"MYANMAR",[j.NAMIBIA]:"NAMIBIA",[j.NAURU]:"NAURU",[j.NEPAL]:"NEPAL",[j.NEW_CALEDONIA]:"NEW_CALEDONIA",[j.NIGER]:"NIGER",[j.NIUE]:"NIUE",[j.NORFOLK_ISLAND]:"NORFOLK_ISLAND",[j.NORTHERN_CYPRUS]:"NORTHERN_CYPRUS",[j.NORTHERN_MARIANA_ISLANDS]:"NORTHERN_MARIANA_ISLANDS",[j.NORTH_KOREA]:"NORTH_KOREA",[j.NORTH_MACEDONIA]:"NORTH_MACEDONIA",[j.PALAU]:"PALAU",[j.PALESTINE]:"PALESTINE",[j.PAPUA_NEW_GUINEA]:"PAPUA_NEW_GUINEA",[j.PITCAIRN]:"PITCAIRN",[j.REUNION]:"REUNION",[j.RWANDA]:"RWANDA",[j.SAINT_BARTHELEMY]:"SAINT_BARTHELEMY",[j.SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA]:"SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA",[j.SAINT_KITTS_AND_NEVIS]:"SAINT_KITTS_AND_NEVIS",[j.SAINT_LUCIA]:"SAINT_LUCIA",[j.SAINT_MARTIN]:"SAINT_MARTIN",[j.SAINT_PIERRE_AND_MIQUELON]:"SAINT_PIERRE_AND_MIQUELON",[j.SAINT_VINCENT_AND_THE_GRENADINES]:"SAINT_VINCENT_AND_THE_GRENADINES",[j.SAMOA]:"SAMOA",[j.SAN_MARINO]:"SAN_MARINO",[j.SAO_TOME_AND_PRINCIPE]:"SAO_TOME_AND_PRINCIPE",[j.SCHENGEN_AREA]:"SCHENGEN_AREA",[j.SENEGAL]:"SENEGAL",[j.SEYCHELLES]:"SEYCHELLES",[j.SIERRA_LEONE]:"SIERRA_LEONE",[j.SINT_MAARTEN]:"SINT_MAARTEN",[j.SOLOMON_ISLANDS]:"SOLOMON_ISLANDS",[j.SOMALIA]:"SOMALIA",[j.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS]:"SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS",[j.SOUTH_SUDAN]:"SOUTH_SUDAN",[j.SUDAN]:"SUDAN",[j.SURINAME]:"SURINAME",[j.SVALBARD_AND_JAN_MAYEN]:"SVALBARD_AND_JAN_MAYEN",[j.SYRIA]:"SYRIA",[j.TAJIKISTAN]:"TAJIKISTAN",[j.TANZANIA]:"TANZANIA",[j.TOGO]:"TOGO",[j.TOKELAU]:"TOKELAU",[j.TONGA]:"TONGA",[j.TRINIDAD_AND_TOBAGO]:"TRINIDAD_AND_TOBAGO",[j.TURKMENISTAN]:"TURKMENISTAN",[j.TURKS_AND_CAICOS_ISLANDS]:"TURKS_AND_CAICOS_ISLANDS",[j.TUVALU]:"TUVALU",[j.UNITED_STATES_MINOR_OUTLYING_ISLANDS]:"UNITED_STATES_MINOR_OUTLYING_ISLANDS",[j.UZBEKISTAN]:"UZBEKISTAN",[j.VANUATU]:"VANUATU",[j.VATICAN_CITY]:"VATICAN_CITY",[j.VIRGIN_ISLANDS_BRITISH]:"VIRGIN_ISLANDS_BRITISH",[j.VIRGIN_ISLANDS_US]:"VIRGIN_ISLANDS_US",[j.WALLIS_AND_FUTUNA]:"WALLIS_AND_FUTUNA",[j.WESTERN_SAHARA]:"WESTERN_SAHARA",[j.YEMEN]:"YEMEN",[j.YUGOSLAVIA]:"YUGOSLAVIA",[j.ZAMBIA]:"ZAMBIA",[j.ZIMBABWE]:"ZIMBABWE",[j.COUNT]:"???"},rb=e=>i4[e],r4={[X.NONE]:"NONE",[X.ALABAMA]:"ALABAMA",[X.ALASKA]:"ALASKA",[X.ALBERTA]:"ALBERTA",[X.ARIZONA]:"ARIZONA",[X.ARKANSAS]:"ARKANSAS",[X.AUSTRALIAN_CAPITAL_TERRITORY]:"AUSTRALIAN_CAPITAL_TERRITORY",[X.BRITISH_COLUMBIA]:"BRITISH_COLUMBIA",[X.CALIFORNIA]:"CALIFORNIA",[X.COLORADO]:"COLORADO",[X.CONNECTICUT]:"CONNECTICUT",[X.DELAWARE]:"DELAWARE",[X.DISTRICT_OF_COLUMBIA]:"DISTRICT_OF_COLUMBIA",[X.FLORIDA]:"FLORIDA",[X.GEORGIA]:"GEORGIA",[X.HAWAII]:"HAWAII",[X.IDAHO]:"IDAHO",[X.ILLINOIS]:"ILLINOIS",[X.INDIANA]:"INDIANA",[X.IOWA]:"IOWA",[X.KANSAS]:"KANSAS",[X.KENTUCKY]:"KENTUCKY",[X.LOUISIANA]:"LOUISIANA",[X.MAINE]:"MAINE",[X.MANITOBA]:"MANITOBA",[X.MARYLAND]:"MARYLAND",[X.MASSACHUSETTS]:"MASSACHUSETTS",[X.MICHIGAN]:"MICHIGAN",[X.MINNESOTA]:"MINNESOTA",[X.MISSISSIPPI]:"MISSISSIPPI",[X.MISSOURI]:"MISSOURI",[X.MONTANA]:"MONTANA",[X.NEBRASKA]:"NEBRASKA",[X.NEVADA]:"NEVADA",[X.NEW_BRUNSWICK]:"NEW_BRUNSWICK",[X.NEW_HAMPSHIRE]:"NEW_HAMPSHIRE",[X.NEW_JERSEY]:"NEW_JERSEY",[X.NEW_MEXICO]:"NEW_MEXICO",[X.NEW_SOUTH_WALES]:"NEW_SOUTH_WALES",[X.NEW_YORK]:"NEW_YORK",[X.NORTHERN_TERRITORY]:"NORTHERN_TERRITORY",[X.NORTH_CAROLINA]:"NORTH_CAROLINA",[X.NORTH_DAKOTA]:"NORTH_DAKOTA",[X.NOVA_SCOTIA]:"NOVA_SCOTIA",[X.OHIO]:"OHIO",[X.OKLAHOMA]:"OKLAHOMA",[X.ONTARIO]:"ONTARIO",[X.OREGON]:"OREGON",[X.PENNSYLVANIA]:"PENNSYLVANIA",[X.QUEBEC]:"QUEBEC",[X.QUEENSLAND]:"QUEENSLAND",[X.RHODE_ISLAND]:"RHODE_ISLAND",[X.SASKATCHEWAN]:"SASKATCHEWAN",[X.SOUTH_AUSTRALIA]:"SOUTH_AUSTRALIA",[X.SOUTH_CAROLINA]:"SOUTH_CAROLINA",[X.SOUTH_DAKOTA]:"SOUTH_DAKOTA",[X.TASMANIA]:"TASMANIA",[X.TENNESSEE]:"TENNESSEE",[X.TEXAS]:"TEXAS",[X.UTAH]:"UTAH",[X.VERMONT]:"VERMONT",[X.VICTORIA]:"VICTORIA",[X.VIRGINIA]:"VIRGINIA",[X.WASHINGTON]:"WASHINGTON",[X.WESTERN_AUSTRALIA]:"WESTERN_AUSTRALIA",[X.WEST_VIRGINIA]:"WEST_VIRGINIA",[X.WISCONSIN]:"WISCONSIN",[X.WYOMING]:"WYOMING",[X.YUKON]:"YUKON",[X.CIUDAD_DE_MEXICO]:"CIUDAD_DE_MEXICO",[X.JALISCO]:"JALISCO",[X.NEWFOUNDLAND_AND_LABRADOR]:"NEWFOUNDLAND_AND_LABRADOR",[X.NUEVO_LEON]:"NUEVO_LEON",[X.BAJA_CALIFORNIA]:"BAJA_CALIFORNIA",[X.CHIHUAHUA]:"CHIHUAHUA",[X.GUANAJUATO]:"GUANAJUATO",[X.GUERRERO]:"GUERRERO",[X.MEXICO]:"MEXICO",[X.MICHOACAN]:"MICHOACAN",[X.NEW_YORK_CITY]:"NEW_YORK_CITY",[X.TAMAULIPAS]:"TAMAULIPAS",[X.VERACRUZ]:"VERACRUZ",[X.CHIAPAS]:"CHIAPAS",[X.COAHUILA]:"COAHUILA",[X.DURANGO]:"DURANGO",[X.GUERRERO_COCULA]:"GUERRERO_COCULA",[X.GUERRERO_JUCHITAN]:"GUERRERO_JUCHITAN",[X.GUERRERO_TEPECOACUILCO]:"GUERRERO_TEPECOACUILCO",[X.GUERRERO_TLACOAPA]:"GUERRERO_TLACOAPA",[X.GUJARAT]:"GUJARAT",[X.HIDALGO]:"HIDALGO",[X.KARNATAKA]:"KARNATAKA",[X.KERALA]:"KERALA",[X.KHYBER_PAKHTUNKHWA]:"KHYBER_PAKHTUNKHWA",[X.MADHYA_PRADESH]:"MADHYA_PRADESH",[X.MAHARASHTRA]:"MAHARASHTRA",[X.MORELOS]:"MORELOS",[X.NAYARIT]:"NAYARIT",[X.OAXACA]:"OAXACA",[X.PUEBLA]:"PUEBLA",[X.PUNJAB]:"PUNJAB",[X.QUERETARO]:"QUERETARO",[X.SAN_LUIS_POTOSI]:"SAN_LUIS_POTOSI",[X.SINALOA]:"SINALOA",[X.SONORA]:"SONORA",[X.TABASCO]:"TABASCO",[X.TAMIL_NADU]:"TAMIL_NADU",[X.YUCATAN]:"YUCATAN",[X.ZACATECAS]:"ZACATECAS",[X.AGUASCALIENTES]:"AGUASCALIENTES",[X.BAJA_CALIFORNIA_SUR]:"BAJA_CALIFORNIA_SUR",[X.CAMPECHE]:"CAMPECHE",[X.COLIMA]:"COLIMA",[X.QUINTANA_ROO_BENITO_JUAREZ]:"QUINTANA_ROO_BENITO_JUAREZ",[X.UINTANA_ROO]:"UINTANA_ROO",[X.QUINTANA_ROO_SOLIDARIDAD]:"QUINTANA_ROO_SOLIDARIDAD",[X.TLAXCALA]:"TLAXCALA",[X.QUINTANA_ROO_COZUMEL]:"QUINTANA_ROO_COZUMEL",[X.SAO_PAOLO]:"SAO_PAOLO",[X.RIO_DE_JANEIRO]:"RIO_DE_JANEIRO",[X.RIO_GRANDE_DO_SUL]:"RIO_GRANDE_DO_SUL",[X.NORTHWEST_TERRITORIES]:"NORTHWEST_TERRITORIES",[X.NUNAVUT]:"NUNAVUT",[X.PRINCE_EDWARD_ISLAND]:"PRINCE_EDWARD_ISLAND",[X.DISTRITO_FEDERAL]:"DISTRITO_FEDERAL",[X.MARANHAO]:"MARANHAO",[X.MATO_GROSSO]:"MATO_GROSSO",[X.MINAS_GERAIS]:"MINAS_GERAIS",[X.PARA]:"PARA",[X.PARANA]:"PARANA",[X.PERNAMBUCO]:"PERNAMBUCO",[X.SANTA_CATARINA]:"SANTA_CATARINA",[X.ANDHRA_PRADESH]:"ANDHRA_PRADESH",[X.CEARA]:"CEARA",[X.GOIAS]:"GOIAS",[X.GUERRERO_ACAPULCO_DE_JUAREZ]:"GUERRERO_ACAPULCO_DE_JUAREZ",[X.HARYANA]:"HARYANA",[X.SERGIPE]:"SERGIPE",[X.COUNT]:"COUNT"},ob=e=>r4[e],o4={[De.NONE]:"NONE",[De.CONSULAR_ID]:"CONSULAR_ID",[De.DL]:"DL",[De.DL_PUBLIC_SERVICES_CARD]:"DL_PUBLIC_SERVICES_CARD",[De.EMPLOYMENT_PASS]:"EMPLOYMENT_PASS",[De.FIN_CARD]:"FIN_CARD",[De.ID]:"ID",[De.MULTIPURPOSE_ID]:"MULTIPURPOSE_ID",[De.MYKAD]:"MYKAD",[De.MYKID]:"MYKID",[De.MYPR]:"MYPR",[De.MYTENTERA]:"MYTENTERA",[De.PAN_CARD]:"PAN_CARD",[De.PROFESSIONAL_ID]:"PROFESSIONAL_ID",[De.PUBLIC_SERVICES_CARD]:"PUBLIC_SERVICES_CARD",[De.RESIDENCE_PERMIT]:"RESIDENCE_PERMIT",[De.RESIDENT_ID]:"RESIDENT_ID",[De.TEMPORARY_RESIDENCE_PERMIT]:"TEMPORARY_RESIDENCE_PERMIT",[De.VOTER_ID]:"VOTER_ID",[De.WORK_PERMIT]:"WORK_PERMIT",[De.IKAD]:"IKAD",[De.MILITARY_ID]:"MILITARY_ID",[De.MYKAS]:"MYKAS",[De.SOCIAL_SECURITY_CARD]:"SOCIAL_SECURITY_CARD",[De.HEALTH_INSURANCE_CARD]:"HEALTH_INSURANCE_CARD",[De.PASSPORT]:"PASSPORT",[De.S_PASS]:"S_PASS",[De.ADDRESS_CARD]:"ADDRESS_CARD",[De.ALIEN_ID]:"ALIEN_ID",[De.ALIEN_PASSPORT]:"ALIEN_PASSPORT",[De.GREEN_CARD]:"GREEN_CARD",[De.MINORS_ID]:"MINORS_ID",[De.POSTAL_ID]:"POSTAL_ID",[De.PROFESSIONAL_DL]:"PROFESSIONAL_DL",[De.TAX_ID]:"TAX_ID",[De.WEAPON_PERMIT]:"WEAPON_PERMIT",[De.VISA]:"VISA",[De.BORDER_CROSSING_CARD]:"BORDER_CROSSING_CARD",[De.DRIVER_CARD]:"DRIVER_CARD",[De.GLOBAL_ENTRY_CARD]:"GLOBAL_ENTRY_CARD",[De.MYPOLIS]:"MYPOLIS",[De.NEXUS_CARD]:"NEXUS_CARD",[De.PASSPORT_CARD]:"PASSPORT_CARD",[De.PROOF_OF_AGE_CARD]:"PROOF_OF_AGE_CARD",[De.REFUGEE_ID]:"REFUGEE_ID",[De.TRIBAL_ID]:"TRIBAL_ID",[De.VETERAN_ID]:"VETERAN_ID",[De.CITIZENSHIP_CERTIFICATE]:"CITIZENSHIP_CERTIFICATE",[De.MY_NUMBER_CARD]:"MY_NUMBER_CARD",[De.CONSULAR_PASSPORT]:"CONSULAR_PASSPORT",[De.MINORS_PASSPORT]:"MINORS_PASSPORT",[De.MINORS_PUBLIC_SERVICES_CARD]:"MINORS_PUBLIC_SERVICES_CARD",[De.DRIVING_PRIVILEGE_CARD]:"DRIVING_PRIVILEGE_CARD",[De.ASYLUM_REQUEST]:"ASYLUM_REQUEST",[De.DRIVER_QUALIFICATION_CARD]:"DRIVER_QUALIFICATION_CARD",[De.PROVISIONAL_DL]:"PROVISIONAL_DL",[De.REFUGEE_PASSPORT]:"REFUGEE_PASSPORT",[De.SPECIAL_ID]:"SPECIAL_ID",[De.UNIFORMED_SERVICES_ID]:"UNIFORMED_SERVICES_ID",[De.IMMIGRANT_VISA]:"IMMIGRANT_VISA",[De.CONSULAR_VOTER_ID]:"CONSULAR_VOTER_ID",[De.TWIC_CARD]:"TWIC_CARD",[De.EXIT_ENTRY_PERMIT]:"EXIT_ENTRY_PERMIT",[De.MAINLAND_TRAVEL_PERMIT_TAIWAN]:"MAINLAND_TRAVEL_PERMIT_TAIWAN",[De.NBI_CLEARANCE]:"NBI_CLEARANCE",[De.PROOF_OF_REGISTRATION]:"PROOF_OF_REGISTRATION",[De.TEMPORARY_PROTECTION_PERMIT]:"TEMPORARY_PROTECTION_PERMIT",[De.COUNT]:"COUNT"},ab=e=>o4[e],Vm=85.6/54,Bm=e=>{const t=Math.min(e.topLeft.x,e.bottomLeft.x);return Math.max(e.topRight.x,e.bottomRight.x)-t},Qa=(e,t)=>{if(!e||e.detectionStatus===ei.Failed)return!1;const n=Math.min(e.topLeft.y,e.topRight.y),r=Math.max(e.bottomLeft.y,e.bottomRight.y),o=Math.min(e.topLeft.x,e.bottomLeft.x),a=Math.max(e.topRight.x,e.bottomRight.x),s=(a-o)/(r-n);if(!(s>Vm*.8&&s<Vm*1.2))return!1;if(t&&t.detectionStatus!==ei.Failed){const l=Math.min(t.topLeft.y,t.topRight.y),d=Math.max(t.bottomLeft.y,t.bottomRight.y),u=Math.min(t.topLeft.x,t.bottomLeft.x),h=Math.max(t.topRight.x,t.bottomRight.x);if(!(l>n*.95&&d<r*1.05&&u>o*.95&&h<a*1.05))return!1}return!0},Fi=new e4,a4=100,s4={[U.Front]:.6,[U.Back]:.3,[U.FrontOrBack]:.6,[U.BarcodePdf417]:.4,[U.PassportSignature]:.4},c4={[U.Front]:.9,[U.Back]:.75,[U.FrontOrBack]:.9,[U.BarcodePdf417]:.9,[U.PassportSignature]:.9},l4=[{type:0,shouldShow:Jd,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:3,shouldShow:e=>Co(U.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:e=>bc(U.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:5,shouldShow:e=>Xd(e)&&!Co(U.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:6,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],d4=[{type:0,shouldShow:Jd,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:3,shouldShow:e=>Co(U.BarcodePdf417,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:e=>bc(U.BarcodePdf417,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:6,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],u4=[{type:0,shouldShow:Jd,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:3,shouldShow:e=>Co(U.Back,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:e=>bc(U.Back,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:5,shouldShow:e=>Xd(e)&&!Co(U.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:6,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],m4={[U.Front]:l4,[U.Back]:u4,[U.BarcodePdf417]:d4,[U.FrontOrBack]:void 0,[U.PassportSignature]:void 0},h4=new Jn({type:7,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({t:e})=>e("government-id-scanner.hint.processing",{defaultValue:e("government-id-scanner.hint.hold-still")})});function Jd(e){return(e.glareRatio>2e-4||e.hasGlare)&&p4(e)}function p4(e){var t;return((t=e.microblinkResult)==null?void 0:t.state)===_r.Valid}function Co(e,t){var o;const n=t.detectedQuad;if(!n)return!1;const r=Math.max(n.topRight.x-n.topLeft.x,n.bottomRight.x-n.bottomLeft.x);return r>0&&r/t.videoWidth<s4[e]?!0:((o=t.detectedQuad)==null?void 0:o.detectionStatus)===ei.CameraTooFar}function bc(e,t){var o;const n=t.detectedQuad;if(!n)return!1;const r=Math.max(n.topRight.x-n.topLeft.x,n.bottomRight.x-n.bottomLeft.x);return r>0&&r/t.videoWidth>c4[e]?!0:((o=t.detectedQuad)==null?void 0:o.detectionStatus)===ei.CameraTooClose}function Xd(e){var t,n;return((t=e.detectedQuad)==null?void 0:t.detectionStatus)!=null&&[ei.DocumentTooCloseToCameraEdge,ei.DocumentPartiallyVisible].includes((n=e.detectedQuad)==null?void 0:n.detectionStatus)}function f4(e,t){const n=e!=="pp",r=t.microblinkResult&&"mrz"in t.microblinkResult?t.microblinkResult.mrz.verified===!0:!1;return n||r}const g4=8e3,ks=({delayUntilManualCaptureMs:e=g4,handleCapture:t,labelTakePhoto:n,overlay:r,videoConstraints:o,requiresSide:a,governmentIdClass:s,handleError:c,zoomFactor:l})=>{let d;const u=f.useRef(!1),[h,m]=f.useState(!1);Sa.useAsyncEffect(async()=>{try{const _=performance.now();await Fi.initialize(a,s),d=performance.now(),z.logAmplitude("government-id.microblink.initialization",{initializationTime:(d-_)/1e3,side:a,idClass:s})}catch(_){c(_,"load")}},()=>{Fi.tearDown(),d=void 0},[a]);const p=async(_,A,T,R)=>{var L,H,M;mo({source:_,precreatedCanvas:A,zoomFactor:l});const O=_.videoWidth/l,D=_.videoHeight/l;try{const B=A.toDataURL(go,Rs),V=performance.now();let q=!0;m(!1),setTimeout(()=>{q&&m(!0)},1e3);const $=await Fi.processImage(A,G=>{G&&setTimeout(()=>{if(q&&a===U.Front){const re=performance.now()-V;y({currentTrigger:R.getTriggered().getType(),detectedQuad:null,microblinkResult:null,glareRatio:oo(A),videoWidth:O,videoHeight:D,imageDataUri:B,hasGlare:null,processingTime:re},ut.Auto,null),q=!1}},1e3)});q=!1;const Q=$==null?void 0:$.recognizerName;if(a===U.Front){const G=$==null?void 0:$.recognitionResult,Y=$==null?void 0:$.detectedQuad,re=(L=$==null?void 0:$.hasGlare)!=null?L:null,Ce=performance.now()-V;return{currentTrigger:R.getTriggered().getType(),detectedQuad:Y!=null?Y:null,microblinkResult:G,microblinkRecognizerName:Q,glareRatio:oo(A),videoWidth:O,videoHeight:D,hasGlare:re,imageDataUri:B,processingTime:Ce}}else if(a===U.BarcodePdf417||a===U.Back){const G=$==null?void 0:$.recognitionResult,Y=(H=$==null?void 0:$.detectedQuad)!=null?H:null,re=(M=$==null?void 0:$.hasGlare)!=null?M:null,Ce=performance.now()-V;return{currentTrigger:R.getTriggered().getType(),detectedQuad:Y,microblinkResult:G,microblinkRecognizerName:Q,glareRatio:oo(A),videoWidth:O,videoHeight:D,hasGlare:re,imageDataUri:B,processingTime:Ce}}}catch(B){c(B,"capture")}return{currentTrigger:R.getTriggered().getType(),glareRatio:oo(A),videoWidth:O,videoHeight:D,microblinkRecognizerName:null,detectedQuad:null,microblinkResult:null,hasGlare:null,imageDataUri:null,processingTime:null}},g=(_,A)=>{var T;return((T=_.microblinkResult)==null?void 0:T.state)===_r.Valid&&!Co(a,_)&&!bc(a,_)&&!Xd(_)&&f4(s,_)},b=(_,A,T)=>({x:_.x/A,y:_.y/T}),x=(_,A,T)=>({bottomLeft:b(_.bottomLeft,A,T),bottomRight:b(_.bottomRight,A,T),topLeft:b(_.topLeft,A,T),topRight:b(_.topRight,A,T)}),y=async(_,A,T)=>{var O;if(u.current)return;const R=[];if(a===U.BarcodePdf417||a===U.Back){const D=_.microblinkResult;if(D&&(R.push({type:"pdf417",value:(O=D.barcodeData)==null?void 0:O.stringData}),_.detectedQuad)){const L=x(_.detectedQuad,_.videoWidth,_.videoHeight);R.push({type:"card",value:{barcode:{"top-left":L.topLeft,"top-right":L.topRight,"bottom-left":L.bottomLeft,"bottom-right":L.bottomRight}}})}}else if(a===U.Front){const D=_.microblinkResult;if(D){if(R.push({type:"viz",value:{"name-first":D.firstName,"name-last":D.lastName,"identification-number":D.documentNumber,address:D.address,birthdate:D.dateOfBirth.originalString,"expiration-date":D.dateOfExpiry.originalString}}),s==="pp"){const L=D.mrz;R.push({type:"mrz",value:L.rawMRZString})}if(_.detectedQuad){const L=x(_.detectedQuad,_.videoWidth,_.videoHeight);R.push({type:"card",value:{front:{"top-left":L==null?void 0:L.topLeft,"top-right":L==null?void 0:L.topRight,"bottom-left":L==null?void 0:L.bottomLeft,"bottom-right":L==null?void 0:L.bottomRight}}})}R.push({type:"classification",value:{type:D.classInfo.documentType?ab(D.classInfo.documentType):null,country:D.classInfo.country?rb(D.classInfo.country):null,region:D.classInfo.region?ob(D.classInfo.region):null}})}}z.logAmplitude("government-id.microblink.capture",{processingTime:_.processingTime/1e3,captureTime:d!=null?(performance.now()-d)/1e3:void 0,side:a,idClass:s,captureMethod:A,parsedViz:R.find(D=>D.type==="viz")!=null,parsedMrz:R.find(D=>D.type==="mrz")!=null,parsedCard:R.find(D=>D.type==="card")!=null,parsedClassification:R.find(D=>D.type==="classification")!=null,parsedPdf417:R.find(D=>D.type==="pdf417")!=null}),await t([_.imageDataUri],A,T,R,_.microblinkRecognizerName),u.current=!0},v=m4[a];return i.jsx(cc,{handleCapture:({captureMethod:_,params:A,cameraInspectionData:T})=>y(A,_,T),handleFailed:c,detectInterval:a4,labelTakePhoto:n,videoConstraints:o,triggerConfigs:v,paramsFromVideoFrame:p,shouldSubmit:g,overlay:r,delayUntilManualCaptureMs:e,triggerOverride:h?h4:null,zoomFactor:l,scannerType:"governmentId",disableCaptureClient:!0})};var sb=(e=>(e[e.DetectedGlare=0]="DetectedGlare",e[e.Capture=1]="Capture",e[e.HoldStill=2]="HoldStill",e[e.MoveCloser=3]="MoveCloser",e[e.None=4]="None",e))(sb||{});const b4=100,qm=.3,C4=.27,x4=.32,v4=.25,y4=.3,I4=.37,S4=[{type:0,shouldShow:w4,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:1,shouldShow:e=>e.currentTrigger===2,showAfterFrames:12,hideAfterFrames:999999,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:2,shouldShow:eu,showAfterFrames:3,hideAfterFrames:2,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:3,shouldShow:cb,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function w4(e){return e.glareRatio>2e-4&&(cb(e)||eu(e))}function cb(e){const{faceBoundingBox:t}=e;if(t==null)return!1;const n=1.5,r=new Pp((t.left-.5)*n+.5,(t.top-.5)*n+.5,(t.right-.5)*n+.5,(t.bottom-.5)*n+.5);return eu({...e,faceBoundingBox:r})}function eu({isPassport:e,faceBoundingBox:t}){if(t==null)return!1;if(e)return t.left+t.width/2<v4&&t.width<y4+.05&&t.height<I4+.05;{const n=t.left+t.width/2;return(n<qm||n>1-qm)&&t.width<C4+.05&&t.height<x4+.05}}const _4=.3,lb=({delayUntilManualCaptureMs:e=0,handleCapture:t,handleError:n,isPassport:r,labelTakePhoto:o,overlay:a,videoConstraints:s,zoomFactor:c})=>{const[l,d]=f.useState(!1),u=Xt("inquiry:disable-gov-id-face-api");f.useEffect(()=>{if(!u)try{yt.loadModels()}catch{d(!0)}},[]);const h=async(p,g,b,x)=>{mo({source:p,precreatedCanvas:g,zoomFactor:c});let y=[];if(!l&&yt.isLoaded()&&yt.isMediaLoaded(p))try{y=await yt.detectFaces(g,{scoreThreshold:_4})}catch(T){n(T,"capture"),d(!0)}let v;const _=g.width,A=g.height;return y.length===1&&_>0&&A>0&&(v=y[0].box.rescale({width:1/_,height:1/A})),{currentTrigger:x.getTriggered().getType(),faceBoundingBox:v!=null?v:null,glareRatio:oo(g),isPassport:r}},m=(p,g)=>g.getTriggered().getType()===sb.Capture;return i.jsx(cc,{handleCapture:({imageSrcs:p,captureMethod:g,cameraInspectionData:b})=>t(p,g,b),handleFailed:n,detectInterval:b4,labelTakePhoto:o,videoConstraints:s,triggerConfigs:S4,paramsFromVideoFrame:h,shouldSubmit:m,overlay:a,delayUntilManualCaptureMs:e,scannerType:"governmentId",zoomFactor:c})},R4=C("div").withConfig({displayName:"InquiryGovernmentIdCaptureView__Header",componentId:"sc-1y4wzo1-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[4]),A4=({countryCode:e,governmentIdClass:t,governmentIdSide:n})=>{const[r]=K(),o=Ii(r,["government-id.capture.title","government-id.title"],e,t,n);return i.jsx(dt,{children:i.jsx(J,{children:o})})},T4=({governmentIdClass:e,governmentIdSide:t})=>{const[n]=K(),r=Ii(n,["government-id.capture.prompt"],null,e,t);return i.jsx(ot,{children:i.jsx(J,{children:r})})};function E4({localizations:e,featureFlags:t,governmentIdClass:n,handleCapture:r,handleError:o,requiresSide:a,selectedCountryCode:s,shouldUseMicroblink:c,videoConstraints:l,webCameraManualCaptureDelayMs:d,barcodeCameraManualCaptureDelayMs:u,zoomFactor:h}){const m=i.jsx(eb,{governmentIdClass:n,requiresSide:a,mirrored:l.facingMode==="user",hideBackOverlay:(t==null?void 0:t["inquiry:remove-back-overlay-for-non-us-govid"])&&s!=="US"});let p;return a===U.BarcodePdf417?c?p=i.jsx(ks,{delayUntilManualCaptureMs:u,governmentIdClass:n,handleCapture:r,handleError:o,labelTakePhoto:e["btn-take-photo"],overlay:m,requiresSide:a,videoConstraints:l,zoomFactor:h}):p=i.jsx(nb,{delayUntilManualCaptureMs:u,handleCapture:r,handleError:o,labelTakePhoto:e["btn-take-photo"],videoConstraints:l,requiresSide:a,overlay:m,zoomFactor:h}):p=c?i.jsx(ks,{delayUntilManualCaptureMs:d,governmentIdClass:n,handleCapture:r,handleError:o,labelTakePhoto:e["btn-take-photo"],overlay:m,requiresSide:a,videoConstraints:l,zoomFactor:h}):i.jsx(lb,{delayUntilManualCaptureMs:d,handleCapture:r,handleError:o,isPassport:n==="pp"||n==="ipp",labelTakePhoto:e["btn-take-photo"],overlay:m,videoConstraints:l,zoomFactor:h}),i.jsxs("div",{children:[i.jsxs(R4,{children:[i.jsx(A4,{countryCode:s,governmentIdClass:n,governmentIdSide:a}),i.jsx(T4,{governmentIdClass:n,governmentIdSide:a})]}),p]})}const k4=C(J).withConfig({displayName:"GovernmentIdHelpModal__HelpModalPrompt",componentId:"sc-72hke3-0"})(["font-size:14px;line-height:21px;"]),N4=C(J).withConfig({displayName:"GovernmentIdHelpModal__HelpModalWarning",componentId:"sc-72hke3-1"})(["background-color:#fff7de;padding:"," ",";font-size:14px;line-height:21px;"],I.Spacing[3],I.Spacing[4]),j4=C.div.withConfig({displayName:"GovernmentIdHelpModal__HelpModalImageContainer",componentId:"sc-72hke3-2"})(["display:flex;justify-content:space-around;"]),P4=C(J).withConfig({displayName:"GovernmentIdHelpModal__HintListMarkdown",componentId:"sc-72hke3-3"})(["font-size:14px;line-height:21px;ul{border-spacing 0 8px;display:table;li{display:table-row;}li::before{display:table-cell;padding-right:12px;}}"]),D4=C(ge).withConfig({displayName:"GovernmentIdHelpModal__StickyButton",componentId:"sc-72hke3-4"})(["position:sticky;bottom:0;"]),$c=({isOpen:e,onClose:t,title:n,prompt:r,warning:o,pictograph:a,hints:s,continueBtnLabel:c,styles:l})=>{var d,u,h,m,p,g,b,x,y;return i.jsxs(_i,{isOpen:e,onClose:t,styles:(d=l==null?void 0:l.base)==null?void 0:d.modal,"data-test":"help-dialog","aria-labelledby":"help-dialog__title","aria-describedby":"help-dialog__description",children:[i.jsx(dt,{id:"help-dialog__title",styles:(u=l==null?void 0:l.base)==null?void 0:u.titleStyle,children:i.jsx(J,{children:n})}),r&&i.jsxs(i.Fragment,{children:[i.jsx(ot,{id:"help-dialog__description",styles:(h=l==null?void 0:l.base)==null?void 0:h.textStyle,children:i.jsx(k4,{children:r})}),i.jsx(We,{height:2.5})]}),o&&i.jsxs(i.Fragment,{children:[i.jsx(ot,{id:"help-dialog__warning",children:i.jsx(N4,{children:o})}),i.jsx(We,{height:2.5})]}),i.jsx(j4,{children:i.jsx(ye,{$primaryColor:k((p=(m=l==null?void 0:l.captureHintIcon)==null?void 0:m.fill)==null?void 0:p.color),$strokeColor:k((b=(g=l==null?void 0:l.captureHintIcon)==null?void 0:g.stroke)==null?void 0:b.color),children:a})}),i.jsx(We,{height:2}),i.jsx(ot,{id:"help-dialog__description",styles:(x=l==null?void 0:l.base)==null?void 0:x.textStyle,children:i.jsx(P4,{children:s})}),i.jsx(D4,{type:"button",id:"help-dialog__btn",onClick:t,styles:(y=l==null?void 0:l.buttons)==null?void 0:y.primary,children:c})]})};var db=(e=>(e[e.FrontSide=0]="FrontSide",e[e.Capture=1]="Capture",e[e.HoldStill=2]="HoldStill",e[e.DetectedLowLight=3]="DetectedLowLight",e[e.None=4]="None",e))(db||{});const O4=300,Um=.3,L4=.27,F4=.32,M4=[{type:0,shouldShow:B4,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.back-side")},{type:1,shouldShow:e=>e.requiresSide===U.BarcodePdf417?e.detectedGuards>=2:e.detectedGuards>=1,showAfterFrames:3,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:2,shouldShow:e=>e.detectedGuards>=1,showAfterFrames:1,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:3,shouldShow:V4,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:4,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function V4(e){return lc(e.luminosityData)}function B4(e){if(e.faceBoundingBox==null)return!1;const t=e.faceBoundingBox.left+e.faceBoundingBox.width/2;return(t<Um||t>1-Um)&&e.faceBoundingBox.width<L4+.05&&e.faceBoundingBox.height<F4+.05}async function q4(e,t,n={x:0,y:0,width:e.width,height:e.height}){const r=e.getContext("2d",{willReadFrequently:!0});if(r==null||n.width<=0||n.height<=0)return{detectedGuards:0};const o=r==null?void 0:r.getImageData(n.x,n.y,n.width,n.height),a=window.ZXing;if(o&&a){const s=new a.BitmapLuminanceSource(o),c=new a.Common.HybridBinarizer(s),l=new a.BinaryBitmap(c);return U4(e,l,t)}else return{detectedGuards:0}}function U4(e,t,n){const r=window.ZXing;for(const o of n){switch(o){case 90:t=t.rotateCounterClockwise();break;case 180:t=t.rotateCounterClockwise().rotateCounterClockwise();break}const a=r.PDF417.Internal.Detector.detectSingle(t,null,!1);if(a.Points.length>0){const s=r.PDF417.PDF417Reader.decode(t,null,!1);return{decodedResult:s.length>0&&s[0].Text,detectedGuards:a.Points[0].filter(Boolean).length/4,scannedImage:e.toDataURL("image/jpeg")}}}return{detectedGuards:0}}function H4(e){const t=/\d{6}(\d{2})\w+/.exec(e),n=t&&t[1],r={firstName:["02","03"].indexOf(n)!==-1?"DCT":"DAC",lastName:n==="01"?"DAB":"DCS",middleName:"DAD",dateOfBirth:"DBB",street1:"DAG",street2:"DAH",city:"DAI",state:"DAJ",postalCode:"DAK",issuingCountry:"DCG"},o={};for(const a of Object.keys(r)){const s=r[a],c=new RegExp(`\\s*${s}(.+)(\\n|$)`).exec(e);o[a]=c&&c[1].trim()}return o}const ub={tooltip:10},$4=C.div.withConfig({displayName:"Header__HeaderContainer",componentId:"sc-191apgd-0"})(["",";display:flex;align-items:center;justify-content:space-between;&:not(:only-child){margin:0px 0px "," 0px;}",""],ui.md,I.Spacing[4],({variant:e})=>e==="section"&&W(["border-bottom:1px solid ",";"],({theme:t})=>t.color.border.primary)),G4=C.div.withConfig({displayName:"Header__TitleContainer",componentId:"sc-191apgd-1"})(["display:flex;align-items:center;gap:",";"],I.Spacing[2]),W4=C.h3.withConfig({displayName:"Header__Title",componentId:"sc-191apgd-2"})(["display:flex;align-items:center;margin:0px;gap:",";",""],I.Spacing[2],({variant:e})=>{switch(e){case"section":return ui.lgBold;case"title":default:return Up.sm}}),z4=C.div.withConfig({displayName:"Header__ActionsContainer",componentId:"sc-191apgd-3"})(["color:",";display:flex;align-items:center;gap:",";"],({theme:e})=>e.color.text.secondary,I.Spacing[2]),tu=({children:e,variant:t,actions:n,subtitle:r,...o})=>i.jsxs($4,{variant:t,...o,children:[i.jsxs(G4,{children:[i.jsx(W4,{variant:t,children:e}),r]}),i.jsx(z4,{children:n})]}),Y4=C("div").withConfig({displayName:"Card",componentId:"sc-pkdedo-0"})(["border-radius:",";display:flex;flex-direction:column;margin-bottom:",";background-color:",";font-family:",";",""],({theme:e})=>e.card.borderRadius,I.Spacing[4],({theme:e})=>e.color.background.primary,({theme:e})=>e.text.fontFamily.base,({elevated:e})=>e&&W(["box-shadow:0px 0px 14px 2px rgba(0,0,0,0.12);"])),K4=C("section").withConfig({displayName:"Card__Body",componentId:"sc-pkdedo-1"})(["margin:0;padding:",";display:grid;grid-auto-flow:row;grid-gap:","px;grid-template-columns:minmax(0,1fr);"],({padding:e})=>e!=null?e:I.Spacing[5],({gap:e})=>e!=null?e:sn),Q4=C("div").withConfig({displayName:"Card__IconContainer",componentId:"sc-pkdedo-2"})(["margin-right:",";display:flex;align-items:center;> svg{height:24px;width:24px;}"],I.Spacing[3]),Z4=C("div").withConfig({displayName:"Card__ImageWrapper",componentId:"sc-pkdedo-3"})(["width:100%;overflow:hidden;border-radius:"," "," 0px 0px;",";> img,svg{width:100%;border-radius:"," "," 0px 0px;}"],({theme:e})=>e.card.borderRadius,({theme:e})=>e.card.borderRadius,({height:e})=>W(["height:","px;"],e),({theme:e})=>e.card.borderRadius,({theme:e})=>e.card.borderRadius),J4=({icon:e,children:t,...n})=>i.jsxs(tu,{variant:"title",...n,children:[e!=null&&i.jsx(Q4,{children:e}),t]}),X4=C(ac).attrs(()=>({size:"md"})).withConfig({displayName:"Card__Subtitle",componentId:"sc-pkdedo-4"})(["color:",";"],({theme:e})=>e.color.text.tertiary),e5=({children:e,...t})=>i.jsx(tu,{variant:"section",...t,children:e}),t5=({height:e,children:t,...n})=>i.jsx(Z4,{...n,height:e,children:t}),n5=({id:e,defaultExpanded:t,title:n,children:r})=>{const[o,{toggle:a}]=st(t);return i.jsxs("section",{children:[i.jsx("div",{id:e,onClick:a,children:i.jsxs(tu,{variant:"section",children:[i.jsxs(i5,{children:[o?i.jsx(J0,{}):i.jsx(X0,{}),i.jsx(We,{width:.5,height:0})]}),n]})}),i.jsx("div",{children:o&&i.jsxs(i.Fragment,{children:[i.jsx(We,{height:1}),r]})}),i.jsx(We,{height:1})]})},i5=C.div.withConfig({displayName:"Card__HeaderIcon",componentId:"sc-pkdedo-5"})(["display:flex;"]),r5=Object.assign(Y4,{Title:J4,SectionHeader:e5,Subtitle:X4,Body:K4,Image:t5,CollapsibleSection:n5}),mb={default:W(["cursor:pointer;color:",";"," ",""],({theme:e,variant:t="basic"})=>["basic","primary"].includes(t)?e.color.text.primary:e.color.variants[t].default,({theme:e})=>W(["background-color:",";border-radius:",";"],e.color.background.primary,e.element.borderRadius),({theme:e,disabled:t})=>t&&W(["background-color:",";color:",";cursor:default;svg *{stroke:",";}svg.pds-icon{*{stroke:unset;}*[stroke]{stroke:currentColor;}}"],e.color.background.primary,e.color.text.disabled,e.color.text.disabled)),hover:W(["transition-duration:",";color:",";background-color:",";",""],it.Fast,({theme:e,variant:t="basic"})=>t==="basic"?e.color.text.primary:e.color.variants[t].default,({theme:e,variant:t="basic"})=>t==="basic"?e.color.background.secondary:e.color.variants[t].highlightLight,({theme:e,disabled:t,variant:n="basic"})=>!t&&W(["svg *{stroke:",";}svg.pds-icon{*{stroke:unset;}*[stroke]{stroke:currentColor;}}"],n==="basic"?e.color.text.primary:e.color.variants[n].default)),active:W(["transition-duration:",";color:",";background-color:",";",""],it.Fast,({theme:e,variant:t="basic"})=>t==="basic"?e.color.text.inverse:e.color.variants[t].default,({theme:e,variant:t="basic"})=>t==="basic"?e.color.primary.brand:e.color.variants[t].highlightLight,({theme:e,disabled:t,variant:n="basic"})=>!t&&W(["svg *{stroke:",";}svg.pds-icon{*{stroke:unset;}*[stroke]{stroke:currentColor;}}"],n==="basic"?e.color.text.primary:e.color.variants[n].default))};var Ma=(e=>(e[e.Light=300]="Light",e[e.Regular=400]="Regular",e[e.Medium=500]="Medium",e[e.Bold=700]="Bold",e))(Ma||{});const o5=C(r5).withConfig({displayName:"Menu__FloatingCard",componentId:"sc-j1g7je-0"})(["box-shadow:0px 0px 14px 2px rgba(0,0,0,0.12);outline:none;z-index:",";"],ub.tooltip),a5=C.div.attrs(({role:e})=>({role:e!=null?e:"menu"})).withConfig({displayName:"Menu__MenuList",componentId:"sc-j1g7je-1"})(["list-style:none;margin:0;padding:",";outline:none;"],({padding:e})=>e||I.Spacing[2]),s5=C.li.withConfig({displayName:"Menu__ListItem",componentId:"sc-j1g7je-2"})(["",";display:flex;align-items:center;padding:",";border-radius:4px;list-style:none;text-decoration:none;color:",";cursor:pointer;"," &","",",&","","{",";outline:none;color:",";background-color:",";}&","{color:",";cursor:default;pointer-events:none;}",""],ui.md,I.Spacing[2],({theme:e})=>e.color.text.primary,({focused:e,theme:t})=>e&&W(["outline:none;color:",";background-color:",";"],t.color.text.brand,t.color.background.highlight),bn,jr,bn,xi,mb.hover,({theme:e})=>e.color.text.brand,({theme:e})=>e.color.background.highlight,ho,({theme:e})=>e.color.text.disabled,({theme:e,variant:t})=>t==="danger"&&W(["color:",";&","",",&","","{color:",";background-color:",";}&","{color:",";}"],e.color.variants[t].default,bn,jr,bn,xi,e.color.variants[t].default,e.color.variants[t].highlightLight,ho,({theme:n})=>n.color.variants[t].disabled)),Hm=C("div").withConfig({displayName:"Menu__IconContainer",componentId:"sc-j1g7je-3"})(["display:flex;align-items:center;justify-content:flex-end;margin-right:",";line-height:1;",""],I.Spacing[2],({suffix:e})=>e&&W(["margin-left:",";"],I.Spacing[2])),c5=C("div").withConfig({displayName:"Menu__LabelContainer",componentId:"sc-j1g7je-4"})(["margin-bottom:-1px;line-height:16px;",""],({stretchLabel:e})=>e&&W(["width:100%;"])),hb=f.forwardRef(function({children:t,disabled:n,variant:r,prefixIcon:o,suffixIcon:a,stretchLabel:s,...c},l){return i.jsxs(s5,{disabled:n,variant:r,ref:l,"aria-disabled":n,role:"menuitem",tabIndex:n?-1:0,...c,children:[o&&i.jsx(Hm,{children:o}),i.jsx(c5,{stretchLabel:!!s,children:t}),a&&i.jsx(Hm,{suffix:!0,children:a})]})}),l5=C.hr.withConfig({displayName:"Menu__StyledMenuDivider",componentId:"sc-j1g7je-5"})(["height:0px;padding:0px;font-size:0;margin:"," -",";border:none;border-top:1px solid ",";"],I.Spacing[2],I.Spacing[2],({theme:e})=>e.color.border.primary),pb=e=>i.jsx(e1,{asChild:!0,children:i.jsx(l5,{...e})}),fb=C.li.withConfig({displayName:"Menu__MenuHeading",componentId:"sc-j1g7je-6"})(["",";text-transform:uppercase;padding:",";display:block;color:",";font-weight:",";letter-spacing:0.1em;"],ui.sm,I.Spacing[2],({theme:e})=>e.color.text.secondary,Ma.Regular),Cc=({children:e,variant:t,containerProps:n,itemProps:r,listRef:o,className:a,onClose:s,as:c,...l})=>{const d=i.jsx(o5,{...n,className:a,children:i.jsxs(a5,{...l,as:c,ref:o,children:[e,i.jsx(t1,{onDismiss:s})]})});return t==="dark"?i.jsx(ya,{theme:TS,children:d}):d};Cc.Heading=fb;Cc.Divider=pb;Cc.Item=hb;const d5=C(n1).withConfig({displayName:"DropdownMenu__DropdownMenuContent",componentId:"sc-15h7vl7-0"})(["z-index:",";"],({$zIndex:e})=>e||ub.tooltip),u5=({trigger:e,children:t,side:n,align:r="end",contentProps:o,triggerProps:a,portalProps:s,className:c,portal:l,modal:d=!1,disabled:u=!1,zIndex:h,...m})=>{if(f.Children.count(t)===0)return null;const p=u?null:i.jsx(d5,{sideOffset:sn,collisionPadding:sn,align:r,side:n,$zIndex:h,...o,children:i.jsx(Cc,{className:c,children:t})});return i.jsxs(r1,{modal:d,...m,children:[i.jsx(o1,{asChild:!0,...a,children:e}),l?i.jsx(a1,{...s,children:p}):p]})},m5=f.forwardRef(function({children:t,disabled:n,...r},o){return i.jsx(i1,{asChild:!0,disabled:n,...r,children:i.jsx(hb,{disabled:n,ref:o,children:t})})}),gb=Object.assign(u5,{Item:m5,Heading:fb,Divider:pb}),bb=()=>{var a;const{pathname:e}=Vr(),t=Ke(s=>s.inquiry.inquiry),n=Ke(s=>s.inquiry.featureFlags),r=(a=t==null?void 0:t.attributes)==null?void 0:a["next-step"],o=f.useRef({width:0,height:0});return{videoDimensionsUpdated:(s,c)=>{s!=null&&c!=null&&(o.current.width!==s||o.current.height!==c)&&(Bt.track({event:{type:"inquiry.camera.dimensions",data:{old_width:o.current.width,old_height:o.current.height,new_width:s,new_height:c,page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n}),o.current={width:s,height:c})}}},h5=C.button.withConfig({displayName:"BaseScanner__TorchButton",componentId:"sc-16dj2ru-0"})(["background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;height:40px;width:40px;svg{height:100%;width:100%;}",""],({active:e})=>e&&W(["svg path{fill:white;}"])),p5=C.button.withConfig({displayName:"BaseScanner__HelpButton",componentId:"sc-16dj2ru-1"})(["background:none;color:white;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;height:40px;svg{margin-right:4px;height:16px;width:16px;}"]),f5=C.div.withConfig({displayName:"BaseScanner__ButtonRowHelp",componentId:"sc-16dj2ru-2"})(["display:flex;align-items:center;justify-content:space-around;button:disabled{display:none;}z-index:",";"],At.footer),g5=720,b5=C("div").withConfig({displayName:"BaseScanner__VideoWrapper",componentId:"sc-16dj2ru-3"})(["background:",";overflow:hidden;position:relative;min-height:","px;display:flex;justify-content:center;",";",";"],Be.black,Aa,({flowType:e,useDynamicHeight:t,preferredDimensions:n})=>e===rt.Inline||n&&e===rt.Embedded?`
      height: ${t?"100vh":`${g5}px`};
    `:`
      @media ${xt.isMobile} {
        height: 100%;
        min-height: 140vw;
      }

      @media ${xt.isNotMobile} {
        ${n!=null&&n["minimum-height"]?`min-height: ${E(n["minimum-height"])};`:""}
      }
    `,N.isDashboardFLE&&"height: 100%;"),C5=450,x5=C.div.withConfig({displayName:"BaseScanner__VideoWrapperColumnSizer",componentId:"sc-16dj2ru-4"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${C5}px`:null),v5=C.div.withConfig({displayName:"BaseScanner__ButtonsArea",componentId:"sc-16dj2ru-5"})(["position:absolute;bottom:40px;width:100%;display:flex;flex-direction:column;z-index:",";"],At.footer),y5=C.div.withConfig({displayName:"BaseScanner__ButtonRowMobile",componentId:"sc-16dj2ru-6"})(["width:100%;display:flex;align-items:center;justify-content:space-between;"]),I5=C.div.withConfig({displayName:"BaseScanner__ButtonRowDesktop",componentId:"sc-16dj2ru-7"})(["margin-left:10%;margin-right:10%;width:80%;display:flex;align-items:center;justify-content:space-between;z-index:",";"],At.footer),S5=C.div.withConfig({displayName:"BaseScanner__AuxButtons",componentId:"sc-16dj2ru-8"})(["position:absolute;align-items:center;display:flex;right:10%;line-height:1;"]),w5=C.button.withConfig({displayName:"BaseScanner__CircleCaptureButton",componentId:"sc-16dj2ru-9"})(["background:none;cursor:pointer;margin-left:auto;margin-right:auto;circle{transition-duration:",";}visibility:",";:hover:not(:disabled){#btn-outer{stroke:",";}#btn-inner{fill:",";}}:active:not(:disabled){#btn-outer{stroke:",";}#btn-inner{fill:",";}}:disabled circle{#btn-outer{stroke:",";}#btn-inner{fill:",";}}"],it.Fast,({manualCaptureEnabled:e})=>e?"visibile":"hidden",I.Color.CoreSlate100,I.Color.CoreSlate100,I.Color.CoreSlate300,I.Color.CoreSlate300,I.Color.CoreSlate500,I.Color.CoreSlate500),_5=C.button.withConfig({displayName:"BaseScanner__SwitchCameraButton",componentId:"sc-16dj2ru-10"})(["background:transparent;cursor:pointer;margin-left:10px;line-height:1;",""],({open:e})=>e?W(["path{stroke:",";}rect{fill-opacity:1;}"],({theme:t})=>t.colorPrimary):W([":hover:not(:disabled){rect{fill-opacity:0.3;}}:active:not(:disabled){rect{fill-opacity:0.4;}}"])),R5=C(gb.Item).withConfig({displayName:"BaseScanner__DropdownItem",componentId:"sc-16dj2ru-11"})(["height:",";padding:0 "," 0 ",";min-width:120px;font-weight:",";:hover,:focus{",";}font-weight:",";"],({theme:e})=>e.element.height.md,I.Spacing[6],I.Spacing[2],Ma.Medium,mb.hover,({selected:e})=>e?600:500),A5=i.jsxs("svg",{role:"img",width:"62",height:"62",viewBox:"0 0 62 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{id:"btn-outer",cx:"31",cy:"31",r:"29.5",stroke:"white",strokeWidth:"3"}),i.jsx("circle",{id:"btn-inner",cx:"31",cy:"31",r:"26",fill:"white"})]}),T5={...Gi,colorButtonPrimary:Be.white,colorFontButtonPrimary:Be.black,colorButtonSecondary:Be.white,colorFontButtonSecondary:Be.white,colorButtonSecondaryFill:Be.black,borderWidth:"1.5px",borderRadius:"24px"},E5=C(ge).withConfig({displayName:"BaseScanner__ThemedButton",componentId:"sc-16dj2ru-12"})(["visibility:",";"],({manualCaptureEnabled:e})=>e?"visible":"hidden"),k5=C.div.withConfig({displayName:"BaseScanner__AutoCapturePillPositioner",componentId:"sc-16dj2ru-13"})(["position:absolute;top:36px;display:flex;justify-content:center;width:100%;transform:translateY(-50%);z-index:",";"],At.navbar-1);function nu(e){var ri,Kr,lu,du,uu,mu;const t=Xh(),n=ni(),r=Xt("inquiry:show-camera-error-dialog-on-unavailable-video-stream"),o=Xt("inquiry:enable-dynamic-height-for-camera-capture-on-desktop"),[a]=K(),{base:s,captureFeedBox:c,captureHint:l,captureOverlayHeaderButton:d}=On(),u=f.useRef(void 0),h=f.useRef(void 0),m=f.useRef(!1),p=f.useRef(),g=f.useRef();f.useEffect(()=>{const[ht,Ft]=Ci();return g.current=ht,e.disableCaptureClient||($.current=new Rl({canvasBuffer:g.current})),Ft},[]);const{logCameraInspectionFromStream:b,logCameraInspectionSnapshot:x,getCameraInspectionData:y}=Ud(),v=f.useRef(new qd(e.triggerConfigs.map(ht=>new Jn(ht)))),_=f.useCallback(ht=>{var Ft;(Ft=e.handleTrigger)==null||Ft.call(e,ht)},[e.handleTrigger]),[A,T]=f.useState(!1),[R,O]=f.useState(!1),D=f.useRef(!1),L=ht=>{O(ht),D.current=ht},[H,{enable:M,disable:B}]=st(!1),[V,q]=Vf(B,500,{maxWait:500}),$=f.useRef(null),Q=f.useRef(),[G,Y]=f.useState(null),[re,ae]=f.useState(null),[Ce,{toggle:we}]=st(),[me,Ie]=f.useState(!1),[le,ee]=f.useState(!1),[ce,_e]=f.useState(e.delayUntilManualCaptureMs===0||Pn()),pe=Zi(),[Je,lt]=f.useState(!1),[ue,{enable:Pe,disable:Le}]=st(),Fe=(ri=re==null?void 0:re.facingMode)!=null?ri:e.videoConstraints.facingMode,nt=f.useRef(),Qe=f.useRef(),Ne=f.useRef(e.delayUntilManualCaptureMs),{videoDimensionsUpdated:de}=bb(),be=f.useCallback(()=>{Ne.current>0&&!nt.current&&(Qe.current=Date.now(),nt.current=window.setTimeout(()=>_e(!0),Ne.current))},[]),Se=f.useCallback(()=>{nt.current&&(clearTimeout(nt.current),Ne.current-=Date.now()-Qe.current,nt.current=null)},[]);f.useEffect(()=>{if(e.overlayReady)return e.delayUntilManualCaptureMs>0&&be(),()=>{Se()}},[e.overlayReady]);const ve=f.useCallback(()=>{m.current=!0,Pe(),Se()},[Pe,Se]),He=f.useCallback(()=>{Le(),be(),m.current=!1},[Le,be]),Ve=()=>{var ht,Ft,Mt,fn,Ri,br;if(h.current){if(((ht=p.current)==null?void 0:ht.video)!=null&&((Mt=(Ft=p.current)==null?void 0:Ft.video)==null?void 0:Mt.videoWidth)>0&&((fn=e.overlayRef.current)==null?void 0:fn.clientWidth)!=null&&e.overlayRef.current.clientWidth>0&&((Ri=e.overlayCaptureWindowRef.current)==null?void 0:Ri.clientWidth)!=null&&e.overlayCaptureWindowRef.current.clientWidth>0&&g.current!=null&&!m.current&&!D.current&&e.uiReady)try{oa({source:p.current.video,canvasBuffer:g.current}),(br=$.current)==null||br.capture()}catch(Cr){Cr.name!=="NS_ERROR_NOT_AVAILABLE"&&e.handleFailed(Cr,"capture")}h.current!=null&&(h.current=window.setTimeout(Ve,_s))}},ze=async(ht,Ft)=>{var Mt,fn,Ri;if(!(!e.uiReady||R)){L(!0);try{((Mt=p.current)==null?void 0:Mt.video)!=null&&g.current!=null&&(oa({source:p.current.video,canvasBuffer:g.current}),(fn=$.current)==null||fn.capture(),Ft||(Ft=await e.paramsFromVideoFrame(p.current.video,g.current,$.current,v.current,Au(p.current.video,e.overlayCaptureWindowRef.current,e.previewViewfinderRef.current))),await e.handleCapture({imageSrcs:(Ri=$.current)==null?void 0:Ri.leastBlurryImages(),captureMethod:ht,params:Ft,cameraInspectionData:y({includeSmallImages:!1})}))}finally{pe()&&L(!1)}}},St=async()=>{var Ft,Mt,fn,Ri,br,Cr,Ba,qa,oi,hu,pu,fu;if(!u.current)return;const ht=new Date().getTime();if(((fn=(Mt=(Ft=p.current)==null?void 0:Ft.video)==null?void 0:Mt.videoWidth)!=null?fn:0)>0&&((br=(Ri=e.overlayRef.current)==null?void 0:Ri.clientWidth)!=null?br:0)>0&&((Ba=(Cr=e.overlayCaptureWindowRef.current)==null?void 0:Cr.clientWidth)!=null?Ba:0)>0&&g.current!=null&&!m.current&&!D.current&&e.uiReady){const Qr=await e.paramsFromVideoFrame(p.current.video,g.current,$.current,v.current,Au(p.current.video,e.overlayCaptureWindowRef.current,e.previewViewfinderRef.current));if(x(g.current),de((oi=(qa=p.current)==null?void 0:qa.video)==null?void 0:oi.videoWidth,(pu=(hu=p.current)==null?void 0:hu.video)==null?void 0:pu.videoHeight),v.current.runTick(Qr),_(v.current.getTriggered()),(fu=e.hasValidQuad)!=null&&fu.call(e,Qr)?(q(),M()):V(),!m.current&&e.shouldSubmit(Qr,v.current)){ze(ut.Auto,Qr);return}}if(u.current!=null){const Qr=Math.max(0,e.detectInterval-(new Date().getTime()-ht));u.current=window.setTimeout(St,Qr)}};f.useEffect(()=>()=>{An.dispose()},[]),f.useEffect(()=>(re&&e.videoReady&&(u.current=window.setTimeout(St,e.detectInterval),e.disableCaptureClient||(h.current=window.setTimeout(Ve,_s))),()=>{clearTimeout(u.current),u.current=null,clearTimeout(h.current),h.current=null}),[re,e.videoReady]),f.useEffect(()=>{var ht;try{if(((ht=Q.current)==null?void 0:ht.readyState)==="live"&&me){const Ft={torch:Ce};le&&(Ft.focusMode="continuous"),Q.current.applyConstraints({advanced:[Ft]})}}catch(Ft){Z(new Error("Failed to enable torch"),"warning",{error:Ft})}},[Ce]),f.useEffect(()=>{const ht=window.setInterval(()=>{var Ft;try{if(!pe()||!ep("/inquiry/government-id/:step/capture",t.pathname))return;const Mt=(Ft=p.current)==null?void 0:Ft.stream;if(Mt==null)return;const fn=Mt==null?void 0:Mt.getVideoTracks()[0];(!Mt.active||fn==null||!(fn!=null&&fn.enabled)||(fn==null?void 0:fn.readyState)!=="live")&&(r&&e.handleFailed("Video stream is not available after webcam mount","load"),window.clearInterval(ht))}catch(Mt){Z(Mt,"warning")}},1e3);return()=>{window.clearInterval(ht)}},[]);const wt=Ur(),Ut=ht=>{ht&&(p.current=ht,p.current.video.defaultMuted=!0,p.current.video.muted=!0,p.current.video.addEventListener("loadedmetadata",async()=>{const Ft=p.current.stream;if(Ft==null){const oi="Video stream is not available on webcam mount";r?e.handleFailed(new Error(oi),"load"):Z(new Error(oi),"warning",{scannerType:e.scannerType,...e.videoConstraints});return}const Mt=Ft.getVideoTracks()[0];if(Mt==null){e.handleFailed("Video track is null","load");return}const[fn,Ri]=Ci();g.current=fn,e.disableCaptureClient||($.current=new Rl({canvasBuffer:g.current}));const{deviceId:br,height:Cr,width:Ba,facingMode:qa}=Mt.getSettings();if(Y(br),ae({height:Cr,width:Ba,facingMode:qa}),!(Mt.readyState!=="live"||typeof ImageCapture>"u"))try{if(await new ImageCapture(Mt).getPhotoCapabilities(),Mt.readyState!=="live")return;const oi=Mt.getCapabilities();Mt.applyConstraints.toString().includes("function")&&(oi.focusMode!=null&&Mt.applyConstraints({advanced:[{focusMode:"continuous"}]}),Q.current=Mt,Ie(oi.torch!=null),ee(oi.focusMode!=null))}catch(oi){oi.name!=="OperationError"&&Z(oi,"warning")}}),p.current.video.addEventListener("canplay",async()=>{if(p.current.video&&(T(!0),p.current.video.paused))try{await p.current.video.play()}catch(Ft){e.handleFailed(Ft,"load")}}))},gt=(Kr=e.cameraSelectOptions)==null?void 0:Kr.map((ht,Ft)=>{var Mt;return{id:ht.deviceId,label:(Mt=ht.label)!=null?Mt:`Camera ${Ft+1}`,onClick:()=>e.handleCameraChange(ht)}}),Hn=e.showHelpButton&&((lu=e.renderHelpModal)==null?void 0:lu.call(e,{isOpen:ue,onClose:He}));return i.jsxs(b5,{flowType:N.flowType,"data-test":`scanner__${e.scannerType}`,"data-scanner-type":e.scannerType,useDynamicHeight:o,preferredDimensions:wt,children:[i.jsxs(x5,{restrictInlineColumnWidth:N.isInline||!!wt,children:[i.jsx(k5,{children:(du=e.renderAutoCapturePill)==null?void 0:du.call(e,{isCameraReady:A&&e.videoReady})}),i.jsx(Zd,{assets:e.assets,hasDetectedQuad:H,styles:{base:s,captureBox:c,captureOverlayHeaderButton:d,hint:l==null?void 0:l.textStyle},isAnimated:!1,collapsed:!1,flipped:!1,renderCaptureWindowContents:()=>i.jsx(Os,{audio:!1,width:"100%",height:"initial",ref:Ut,videoConstraints:e.videoConstraints,onUserMedia:b,onUserMediaError:ht=>e.handleFailed(ht,"load")}),renderUnderOverlayComponents:()=>!!Hn&&i.jsx(f5,{children:i.jsxs(p5,{id:"scanner__button--help",onClick:ve,children:[i.jsx(ye,{$primaryColor:e.helpButtonIconColor,$strokeColor:e.helpButtonIconColor,children:i.jsx(s1,{"aria-hidden":!0})}),i.jsx("span",{children:e.helpButtonLabel})]})}),isShortBarcodeOverlay:e.isShortBarcodeOverlay,governmentIdClass:e.governmentIdClass,requiresSide:e.requiresSide,captureOverlay:e.captureOverlay,mirrored:Fe==="user",captureFrameLabel:e.captureFrameLabel,prompt:e.videoReady?e.prompt:a("government-id.capture.loading-camera"),hint:e.hint,overlayRef:e.overlayRef,overlayCaptureWindowRef:e.overlayCaptureWindowRef,previewViewfinderRef:e.previewViewfinderRef}),i.jsx(v5,{children:n||me||e.shouldDisplayCameraSelector&&((uu=e.cameraSelectOptions)==null?void 0:uu.length)>1?i.jsxs(y5,{children:[i.jsx(w5,{disabled:!e.uiReady||R||!A||!ce||!e.videoReady,manualCaptureEnabled:A&&ce,id:"scanner__button--capture-circle","data-test":"scanner__button--capture",onClick:ze.bind(null,ut.Manual,null),children:A5}),i.jsxs(S5,{children:[me?i.jsx(h5,{id:"scanner__button--torch",onClick:we,active:Ce,title:Ce?"Flash ON":"Flash OFF",children:i.jsx(Np,{})}):i.jsx(We,{height:1}),e.shouldDisplayCameraSelector&&((mu=e.cameraSelectOptions)==null?void 0:mu.length)>1&&i.jsx(gb,{onOpenChange:ht=>{lt(ht)},trigger:i.jsx(_5,{open:Je,id:"scanner__button--switch-camera","data-test":"scanner__button--switch-camera",title:"Select Camera","aria-label":"Select Camera",children:i.jsx(LC,{})}),side:"top",align:"end",children:gt.map(ht=>i.jsx(R5,{id:ht.id,onClick:ht.onClick,selected:(e.selectedCamera||G)===ht.id,children:ht.label},ht.id))})]})]}):i.jsx(I5,{children:i.jsx(E5,{disabled:!e.uiReady||R||!A||!ce||!e.videoReady,id:"scanner__button--capture-full",isPending:!e.uiReady||R,"data-test":"scanner__button--capture",manualCaptureEnabled:A&&ce,onClick:ze.bind(null,ut.Manual,null),theme:T5,styles:e.submitButtonStyles,children:e.labelTakePhoto})})})]}),Hn]})}const N5=8e3,j5=.3,P5=({setAutoCaptureReady:e,delayUntilManualCaptureMs:t=N5,handleCapture:n,handleError:r,labelTakePhoto:o,requiresSide:a,videoConstraints:s,handleTrigger:c,handleCameraChange:l,selectedCamera:d,cameraSelectOptions:u,shouldDisplayCameraSelector:h,overlayReady:m,overlayRef:p,overlayCaptureWindowRef:g,previewViewfinderRef:b,isShortBarcodeOverlay:x,submitButtonStyles:y,showHelpButton:v,helpButtonIconColor:_,helpButtonLabel:A,renderAutoCapturePill:T,renderHelpModal:R,uiReady:O,videoReady:D,assets:L,governmentIdClass:H,captureOverlay:M,captureFrameLabel:B,hint:V,prompt:q})=>{const[$,Q]=f.useState(!1),G=Xt("inquiry:enable-low-light-detection-web");f.useEffect(()=>{try{yt.loadModels().then(e)}catch{Q(!0)}},[]);const Y=f.useRef([]),re=async(Ce,we,me,Ie,le)=>{oa({source:Ce,overlayCaptureWindowElement:g.current,canvasBuffer:we});const ee=Qd/Kd*we.height,ce=x?{x:0,y:(we.height-ee)/2,width:we.width,height:ee}:{x:0,y:0,width:we.width,height:we.height},_e=await q4(we,[0],ce);let pe=!1;if(_e.decodedResult&&_e.scannedImage){const ue=H4(_e.decodedResult);if(ue.firstName&&ue.lastName&&ue.middleName&&ue.dateOfBirth){const Pe=JSON.stringify({firstName:ue.firstName,lastName:ue.lastName,middleName:ue.middleName,dateOfBirth:ue.dateOfBirth});pe=Y.current.includes(Pe),pe?me==null||me.manualCapture(_e.scannedImage):Y.current=[...Y.current,Pe]}}let Je=[];if(!$&&!pe)try{Je=await yt.detectFaces(we,{scoreThreshold:j5})}catch(ue){r(ue,"capture"),Q(!0)}let lt;return Je.length===1&&(lt=Je[0].box.rescale({width:1/we.width,height:1/we.height})),{successfullyScanned:pe,detectedGuards:_e.detectedGuards,requiresSide:a,faceBoundingBox:lt,luminosityData:G?wr(we,le):null}},ae=(Ce,we)=>Ce.successfullyScanned||we.getTriggered().getType()===db.Capture;return i.jsx(nu,{handleCapture:({imageSrcs:Ce,captureMethod:we})=>n(Ce,we),handleFailed:r,detectInterval:O4,labelTakePhoto:o,videoConstraints:s,triggerConfigs:M4,paramsFromVideoFrame:re,shouldSubmit:ae,delayUntilManualCaptureMs:t,handleTrigger:c,shouldDisplayCameraSelector:h,cameraSelectOptions:u,selectedCamera:d,handleCameraChange:l,overlayReady:m,overlayRef:p,overlayCaptureWindowRef:g,previewViewfinderRef:b,isShortBarcodeOverlay:x,submitButtonStyles:y,showHelpButton:v,helpButtonIconColor:_,helpButtonLabel:A,renderAutoCapturePill:T,renderHelpModal:R,scannerType:"barcode",uiReady:O,videoReady:D,assets:L,governmentIdClass:H,captureOverlay:M,requiresSide:a,captureFrameLabel:B,hint:V,prompt:q})},D5=250,$m={[U.Front]:.6,[U.Back]:.3,[U.FrontOrBack]:.6,[U.BarcodePdf417]:.4,[U.PassportSignature]:.4},Gm={[U.Front]:so+.02,[U.Back]:.68,[U.FrontOrBack]:so+.02,[U.BarcodePdf417]:so+.02,[U.PassportSignature]:so+.02},O5=[{type:0,shouldShow:xo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Si(U.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>Dr(U.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>Or(e)&&!Si(U.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:1,shouldShow:xc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],L5=[{type:0,shouldShow:xo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Si(U.BarcodePdf417,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>Dr(U.BarcodePdf417,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>!!e.isShortBarcodeOverlay&&Or(e)&&!Si(U.BarcodePdf417,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.barcode-outside-of-frame")},{type:1,shouldShow:xc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],F5=[{type:0,shouldShow:xo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Si(U.Back,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>Dr(U.Back,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>Or(e)&&!Si(U.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:1,shouldShow:xc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],M5=[{type:0,shouldShow:xo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Si(U.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>Dr(U.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>Or(e)&&!Si(U.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:3,shouldShow:e=>kl(U.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.incomplete-back")},{type:1,shouldShow:xc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],Wm={[U.Front]:O5,[U.Back]:F5,[U.BarcodePdf417]:L5,[U.FrontOrBack]:void 0,[U.PassportSignature]:void 0},V5=new Jn({type:9,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({t:e})=>e("government-id-scanner.hint.processing",{defaultValue:e("government-id-scanner.hint.hold-still")})});function xo(e){return!!e.hasGlare&&e.detectedQuad!=null&&e.detectedQuad.detectionStatus!==ei.Failed}function xc(e){return lc(e.luminosityData)}function Si(e,t,n){var s;const r=t.detectedQuad;if(!r||r.detectionStatus===ei.Failed)return!1;const o=Math.max(r.topRight.x-r.topLeft.x,r.bottomRight.x-r.bottomLeft.x),a=e===U.Back&&n?$m[U.Front]:$m[e];return o>0&&o/t.videoWidth<a?!0:((s=t.detectedQuad)==null?void 0:s.detectionStatus)===ei.CameraTooFar}function Dr(e,t,n){var s;const r=t.detectedQuad;if(!r||r.detectionStatus===ei.Failed)return!1;const o=Math.max(r.topRight.x-r.topLeft.x,r.bottomRight.x-r.bottomLeft.x),a=e===U.Back&&n?Gm[U.Front]:Gm[e];return o>0&&o/t.videoWidth>a?!0:((s=t.detectedQuad)==null?void 0:s.detectionStatus)===ei.CameraTooClose}function Or(e){const t=e.detectedQuad;if(!t||t.detectionStatus===ei.Failed)return!1;const n=Math.min(t.topLeft.y,t.topRight.y),r=Math.max(t.bottomLeft.y,t.bottomRight.y),o=Math.min(t.topLeft.x,t.bottomLeft.x),a=Math.max(t.topRight.x,t.bottomRight.x),s=(1-so)/2-.02,c=(1-(e.isShortBarcodeOverlay?Qd:Kd))/2-.02;return r>0&&a>0&&(n<e.videoHeight*c||r>e.videoHeight*(1-c)||o<e.videoWidth*s||a>e.videoWidth*(1-s))}function kl(e,t,n){return!n||e!==U.Back?!1:!!t.hasIncompleteBack}function B5(e){var t;return((t=e.detectedQuad)==null?void 0:t.detectionStatus)===ei.Success}function zm(e,t){const n=e!=="pp",r=t.microblinkResult&&"mrz"in t.microblinkResult?t.microblinkResult.mrz.verified===!0:!1;return n||r}function q5(e,t,n){return B5(t)&&!Si(e,t,n)&&!Dr(e,t,n)&&!Or(t)}class U5{constructor(){this.loadPercentage=0,this.initializingRunner=!1,this.currentInstanceNumber=0}async preload(t="advanced",n=null){if(!Pn()&&!this.isLoaded()){if(this.model=t,this.loadSDKPromise==null){const r=new c1($5(window.location.host));r.engineLocation=kr(t==="advanced"?"microblink-6-0-1":"microblink-6-0-1-lightweight"),r.workerLocation=t==="advanced"?`${sa}/microblink/worker-script-6-0-1`:`${sa}/microblink/worker-script-6-0-1-lightweight`,r.loadProgressCallback=o=>this.loadPercentage=o,r.allowHelloMessage=!1,r.wasmType=n,this.loadSDKPromise=La(async()=>l1(r).then(o=>(this.wasmSDK=o,this.wasmSDK)).catch(o=>{throw this.loadSDKPromise=null,typeof o=="string"?ln.fromString(o):new ln(o)}))}await this.loadSDKPromise}}isLoaded(){return this.wasmSDK!=null}async initialize(t,n=void 0,r={}){const{requireFullBack:o=!1,allowIncompleteBarcode:a=!1,fallbackToFaceApi:s=!1}=r;return Pn()?-1:(this.currentQuad=null,this.hasGlare=null,this.attemptedReset=!1,this.onClassifiedCallback=null,this.recognizer&&this.recognizerRunner&&this.captureSide===t&&this.idClass===n?this.currentInstanceNumber:(this.currentInstanceNumber++,this.captureSide=t,this.idClass=n,this.requireFullBack=t===U.Back&&o,this.allowIncompleteBarcode=t===U.Back&&a,new Promise((c,l)=>{s&&(this.faceApiFallbackTimeout=setTimeout(()=>{yt.loadModels(),this.faceApiFallbackTimeout=setTimeout(()=>{this.loadPercentage<50&&(z.logAmplitude("government-id.microblink.load-timeout",{model:this.model}),l(ln.fromString("[IGNORED] Microblink initialization took longer than 5000ms, likely due to a slow network connection. Falling back to FaceApi.")))},2500)},2500)),this.preload().then(()=>clearTimeout(this.faceApiFallbackTimeout)).then(()=>this.startRunner()).then(()=>c(this.currentInstanceNumber)).catch(d=>typeof d=="string"?ln.fromString(d):new ln(d))})))}async startRunner(){var n,r,o;if(!this.captureSide||this.initializingRunner)return;this.initializingRunner=!0;const t=performance.now();if(await this.tearDown(!1),!!this.captureSide){if(this.captureSide===U.Back&&this.allowIncompleteBarcode){this.recognizer=await Ic(this.wasmSDK);const a=await this.recognizer.currentSettings();a.recognitionModeFilter.enableBarcodeId=!0,a.recognitionModeFilter.enableMrzPassport=!1,a.recognitionModeFilter.enableMrzVisa=!1,a.recognitionModeFilter.enableMrzId=!1,a.recognitionModeFilter.enablePhotoId=!1,a.recognitionModeFilter.enableFullDocumentRecognition=!0,await((n=this.recognizer)==null?void 0:n.updateSettings(a))}else if(this.captureSide===U.BarcodePdf417||this.captureSide===U.Back)this.recognizer=await d1(this.wasmSDK);else if(this.captureSide===U.Front){this.recognizer=await Ic(this.wasmSDK);const a=await this.recognizer.currentSettings();a.recognitionModeFilter.enableBarcodeId=!1,a.recognitionModeFilter.enableMrzPassport=this.idClass==="pp",a.recognitionModeFilter.enableMrzVisa=!1,a.recognitionModeFilter.enableMrzId=!1,a.classifierCallback=s=>{var c;return(c=this.onClassifiedCallback)==null?void 0:c.call(this,s)},await((r=this.recognizer)==null?void 0:r.updateSettings(a))}else Z(new Error(`Unsupported side for Microblink Client: ${this.captureSide}`),"warning");if(this.requireFullBack){this.fullDocumentRecognizer=await Ic(this.wasmSDK);const a=await this.fullDocumentRecognizer.currentSettings();a.recognitionModeFilter.enableBarcodeId=!1,a.recognitionModeFilter.enableMrzPassport=!1,a.recognitionModeFilter.enableMrzVisa=!1,a.recognitionModeFilter.enableMrzId=!1,a.recognitionModeFilter.enablePhotoId=!1,a.recognitionModeFilter.enableFullDocumentRecognition=!0,await((o=this.fullDocumentRecognizer)==null?void 0:o.updateSettings(a))}if(this.requireFullBack||this.allowIncompleteBarcode){const a={onQuadDetection:s=>{this.currentQuad?Km(s)>Km(this.currentQuad)?this.currentFullDocumentQuad=s:(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=s):this.currentQuad=s},onGlare:s=>{this.hasGlare=s}};this.recognizerRunner=await Iu(this.wasmSDK,this.requireFullBack?[this.recognizer,this.fullDocumentRecognizer]:[this.recognizer],!0,a)}else{const a={onQuadDetection:s=>{(this.captureSide===U.Front||!this.currentQuad)&&(this.currentQuad=s)},onGlare:s=>{this.hasGlare=s}};this.recognizerRunner=await Iu(this.wasmSDK,[this.recognizer],!1,a)}this.initializingRunner=!1,z.logAmplitude("government-id.microblink.initialize-runners",{durationSeconds:(performance.now()-t)/1e3,side:this.captureSide,idClass:this.idClass})}}async extractTextFromImage(t){if(!this.recognizerRunner||!this.recognizer)return null;const n=new Image;n.src=t,await n.decode();const r=u1(n),o=await this.recognizerRunner.processImage(r);let a=null;return o!==Mo.Empty&&(a=await this.recognizer.getResult()),{recognitionResult:a,recognizerName:this.recognizer.recognizerName,detectedQuad:null,hasGlare:null,hasIncompleteBack:null}}async processImage(t,n){var c,l,d,u,h;if(!this.recognizerRunner||!this.recognizer)return null;this.currentQuad=null,this.currentFullDocumentQuad=null,this.hasGlare=null,this.onClassifiedCallback=n;const r=t.getContext("2d",{willReadFrequently:!0}),o=new m1(r==null?void 0:r.getImageData(0,0,t.width,t.height),h1.NoRotation,!0);if(!o.imageData)return null;const a=await this.recognizerRunner.processImage(o).catch(async m=>{const p=typeof m=="string"?m:m.message;if((p.indexOf(Su.WORKER_IMAGE_PROCESS_FAILURE)!==-1||p.indexOf(Su.WORKER_RUNNER_DELETED)!==-1)&&!this.attemptedReset)return this.attemptedReset=!0,await this.tearDown(!1),await this.startRunner(),null;throw typeof m=="string"?ln.fromString(m):new ln(m)}),s=(l=(c=this.recognizer)==null?void 0:c.recognizerName)!=null?l:"MicroblinkUnknown";if(this.requireFullBack){const m=await((d=this.recognizer)==null?void 0:d.getResult()),p=(m==null?void 0:m.state)!==Mo.Empty?m:null,g=await((u=this.fullDocumentRecognizer)==null?void 0:u.getResult());!this.currentFullDocumentQuad&&this.currentQuad&&(m==null?void 0:m.state)===Mo.Empty&&(g==null?void 0:g.state)!==Mo.Empty&&Za(this.currentQuad,null)&&(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=null);const b=Za(this.currentFullDocumentQuad,this.currentQuad)?this.currentFullDocumentQuad:null,x=!!p&&!b;return{recognitionResult:p,detectedQuad:b,hasGlare:this.hasGlare,hasIncompleteBack:x,recognizerName:s}}else{const m=a!==Mo.Empty?await((h=this.recognizer)==null?void 0:h.getResult()):null;let p=this.currentQuad;return this.allowIncompleteBarcode&&(p=Za(this.currentFullDocumentQuad,null)?this.currentFullDocumentQuad:Za(this.currentQuad,null)?this.currentQuad:null),{recognitionResult:m,detectedQuad:p,hasGlare:this.hasGlare,hasIncompleteBack:null,recognizerName:s}}}needsTeardown(){return this.recognizerRunner!=null||this.recognizer!=null||this.fullDocumentRecognizer!=null}async tearDownInstance(t){t===this.currentInstanceNumber&&this.tearDown()}async tearDown(t=!0){const n=this.recognizerRunner,r=this.recognizer,o=this.fullDocumentRecognizer;this.recognizer=void 0,this.recognizerRunner=void 0,this.fullDocumentRecognizer=void 0,t&&(this.captureSide=void 0,this.requireFullBack=void 0,this.allowIncompleteBarcode=void 0),this.currentQuad=void 0,this.currentFullDocumentQuad=void 0,this.hasGlare=void 0;try{await Promise.allSettled([n==null?void 0:n.delete(),r==null?void 0:r.delete(),o==null?void 0:o.delete()])}catch{}}}U.Front,U.Back,U.BarcodePdf417;let Cb={"withpersona.com":{key:null,expiresAt:null},"withpersona-staging.com":{key:null,expiresAt:null},"*.withpersona.com":{key:null,expiresAt:null},"*.withpersona-staging.com":{key:null,expiresAt:null}};try{Cb=JSON.parse('{"withpersona.com":{"key":"sRwAAAYPd2l0aHBlcnNvbmEuY29thpUVKHnfmIvdibPDghXCop2mZ9gE/CGYH8QslNJecCQfDVRv7r5kV0NFmyN8KWsD9ZWjiaJnclTjRFME8UCKBDi7m4IzQw9TsGfuNA2ZdP9JwJGz++8F+3p9/1w6ndXfIqil+sF8QMHlTXfw0JukUt60qGSpA9oSZ6gNXrMizqXHWiUUbx6l7g1LkL2gjcMOIPfkxu704L/lplxspRxevoHjgr9epQ==","expiresAt":"2026-06-09"},"*.withpersona.com":{"key":"sRwAAAYRKi53aXRocGVyc29uYS5jb22q2VqlctXIE+DL6va9pIVBYDMqJu6BCIKcb7LD9fSCMztfF8rD802Ra+xNfBeJB7yxKb+9he18NtOAtgW17bg3CWIZ2D0Nn2sKcL2xwAce1UeeUBQ5OUdK4Bsw6gHFBd3pr5XtoN41zv7rCHSqlJLHQSlLNNLoXEys7lCOGTQTtMZEkRFxJ1B8RKX+mvMvvvPPzmaC+dEbyjvElNxRQhpR1TYZVqQIY+B1","expiresAt":"2026-06-09"},"withpersona-staging.com":{"key":"sRwAAAYXd2l0aHBlcnNvbmEtc3RhZ2luZy5jb22+UDZGEA8YgF3AvK+uCAxnzhgmsrXoz030fP+lIjjwPMquHH2iyjAGe3zRH9VxpWxmsJM+I42EcO/fZ/9fDVYrhLNURRFI761oDE1y9f+h/nz/uqHTlbLeWApWtnvwkywXuO0KhTM00ZhYIi1OO+M3EaB7xSo5s7qGmjI2T0oIwsPFbA8Em9NcMs0GYJwePBVbH/kr9FXHiHcGCSARlird4uKE4TQoxpk=","expiresAt":"2026-06-09"},"*.withpersona-staging.com":{"key":"sRwAAAYZKi53aXRocGVyc29uYS1zdGFnaW5nLmNvbd8DgK6h/E1CelG5fEjmfzkO09G3+bHMY70e6GeTv6lsL4+WwTVMAXX9YnGr3o9KGhBUJnJc+y5czTE2xwuY+JcI7KSLULx3V73Tmox/In52wss9lEp7XYC7+1qtRbysdBAwbW+UupAS0XlzPypz+xCmrS9Ei6ERRtbRJXBqCfVo9YTfEcdlobiUVxoYGK2jyCfvcfj/h77zplQsSuzUPfWG9efBYtpJ2A==","expiresAt":"2026-06-09"}}')}catch{}const H5=14*24*60*60*1e3,$5=e=>{var o;let t=e.split(":")[0];if(t.split(".").length===3){const a=t.split(".");a[0]="*",t=a.join(".")}const{key:n,expiresAt:r}=(o=Cb[t])!=null?o:{};try{r!=null&&(t==="withpersona.com"||t==="*.withpersona.com")&&new Date(r).getTime()-new Date().getTime()<H5&&Z(new Error(`Microblink license key is expiring in less than 14 days at ${r}. Request a renewal in #microblink-persona and update MICROBLINK_LICENSES in .env.`),"error",{expiresAt:r,domain:t})}catch(a){Z(a)}return n};P.NONE+"",P.ALBANIA+"",P.ALGERIA+"",P.ARGENTINA+"",P.AUSTRALIA+"",P.AUSTRIA+"",P.AZERBAIJAN+"",P.BAHRAIN+"",P.BANGLADESH+"",P.BELGIUM+"",P.BOSNIA_AND_HERZEGOVINA+"",P.BRUNEI+"",P.BULGARIA+"",P.CAMBODIA+"",P.CANADA+"",P.CHILE+"",P.COLOMBIA+"",P.COSTA_RICA+"",P.CROATIA+"",P.CYPRUS+"",P.CZECHIA+"",P.DENMARK+"",P.DOMINICAN_REPUBLIC+"",P.EGYPT+"",P.ESTONIA+"",P.FINLAND+"",P.FRANCE+"",P.GEORGIA+"",P.GERMANY+"",P.GHANA+"",P.GREECE+"",P.GUATEMALA+"",P.HONG_KONG+"",P.HUNGARY+"",P.INDIA+"",P.INDONESIA+"",P.IRELAND+"",P.ISRAEL+"",P.ITALY+"",P.JORDAN+"",P.KAZAKHSTAN+"",P.KENYA+"",P.KOSOVO+"",P.KUWAIT+"",P.LATVIA+"",P.LITHUANIA+"",P.MALAYSIA+"",P.MALDIVES+"",P.MALTA+"",P.MAURITIUS+"",P.MEXICO+"",P.MOROCCO+"",P.NETHERLANDS+"",P.NEW_ZEALAND+"",P.NIGERIA+"",P.PAKISTAN+"",P.PANAMA+"",P.PARAGUAY+"",P.PHILIPPINES+"",P.POLAND+"",P.PORTUGAL+"",P.PUERTO_RICO+"",P.QATAR+"",P.ROMANIA+"",P.RUSSIA+"",P.SAUDI_ARABIA+"",P.SERBIA+"",P.SINGAPORE+"",P.SLOVAKIA+"",P.SLOVENIA+"",P.SOUTH_AFRICA+"",P.SPAIN+"",P.SWEDEN+"",P.SWITZERLAND+"",P.TAIWAN+"",P.THAILAND+"",P.TUNISIA+"",P.TURKEY+"",P.UAE+"",P.UGANDA+"",P.UK+"",P.UKRAINE+"",P.USA+"",P.VIETNAM+"",P.BRAZIL+"",P.NORWAY+"",P.OMAN+"",P.ECUADOR+"",P.EL_SALVADOR+"",P.SRI_LANKA+"",P.PERU+"",P.URUGUAY+"",P.BAHAMAS+"",P.BERMUDA+"",P.BOLIVIA+"",P.CHINA+"",P.EUROPEAN_UNION+"",P.HAITI+"",P.HONDURAS+"",P.ICELAND+"",P.JAPAN+"",P.LUXEMBOURG+"",P.MONTENEGRO+"",P.NICARAGUA+"",P.SOUTH_KOREA+"",P.VENEZUELA+"",P.AFGHANISTAN+"",P.ALAND_ISLANDS+"",P.AMERICAN_SAMOA+"",P.ANDORRA+"",P.ANGOLA+"",P.ANGUILLA+"",P.ANTARCTICA+"",P.ANTIGUA_AND_BARBUDA+"",P.ARMENIA+"",P.ARUBA+"",P.BAILIWICK_OF_GUERNSEY+"",P.BAILIWICK_OF_JERSEY+"",P.BARBADOS+"",P.BELARUS+"",P.BELIZE+"",P.BENIN+"",P.BHUTAN+"",P.BONAIRE_SAINT_EUSTATIUS_AND_SABA+"",P.BOTSWANA+"",P.BOUVET_ISLAND+"",P.BRITISH_INDIAN_OCEAN_TERRITORY+"",P.BURKINA_FASO+"",P.BURUNDI+"",P.CAMEROON+"",P.CAPE_VERDE+"",P.CARIBBEAN_NETHERLANDS+"",P.CAYMAN_ISLANDS+"",P.CENTRAL_AFRICAN_REPUBLIC+"",P.CHAD+"",P.CHRISTMAS_ISLAND+"",P.COCOS_ISLANDS+"",P.COMOROS+"",P.CONGO+"",P.COOK_ISLANDS+"",P.CUBA+"",P.CURACAO+"",P.DEMOCRATIC_REPUBLIC_OF_THE_CONGO+"",P.DJIBOUTI+"",P.DOMINICA+"",P.EAST_TIMOR+"",P.EQUATORIAL_GUINEA+"",P.ERITREA+"",P.ESWATINI+"",P.ETHIOPIA+"",P.FALKLAND_ISLANDS+"",P.FAROE_ISLANDS+"",P.FEDERATED_STATES_OF_MICRONESIA+"",P.FIJI+"",P.FRENCH_GUIANA+"",P.FRENCH_POLYNESIA+"",P.FRENCH_SOUTHERN_TERRITORIES+"",P.GABON+"",P.GAMBIA+"",P.GIBRALTAR+"",P.GREENLAND+"",P.GRENADA+"",P.GUADELOUPE+"",P.GUAM+"",P.GUINEA+"",P.GUINEA_BISSAU+"",P.GUYANA+"",P.HEARD_ISLAND_AND_MCDONALD_ISLANDS+"",P.IRAN+"",P.IRAQ+"",P.ISLE_OF_MAN+"",P.IVORY_COAST+"",P.JAMAICA+"",P.KIRIBATI+"",P.KYRGYZSTAN+"",P.LAOS+"",P.LEBANON+"",P.LESOTHO+"",P.LIBERIA+"",P.LIBYA+"",P.LIECHTENSTEIN+"",P.MACAU+"",P.MADAGASCAR+"",P.MALAWI+"",P.MALI+"",P.MARSHALL_ISLANDS+"",P.MARTINIQUE+"",P.MAURITANIA+"",P.MAYOTTE+"",P.MOLDOVA+"",P.MONACO+"",P.MONGOLIA+"",P.MONTSERRAT+"",P.MOZAMBIQUE+"",P.MYANMAR+"",P.NAMIBIA+"",P.NAURU+"",P.NEPAL+"",P.NEW_CALEDONIA+"",P.NIGER+"",P.NIUE+"",P.NORFOLK_ISLAND+"",P.NORTHERN_CYPRUS+"",P.NORTHERN_MARIANA_ISLANDS+"",P.NORTH_KOREA+"",P.NORTH_MACEDONIA+"",P.PALAU+"",P.PALESTINE+"",P.PAPUA_NEW_GUINEA+"",P.PITCAIRN+"",P.REUNION+"",P.RWANDA+"",P.SAINT_BARTHELEMY+"",P.SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA+"",P.SAINT_KITTS_AND_NEVIS+"",P.SAINT_LUCIA+"",P.SAINT_MARTIN+"",P.SAINT_PIERRE_AND_MIQUELON+"",P.SAINT_VINCENT_AND_THE_GRENADINES+"",P.SAMOA+"",P.SAN_MARINO+"",P.SAO_TOME_AND_PRINCIPE+"",P.SENEGAL+"",P.SEYCHELLES+"",P.SIERRA_LEONE+"",P.SINT_MAARTEN+"",P.SOLOMON_ISLANDS+"",P.SOMALIA+"",P.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS+"",P.SOUTH_SUDAN+"",P.SUDAN+"",P.SURINAME+"",P.SVALBARD_AND_JAN_MAYEN+"",P.SYRIA+"",P.TAJIKISTAN+"",P.TANZANIA+"",P.TOGO+"",P.TOKELAU+"",P.TONGA+"",P.TRINIDAD_AND_TOBAGO+"",P.TURKMENISTAN+"",P.TURKS_AND_CAICOS_ISLANDS+"",P.TUVALU+"",P.UNITED_STATES_MINOR_OUTLYING_ISLANDS+"",P.UZBEKISTAN+"",P.VANUATU+"",P.VATICAN_CITY+"",P.VIRGIN_ISLANDS_BRITISH+"",P.VIRGIN_ISLANDS_US+"",P.WALLIS_AND_FUTUNA+"",P.WESTERN_SAHARA+"",P.YEMEN+"",P.YUGOSLAVIA+"",P.ZAMBIA+"",P.ZIMBABWE+"",P.COUNT+"";oe.NONE+"",oe.ALABAMA+"",oe.ALASKA+"",oe.ALBERTA+"",oe.ARIZONA+"",oe.ARKANSAS+"",oe.AUSTRALIAN_CAPITAL_TERRITORY+"",oe.BRITISH_COLUMBIA+"",oe.CALIFORNIA+"",oe.COLORADO+"",oe.CONNECTICUT+"",oe.DELAWARE+"",oe.DISTRICT_OF_COLUMBIA+"",oe.FLORIDA+"",oe.GEORGIA+"",oe.HAWAII+"",oe.IDAHO+"",oe.ILLINOIS+"",oe.INDIANA+"",oe.IOWA+"",oe.KANSAS+"",oe.KENTUCKY+"",oe.LOUISIANA+"",oe.MAINE+"",oe.MANITOBA+"",oe.MARYLAND+"",oe.MASSACHUSETTS+"",oe.MICHIGAN+"",oe.MINNESOTA+"",oe.MISSISSIPPI+"",oe.MISSOURI+"",oe.MONTANA+"",oe.NEBRASKA+"",oe.NEVADA+"",oe.NEW_BRUNSWICK+"",oe.NEW_HAMPSHIRE+"",oe.NEW_JERSEY+"",oe.NEW_MEXICO+"",oe.NEW_SOUTH_WALES+"",oe.NEW_YORK+"",oe.NORTHERN_TERRITORY+"",oe.NORTH_CAROLINA+"",oe.NORTH_DAKOTA+"",oe.NOVA_SCOTIA+"",oe.OHIO+"",oe.OKLAHOMA+"",oe.ONTARIO+"",oe.OREGON+"",oe.PENNSYLVANIA+"",oe.QUEBEC+"",oe.QUEENSLAND+"",oe.RHODE_ISLAND+"",oe.SASKATCHEWAN+"",oe.SOUTH_AUSTRALIA+"",oe.SOUTH_CAROLINA+"",oe.SOUTH_DAKOTA+"",oe.TASMANIA+"",oe.TENNESSEE+"",oe.TEXAS+"",oe.UTAH+"",oe.VERMONT+"",oe.VICTORIA+"",oe.VIRGINIA+"",oe.WASHINGTON+"",oe.WESTERN_AUSTRALIA+"",oe.WEST_VIRGINIA+"",oe.WISCONSIN+"",oe.WYOMING+"",oe.YUKON+"",oe.CIUDAD_DE_MEXICO+"",oe.JALISCO+"",oe.NEWFOUNDLAND_AND_LABRADOR+"",oe.NUEVO_LEON+"",oe.BAJA_CALIFORNIA+"",oe.CHIHUAHUA+"",oe.GUANAJUATO+"",oe.GUERRERO+"",oe.MEXICO+"",oe.MICHOACAN+"",oe.NEW_YORK_CITY+"",oe.TAMAULIPAS+"",oe.VERACRUZ+"",oe.CHIAPAS+"",oe.COAHUILA+"",oe.DURANGO+"",oe.GUERRERO_COCULA+"",oe.GUERRERO_JUCHITAN+"",oe.GUERRERO_TEPECOACUILCO+"",oe.GUERRERO_TLACOAPA+"",oe.GUJARAT+"",oe.HIDALGO+"",oe.KARNATAKA+"",oe.KERALA+"",oe.KHYBER_PAKHTUNKHWA+"",oe.MADHYA_PRADESH+"",oe.MAHARASHTRA+"",oe.MORELOS+"",oe.NAYARIT+"",oe.OAXACA+"",oe.PUEBLA+"",oe.PUNJAB+"",oe.QUERETARO+"",oe.SAN_LUIS_POTOSI+"",oe.SINALOA+"",oe.SONORA+"",oe.TABASCO+"",oe.TAMIL_NADU+"",oe.YUCATAN+"",oe.ZACATECAS+"",oe.AGUASCALIENTES+"",oe.BAJA_CALIFORNIA_SUR+"",oe.CAMPECHE+"",oe.COLIMA+"",oe.QUINTANA_ROO_BENITO_JUAREZ+"",oe.UINTANA_ROO+"",oe.QUINTANA_ROO_SOLIDARIDAD+"",oe.TLAXCALA+"",oe.QUINTANA_ROO_COZUMEL+"",oe.SAO_PAOLO+"",oe.COUNT+"";Ge.NONE+"",Ge.CONSULAR_ID+"",Ge.DL+"",Ge.DL_PUBLIC_SERVICES_CARD+"",Ge.EMPLOYMENT_PASS+"",Ge.FIN_CARD+"",Ge.ID+"",Ge.MULTIPURPOSE_ID+"",Ge.MyKad+"",Ge.MyKid+"",Ge.MyPR+"",Ge.MyTentera+"",Ge.PAN_CARD+"",Ge.PROFESSIONAL_ID+"",Ge.PUBLIC_SERVICES_CARD+"",Ge.RESIDENCE_PERMIT+"",Ge.RESIDENT_ID+"",Ge.TEMPORARY_RESIDENCE_PERMIT+"",Ge.VOTER_ID+"",Ge.WORK_PERMIT+"",Ge.iKAD+"",Ge.MILITARY_ID+"",Ge.MyKAS+"",Ge.SOCIAL_SECURITY_CARD+"",Ge.HEALTH_INSURANCE_CARD+"",Ge.PASSPORT+"",Ge.S_PASS+"",Ge.ADDRESS_CARD+"",Ge.ALIEN_ID+"",Ge.ALIEN_PASSPORT+"",Ge.GREEN_CARD+"",Ge.MINORS_ID+"",Ge.POSTAL_ID+"",Ge.PROFESSIONAL_DL+"",Ge.TAX_ID+"",Ge.WEAPON_PERMIT+"",Ge.VISA+"",Ge.BORDER_CROSSING_CARD+"",Ge.DRIVER_CARD+"",Ge.GLOBAL_ENTRY_CARD+"",Ge.MyPolis+"",Ge.NEXUS_CARD+"",Ge.PASSPORT_CARD+"",Ge.PROOF_OF_AGE_CARD+"",Ge.REFUGEE_ID+"",Ge.TRIBAL_ID+"",Ge.VETERAN_ID+"",Ge.CITIZENSHIP_CERTIFICATE+"",Ge.MY_NUMBER_CARD+"",Ge.CONSULAR_PASSPORT+"",Ge.MINORS_PASSPORT+"",Ge.MINORS_PUBLIC_SERVICES_CARD+"",Ge.COUNT+"";const Ym=85.6/54,Km=e=>{const t=Math.min(e.topLeft.x,e.bottomLeft.x);return Math.max(e.topRight.x,e.bottomRight.x)-t},Za=(e,t)=>{if(!e||e.detectionStatus===wu.Fail)return!1;const n=Math.min(e.topLeft.y,e.topRight.y),r=Math.max(e.bottomLeft.y,e.bottomRight.y),o=Math.min(e.topLeft.x,e.bottomLeft.x),a=Math.max(e.topRight.x,e.bottomRight.x),s=(a-o)/(r-n);if(!(s>Ym*.8&&s<Ym*1.2))return!1;if(t&&t.detectionStatus!==wu.Fail){const l=Math.min(t.topLeft.y,t.topRight.y),d=Math.max(t.bottomLeft.y,t.bottomRight.y),u=Math.min(t.topLeft.x,t.bottomLeft.x),h=Math.max(t.topRight.x,t.bottomRight.x);if(!(l>n*.95&&d<r*1.05&&u>o*.95&&h<a*1.05))return!1}return!0},G5=new U5,W5=8e3,z5=1e3,Y5=({setAutoCaptureReady:e,delayUntilManualCaptureMs:t=W5,handleCapture:n,labelTakePhoto:r,videoConstraints:o,requiresSide:a,governmentIdClass:s,handleError:c,reportDebugMetrics:l=!1,handleTrigger:d,handleCameraChange:u,selectedCamera:h,cameraSelectOptions:m,shouldDisplayCameraSelector:p,overlayReady:g,overlayRef:b,overlayCaptureWindowRef:x,previewViewfinderRef:y,requireFullBack:v=!1,allowIncompleteBarcode:_=!1,isShortBarcodeOverlay:A,submitButtonStyles:T,showHelpButton:R,helpButtonIconColor:O,helpButtonLabel:D,renderAutoCapturePill:L,renderHelpModal:H,uiReady:M,videoReady:B,assets:V,captureOverlay:q,captureFrameLabel:$,hint:Q,prompt:G})=>{let Y;const re=f.useRef(!1),ae=f.useRef(void 0),[Ce,we]=f.useState(!1),me=Xt("inquiry:enable-low-light-detection-web"),le=Xt("inquiry:use-old-microblink")?G5:Fi;Sa.useAsyncEffect(async ue=>{try{const Pe=performance.now();if(ae.current=await le.initialize(a,s,{requireFullBack:v,allowIncompleteBarcode:_}),Y=performance.now(),l&&z.logAmplitude("government-id.microblink.initialization",{initializationTime:(Y-Pe)/1e3,side:a,idClass:s}),ue())e();else{await le.tearDownInstance(ae.current);return}}catch(Pe){c(Pe,"load")}},()=>{le.tearDownInstance(ae.current),Y=void 0},[a,v]);const ee=async(ue,Pe,Le,Fe,nt)=>{var be,Se,ve,He,Ve;oa({source:ue,overlayCaptureWindowElement:x.current,canvasBuffer:Pe});const Qe=Pe.width,Ne=Pe.height;try{const ze=Pe.toDataURL(go,Rs),St=performance.now();let wt=!0;we(!1),setTimeout(()=>{wt&&we(!0)},1e3);const Ut=Hn=>{Hn&&setTimeout(()=>{if(wt&&a===U.Front){const Kr=performance.now()-St;Je({currentTrigger:Fe.getTriggered().getType(),detectedQuad:null,microblinkResult:null,luminosityData:me?wr(Pe,nt):null,videoWidth:Qe,videoHeight:Ne,imageDataUri:ze,hasGlare:null,processingTime:Kr,isShortBarcodeOverlay:A},ut.Auto,null),wt=!1}},z5)},gt=await le.processImage(Pe,Ut);if(wt=!1,a===U.Front){const ri=performance.now()-St;return{currentTrigger:Fe.getTriggered().getType(),detectedQuad:(be=gt==null?void 0:gt.detectedQuad)!=null?be:null,hasGlare:(Se=gt==null?void 0:gt.hasGlare)!=null?Se:null,microblinkRecognizerName:gt==null?void 0:gt.recognizerName,microblinkResult:gt==null?void 0:gt.recognitionResult,luminosityData:me?wr(Pe,nt):null,videoWidth:Qe,videoHeight:Ne,imageDataUri:ze,processingTime:ri,isShortBarcodeOverlay:A}}else if(a===U.BarcodePdf417||a===U.Back){const ri=performance.now()-St;return{currentTrigger:Fe.getTriggered().getType(),detectedQuad:(ve=gt==null?void 0:gt.detectedQuad)!=null?ve:null,microblinkRecognizerName:gt==null?void 0:gt.recognizerName,microblinkResult:gt==null?void 0:gt.recognitionResult,luminosityData:me?wr(Pe,nt):null,videoWidth:Qe,videoHeight:Ne,hasGlare:(He=gt==null?void 0:gt.hasGlare)!=null?He:null,imageDataUri:ze,processingTime:ri,hasIncompleteBack:(Ve=gt==null?void 0:gt.hasIncompleteBack)!=null?Ve:!1,isShortBarcodeOverlay:A}}}catch(ze){c(ze,"capture")}return{currentTrigger:Fe.getTriggered().getType(),luminosityData:me?wr(Pe,nt):null,videoWidth:Qe,videoHeight:Ne,microblinkRecognizerName:null,detectedQuad:null,microblinkResult:null,hasGlare:null,imageDataUri:null,processingTime:null,isShortBarcodeOverlay:A}},ce=(ue,Pe)=>{var Ne,de,be,Se;const Le=((Ne=ue.microblinkResult)==null?void 0:Ne.state)===_r.Valid||a===U.Back&&_&&((de=ue.microblinkResult)==null?void 0:de.state)===_r.Uncertain&&((be=ue.microblinkResult.imageAnalysisResult)==null?void 0:be.barcodeDetectionStatus)===p1.Detected,Fe=(Se=ue.microblinkResult)==null?void 0:Se.processingStatus,nt=Fe!==_u.ImagePreprocessingFailed&&Fe!==_u.StabilityTestFailed,Qe=Le&&nt&&!Si(a,ue,v)&&!Dr(a,ue,v)&&!Or(ue)&&!kl(a,ue,v)&&!xo(ue)&&zm(s,ue);if(!Qe)if((ue==null?void 0:ue.detectedQuad)==null)console.info("Autocapture failed: no ID detected");else{const ve=[(!Le||!nt)&&"Failed to recognize ID",Si(a,ue,v)&&"ID too far",Dr(a,ue,v)&&"ID too close",Or(ue)&&"ID not centered",kl(a,ue,v)&&"Back is incomplete",xo(ue)&&"Has glare",!zm(s,ue)&&"Missing MRZ"].filter(Boolean);console.info(`Autocapture failed: ${ve.join(", ")||"Reason unknown"}`)}return Qe},_e=(ue,Pe,Le)=>({x:ue.x/Pe,y:ue.y/Le}),pe=(ue,Pe,Le)=>({bottomLeft:_e(ue.bottomLeft,Pe,Le),bottomRight:_e(ue.bottomRight,Pe,Le),topLeft:_e(ue.topLeft,Pe,Le),topRight:_e(ue.topRight,Pe,Le)}),Je=async(ue,Pe,Le)=>{var nt,Qe,Ne;if(re.current)return;const Fe=[];if(a===U.Back&&_){const de=ue.microblinkResult;if(de&&(Fe.push({type:"pdf417",value:(Qe=(nt=de.barcode)==null?void 0:nt.barcodeData)==null?void 0:Qe.stringData}),ue.detectedQuad)){const be=pe(ue.detectedQuad,ue.videoWidth,ue.videoHeight);Fe.push({type:"card",value:{back:{"top-left":be.topLeft,"top-right":be.topRight,"bottom-left":be.bottomLeft,"bottom-right":be.bottomRight}}})}}else if(a===U.BarcodePdf417||a===U.Back){const de=ue.microblinkResult;if(de&&(Fe.push({type:"pdf417",value:(Ne=de.barcodeData)==null?void 0:Ne.stringData}),ue.detectedQuad)){const be=pe(ue.detectedQuad,ue.videoWidth,ue.videoHeight);Fe.push({type:"card",value:{[a===U.Back&&v?"back":"barcode"]:{"top-left":be.topLeft,"top-right":be.topRight,"bottom-left":be.bottomLeft,"bottom-right":be.bottomRight}}})}}else if(a===U.Front){const de=ue.microblinkResult;if(de){if(Fe.push({type:"viz",value:{"name-first":de.firstName,"name-last":de.lastName,"identification-number":de.documentNumber,address:de.address,birthdate:de.dateOfBirth.originalString,"expiration-date":de.dateOfExpiry.originalString}}),s==="pp"){const be=de.mrz;Fe.push({type:"mrz",value:be.rawMRZString})}if(ue.detectedQuad){const be=pe(ue.detectedQuad,ue.videoWidth,ue.videoHeight);Fe.push({type:"card",value:{front:{"top-left":be==null?void 0:be.topLeft,"top-right":be==null?void 0:be.topRight,"bottom-left":be==null?void 0:be.bottomLeft,"bottom-right":be==null?void 0:be.bottomRight}}})}Fe.push({type:"classification",value:{type:de.classInfo.documentType?ab(de.classInfo.documentType):null,country:de.classInfo.country?rb(de.classInfo.country):null,region:de.classInfo.region?ob(de.classInfo.region):null}})}}l&&z.logAmplitude("government-id.microblink.capture",{processingTime:ue.processingTime/1e3,captureTime:Y!=null?(performance.now()-Y)/1e3:void 0,side:a,idClass:s,captureMethod:Pe,parsedViz:Fe.find(de=>de.type==="viz")!=null,parsedMrz:Fe.find(de=>de.type==="mrz")!=null,parsedCard:Fe.find(de=>de.type==="card")!=null,parsedClassification:Fe.find(de=>de.type==="classification")!=null,parsedPdf417:Fe.find(de=>de.type==="pdf417")!=null}),await n([ue.imageDataUri],Pe,Le,Fe,ue.microblinkRecognizerName),re.current=!0},lt=a===U.Back&&_?Wm[U.Front]:a===U.Back&&v?M5:Wm[a];return i.jsx(nu,{handleCapture:({captureMethod:ue,params:Pe,cameraInspectionData:Le})=>Je(Pe,ue,Le),handleFailed:c,detectInterval:D5,labelTakePhoto:r,videoConstraints:o,triggerConfigs:lt,paramsFromVideoFrame:ee,shouldSubmit:ce,hasValidQuad:ue=>q5(a,ue,v),handleTrigger:d,delayUntilManualCaptureMs:t,triggerOverride:Ce?V5:null,shouldDisplayCameraSelector:p,cameraSelectOptions:m,selectedCamera:h,handleCameraChange:u,overlayReady:g,overlayRef:b,overlayCaptureWindowRef:x,previewViewfinderRef:y,isShortBarcodeOverlay:A,submitButtonStyles:T,showHelpButton:R,helpButtonIconColor:O,helpButtonLabel:D,renderAutoCapturePill:L,renderHelpModal:H,scannerType:"microblink",uiReady:M,videoReady:B,disableCaptureClient:!0,assets:V,captureOverlay:q,captureFrameLabel:$,hint:Q,prompt:G,requiresSide:a,governmentIdClass:s})};var Nl=(e=>(e[e.DetectedGlare=0]="DetectedGlare",e[e.DetectedLowLight=1]="DetectedLowLight",e[e.Capture=2]="Capture",e[e.HoldStill=3]="HoldStill",e[e.MoveCloser=4]="MoveCloser",e[e.None=5]="None",e))(Nl||{});const K5=250,Qm=.3,Q5=.27,Z5=.32,J5=.25,X5=.3,ek=.37,tk=[{type:5,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],nk=[{type:0,shouldShow:ik,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:2,shouldShow:e=>e.currentTrigger===3,showAfterFrames:5,hideAfterFrames:999999,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:3,shouldShow:iu,showAfterFrames:2,hideAfterFrames:2,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:4,shouldShow:xb,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:1,shouldShow:rk,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:5,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function ik(e){return e.glareRatio>2e-4&&(xb(e)||iu(e))}function rk(e){return lc(e.luminosityData)}function xb(e){const{faceBoundingBox:t}=e;if(t==null)return!1;const n=1.5,r=new Pp((t.left-.5)*n+.5,(t.top-.5)*n+.5,(t.right-.5)*n+.5,(t.bottom-.5)*n+.5);return iu({...e,faceBoundingBox:r})}function iu({isPassport:e,faceBoundingBox:t}){if(t==null)return!1;if(e)return t.left+t.width/2<J5&&t.width<X5+.05&&t.height<ek+.05;{const n=t.left+t.width/2;return(n<Qm||n>1-Qm)&&t.width<Q5+.05&&t.height<Z5+.05}}const ok=.3,ak=({delayUntilManualCaptureMs:e=0,autoCaptureEnabled:t,setAutoCaptureReady:n,handleCapture:r,handleError:o,isPassport:a,labelTakePhoto:s,videoConstraints:c,handleTrigger:l,handleCameraChange:d,selectedCamera:u,cameraSelectOptions:h,shouldDisplayCameraSelector:m,overlayReady:p,overlayRef:g,overlayCaptureWindowRef:b,previewViewfinderRef:x,submitButtonStyles:y,showHelpButton:v,helpButtonIconColor:_,helpButtonLabel:A,enableGlareDetection:T,renderAutoCapturePill:R,renderHelpModal:O,uiReady:D,videoReady:L,assets:H,governmentIdClass:M,requiresSide:B,captureOverlay:V,captureFrameLabel:q,hint:$,prompt:Q})=>{const[G,Y]=f.useState(!1),re=Xt("inquiry:enable-low-light-detection-web"),ae=Xt("inquiry:disable-gov-id-face-api");f.useEffect(()=>{if(!ae)try{yt.loadModels().then(n)}catch{Y(!0)}},[]);const Ce=async(me,Ie,le,ee,ce)=>{let _e=[];if(!G&&yt.isLoaded()&&yt.isMediaLoaded(me)){oa({source:me,overlayCaptureWindowElement:b.current,canvasBuffer:Ie});try{_e=await yt.detectFaces(Ie,{scoreThreshold:ok})}catch(Je){o(Je,"capture"),Y(!0)}}let pe;return _e.length===1&&(pe=_e[0].box.rescale({width:1/Ie.width,height:1/Ie.height})),{currentTrigger:ee.getTriggered().getType(),faceBoundingBox:pe,glareRatio:T?oo(Ie):0,luminosityData:re?wr(Ie,ce):null,isPassport:a}},we=(me,Ie)=>Ie.getTriggered().getType()===Nl.Capture;return i.jsx(nu,{handleCapture:({imageSrcs:me,captureMethod:Ie,cameraInspectionData:le})=>r(me,Ie,le),handleFailed:o,detectInterval:K5,labelTakePhoto:s,videoConstraints:c,triggerConfigs:t?nk:tk,paramsFromVideoFrame:Ce,shouldSubmit:we,hasValidQuad:me=>me.currentTrigger===Nl.HoldStill,handleTrigger:l,delayUntilManualCaptureMs:t?e:0,shouldDisplayCameraSelector:m,cameraSelectOptions:h,selectedCamera:u,handleCameraChange:d,overlayReady:p,overlayRef:g,overlayCaptureWindowRef:b,previewViewfinderRef:x,submitButtonStyles:y,showHelpButton:v,helpButtonIconColor:_,helpButtonLabel:A,renderAutoCapturePill:R,renderHelpModal:O,scannerType:"governmentId",uiReady:D,videoReady:L,assets:H,governmentIdClass:M,captureOverlay:V,captureFrameLabel:q,hint:$,prompt:Q,requiresSide:B})},sk=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__AutoCaptureCircle",componentId:"sc-whyqox-0"})(["width:6px;height:6px;border-radius:3px;background-color:currentcolor;margin-right:4px;"]),ck=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__AutoCapturePill",componentId:"sc-whyqox-1"})(["background-color:rgba(255,255,255,0.15);border-radius:1000px;color:",";display:flex;align-items:center;justify-content:center;font-size:12px;line-height:150%;max-width:50%;opacity:",";padding:4px 8px;text-align:center;transition:opacity ",";z-index:",";"],({enabled:e})=>e?I.Color.PrimaryWhite:I.Color.CoreSlate500,({visible:e})=>e?1:0,Ra.fast,At.footer),lk=450,dk=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__TitleCenterer",componentId:"sc-whyqox-2"})(["display:flex;justify-content:center;"]),uk=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__VideoWrapperColumnSizer",componentId:"sc-whyqox-3"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${lk}px`:null),mk=C.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__TitlePositioner",componentId:"sc-whyqox-4"})(["position:absolute;top:72px;left:10%;right:10%;*{color:"," !important;}z-index:",";"],I.Color.PrimaryWhite,At.navbar);function hk({assets:e,localizations:t,featureFlags:n,governmentIdClass:r,autoCaptureConfig:o,handleCapture:a,handleError:s,requiresSide:c,captureOverlay:l,shouldUseMicroblink:d,videoConstraints:u,webCameraManualCaptureDelayMs:h,barcodeCameraManualCaptureDelayMs:m,handleCameraChange:p,selectedCamera:g,cameraSelectOptions:b,shouldDisplayCameraSelector:x,requireFullBack:y,allowIncompleteBarcode:v,uiReady:_,videoReady:A}){var ue,Pe,Le;const[T]=K(),R=t.title?null:t["prompt-override"]||Ii(T,["government-id.capture.prompt"],null,r,c),[O,D]=f.useState(null),L=f.useCallback(Fe=>{const nt=Fe.getPrompt({t:T,localizations:t});D(nt)},[T,t]),{base:H,buttons:M,captureHintIcon:B,captureButtons:V,captureHelpButtonIcon:q}=On(),$=(Pe=k((ue=q==null?void 0:q.stroke)==null?void 0:ue.color))!=null?Pe:I.Color.PrimaryWhite,Q=f.useRef(),G=f.useRef(),Y=f.useRef(),re=((Le=o==null?void 0:o["rule-sets"])==null?void 0:Le.length)>0,ae=(o==null||re)&&(d||![U.Back,U.PassportSignature].includes(c)),[Ce,{enable:we}]=st(!1),me=c===U.BarcodePdf417,Ie=c===U.Front,le=c===U.Back,ee=me||Ie||le,ce=ni(),_e=()=>t.title?i.jsx(dk,{children:i.jsx(uk,{restrictInlineColumnWidth:N.isInline,children:i.jsx(mk,{children:i.jsx(dt,{styles:H==null?void 0:H.titleStyle,children:t.title})})})}):null,pe=({isCameraReady:Fe})=>i.jsxs(ck,{enabled:ae&&Ce,visible:Fe,children:[i.jsx(sk,{}),i.jsx("span",{children:ae&&Ce?t["auto-capture-on"]:t["auto-capture-off"]})]}),Je=({isOpen:Fe,onClose:nt})=>{if(me)return i.jsx($c,{isOpen:Fe,onClose:nt,title:t["barcode-help-modal-title"],prompt:"",warning:t["barcode-help-modal-warning"],pictograph:i.jsx(Ye,{customImage:e["barcode-help-modal-pictograph"],alt:"barcode help modal pictograph",children:i.jsx(FC,{})}),hints:t["barcode-help-modal-hints"],continueBtnLabel:t["barcode-help-modal-continue-btn"],styles:{base:H,buttons:M,captureHintIcon:B}});if(Ie)return i.jsx($c,{isOpen:Fe,onClose:nt,title:t["id-front-help-modal-title"],prompt:t["id-front-help-modal-prompt"],pictograph:i.jsx(Ye,{customImage:e["id-front-help-modal-pictograph"],alt:"ID front help modal pictograph",children:i.jsx(MC,{})}),hints:ce?t["id-front-help-modal-hints-mobile"]:t["id-front-help-modal-hints-desktop"],continueBtnLabel:t["id-front-help-modal-continue-btn"],styles:{base:H,buttons:M,captureHintIcon:B}});if(le)return i.jsx($c,{isOpen:Fe,onClose:nt,title:t["id-back-help-modal-title"],prompt:t["id-back-help-modal-prompt"],pictograph:i.jsx(Ye,{customImage:e["id-back-help-modal-pictograph"],alt:"ID back help modal pictograph",children:i.jsx(VC,{})}),hints:ce?t["id-back-help-modal-hints-mobile"]:t["id-back-help-modal-hints-desktop"],continueBtnLabel:t["id-back-help-modal-continue-btn"],styles:{base:H,buttons:M,captureHintIcon:B}})},lt=()=>{if(ae&&d){const Fe=c===U.BarcodePdf417?m:h;return i.jsx(Y5,{setAutoCaptureReady:we,delayUntilManualCaptureMs:Fe,handleCapture:a,handleError:s,handleTrigger:L,labelTakePhoto:T("government-id.capture.btn-take-photo"),requiresSide:c,governmentIdClass:r,videoConstraints:u,shouldDisplayCameraSelector:x,cameraSelectOptions:b,selectedCamera:g,handleCameraChange:p,overlayReady:!0,overlayRef:Q,overlayCaptureWindowRef:G,previewViewfinderRef:Y,requireFullBack:y,allowIncompleteBarcode:v,isShortBarcodeOverlay:me,submitButtonStyles:V==null?void 0:V.submit,showHelpButton:ee,helpButtonIconColor:$,helpButtonLabel:t["btn-help"],renderAutoCapturePill:pe,renderHelpModal:Je,uiReady:_,videoReady:A,assets:e,captureOverlay:l,captureFrameLabel:Er(t,r,c),hint:O,prompt:R})}else return c===U.BarcodePdf417?i.jsx(P5,{setAutoCaptureReady:we,delayUntilManualCaptureMs:m,handleCapture:a,handleError:s,handleTrigger:L,labelTakePhoto:T("government-id.capture.btn-take-photo"),requiresSide:c,videoConstraints:u,shouldDisplayCameraSelector:x,cameraSelectOptions:b,selectedCamera:g,handleCameraChange:p,overlayReady:!0,overlayRef:Q,overlayCaptureWindowRef:G,previewViewfinderRef:Y,isShortBarcodeOverlay:me,submitButtonStyles:V==null?void 0:V.submit,showHelpButton:ee,helpButtonIconColor:$,helpButtonLabel:t["btn-help"],renderAutoCapturePill:pe,renderHelpModal:Je,uiReady:_,videoReady:A,assets:e,governmentIdClass:r,captureOverlay:l,captureFrameLabel:Er(t,r,c),hint:O,prompt:R}):i.jsx(ak,{autoCaptureEnabled:ae,setAutoCaptureReady:we,delayUntilManualCaptureMs:h,handleCapture:a,handleTrigger:L,handleError:s,isPassport:r==="pp"||r==="ipp",labelTakePhoto:t["btn-take-photo"],requiresSide:c,videoConstraints:u,shouldDisplayCameraSelector:x,cameraSelectOptions:b,selectedCamera:g,handleCameraChange:p,overlayReady:!0,overlayRef:Q,overlayCaptureWindowRef:G,previewViewfinderRef:Y,submitButtonStyles:V==null?void 0:V.submit,showHelpButton:ee,helpButtonIconColor:$,helpButtonLabel:t["btn-help"],renderAutoCapturePill:pe,renderHelpModal:Je,uiReady:_,videoReady:A,assets:e,governmentIdClass:r,captureOverlay:l,captureFrameLabel:Er(t,r,c),hint:O,prompt:R})};return i.jsxs(i.Fragment,{children:[_e(),lt()]})}function vb(e,t,n=.92){return new Promise((r,o)=>{const a=document.createElement("img");a.src=e,a.onload=()=>{a.onload=void 0,a.onerror=void 0;const[s,c]=Ci();a.width>a.height?(s.width=t,s.height=s.width/a.width*a.height):(s.height=t,s.width=s.height/a.height*a.width);const l=s.getContext("2d");l.drawImage(a,0,0,s.width,s.height);const d=s.toDataURL("image/jpeg",n);l==null||l.clearRect(0,0,s.width,s.height),c(),r(d)},a.onerror=()=>{a.onload=void 0,a.onerror=void 0,o()}})}function yb(e,t,n){e.width>e.height?(t.width=n,t.height=t.width/e.width*e.height):(t.height=n,t.width=t.height/e.height*e.width);const r=t.getContext("2d");r==null||r.clearRect(0,0,t.width,t.height),r==null||r.drawImage(e,0,0,t.width,t.height)}const pk=1e6,fk=2e3,gk=12e4,bk=e=>{var lt,ue,Pe,Le,Fe,nt,Qe;const{config:t,featureFlags:n,inquiry:r,match:o,governmentIdClass:a,autoclassificationCountryCode:s,didAutoclassificationIdSelection:c,idClassesByCountries:l,audioConstraints:d,videoConstraints:u,history:h,cameraOptions:m,styles:p,saveVideoCaptureEnabled:g}=e,b=parseInt(o.params.step,10),{governmentIdClass:x,selectedCountryCode:y,autoclassificationIdClassesConfig:v}=hc(t,b,c,a,s,l),[_]=K(),A=Xh(),[T,R]=f.useState(!1),O=f.useRef(void 0),D=Zi(),L=zd(),H=f.useRef(!1),M=f.useMemo(()=>b===0?Re.shouldInitializeVideo(t==null?void 0:t["enabled-capture-file-types"],n):e.videoCaptureEnabled,[]),[B,V]=f.useState(!M);let q=[];m!=null&&(q=((lt=m.backCameras)!=null?lt:[]).concat((ue=m.frontCameras)!=null?ue:[]));const $=u.deviceId,Q=!!n["inquiry:show-government-id-camera-selector"],G=fa(t,x,b,c,v),Y=Ne=>{var ve;const de=Ne.deviceId,be=Ne.label;z.logAmplitude("government-id.camera.changed",{deviceId:de,cameraName:be}),An.dispose();const Se={...u,deviceId:{exact:de}};An.prepare({video:Se,audio:d},n),e.setVideoConstraints(Se),(ve=Re.currentClient)==null||ve.destroy()};f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}Q&&e.loadCameraOptions()},[]),f.useEffect(()=>{const Ne=G?e.uploads[G]!=null:!1;M&&G==="front"&&Ne&&Re.decrementAttempts();const de=M?async()=>{const be={onTimeExceeded:()=>{var ve;const Se=G?e.uploads[G]:null;Se&&(Se==null?void 0:Se.length)>0?(ve=Re.currentClient)==null||ve.stopRecording():(e.history.replace(Vt(0,Ue.Prompt)),e.showMessage(_("government-id.capture.recording-timeout")))},onError:Se=>{z.logAmplitude("government-id.video.errored",{pageType:"capture",message:`${Se instanceof Error?Se==null?void 0:Se.message:JSON.stringify(Se)}`}),Re.markClientError();const ve=Re.shouldReinitializeWithUpload(Se,t==null?void 0:t["video-capture-methods"]);Re.destroy(!0),ve?de==null||de():(h.replace(Vt(0,Ue.Prompt)),e.showMessage(_("errors.network")),Z(new Error(`MediaRecorder error ${Se instanceof Error?Se.message:JSON.stringify(Se)}`)))},onStart:Se=>{var ve;V(!0),z.logAmplitude("government-id.video.start",{isRestart:Se,type:(ve=Re.currentClient)==null?void 0:ve.type})}};if(b===0){Re.currentClient&&Re.destroy(!0);const Se=Re.getNewClient(Re.getVideoCaptureMethods(t==null?void 0:t["enabled-capture-file-types"],t==null?void 0:t["video-capture-methods"])),ve=await navigator.mediaDevices.getUserMedia({video:u!=null?u:!0,audio:d});if(D()){const He=Se.init({stream:ve,maxRecordingTime:gk,jwt:t==null?void 0:t["video-session-jwt"],trackingEventsEnabled:n["inquiry:enable-te-cloud-run"],stepName:"government-id",...be});O.current=He,Se.startRecording(),Re.recordVideoAttempt(),z.logAmplitude("government-id.video.initialized",{type:Se.type,attempt:Re.videoAttempts}),Bt.track({event:{type:"inquiry.video.initialize",data:{capture_method:Se.type,attempt:Re.videoAttempts,step_name:"government-id"}},featureFlags:n})}}else{const Se=Re.currentClient,ve=Se==null?void 0:Se.subscribe(be);V(!0),O.current=ve}}:void 0;return de==null||de(),()=>{var be;(be=Re.currentClient)==null||be.unsubscribe(O.current)}},[]),f.useEffect(()=>{b===0&&g(M)},[M,b,g]),f.useEffect(()=>{try{n!=null&&n["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("government-id.capture-page.entered",{currentSide:G,selectedCountryCode:y,governmentIdClass:x})}catch{}},[]);const re=!Pn()&&Ca(window.location.host)&&!T&&xa(G,y,x,n),ae=(t==null?void 0:t["govid-design-version"])===To.V1,Ce=ni(),we=async(Ne,de,be,Se,ve)=>{if(e.uiStatus===tn.Ready)try{if(Nn(),Ne=Ne.filter(Ve=>Ve!=null),e.updateCameraInspectionData(be),e.saveCaptureMethod(de),z.logAmplitude("government-id.camera.capture",{imageSizes:Ne.map(Ve=>Ve.length),currentSide:G,captureMethod:de}),Ne.some(Ve=>Ve.length>pk)){const Ve=[];for(const ze of Ne)Ve.push(await vb(ze,fk,void 0));Ne=Ve}const He=Ne.map((Ve,ze)=>({filename:`photo${ze+1}.jpg`,fileType:go,dataUrl:Ve,captureMethod:de,captureFlow:_o.Guided}));e.uploadFiles(G,He,Se,ve),N.onEvent(Oe.DocumentCameraCapture),ae?e.history.push(Vt(b,Ue.Check)):e.history.index>0?e.history.replace(Vt(b,Ue.CheckUpload)):e.history.push(Vt(b,Ue.CheckUpload)),H.current=!0}catch(He){me(He,"capture")}finally{}},me=(Ne,de)=>{var be,Se,ve,He;D()&&ep("/inquiry/government-id/:step/capture",A.pathname)&&(H.current||(de==="capture"&&e.showMessage(_("government-id.capture.failed-screenshot")),Ne instanceof ln?(Z(Ne,"warning",{...Ne.originalError,state:de},{jira:"PER-10182",videoEnabled:M.toString(),videoCaptureMethod:(be=Re.currentClient)==null?void 0:be.type}),de==="load"?N.onEvent(Oe.LoadCameraFailed,{error:Ne.name,message:Ne.message}):N.onEvent(Oe.CameraCaptureFailed,{error:Ne.name,message:Ne.message})):Ne instanceof Error?(Z(Ne,"error",{state:de},{jira:"PER-10182",videoEnabled:M.toString(),videoCaptureMethod:(Se=Re.currentClient)==null?void 0:Se.type}),de==="load"?(N.onEvent(Oe.LoadCameraFailed,{error:Ne.name,message:Ne.message}),h.push(bo(t)?"inquiry/support/camera-microphone":"/inquiry/support/camera")):N.onEvent(Oe.CameraCaptureFailed,{error:Ne.name,message:Ne.message})):(typeof Ne=="object"&&Object.prototype.hasOwnProperty.call(Ne,"message")?Z(new Error(Ne.message),"error",{...Ne,state:de},{jira:"PER-10182",videoEnabled:M.toString(),videoCaptureMethod:(ve=Re.currentClient)==null?void 0:ve.type}):Z(new Error(Ne),"error",{state:de},{jira:"PER-10182",videoEnabled:M.toString(),videoCaptureMethod:(He=Re.currentClient)==null?void 0:He.type}),de==="load"?(N.onEvent(Oe.LoadCameraFailed,{message:Ne}),h.push(bo(t)?"inquiry/support/camera-microphone":"/inquiry/support/camera")):N.onEvent(Oe.CameraCaptureFailed,{message:Ne})),re&&R(!0),Re.currentClient!=null&&de==="capture"&&Re.markClientError()))};if(r==null||r.attributes["next-step"].type!==Ae.GovernmentId)return null;const Ie=er(t,"capture-page",{idClass:x,side:G}),le=(Pe=t==null?void 0:t.idclasses)==null?void 0:Pe.find(Ne=>Ne.class===x),ee=(Le=le==null?void 0:le["capture-page-configs"])==null?void 0:Le[b],ce=(Fe=ee==null?void 0:ee["manual-capture-config"]["delay-ms"])!=null?Fe:t["web-camera-manual-capture-delay-ms"],_e=(nt=ee==null?void 0:ee["manual-capture-config"]["delay-ms"])!=null?nt:t["barcode-camera-manual-capture-delay-ms"],pe=ee==null?void 0:ee.overlay,Je=ee==null?void 0:ee["auto-capture-config"];return ae?i.jsx(Yi,{value:p,children:i.jsx(hk,{assets:t.assets["capture-page"],localizations:Ie,requiresSide:G,shouldUseMicroblink:re,featureFlags:n,governmentIdClass:x,captureOverlay:pe,autoCaptureConfig:Je,handleCapture:we,handleError:me,webCameraManualCaptureDelayMs:ce,barcodeCameraManualCaptureDelayMs:_e,audioConstraints:d,videoConstraints:u,shouldDisplayCameraSelector:Q,cameraSelectOptions:q,selectedCamera:(Qe=$==null?void 0:$.exact)!=null?Qe:"",handleCameraChange:Y,requireFullBack:G===U.Back&&(Ce?n["inquiry:enable-microblink-full-back-detection-mobile"]:n["inquiry:enable-microblink-full-back-detection-desktop"]),allowIncompleteBarcode:G===U.Back&&!Ce&&n["inquiry:enable-microblink-incomplete-barcode-detection-desktop"],uiReady:e.uiStatus===tn.Ready,videoReady:B})}):i.jsx(E4,{localizations:Ie,featureFlags:n,requiresSide:G,shouldUseMicroblink:re,selectedCountryCode:y,governmentIdClass:x,handleCapture:we,handleError:me,webCameraManualCaptureDelayMs:ce,barcodeCameraManualCaptureDelayMs:_e,videoConstraints:u,zoomFactor:L})};function Ck(e){return{styles:Qi(e.inquiry),inquiry:e.inquiry.inquiry,config:hi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,idClassesByCountries:e.verification.idClassesByCountries,audioConstraints:e.verification.audioConstraints,videoConstraints:e.verification.videoConstraints,uploads:e.verification.uploads,cameraOptions:e.ui.cameraOptions,uiStatus:e.ui.status,videoCaptureEnabled:e.verification.videoCaptureEnabled}}const xk={updateCameraInspectionData:md,saveCaptureMethod:hr,saveVideoCaptureEnabled:Xv,showMessage:se,uploadFiles:Ks,loadCameraOptions:Kl,setVideoConstraints:Ro,setTransitionStart:Nn,setUiReady:mt},vk=ke(Ck,xk),yk=vk(bk),Ik=C.div.withConfig({displayName:"InquiryGovernmentIdCheckView__Container",componentId:"sc-1i77ehf-0"})(["display:flex;flex-direction:column;"]),Sk=C("div").withConfig({displayName:"InquiryGovernmentIdCheckView__Header",componentId:"sc-1i77ehf-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),wk=C("div").withConfig({displayName:"InquiryGovernmentIdCheckView__ImagePositioner",componentId:"sc-1i77ehf-2"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],F.base*2),_k=C("div").withConfig({displayName:"InquiryGovernmentIdCheckView__Minify",componentId:"sc-1i77ehf-3"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function Rk(e){const{assets:t,currentUpload:n,localizations:r,handleContinue:o,handleRetry:a,isProcessing:s}=e,{base:c,buttons:l}=On();return["image/jpeg","image/png"].includes(n.fileType)?i.jsxs(Ik,{children:[i.jsxs(Sk,{children:[i.jsx(dt,{styles:c==null?void 0:c.titleStyle,children:i.jsx(J,{children:r.title})}),i.jsx(ot,{styles:c==null?void 0:c.textStyle,children:i.jsx(J,{children:r.prompt})})]}),i.jsx(wk,{children:i.jsx(Wd,{src:n.dataUrl,alt:"upload preview"})}),i.jsxs(ft,{children:[i.jsx(ge,{id:"government_id__use-image",buttonType:ne.Primary,styles:l==null?void 0:l[ne.Primary],disabled:s,onClick:o,"data-test":"government-id-check__continue",children:s?i.jsxs("span",{children:[r.uploading,i.jsx(_k,{children:i.jsx(Ji,{})})]}):r["btn-submit"]}),l==null&&i.jsx(We,{height:2}),i.jsx(ge,{id:"government_id__retake",buttonType:ne.Secondary,styles:l==null?void 0:l[ne.Secondary],disabled:s,onClick:a,"data-test":"government-id-check__retake",children:r["btn-retake"]})]})]}):i.jsx(Vg,{customFileIcon:t["icon-file"],fileName:n.filename,isProcessing:s,handleContinue:o,handleRetry:a,title:r["confirm-title"],prompt:r["confirm-prompt"],uploading:r["confirm-uploading"],btnSubmit:r["confirm-btn-submit"],btnRetake:r["confirm-btn-retake"],titleStyles:c==null?void 0:c.titleStyle,textStyles:c==null?void 0:c.textStyle,buttonStyles:l})}const Ak=C("h1").withConfig({displayName:"ThemedTitle__Title",componentId:"sc-1dzwaci-0"})(["font-family:",";color:",";font-size:",";font-weight:",";line-height:",";margin-bottom:",";text-align:",";"],({theme:{fontFamilyTitle:e}})=>$t(e),({theme:e})=>e.colorFontTitle,({theme:e})=>e.fontSizeHeader,({theme:e})=>e.headerFontWeight,({theme:e})=>e.lineHeightHeader,({theme:e})=>e.headerMarginBottom,({theme:e})=>e.textAlign),et=({styles:e,...t})=>i.jsx(i.Fragment,{children:e!=null?i.jsx(wd,{...t,styles:e}):i.jsx(Ak,{...t,tabIndex:-1})}),Tk=720,Ek=C("div").withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__VideoWrapperFullscreen",componentId:"sc-1y4imlj-0"})(["background:",";overflow:hidden;position:relative;min-height:","px;display:flex;justify-content:center;",";",";"],Be.black,Aa,({flowType:e,useDynamicHeight:t,preferredDimensions:n})=>e===rt.Inline||n&&e===rt.Embedded?`
      height: ${t?"100vh":`${Tk}px`};
    `:`
      @media ${xt.isMobile} {
        height: 100%;
        min-height: 140vw;
      }

      @media ${xt.isNotMobile} {
        ${n!=null&&n["minimum-height"]?`min-height: ${E(n["minimum-height"])};`:""}
      }
    `,N.isDashboardFLE&&"height: 100%;"),kk=450,Nk=C.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__VideoWrapperColumnSizer",componentId:"sc-1y4imlj-1"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${kk}px`:null),jk=C.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__ButtonRowFullscreen",componentId:"sc-1y4imlj-2"})(["width:100%;position:absolute;bottom:",";display:flex;flex-direction:column;z-index:",";"],I.Spacing[5],At.footer),Zm=C.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__ButtonWrapper",componentId:"sc-1y4imlj-3"})(["margin-bottom:",";margin-left:10%;margin-right:10%;"],I.Spacing[4]),Jm={...Gi,colorButtonPrimary:Be.white,colorFontButtonPrimary:Be.black,colorButtonSecondary:Be.white,colorFontButtonSecondary:Be.white,colorButtonSecondaryFill:Be.black,borderWidth:"1.5px",borderRadius:"24px"},Xm=C(ma).withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__ThemedButton",componentId:"sc-1y4imlj-4"})([""]),Pk=C.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__TitlePositioner",componentId:"sc-1y4imlj-5"})(["position:absolute;top:72px;left:10%;right:10%;*{color:"," !important;}z-index:",";"],I.Color.PrimaryWhite,At.navbar),Dk=C("img").withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__CapturedImage",componentId:"sc-1y4imlj-6"})(["width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]);function Ok(e){const{assets:t,requiresSide:n,governmentIdClass:r,captureOverlay:o,currentUpload:a,localizations:s,handleContinue:c,handleRetry:l,reverseSide:d,collapsed:u,flipped:h,isProcessing:m,uploadProgress:p,featureFlags:g}=e,{base:b,reviewImageBox:x,captureOverlayHeaderButton:y,captureHint:v,captureButtons:_}=On(),A=g["inquiry:enable-dynamic-height-for-camera-capture-on-desktop"],T=Ur(),R=n===U.BarcodePdf417,O=s["title-confirm-capture"]?null:s.prompt;return i.jsx(i.Fragment,{children:i.jsx(Ek,{flowType:N.flowType,useDynamicHeight:A,preferredDimensions:T,children:i.jsxs(Nk,{restrictInlineColumnWidth:N.isInline||!!T,children:[s["title-confirm-capture"]?i.jsx(Pk,{children:i.jsx(et,{styles:b==null?void 0:b.titleStyle,children:s["title-confirm-capture"]})}):null,i.jsx(Zd,{assets:t,styles:{base:b,captureBox:x,captureOverlayHeaderButton:y,hint:v==null?void 0:v.textStyle},governmentIdClass:r,requiresSide:n,captureOverlay:o,captureFrameLabel:Er(s,r,n),reverseCaptureFrameLabel:Er(s,r,d),prompt:O,reverseSide:d,collapsed:u,flipped:h,capturing:!0,renderCaptureWindowContents:()=>i.jsx(Dk,{alt:Er(s,r,n),"data-test":"scanner-overlay__captured-image",src:a.dataUrl}),isShortBarcodeOverlay:R,isAnimated:!0}),!u&&i.jsxs(jk,{children:[i.jsx(Zm,{children:i.jsx(Xm,{buttonType:ne.Primary,theme:Jm,disabled:m,styles:_==null?void 0:_.submit,id:"government_id__check__continue",onClick:c,"data-test":"government-id-check__continue",isPending:m,uploadProgress:m&&p?Math.round(p*100):null,pendingContent:s.uploading,children:s["btn-submit"]})}),i.jsx(Zm,{children:i.jsx(Xm,{buttonType:ne.Secondary,styles:_==null?void 0:_.retake,theme:Jm,disabled:m,id:"government_id__retake",onClick:l,"data-test":"government-id-check__retake",children:s["btn-retake"]})})]})]})})})}const vc=ti([e=>e.inquiry.featureFlags],e=>({featureFlags:e}));function Lk(e){var be;const{clientExtractions:t,clientExtractionSource:n,config:r,featureFlags:o,governmentIdClass:a,idClassesByCountries:s,autoclassificationCountryCode:c,didAutoclassificationIdSelection:l,inquiry:d,routingInputs:u,uploads:h,cameraInspectionData:m,status:p,styles:g,uploadProgress:b}=e,x=Dt(),y=f1(),v=parseInt(y.params.step,10),{governmentIdClass:_,selectedCountryCode:A,autoclassificationIdClassesConfigState:T}=hc(r,v,l,a,c,s),[R]=K(),[O,D]=f.useState(!1),[L,H]=f.useState(!1),[M]=f.useState(()=>fa(r,_,v,l,T)),B=f.useRef(null),V=f.useRef(null),q=f.useRef(null),$=f.useRef(null),[Q,G]=f.useState(!1),Y=h[M],re=cl(Y),ae=a8(r,_,v+1,T),Ce=f.useMemo(()=>!Tl(h)&&e.videoCaptureEnabled,[]);f.useEffect(()=>{const{inquiry:Se}=e;if(Se==null){N.redirectToStart();return}if(M==null){N.redirectToStart();return}(Y==null||Y.length===0||!re)&&(e.showMessage(R("errors.network")),x.goBack())},[]);const we=g1();f.useEffect(()=>{var Se;return Ce&&(Re.currentClient==null&&we!=="POP"&&Z(new Error("MediaRecorder: client is undefined"),"warning"),V.current=(Se=Re.currentClient)==null?void 0:Se.subscribe({onRecordingComplete:(ve,He)=>{var Ve,ze;B.current||(B.current=ve,lt(),G(!1),z.logAmplitude("government-id.video.stop",{elapsedTime:He,type:(Ve=Re.currentClient)==null?void 0:Ve.type,chunksLength:ve.type==="upload"?(ze=ve.chunks)==null?void 0:ze.length:0}))},onError:ve=>{z.logAmplitude("government-id.video.errored",{pageType:"check",message:`${ve instanceof Error?ve==null?void 0:ve.message:JSON.stringify(ve)}`}),Z(new Error(`MediaRecorder error ${ve instanceof Error?ve==null?void 0:ve.message:JSON.stringify(ve)}`)),G(!1),(!ae||!B.current)&&(e.clearUploadFiles(),Re.markClientError(),x.replace(Vt(0,Ue.Prompt)),e.showMessage(R("errors.network")))},onTimeExceeded:()=>{var ve;G(!1),ae&&!B.current?(ve=Re.currentClient)==null||ve.stopRecording():(x.replace(Vt(0,Ue.Prompt)),e.showMessage(R("government-id.capture.recording-timeout")))}})),()=>{var ve;(ve=Re.currentClient)==null||ve.unsubscribe(V.current)}},[]),f.useEffect(()=>{try{o!=null&&o["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("government-id.check-page.entered",{currentSide:M,selectedCountryCode:A,governmentIdClass:_,captureFlow:re==null?void 0:re.captureFlow,captureMethod:re==null?void 0:re.captureMethod})}catch{}},[]);let me=null;const Ie=(r==null?void 0:r["govid-design-version"])===To.V1&&(re==null?void 0:re.captureFlow)===_o.Guided;Ie&&(me=fa(r,a,v+1,l,T));const le=Se=>{D(!0),setTimeout(()=>{H(!0),setTimeout(()=>{Se()},Qg*1e3+100)},Yd*1e3+100)},{error:ee,loading:ce,callback:_e}=It(async()=>{var He;e.clearMessages(),uo(Object.values(h)).map(Ve=>Ve.dataUrl.length).reduce((Ve,ze)=>Ve+ze,0)>ua&&e.showMessage(r.localizations["check-page"]["large-upload"]);const ve=await e.governmentIdAutoclassification({inquiry:d,uploads:h,history:x,t:R,debugForcedStatus:e.debugForcedStatus,featureFlags:e.featureFlags});if(ve["response-type"]===ra.ACCEPTED){const Ve=ia(ve["country-code"]),ze=ia(ve["id-class"]),St=ia(ve["id-config"]);if(St["capture-page-configs"]&&St["capture-page-configs"].length>1){const wt=[{"country-code":Ve,"country-name":xs[Ve],"id-configs":[St]}];e.saveAutoclassificationSuccessIdDetails(Ve,ze,wt),Tl(h)?x.push(Vt(v+1,Ue.Prompt)):le(()=>{x.replace(Vt(v+1,Ue.CaptureLeadInAnimation))})}else Ce&&B.current==null?(G(!0),q.current=Ve,$.current=ze,(He=Re.currentClient)==null||He.stopRecording()):await e.submitGovernmentId({inquiry:d,config:r,governmentIdClass:ze,countryCode:Ve,uploads:h,clientExtractionRaws:t,clientExtractionSource:n,cameraInspectionData:m,videoData:B==null?void 0:B.current,manuallyClassifiedInAutoclassificationFlow:!1,t:R,history:x,debugForcedStatus:e.debugForcedStatus,opts:Ie?{transition:Pi.Fade}:{},featureFlags:o})}else if(ve["response-type"]===ra.REJECTED||ve["response-type"]===ra.FAILED)e.saveAutoclassificationFailureResult(ve["response-type"],ve["id-classes-by-countries"]||[]),Ce&&Re.currentClient?(Re.destroy(!0),Re.decrementAttempts(),e.resetAutoclassificationState(),x.replace(Vt(v,Ue.AutoclassificationFailure))):x.push(Vt(v,Ue.AutoclassificationFailure));else throw Z(new Error(`Unexpected autoclassification response type ${ve["response-type"]}`),"warning"),new mn({method:"POST"})},[h,d,_,v,u,e.debugForcedStatus,B,Ce]),{error:pe,loading:Je,callback:lt}=It(async()=>{var Ve;e.clearMessages(),uo(Object.values(h)).map(ze=>ze.dataUrl.length).reduce((ze,St)=>ze+St,0)>ua&&e.showMessage(r.localizations["check-page"]["large-upload"]);const ve=Ce&&q.current!=null&&$.current!=null&&Es(r,v,l),He=!Ce||Ce&&B.current!=null;(ae||ve)&&He?(await e.submitGovernmentId({inquiry:d,config:r,governmentIdClass:ve?$.current:_,countryCode:ve?q.current:A||void 0,uploads:h,clientExtractionRaws:t,clientExtractionSource:n,cameraInspectionData:m,videoData:B==null?void 0:B.current,manuallyClassifiedInAutoclassificationFlow:l,t:R,history:x,debugForcedStatus:e.debugForcedStatus,opts:Ie?{transition:Pi.Fade}:{},featureFlags:o}),Re.currentClient&&Re.destroy(!0)):Ce&&ae&&B.current==null?(x.replace(Vt(0,Ue.Prompt)),z.logAmplitude("government-id.video.reprompt",{type:(Ve=Re.currentClient)==null?void 0:Ve.type,attempt:Re.videoAttempts})):Ie?le(()=>{x.replace(Vt(v+1,Ue.CaptureLeadInAnimation))}):x.push(Vt(v+1,Ue.Prompt))},[h,d,_,v,u,e.debugForcedStatus,B,Ce]),ue=f.useRef(Date.now()),Pe=()=>{var Se;Date.now()-ue.current<100||(Es(r,v,l)?_e():Ce&&ae&&B.current==null?((Se=Re.currentClient)==null||Se.stopRecording(),G(!0)):lt())};Et({error:ee,onError:()=>e.showMessage(R("errors.network")),onNetworkError:()=>e.showMessage(R("errors.network"))}),Et({error:pe,onError:()=>e.showMessage(R("errors.network")),onNetworkError:()=>e.showMessage(R("errors.network"))});const Le=ce||Je,Fe=()=>{Date.now()-ue.current<100||Le||Q||x.goBack()};if(d==null||d.attributes["next-step"].type!==Ae.GovernmentId||Y==null||Y.length===0||!re)return null;const nt=er(r,"check-page",{idClass:_,side:M}),Qe=r.idclasses.find(Se=>Se.class===_),Ne=(be=Qe==null?void 0:Qe["capture-page-configs"])==null?void 0:be[v],de=Ne==null?void 0:Ne.overlay;if(Ie){const Se=Le||Q||p!==tn.Ready;return i.jsx(Yi,{value:g,children:i.jsx(Ok,{assets:r.assets["capture-page"],requiresSide:M,localizations:nt,currentUpload:re,handleContinue:Pe,handleRetry:Fe,isProcessing:Se,governmentIdClass:_,captureOverlay:de,reverseSide:me,collapsed:O,flipped:L,featureFlags:o,uploadProgress:Ce?b:null})})}return i.jsx(Yi,{value:g,children:i.jsx(Rk,{assets:r.assets["check-page"],localizations:nt,currentUpload:re,handleContinue:Pe,handleRetry:Fe,isProcessing:Le||Q})})}function Fk(e){return{clientExtractions:e.verification.clientExtractions,clientExtractionSource:e.verification.clientExtractionSource,config:hi({state:e,stepType:Ae.GovernmentId}),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,idClassesByCountries:e.verification.idClassesByCountries,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,inquiry:e.inquiry.inquiry,routingInputs:vc(e),uploads:e.verification.uploads,videoData:e.verification.videoData,cameraInspectionData:e.verification.cameraInspectionData,status:e.ui.status,styles:Qi(e.inquiry),uploadProgress:e.verification.uploadProgress,videoCaptureEnabled:e.verification.videoCaptureEnabled}}const Mk={clearMessages:Lt,clearUploadFiles:ey,showMessage:se,submitGovernmentId:A8,governmentIdAutoclassification:T8,resetAutoclassificationState:hd,saveAutoclassificationSuccessIdDetails:iy,saveAutoclassificationFailureResult:ry},Vk=ke(Fk,Mk),eh=Vk(Lk),Bk=C.div.withConfig({displayName:"InquiryGovernmentIdPendingView__Container",componentId:"sc-gjlu0y-0"})(["display:flex;flex-direction:column;"]),qk=C("div").withConfig({displayName:"InquiryGovernmentIdPendingView__Header",componentId:"sc-gjlu0y-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),Uk=C("div").withConfig({displayName:"InquiryGovernmentIdPendingView__AnimationContainer",componentId:"sc-gjlu0y-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],F.base*8);function Hk({assets:e,localizations:t,textVerticalPosition:n}){const{base:r,processingPage:o}=On(),a=i.jsxs(qk,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(J,{children:t.title})}),i.jsx(ot,{styles:o==null?void 0:o.textStyle,children:i.jsx(J,{children:t.description})})]});return i.jsx(tp,{autoFocus:!0,children:i.jsxs(Bk,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),n!=="end"&&a,i.jsx(Uk,{children:i.jsx(Ye,{customImage:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(Lo,{icon:"verification",$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color)})})}),n==="end"&&a]})})}const $k=e=>{const{inquiry:t,config:n,styles:r,governmentIdClass:o,featureFlags:a}=e,[s]=K(),c=Dt();if(f.useEffect(()=>{if(t==null){N.redirectToStart();return}},[]),f.useEffect(()=>{Fi.needsTeardown()&&Fi.tearDown().catch(()=>null)},[]),Sa.useAsyncEffect(async()=>{t!=null&&e.pollInquiry(t,{historyToClear:c}).catch(()=>{e.showMessage(s("errors.network"),!0),c.goBack()})},[]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("government-id.pending-page.entered",{})}catch{}},[]),t==null||n==null)return null;const l=er(n,"pending-page",{idClass:o});return i.jsx(Yi,{value:r,children:i.jsx(Hk,{assets:n.assets["pending-page"],localizations:l,textVerticalPosition:n["pending-page-text-vertical-position"]})})};function Gk(e){return{inquiry:e.inquiry.inquiry,governmentIdClass:e.verification.governmentIdClass,config:hi({state:e,stepType:Ae.GovernmentId}),styles:Qi(e.inquiry),featureFlags:e.inquiry.featureFlags}}const Wk={showMessage:se,pollInquiry:jn},zk=ke(Gk,Wk),Yk=zk($k);var Ib=(e=>(e[e.BackFacingCamera=0]="BackFacingCamera",e[e.FrontFacingCamera=1]="FrontFacingCamera",e))(Ib||{});const Kk=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];function Qk(e){const t=e.toLowerCase();return Kk.some(n=>t.includes(n))}class th{constructor(t,n){this.deviceId=t.deviceId,this.facing=n,this.groupId=t.groupId,this.label=t.label}}async function Zk(){const e=[],t=[];{let n=await navigator.mediaDevices.enumerateDevices();if(n.filter(o=>o.kind==="videoinput").every(o=>o.label==="")){const o=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});n=await navigator.mediaDevices.enumerateDevices(),o.getTracks().forEach(a=>a.stop())}const r=n.filter(o=>o.kind==="videoinput");for(const o of r)Qk(o.label)?t.push(new th(o,0)):e.push(new th(o,1))}return{frontCameras:e,backCameras:t}}async function Jk(e,t){const{frontCameras:n,backCameras:r}=await Zk();if(n.length>0||r.length>0){let o=r.length>0?r:n;if(t===0&&r.length>0&&(o=r),t===1&&n.length>0&&(o=n),o.find(a=>a.label===""))return o[t===1?0:o.length-1];o=o.sort((a,s)=>a.label.localeCompare(s.label));{let a=0;const s=o.map(c=>{const d=RegExp(/\b([0-9]+)MP?\b/,"i").exec(c.label);return d!=null?parseInt(d[1],10):NaN});return s.some(c=>isNaN(c))||(a=s.lastIndexOf(Math.max(...s))),o[a]}}else return null}var Lr=(e=>(e.BaseSection="base-section",e.GovernmentIdSelectPageTitle="government-id--select-page--title",e.GovernmentIdSelectPagePrompt="government-id--select-page--prompt",e.GovernmentIdSelectPageIds="government-id--select-page--ids",e.GovernmentIdPromptPageTitle="government-id--prompt-page--title",e.GovernmentIdPromptPageDescription="government-id--prompt-page--description",e))(Lr||{});Ae.GovernmentId+"";const Xk=C.div.withConfig({displayName:"Checkbox__Container",componentId:"sc-wj665q-0"})(["cursor:pointer;display:flex;align-items:center;flex-wrap:none;cursor:pointer;"]),e9=C.input.withConfig({displayName:"Checkbox__HiddenInput",componentId:"sc-wj665q-1"})(["height:1px;width:1px;margin:-1px;border:0;overflow:hidden;clip:rect(0,0,0,0);position:absolute;"]),t9=C.div.withConfig({displayName:"Checkbox__IconContainer",componentId:"sc-wj665q-2"})(["display:flex;align-items:center;transition:box-shadow ",";",""],it.Fast,({theme:e})=>W(["svg{.checkbox__border--empty{fill:none;stroke:",";}.checkbox__border{fill:",";stroke:",";}.checkbox__check{stroke:",";}}&","","{box-shadow:0 0 0 3px transparent,",";}&","","{svg{.checkbox__border--empty{stroke:",";}}}&","{cursor:not-allowed;svg{.checkbox__border--empty{fill:none;stroke:",";}.checkbox__border{fill:",";stroke:",";}.checkbox__check{stroke:",";}}}"],e.colorFont,e.colorButtonPrimary||e.colorPrimary,e.colorButtonPrimary||e.colorPrimary,e.colorFontButtonPrimary,jr,bn,gi.Mid,xi,bn,e.colorButtonPrimary||e.colorPrimary,ho,Be.gray20,Be.gray20,Be.gray20,e.colorFontButtonPrimary)),n9=C(J).withConfig({displayName:"Checkbox__StyledMarkdown",componentId:"sc-wj665q-3"})(["cursor:inherit;padding:0 ",";",""],I.Spacing[2],({theme:e,disabled:t})=>t&&W(["color:",";"],e.color.text.disabled)),i9=({className:e,disabled:t,indeterminate:n,onChange:r,onFocus:o,onBlur:a,value:s,id:c,label:l,autoFocus:d,"data-test":u})=>{const[h,{enable:m,disable:p}]=st(),g=f.useCallback(()=>{var x;r(!s),(x=b.current)==null||x.focus()},[r,s]),b=f.useRef();return f.useEffect(()=>{b.current&&(b.current.indeterminate=n)},[n]),i.jsxs(Xk,{id:c,className:e,onClick:t?void 0:g,"data-test":u,role:"checkbox","aria-checked":!!s,"aria-readonly":t,children:[i.jsx(e9,{ref:b,"data-test-toggle-status":s?"on":"off",disabled:t,type:"checkbox",checked:!!s,readOnly:!0,onChange:()=>null,autoFocus:d,onFocus:x=>{m(),o==null||o(x)},onBlur:x=>{p(),a==null||a(x)}}),i.jsx(t9,{focused:h,disabled:t,children:n?i.jsx(Ap,{}):s?i.jsx(Tp,{}):i.jsx(Ep,{})}),i.jsx(n9,{wrapper:"label",wrapperProps:{htmlFor:c},disabled:t,children:l})]})},r9=C(qe).attrs(()=>({as:"small"})).withConfig({displayName:"Disclaimer__TermsNoticeStyled",componentId:"sc-80ibwq-0"})(["",""],({styles:e})=>{const t=e;return{display:"block",marginTop:`${F.base}px`,marginBottom:`${F.base*2}px`,color:k(t["text-color"].base.base),fontSize:E(t["font-size"].base.base),lineHeight:E(t["line-height"].base.base),"& , a":{fontSize:E(t["font-size"].base.base),lineHeight:E(t["line-height"].base.base)}}}),o9=C(qe).attrs(()=>({as:"small"})).withConfig({displayName:"Disclaimer__TermsNotice",componentId:"sc-80ibwq-1"})(["display:block;margin-top:","px;margin-bottom:","px;",""],F.base,F.base*2,({theme:e})=>({color:e.colorFontSmall,fontSize:e.fontSizeSmall,lineHeight:e.lineHeightSmall,"&, a":{fontSize:e.fontSizeSmall,lineHeight:e.lineHeightSmall}})),vo=({agreeToPolicyType:e="standard",styles:t})=>{const{t:n}=K();let r;switch(e){case"biometric":r=n("intro.biometric-agree-to-policy");break;case"standard":r=n("intro.agree-to-policy");break;case"barcode":r=n("intro.barcode-agree-to-policy");break;default:r=n("intro.agree-to-policy");break}return i.jsx(i.Fragment,{children:t!=null?i.jsx(r9,{styles:t,children:i.jsx(J,{children:r})}):i.jsx(o9,{children:i.jsx(J,{children:r})})})},a9=C(qe).attrs(()=>({as:"div"})).withConfig({displayName:"Disclaimer__TermsNoticeCheckboxContainer",componentId:"sc-80ibwq-2"})(["display:flex;border-top:1px solid ",";margin-top:","px;padding-top:","px;margin-bottom:","px;font-size:",";line-height:",";&,a{font-size:",";line-height:",";}"],Be.gray20,F.base*-1,F.base*3,F.base*5,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),s9=C(i9).withConfig({displayName:"Disclaimer__TermsNoticeCheckbox",componentId:"sc-80ibwq-3"})(["align-items:flex-start;"]),c9=({checked:e,onChange:t})=>{const{t:n}=K();return i.jsx(a9,{children:i.jsx(s9,{id:"agree-to-policy-checkbox","data-test":"agree-to-policy-checkbox",value:e,onChange:t,label:n("intro.agree-to-policy")})})},l9=({allowedCaptureOptions:e,allowedFileTypes:t,enableVideoRecording:n,assets:r,currentSide:o,governmentIdClass:a,handleDeviceHandoff:s,handleDrop:c,handleInputCapture:l,handleSelectCamera:d,hideCameraPermissionsDialog:u,isProcessing:h,localizations:m,openCameraPermissionsDialog:p,selectedCountryCode:g,showCameraPermissionsDialog:b,skipPromptPage:x})=>{const{governmentIdPictographPosition:y}=f.useContext(tt),{base:v,buttons:_}=On(),A=f.useCallback(async()=>{try{await d()}catch{p()}},[d,p]);if(x&&e.length===0)return i.jsx(vn,{});const T=i.jsx($e,{height:null,width:null,role:null,"aria-label":null,children:i.jsx(g9,{assets:r,currentSide:o,governmentIdClass:a})}),R=g==="US"&&o===U.Back;return i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:b,onClose:u,styles:v==null?void 0:v.modal,"data-test":"camera-permissions-dialog","aria-labelledby":"camera-permissions-dialog__title","aria-describedby":"camer-permissions-dialog__description",children:[i.jsx(dt,{id:"camera-permissions-dialog__title",styles:v==null?void 0:v.titleStyle,children:i.jsx(J,{children:n?m["camera-and-mic-permissions-title"]:m["camera-permissions-title"]})}),i.jsx(ot,{id:"camera-permissions-dialog__description",styles:v==null?void 0:v.textStyle,children:i.jsx(J,{children:n?m["camera-and-mic-permissions-prompt"]:m["camera-permissions-prompt"]})}),i.jsx(We,{height:2}),i.jsx(ge,{type:"button",id:"camera-permissions-dialog__btn",buttonType:ne.Primary,styles:_==null?void 0:_[ne.Primary],onClick:u,children:n?m["camera-and-mic-permissions-btn-continue-web"]:m["camera-permissions-btn-continue-web"]})]}),i.jsxs(d9,{children:[i.jsx(Ye,{customImage:r["header-pictograph"],alt:"header pictograph"}),y===Wt.Start&&T,i.jsxs(u9,{children:[i.jsx(b9,{currentSide:o,governmentIdClass:a,override:m["title-override"],selectedCountryCode:g,styles:v==null?void 0:v.titleStyle}),i.jsx(C9,{currentSide:o,governmentIdClass:a,override:e.length===0?m["no-capture-options-prompt"]:m["prompt-override"],styles:v==null?void 0:v.textStyle})]}),y===Wt.Center&&T,R&&i.jsx(vo,{agreeToPolicyType:"barcode"}),i.jsx(ft,{children:i.jsx(p9,{allowedCaptureOptions:e,allowedFileTypes:t,handleDeviceHandoff:s,handleDrop:c,handleInputCapture:l,handleSelectCamera:A,isProcessing:h,localizations:m})})]})]})},d9=C.div.withConfig({displayName:"InquiryGovernmentIdPromptView__Container",componentId:"sc-nqsebi-0"})(["display:flex;flex-direction:column;"]),u9=C("div").withConfig({displayName:"InquiryGovernmentIdPromptView__Header",componentId:"sc-nqsebi-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[4]),m9=C.div.withConfig({displayName:"InquiryGovernmentIdPromptView__CaptureOptionsContainer",componentId:"sc-nqsebi-2"})(["width:100%;"]),Gc=C(ge).withConfig({displayName:"InquiryGovernmentIdPromptView__OptionButton",componentId:"sc-nqsebi-3"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],I.Spacing[4]),h9=C(qr).withConfig({displayName:"InquiryGovernmentIdPromptView__ImgCamera",componentId:"sc-nqsebi-4"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>{var t,n,r,o;return(o=k((r=(n=(t=e.styles)==null?void 0:t["text-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:e.theme.colorFontButtonPrimary});function p9({allowedCaptureOptions:e,allowedFileTypes:t,handleDeviceHandoff:n,handleDrop:r,handleInputCapture:o,handleSelectCamera:a,isProcessing:s,localizations:c}){return i.jsx(m9,{id:"government-id-prompt__view",children:e.map((l,d)=>i.jsx(f9,{isPrimary:d===0,option:l,handleDeviceHandoff:n,handleDrop:r,handleInputCapture:o,handleSelectCamera:a,isProcessing:s,localizations:c,allowedFileTypes:t},l))})}function f9({allowedFileTypes:e,handleDeviceHandoff:t,handleDrop:n,handleInputCapture:r,handleSelectCamera:o,isPrimary:a,isProcessing:s,localizations:c,option:l}){const{getRootProps:d,getInputProps:u}=wa({onDrop:n,multiple:!1,accept:e}),{buttons:h}=On(),m=a?ne.Primary:ne.Secondary,[p]=K(),g=s!=null;switch(l){case"web_camera":return i.jsx(Gc,{id:"government-id-prompt__button--web-camera",buttonType:m,disabled:g,styles:h==null?void 0:h[m],onClick:o,isPending:s===at.SelectCamera,"aria-label":c["btn-capture"]||p("government-id.prompt.btn-take-photo-label"),children:i.jsx(nh,{styles:h==null?void 0:h[m],children:c["btn-capture"]})});case"mobile_camera":return i.jsx(Fo,{buttonType:m,disabled:g,styles:h==null?void 0:h[m],id:"government-id-prompt__button--mobile-camera",handleSelectImage:r,isPending:s===at.UploadImage,"aria-label":c["btn-capture-mobile-camera"]||c["btn-capture"]||p("government-id.prompt.btn-take-photo-label"),children:i.jsx(nh,{styles:h==null?void 0:h[m],children:c["btn-capture-mobile-camera"]||c["btn-capture"]})});case"upload":return i.jsxs(Gc,{buttonType:m,disabled:g,styles:h==null?void 0:h[m],...d(),children:[i.jsx("input",{...u(),"data-test":"file-upload","data-cy":"file-upload"}),c["btn-upload"]]});case"device_handoff":return i.jsx(Gc,{id:"government-id-prompt__button--device-handoff","data-test":"government-id-prompt__button--device-handoff",buttonType:m,disabled:g,styles:h==null?void 0:h[m],onClick:t,isPending:s===at.DeviceHandoff,children:c["btn-device-handoff"]});default:ct(l)}}const nh=({children:e,styles:t})=>e?i.jsx("span",{children:e}):i.jsx(h9,{"data-test":"government-id-prompt__image--camera",styles:t}),vr=C(Kt).withConfig({displayName:"InquiryGovernmentIdPromptView__StyledCustomizablePictograph",componentId:"sc-nqsebi-5"})(["width:100%;"]),g9=({assets:e,currentSide:t,governmentIdClass:n})=>{const{base:r}=On();if(n==="pp"||n==="ipp")switch(t){case U.PassportSignature:return i.jsx(Ye,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(vr,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsx(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:i.jsx(ms,{height:64,width:"100%"})})})});default:return i.jsx(Ye,{customImage:e["passport-front-pictograph"],alt:"passport front pictograph",children:i.jsx(vr,{url:"passportFrontPictographUrl",height:"passportFrontPictographHeight","aria-label":"passport front",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsx(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:i.jsx(mp,{height:80,width:"100%"})})})})}switch(t){case U.Back:return i.jsx(Ye,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(vr,{url:"idBackPictographUrl",height:"idBackPictographHeight","aria-label":"id back",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsx(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:i.jsx(Rr,{height:64,width:"100%"})})})});case U.BarcodePdf417:return i.jsx(Ye,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(vr,{url:"idBackPictographUrl",height:"idBackPictographHeight","aria-label":"id back",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsx(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:i.jsx(BC,{height:64,width:"100%"})})})});case U.Front:return i.jsx(Ye,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(vr,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsx(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:i.jsx(ki,{height:64,width:"100%"})})})});case U.FrontOrBack:return i.jsx(Ye,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(vr,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsxs(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:[i.jsx(ki,{height:48,width:"100%"}),i.jsx(Rr,{height:48,width:"100%"})]})})});case U.PassportSignature:return i.jsx(Ye,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(vr,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",primaryColor:k(r==null?void 0:r.fill.color),highlightColor:k(r==null?void 0:r.fill.highlightColor),backgroundColor:k(r==null?void 0:r.fill.backgroundColor),strokeColor:k(r==null?void 0:r.stroke.color),children:i.jsx(In,{backgroundColor:k(r==null?void 0:r.fill.highlightColor),children:i.jsx(ms,{height:64,width:"100%"})})})});default:ct(t)}},b9=({selectedCountryCode:e,governmentIdClass:t,currentSide:n,override:r="",styles:o})=>{const[a]=K();return i.jsx(dt,{"data-id":Lr.GovernmentIdPromptPageTitle,"data-test":"government-id-prompt__title",styles:o,children:i.jsx(J,{children:r.length>0?r:Ii(a,["government-id.prompt.title","government-id.title"],e,t,n)})})},C9=({governmentIdClass:e,currentSide:t,override:n="",styles:r})=>{const[o]=K();return i.jsx(ot,{"data-id":Lr.GovernmentIdPromptPageDescription,"data-test":"government-id-prompt__prompt",styles:r,children:i.jsx(J,{children:n.length>0?n:Ii(o,["government-id.prompt.prompt"],null,e,t)})})},x9=e=>{const{config:t,featureFlags:n,governmentIdClass:r,autoclassificationCountryCode:o,didAutoclassificationIdSelection:a,idClassesByCountries:s,hasCamera:c,inquiry:l,styles:d}=e,[u,h]=f.useState(void 0),[m,p]=f.useState([]),[g,{enable:b,disable:x}]=st(),[y,{enable:v}]=st(!1),{t:_}=K(),A=Dt(),T=np(),R=parseInt(T.step,10),{governmentIdClass:O,selectedCountryCode:D,autoclassificationIdClassesConfig:L}=hc(t,R,a,r,o,s),H=f.useMemo(()=>fa(t,O,R,a,L),[t,O,R,a,L]),M=Xt("inquiry:disable-gov-id-face-api"),B=!Pn()&&c&&m.includes(wn.WebCamera),V=B&&Ca(window.location.host)&&xa(H,D,O,n),q=!M&&B&&!V,$=Re.shouldInitializeVideo(t==null?void 0:t["enabled-capture-file-types"],n),Q=ni()?"basic":"advanced";f.useEffect(()=>{l==null&&N.redirectToStart()},[]),f.useEffect(()=>{if(t!=null)if(c==null)e.checkCamera();else{const le=Uy(t,O,c);le.length===1?me(le[0]):p(le)}},[c,t]),f.useEffect(()=>{if(V&&!Fi.isLoaded()){const le=performance.now();Fi.preload(Q).then(()=>{z.logAmplitude("government-id.microblink.preload",{durationSeconds:(performance.now()-le)/1e3,side:H,idClass:O,microblinkModel:Q})}).catch(ee=>{ee instanceof ln?Z(ee,"warning",{...ee.originalError,state:"preload"},{jira:"PER-10182"}):ee instanceof Error?Z(ee,"warning",{state:"preload"},{jira:"PER-10182"}):Z(new Error(ee),"warning",{state:"preload"},{jira:"PER-10182"})})}},[V]),f.useEffect(()=>{q&&yt.loadModels()},[q]),f.useEffect(()=>{try{n!=null&&n["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("government-id.prompt-page.entered",{currentSide:H,selectedCountryCode:D,governmentIdClass:O})}catch{}},[]);const G=async(le=A.push)=>{e.clearMessages(),h(at.SelectCamera),e.saveCaptureMethod(ut.Auto);const ee=(t==null?void 0:t["govid-design-version"])===To.V1;try{const ce=Hg({currentSide:H,facingMode:Vs(),isMicroblink:V,isGovidRedesign:ee,enableVideoRecording:$,featureFlags:n});if(navigator.userAgent.includes("Android")){const pe=await Jk(null,Ib.BackFacingCamera);pe&&(ce.deviceId={exact:pe.deviceId})}const _e=!!$&&bo(t);try{e.setVideoConstraints(ce),e.setAudioConstraints(_e),await An.prepare({video:ce,audio:_e},n)}catch(pe){if(ee&&pe instanceof Error&&pe.name==="OverconstrainedError"){const Je={...ce,width:2160,height:1350};e.setVideoConstraints(Je),await An.prepare({video:Je,audio:$&&bo(t)},n)}else if(_e)e.setAudioConstraints(!1),z.logAmplitude("gov-id.prompt-page.error-audio-perm",{error:pe instanceof Error?{name:pe.name,message:pe.message}:JSON.stringify(pe)}),await An.prepare({video:ce,audio:!1},n);else throw h(void 0),pe}N.onEvent(Oe.DocumentCameraSelect),le(Vt(R,Ue.CaptureLeadInAnimation))}catch(ce){throw z.logAmplitude("government-id.camera.errored",{error:{name:ce.name,message:ce.message}}),N.onEvent(Oe.LoadCameraFailed,{error:ce.name,message:ce.message}),$&&Z(ce,"error"),h(void 0),ce}},Y=le=>{e.clearMessages(),h(at.UploadImage),z.logAmplitude("government-id.upload",{method:"drop",files:le.map(ee=>({name:ee==null?void 0:ee.name,type:ee==null?void 0:ee.type,size:ee==null?void 0:ee.size}))}),re(le)?(N.onEvent(Oe.DocumentUpload),Ce(le[0],ut.Upload)):h(void 0)},re=le=>{if(le.length!==1)return z.logAmplitude("government-id.upload.invalid",{detail:"wrong number of files"}),e.showMessage(_("government-id.prompt.failed-select-image")),!1;const ee=t==null?void 0:t["enabled-file-types"];return ee&&!ee.includes(le[0].type)?(z.logAmplitude("government-id.upload.invalid",{detail:"wrong file type"}),e.showMessage(_("government-id.prompt.failed-invalid-type")),!1):!0},ae=le=>{e.clearMessages(),h(at.UploadImage),z.logAmplitude("government-id.upload",{method:"input_capture",files:[{name:le==null?void 0:le.name,type:le==null?void 0:le.type,size:le==null?void 0:le.size}]}),Ce(le,rx()?ut.Upload:ut.Manual)},Ce=async(le,ee)=>{e.saveCaptureMethod(ee);try{const ce=await Ao(le);e.uploadFiles(H,[{filename:le.name,fileType:le.type,dataUrl:ce,captureMethod:ee,captureFlow:_o.Unguided}]),A.push(Vt(R,Ue.CheckUpload))}catch(ce){switch(z.logAmplitude("government-id.upload.errored",{file:{type:le==null?void 0:le.type}}),ce.name){case"NotReadableError":e.showMessage(_("government-id.prompt.failed-select-image-permissions"));break;case"SecurityError":e.showMessage(_("government-id.prompt.failed-select-image"));break;case"NotFoundError":case"ReferenceError":default:Z(ce,"warning",{filename:le==null?void 0:le.name,fileType:le==null?void 0:le.type,captureMethod:ee,currentSide:H}),e.showMessage(_("government-id.prompt.failed-select-image"))}h(void 0)}},we=le=>{u==null&&(e.clearMessages(),h(at.DeviceHandoff),le("/inquiry/device-handoff/prompt"))},me=async le=>{const{featureFlags:ee}=e;switch(le){case"web_camera":if(ee["verify:skip-gov-id-prompt-web-camera-only-by-org"])try{v(),await G(A.replace)}catch(ce){Z(ce,"error",{state:"prompt"},{jira:"PER-10182"}),p([le]),A.replace("/inquiry/support/camera")}else p([le]);break;case"device_handoff":we(A.replace);break;case"mobile_camera":case"upload":p([le]);break;default:ct(le)}};if(l==null||l.attributes["next-step"].type!==Ae.GovernmentId||c==null||H==null)return null;const Ie=er(t,"prompt-page",{idClass:O,side:H});return i.jsx(Yi,{value:d,children:i.jsx(l9,{assets:t.assets["prompt-page"],localizations:Ie,selectedCountryCode:D,currentSide:H,handleDrop:Y,handleSelectCamera:()=>G(A.push),handleInputCapture:ae,handleDeviceHandoff:()=>we(A.push),isProcessing:u,governmentIdClass:O,allowedCaptureOptions:m,allowedFileTypes:t["enabled-file-types"],showCameraPermissionsDialog:g,openCameraPermissionsDialog:b,hideCameraPermissionsDialog:x,skipPromptPage:y,enableVideoRecording:$})})};function v9(e){return{config:hi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,idClassesByCountries:e.verification.idClassesByCountries,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,hasCamera:e.ui.hasCamera,styles:Qi(e.inquiry)}}const y9={clearMessages:Lt,saveCaptureMethod:hr,setVideoConstraints:Ro,setAudioConstraints:ff,showMessage:se,uploadFiles:Ks,checkCamera:$r},I9=ke(v9,y9),S9=I9(x9),w9=C("span").withConfig({displayName:"OptionVertical__ThemedIcon",componentId:"sc-1gomrr7-0"})(["rect[fill]:not([fill='none']){fill:",";}path[fill]:not([fill='none']){fill:",";}height:32px;margin-right:",";"],({theme:e})=>e.iconColorGovernmentIdType,({theme:e})=>e.colorModalBackground,I.Spacing[4]),_9=C(ge).withConfig({displayName:"OptionVertical__OptionVerticalButton",componentId:"sc-1gomrr7-1"})(["width:100%;& + &{margin-top:",";}"],I.Spacing[5]);function R9({buttonType:e,countryCode:t,handleSelectType:n,governmentIdClass:r,localizations:o}){const{iconStyle:a}=f.useContext(tt),{buttons:s}=On(),c={id:`select__option--${r}`,"data-id":Lr.GovernmentIdSelectPageIds,"data-test":"option-block",onClick:()=>n(r)};return e==="button"?i.jsx(_9,{...c,styles:s==null?void 0:s[ne.Primary],type:"button",children:ih(o,t,r)}):i.jsx(Ld,{...c,buttonType:e,icon:a!==Gr.None&&i.jsx(w9,{"data-test":"option-vertical__pictograph","aria-hidden":!0,children:i.jsx(A9,{governmentIdClass:r})}),children:ih(o,t,r)})}const A9=({governmentIdClass:e})=>{switch(e){case"dl":return i.jsx(gp,{});case"ofw":case"pp":case"ppc":case"visa":return i.jsx(fp,{});case"id":return i.jsx(pp,{});case"rp":case"pr":default:return i.jsx(hp,{})}};function ih(e,t=void 0,n){const r=e[n];if(t==null)return r;{const o=e[`${t.toLowerCase()}-${n}`];return o!=null?o:r}}const T9=C("span").withConfig({displayName:"OptionVerticalRedesign__ThemedIcon",componentId:"sc-6t3cbp-0"})(["rect[fill]:not([fill='none']){fill:",";}path[fill]:not([fill='none']){stroke:",";}height:32px;"],({theme:e})=>e.colorPrimary,({theme:e})=>e.iconColorBackground),E9=C("span").withConfig({displayName:"OptionVerticalRedesign__SSTThemedIcon",componentId:"sc-6t3cbp-1"})(["rect[fill]:not([fill='none']){fill:",";}path[stroke]:not([stroke='none']){stroke:",";}height:32px;"],({styles:e})=>k(e.fill.color),({styles:e})=>k(e.stroke.color)),k9=({styles:e,children:t,"data-test":n})=>i.jsx(i.Fragment,{children:e!=null?i.jsx(E9,{"data-test":n,styles:e,"aria-hidden":!0,children:t}):i.jsx(T9,{"data-test":n,"aria-hidden":!0,children:t})}),N9=C(ge).withConfig({displayName:"OptionVerticalRedesign__OptionVerticalButton",componentId:"sc-6t3cbp-2"})(["width:100%;& + &{margin-top:",";}"],I.Spacing[5]),j9=C("span").withConfig({displayName:"OptionVerticalRedesign__IconContainer",componentId:"sc-6t3cbp-3"})(["line-height:0;margin-right:10px;"]);function P9({assets:e,buttonType:t,countryCode:n,handleSelectType:r,governmentIdClass:o,icon:a,localizations:s,styles:c}){const{iconStyle:l}=f.useContext(tt),{buttons:d}=On(),u={id:`select__option--${o}`,"data-id":Lr.GovernmentIdSelectPageIds,"data-test":"option-block",onClick:()=>r(o)};return t==="button"?i.jsx(N9,{...u,styles:d==null?void 0:d[ne.Primary],type:"button",children:vl(s,n,o)}):i.jsx(Ld,{...u,buttonType:t,styles:c,icon:l!==Gr.None&&i.jsx(j9,{"data-test":"option-vertical__pictograph",children:i.jsx(D9,{governmentIdClass:o,assets:e,icon:a,styles:c==null?void 0:c.icon})}),children:vl(s,n,o)})}const D9=({assets:e,governmentIdClass:t,icon:n,styles:r})=>{const o=n==null?void 0:n["custom-icon"],a=O9(e,t),s=F9(n==null?void 0:n["icon-fallback"]),c=L9(t),l=o!=null?o:a,d=s!=null?s:c;return i.jsx(Ye,{customImage:l,alt:"government id icon",children:i.jsx(k9,{"data-test":"option-vertical-icon__fallback",styles:r,children:d})})};function O9(e,t){var n;switch(t){case"dl":case"id":return e["icon-drivers-license"];case"ofw":case"pp":case"ppc":case"visa":return e["icon-passport"];case"rp":case"pr":return(n=e["icon-permanent-residence-id"])!=null?n:e["icon-government-id"];default:return e["icon-government-id"]}}function L9(e){switch(e){case"dl":case"id":return i.jsx(Ul,{});case"ofw":case"pp":case"ppc":case"visa":return i.jsx($l,{});case"rp":case"pr":default:return i.jsx(Hl,{})}}function F9(e){switch(e){case Ko.Flag:return i.jsx(op,{});case Ko.World:return i.jsx($l,{});case Ko.House:return i.jsx(Hl,{});case Ko.Card:return i.jsx(Ul,{});default:return null}}const M9=C("div").withConfig({displayName:"GovernmentIdOptions__ChooseOptionNotice",componentId:"sc-1jec9sb-0"})(["",";"],({styles:e})=>e!=null?W(["color:",";font-weight:",";text-align:",";"],k(e["text-color"].base.base),dn(e["font-weight"].base.base),e.justify.base.base):W(["color:",";font-weight:",";"],({theme:t})=>t.colorFontTitle,pn.medium));function V9({assets:e,idClasses:t,idClassListStyle:n,localizations:r,selectedCountryCode:o,handleSelectType:a,enableRedesign:s,styles:c,optionStyles:l}){return i.jsxs(i.Fragment,{children:[n!=="button"&&!!r["option-notice"]&&i.jsxs(i.Fragment,{children:[i.jsx(M9,{styles:c,children:r["option-notice"]}),i.jsx(We,{height:1})]}),t.map(d=>s?i.jsx(P9,{assets:e,buttonType:n,countryCode:o,handleSelectType:a,governmentIdClass:d.class,icon:d.icon,localizations:r,styles:l},d.class):i.jsx(R9,{buttonType:n,countryCode:o,handleSelectType:a,governmentIdClass:d.class,localizations:r},d.class)),i.jsx(We,{height:4})]})}const rh=C.div.withConfig({displayName:"InquiryGovernmentIdSelectView__Container",componentId:"sc-g8v5bg-0"})(["display:flex;flex-direction:column;"]),oh=C.div.withConfig({displayName:"InquiryGovernmentIdSelectView__Header",componentId:"sc-g8v5bg-1"})(["margin-bottom:","px;",""],F.base*4,({idClassListStyle:e,reduceMinHeight:t})=>{switch(e){case"outline":return W(["min-height:",";"],t?"max-content":Me.header);case"outline_light":return}});function B9({assets:e,disclaimer:t,handleSelectType:n,idClasses:r,idClassListStyle:o,localizations:a,selectedCountryCode:s,enableRedesign:c}){var p,g,b,x;const{governmentIdPictographPosition:l,governmentIdSelectPictographUrl:d}=f.useContext(tt),{base:u,selectOption:h}=On(),m=d?i.jsx($e,{"aria-label":"government id prompt",children:i.jsx(Kt,{url:"governmentIdSelectPictographUrl",height:"governmentIdSelectPictographHeight","aria-label":"government id prompt picture"})}):null;if(r.length>0){const y=a.prompt!=="";return i.jsxs(rh,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),l===Wt.Start&&m,i.jsxs(oh,{idClassListStyle:o,reduceMinHeight:!y,children:[i.jsx(dt,{"data-id":Lr.GovernmentIdSelectPageTitle,styles:u==null?void 0:u.titleStyle,children:i.jsx(J,{children:a.title})}),y&&i.jsx(ot,{"data-id":Lr.GovernmentIdSelectPagePrompt,styles:u==null?void 0:u.textStyle,children:i.jsx(J,{children:a.prompt})})]}),l===Wt.Center&&m,i.jsx(V9,{assets:e,styles:u==null?void 0:u.textStyle,optionStyles:h,idClasses:r,idClassListStyle:o,localizations:a,selectedCountryCode:s,handleSelectType:n,enableRedesign:c}),t!==Fp.None&&i.jsx(vo,{styles:u==null?void 0:u.disclaimerStyle})]})}else{const y=a.prompt!=="";return i.jsxs(rh,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(oh,{idClassListStyle:o,reduceMinHeight:!y,children:[i.jsx(dt,{styles:u==null?void 0:u.titleStyle,children:i.jsx(J,{children:a["unsupported-title"]})}),y&&i.jsx(ot,{styles:u==null?void 0:u.textStyle,children:i.jsx(J,{children:a["unsupported-prompt"]})})]}),i.jsx($e,{"aria-label":"pictograph indicating no available ID types",children:i.jsx(ye,{$primaryColor:k((p=u==null?void 0:u.fill)==null?void 0:p.color),$highlightColor:k((g=u==null?void 0:u.fill)==null?void 0:g.highlightColor),$backgroundColor:k((b=u==null?void 0:u.fill)==null?void 0:b.backgroundColor),$strokeColor:k((x=u==null?void 0:u.stroke)==null?void 0:x.color),children:i.jsx(kn,{})})})]})}}function q9(e){var d;const{inquiry:t,config:n,styles:r,featureFlags:o}=e,a=(d=n==null?void 0:n["auto-classification-config"])==null?void 0:d["is-enabled"];if(f.useEffect(()=>{var u,h,m,p;if(t==null){N.redirectToStart();return}if(a){e.resetAutoclassificationState();let g=Ue.Prompt;((u=n==null?void 0:n["auto-classification-config"])==null?void 0:u["start-path"])===Mp.CountryAndIdSelect&&(g=Ue.AutoclassificationSelect,(h=n==null?void 0:n["auto-classification-config"]["id-classes-by-countries"])==null||h.forEach(b=>{var x;b["country-code"]=(x=b["country-code"])==null?void 0:x.toUpperCase()}),e.saveAutoclassificationIdClassesByCountries(n==null?void 0:n["auto-classification-config"]["id-classes-by-countries"])),e.history.replace(Vt(0,g))}else n!=null&&!n["enabled-skip-unknown"]&&n.idclasses.length===1&&c((p=(m=n.idclasses)==null?void 0:m[0])==null?void 0:p.class,!0)},[]),f.useEffect(()=>{try{o!=null&&o["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("government-id.select-page.entered",{})}catch{}},[]),t==null||t.attributes["next-step"].type!==Ae.GovernmentId)return null;const s=er(n,"select-page");function c(u,h=!1){e.selectGovernmentIdClass(u),h?e.history.replace(Vt(0,Ue.Prompt)):e.history.push(Vt(0,Ue.Prompt))}if(t==null||t.attributes["next-step"].type!==Ae.GovernmentId)return null;const l=(n==null?void 0:n["govid-design-version"])===To.V1;return i.jsx(Yi,{value:r,children:i.jsx(B9,{assets:n.assets["select-page"],disclaimer:n.disclaimer,idClasses:n.idclasses,idClassListStyle:n["idclass-list-style"],localizations:s,selectedCountryCode:n["selected-country-code"],handleSelectType:c,enableRedesign:l})})}function U9(e){return{inquiry:e.inquiry.inquiry,config:hi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,theme:e.inquiry.theme,styles:Qi(e.inquiry)}}const H9={saveAutoclassificationIdClassesByCountries:ay,selectGovernmentIdClass:ud,resetAutoclassificationState:hd},$9=ke(U9,H9),G9=$9(q9),W9=C("div").withConfig({displayName:"InquiryInactiveView__Header",componentId:"sc-acmeo6-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function z9(){return i.jsxs("div",{children:[i.jsxs(W9,{children:[i.jsx(dt,{children:"This template is inactive"}),i.jsx(ot,{children:"If you are a user, please contact the organization that sent you here."}),i.jsx(We,{height:1}),i.jsx(ot,{children:"If you are a developer, please check the dashboard and make sure the template is active."})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})})]})}function Y9(){return i.jsx(z9,{})}const K9=({config:e,handleContinue:t,previewMode:n=!1})=>{const r=f.useMemo(()=>{const c=e.type;switch(c){case"mx_bank":return{type:c,component:f.lazy(()=>Ze(()=>import("./index-s1qy8HYY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),integrationConfig:e};case"kica":return{type:c,component:f.lazy(()=>Ze(()=>import("./index-CXfDlW41.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),integrationConfig:e};case"aadhaar":return{type:c,component:f.lazy(()=>Ze(()=>import("./index-Dd1Uj_i2.js"),__vite__mapDeps([17,1,2,3,4,18,5,6,7,8,9,10,11,12,13,14,15]))),integrationConfig:e};case"finnish_trust_network":return{type:c,component:f.lazy(()=>Ze(()=>import("./index-zOWLkdpI.js"),__vite__mapDeps([19,1,2,3,4,20,18,5,6,7,8,9,10,11,12,13,14,15]))),integrationConfig:e};case"one_id":return{type:c,component:f.lazy(()=>Ze(()=>import("./index-C_uQq4aA.js"),__vite__mapDeps([21,1,2,3,4,20,18,5,6,7,8,9,10,11,12,13,14,15]))),integrationConfig:e};case"mit_id":return{type:c,component:f.lazy(()=>Ze(()=>import("./index-BVTFAfH8.js"),__vite__mapDeps([22,1,2,3,4,20,18,5,6,7,8,9,10,11,12,13,14,15]))),integrationConfig:e};default:return{type:c,component:null,integrationConfig:e}}},[e]);if(n)switch(r.type){case"mx_bank":return i.jsxs(i.Fragment,{children:[i.jsx("h1",{children:"MX Bank Integration"}),i.jsx("p",{children:"This is a placeholder for the MX Bank step. The real widget cannot load in FLE previews."})]});case"kica":case"aadhaar":case"finnish_trust_network":case"mit_id":case"one_id":{const c=r.component;return i.jsx(c,{flowUrl:"",onComplete:()=>{}})}default:return null}const{type:o,component:a,integrationConfig:s}=r;switch(o){case"mx_bank":return i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsx(a,{widgetUrl:s["widget-url"],memberConnected:c=>t({"mx-bank-member-guid":c}),microdepositCreated:c=>t({"mx-bank-microdeposit-guid":c}),microdepositVerificationSubmitted:t})});case"kica":return i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"aadhaar":return i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"finnish_trust_network":return i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"one_id":return i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"mit_id":return i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});default:return i.jsxs("p",{children:["Integration type ",o," not found."]})}},Q9=({inquiry:e,config:t,debugForcedStatus:n,clearMessages:r,showMessage:o,transitionInquiryFromIntegrationStep:a})=>{const{t:s}=K();f.useEffect(()=>{if(e==null||(t==null?void 0:t.type)==null){N.redirectToStart();return}},[]);const{error:c,loading:l,callback:d}=It(async u=>{r(),await a(e,u||{},e.attributes["next-step"].name,{"debug-forced-status":n})},[]);return Et({error:c,onError:()=>o(s("errors.network")),onNetworkError:()=>o(s("errors.network"))}),e==null||(t==null?void 0:t.type)==null?null:l?i.jsx(vn,{}):i.jsx(K9,{config:t,handleContinue:d})};function Z9(e){return{inquiry:e.inquiry.inquiry,config:hi({state:e,stepType:Ae.Integration}),debugForcedStatus:e.test.forcedStatus}}const J9={clearMessages:Lt,showMessage:se,transitionInquiryFromIntegrationStep:yy},X9=ke(Z9,J9),e2=X9(Q9),Sb=f.createContext(Df()),ii=()=>f.useContext(Sb),ru=({children:e,value:t})=>{const n=f.useMemo(()=>Df(t),[t]);return i.jsx(Sb.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n.buttons,children:e})})},t2=C.div.withConfig({displayName:"InquirySelfieCheckView__Container",componentId:"sc-hptydu-0"})(["display:flex;flex-direction:column;"]),n2=C("div").withConfig({displayName:"InquirySelfieCheckView__Header",componentId:"sc-hptydu-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),i2=C.div.withConfig({displayName:"InquirySelfieCheckView__SelfieLayoutContainer",componentId:"sc-hptydu-2"})(["display:grid;gap:","px;grid-template-columns:repeat(auto-fit,minmax(40%,1fr));"],F.base*2),r2=C.div.withConfig({displayName:"InquirySelfieCheckView__SelfieContainer",componentId:"sc-hptydu-3"})(["aspect-ratio:1/1;img{aspect-ratio:1/1;object-fit:cover;height:100%;display:block;margin:auto;max-width:100%;transform:scaleX(-1);}"]);function o2(e){const{capturedSelfies:t,localizations:n,submitSelfies:r,retakeSelfies:o}=e,{base:a,buttons:s,selfiePreviewImage:c}=ii(),[l,d]=f.useState(!1),u=m=>{switch(m){case"center":return n["selfie-label-front"];case"left":return n["selfie-label-left"];case"right":return n["selfie-label-right"]}},h=async()=>{d(!0),await r(),d(!1)};return i.jsxs(t2,{children:[i.jsxs(n2,{children:[i.jsx(dt,{styles:a==null?void 0:a.titleStyle,children:i.jsx(J,{children:n.title})}),i.jsx(ot,{styles:a==null?void 0:a.textStyle,children:i.jsx(J,{children:n.description})})]}),i.jsx(i2,{children:t.map(m=>{var p,g,b;return Object.values(he).includes(m.pose)?i.jsxs(r2,{children:[u(m.pose),i.jsx(Wd,{src:m.dataUrl,alt:`${m.pose} upload preview`,style:{borderRadius:(p=c.borderRadius)!=null&&p.value?`${(g=c.borderRadius)==null?void 0:g.value}${(b=c.borderRadius)==null?void 0:b.unit}`:"8px"}})]},m.pose):null})}),i.jsx(We,{height:2}),i.jsxs(ft,{children:[i.jsx(ge,{id:"selfie-check__button--submit","data-test":"selfie-check__button--submit",buttonType:ne.Primary,onClick:h,disabled:l,isPending:l,styles:s==null?void 0:s[ne.Primary],children:n["btn-submit"]}),i.jsx(ge,{id:"selfie-check__button--retake","data-test":"selfie-check__button--finretakeish",buttonType:ne.Secondary,onClick:o,disabled:l,styles:s==null?void 0:s[ne.Secondary],children:n["btn-retake"]})]})]})}function a2(e){var g;const{inquiry:t,config:n,capturedSelfies:r,featureFlags:o,styles:a,cameraInspectionData:s,captureStartedAt:c}=e,[l]=K(),d=f.useRef(null);if(t==null||n==null)return null;const u=()=>{e.history.replace(`/inquiry/selfie/${he.Center}/prompt`)},h=async()=>{var b;e.clearMessages();try{await e.selfieSubmit({inquiry:t,config:n,capturedSelfiesSubmitData:{cameraInspectionData:s,capturedVideoData:(b=d==null?void 0:d.current)!=null?b:void 0,captureStartedAt:c,capturedSelfies:r},debugForcedStatus:e.debugForcedStatus,history:e.history,t:l,featureFlags:o})}catch(x){x instanceof mn||e.showMessage(l("errors.network"),!0),e.clearCapturedSelfies(),e.clearCaptureStartedAt(),e.history.replace(`/inquiry/selfie/${he.Center}/prompt`)}},m=(g=n==null?void 0:n["pose-configs"])==null?void 0:g.flatMap(b=>b["allow-review"]?b.pose:[]),p=r.flatMap(b=>Object.values(he).includes(b.pose)&&(m!=null&&m.includes(b.pose))?b:[]);return i.jsx(ru,{value:a,children:i.jsx(o2,{capturedSelfies:p,localizations:n.localizations["check-page"],submitSelfies:h,retakeSelfies:u})})}const s2=e=>({capturedSelfies:e.verification.capturedSelfies,cameraInspectionData:e.verification.cameraInspectionData,captureStartedAt:e.verification.captureStartedAt,config:hi({state:e,stepType:Ae.Selfie}),styles:Xs(e.inquiry),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,uploadProgress:e.verification.uploadProgress}),c2={clearCapturedSelfies:Ys,clearCaptureStartedAt:ny,clearMessages:Lt,routeToNextStep:Tt,selfieSubmit:Gd,saveCapturedSelfie:Ea,showMessage:se},l2=ke(s2,c2),d2=l2(a2);function cs(e){return(e.attributes["next-step"].config||{})["selfie-type"]||Cn.ProfileAndCenter}const u2=1e3,m2=3;async function h2(){try{await te.updateResourceSingleton({attributes:{"camera-dimension-swap-timings":await p2()},type:w.CurrentInquirySession})}catch(e){console.error("Error tracking expanded constraint timing",e)}}async function p2(){var a,s;const e=await navigator.mediaDevices.getUserMedia({video:!0}),t=document.createElement("video");t.srcObject=e,t.play();const n=e==null?void 0:e.getVideoTracks()[0],r=[[640,480],[1920,1080],[1280,720],[640,480],[800,600],[1024,768],[640,480]],o=[];for(const c of r){const l=[(a=n.getSettings().width)!=null?a:0,(s=n.getSettings().height)!=null?s:0];if(l===c)continue;const[d,u]=c,h=performance.now();try{await n.applyConstraints({width:{exact:d},height:{exact:u}})}catch{continue}const m=await f2(n,t,d,u,h);if(o.push({oldResolution:l,newResolution:c,durationMs:m}),o.length>=m2)break}return e.getTracks().forEach(c=>c.stop()),o}async function f2(e,t,n,r,o){let a=!1,s=!1;for(;performance.now()-o<u2;){const c=e.getSettings();if(a||c.width!=null&&c.height!=null&&Math.abs(c.width-n)<10&&Math.abs(c.height-r)<10&&(a=!0),s||Math.abs(t.videoWidth-n)<10&&Math.abs(t.videoHeight-r)<10&&(s=!0),a&&s)return performance.now()-o;await g2(10)}return-1}function g2(e){return new Promise(t=>setTimeout(t,e))}const b2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"center",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M143.1 187.4c-.2.1-.3.3-.5.4 1.4-5.6 1.1-14.1.9-14.4l11.2-7.6s7.8-1 12.6-2.3c4.8-1.3 10.1-3.1 10.1-3.1v-34.2c1.5-7.6-.7-26.7-.7-28.7.1-9.4-4.8-27.9-8.7-34.8-.8-18.1-10.3-29.8-28.6-35.2C127.6-.9 79.8 8.9 60.8 38.7c-4.3 5-9.9 16.5-11 30.4-2.5 31.5-2.3 76-1.1 92.5 0 0 12.2 4.4 25 4.4 1.7 0 10.6 7.6 10.6 7.6 0-.1-.9 5.1-1.1 9.9-13.7.1-46.4 9.3-46.4 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4.1-.1-26.8-11.5-40.5-13.1z",fill:n}),i.jsx("path",{d:"M183.7 103c-3.7-5.4-10-2.3-12.5-.3L167.4 78c-1.1-7.1-4.5-13.7-9.8-18.8-5.2-5.1-12.1-8.5-19.4-9.6l-.6-.1-6.8 7.2c-5 5.3-11.6 8.9-18.8 10.4-7.3 1.5-14.8.7-21.6-2.2l-1.7-.7c-3-1.3-6.2-1.9-9.4-1.7-3.2.1-6.4.9-9.2 2.4s-5.3 3.5-7.2 6.1c-1.9 2.5-3.1 5.4-3.7 8.5l-4 22.9c-2.1-1.7-7.1-4.9-11.7-1.4-4 3.9-2.9 7.7-2.9 10.3s3.1 8 4.7 10.1c1.5 1.9 6.2 6.3 9 7.6.8 7.3 3.2 14.3 6.8 20.7 4.9 8.6 12.1 15.8 20.8 20.9l1.5.9v15.3l1.1 1.2c9.5 8.1 18.8 11.3 29.7 11 10.9-.2 21.4-2.7 29.3-12.3v-15.1l.1-.1 1.5-.9c8.7-5.1 15.9-12.3 20.8-20.9 4-7 6.4-14.7 7-22.6 1.7-1.2 6.7-5 8.1-6.5 1.5-1.9 3.5-5.6 4-8.1 1.1-6.1.3-7.6-1.3-9.5z",fill:r}),i.jsx("path",{d:"M83.4 173.1v14.6l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-15.3m-60.7 11c-13.3 0-26.5 1.9-39.2 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-24-70.4c.2 9.8-2.3 19.5-7.2 28-4.9 8.6-12.1 15.8-20.8 20.9l-8 4.7c-7.1 4.2-15.3 6.4-23.6 6.4s-16.5-2.2-23.6-6.4l-8-4.7c-8.7-5.1-15.9-12.3-20.8-20.9-4.9-8.6-7.2-18.3-7-28m119 0l-1.1-17.9m-117.9 0v17.9m117.8-18.4l-4.4-25.4c-1.1-7.1-4.5-13.7-9.8-18.8-5.2-5.1-12.1-8.5-19.4-9.6l-.6-.1-6.8 7.2c-5 5.3-11.6 8.9-18.8 10.4-7.3 1.5-14.8.7-21.6-2.2l-1.7-.7c-3-1.3-6.2-1.9-9.4-1.7-3.2.1-6.4.9-9.2 2.4-2.8 1.5-5.3 3.5-7.2 6.1-1.9 2.5-3.1 5.4-3.7 8.5l-5.2 24.4m-5-5.4c-3.1-32.9 2.5-47.8 14.9-65C82.4 8.6 127-.7 138.7 27.8c19.2 6.4 29.2 18.6 30.1 36.7 6.3 11 8.8 27.4 8.6 34.9m-38.7-71.6c1.5 5 2.2 9.4 2.2 13l-2.2-13zM98.6 146.6c9.4 2.8 19.5 2.8 29 0M112.8 108v23.3m60.1-2.8c5.2-2.5 8.5-6.4 11.1-11.5 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-5.5 2.7-5 5.4m-117.9 0c.5-2.7-2.8-5.1-5-5.4-3.9-.5-7.7 2.6-8.8 6.3-1.2 3.7-.2 7.8 1.6 11.3 2.6 5.1 5.9 9 11.1 11.5m-4-2.3c-.4 12.4 0 25.1-.2 36.1 8 3 15.1 3.3 24.4 3.7m105-40.9c-.3 11.5-.3 23.8-.6 35.3-8 3.1-15 4.2-24.5 5.6",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"center_svg__a",gradientUnits:"userSpaceOnUse",x1:"113.65",y1:"4512.4",x2:"113.65",y2:"4530.077",gradientTransform:"translate(0 -4400.8)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.3 118.3s-55-6.7-113.6-6.7S0 119 0 119s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#center_svg__a)"}),i.jsxs("linearGradient",{id:"center_svg__b",gradientUnits:"userSpaceOnUse",x1:"2699.752",y1:"-1652.34",x2:"2699.752",y2:"-1646.687",gradientTransform:"rotate(90 525.181 -2060.92)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M114.5 227.3s2.1-55 2.1-113.6S114.2 0 114.2 0s-3.3 28.3-3.3 113.9c0 78.6 3.6 113.4 3.6 113.4",fill:"url(#center_svg__b)"})]})},C2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"left",children:[i.jsx("path",{fill:"none",d:"M-2.2-2.7h233.3v233.3H-2.2z"}),i.jsx("path",{d:"M144.5 166.6c2.8.3 38.1-4.2 39-6.9 3.6-10.5 8-74.1-7.7-92.5-1.2-12.9-9-33.9-27.3-38.1-2.2-4.8-3.5-5.2-7.4-9.8-3.4-4-8.1-6.6-12.9-8.5C108.5 2.9 80.5 8.3 65 23.1c-6.5 6.3-11 15-10.8 24.1.2 6.3-2.4 8.4-4.2 14.1-1 3.2-2.6 10.8-2.6 17.2.1 7.4 3.5 18.6 4.3 18.1.2-.1 2.6 25.8 1.4 41.9L52 164l17.4 1.7s3.2 5.1 13.5 11.1l.3 6.9c-14.1.5-45.6 9.3-45.6 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0 0-26.9-11.4-40.6-13 1.2-9.5.9-15.7.7-21.1z",fill:n}),i.jsx("path",{d:"M156.8 71.8c-2.2-5.4-11.9-19.4-16.3-14.6-6.2 6.8-24.6 12.6-28.7 13-19.6 1.8-41.2-16-52.8 0-7.1 9.8-5.6 26.9-5.5 31.8.1 5.7 0 11.4-.4 17-.7 11.9 1.2 26.8 8.6 36.7 4.9 6.5 14.8 16.7 22.8 22l-.5 3.7v4.5c16.7 15.4 42.3 15.8 59.5 1l1.1-1v-19.4c5.7-5.2 11.4-12.7 15.4-18.5 5.7-8.2 7-18 7.5-27.2.2-3.8 13.1-14 3.9-22.4-7.3-6.5-11.6 0-11.6 0 .8-1.8-2.2-24.7-3-26.6z",fill:r}),i.jsx("path",{d:"M159.8 98.4c.1-8 .9-14-1.9-23.4-3.3-11.5-8.3-15.8-15.5-19.5-.4-.2-.9-.4-1.4-.4-.6.1-1.1.6-1.5 1-8 8.5-21.3 13.5-32.9 13.1-8.4-.3-16.6-2.1-24.6-4.5-7.2-2.1-14.4-4.8-20.3 1.4-10.7 11.3-8.5 30.2-9 30.4-.8.4-4.2-10.7-4.2-18.2 0-6.4 1.5-14 2.6-17.2 1.8-5.7 4.3-7.9 4.2-14.1-.3-9.1 4.2-17.8 10.8-24.1 15.3-14.8 43.2-20.1 63-12.2 4.8 1.9 9.6 4.5 12.9 8.5 4.4 5.1 8.1 15.5 4.3 21.7M52.6 96.5s.8 11.7-.1 25.5c-.7 12 2.3 25.6 9.8 35.6 6.5 8.7 19.1 19.2 28.8 24 23.3 10.8 53.5-10.5 68.5-32.1 5.9-9.6 7.9-30 7.9-30m-7.3 5.2c5.2-2.5 9.6-6.8 12.2-11.9 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-4.1 1.7-5.5 3.4s-2.4 3.7-3.3 5.7m-11.9 62.3c9.7 1 36.5-4.2 39-6.9 3.9-4.3 5.6-53.1-.3-77.5-1.1-4.6-3.4-11.9-7.4-14.9 0-14.3-12.1-35.6-28.9-38.6M77.3 149.8c2.5 1.4 5.2 2.3 8.1 2.6 2.8.3 5.7 0 8.4-.8l5.9-1.8m-18-22.5c1.2-8.3 1.6-16.7 1.1-25m1.4 75.2l.1 10.5 1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3l-.4-21.4M84 183.8c-13.3 0-26.3 1.9-39 5.6l-14.2 4.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-144.9-61c-.4 10-.5 20.6-.9 30.6 0 .3 0 .6.1.8.2.3.6.5.9.5 5.7 1.5 11.3 2.2 17.2 1.9",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"left1_svg__a",gradientUnits:"userSpaceOnUse",x1:"4015.933",y1:"-2536.982",x2:"4015.933",y2:"-2506.921",gradientTransform:"rotate(90 738.4 -3163.533)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M110 227.6s1.8-55 1.8-113.6-2-113.7-2-113.7-28.1 28.4-28.1 114c.1 78.6 28.3 113.3 28.3 113.3",fill:"url(#left1_svg__a)"}),i.jsxs("linearGradient",{id:"left1_svg__b",gradientUnits:"userSpaceOnUse",x1:"114.5",y1:"-4293.173",x2:"114.5",y2:"-4310.85",gradientTransform:"matrix(1 0 0 -1 0 -4181.223)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M228.1 118.7s-55-6.7-113.6-6.7S.8 119.3.8 119.3s28.3 10.3 113.9 10.3c78.7 0 113.4-10.9 113.4-10.9",fill:"url(#left1_svg__b)"})]})},x2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"left",children:[i.jsx("path",{fill:"none",d:"M-2.2-2.7h233.3v233.3H-2.2z"}),i.jsx("path",{d:"M144 166.4c6.3.7 37.7-4.1 39.1-6.4 3.5-5.5 5.9-63.7-5.9-88.2 0 0 4.9-30.9-28.6-43C135.7 8.4 128 7.4 94.2 8.6 67 9.4 51 38.7 56.6 57c-.4 1.8-2.1 10.8-2.5 15.8-.6 5.6 2.3 14.4 2.3 14.4l-.9 77.5 9.9 1.4 17.5 15.7.4 1.9c-14.1.4-45.6 9.3-45.6 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0 0-25.6-10.9-39.6-12.9l-.9-21.4z",fill:n}),i.jsx("path",{d:"M144.8 175.9v12.4l-1.1 1c-17.2 14.8-42.8 14.4-59.5-1v-7c-2.6-1.4-10.1-6.7-12.4-8.6-6-4.8-16.1-19-18.9-26.1-2.8-7.1 1.4-39.3 3.4-51.2.6-3.9 1.2-7.8 1.7-11.7.4-3 1.8-12.5 2.4-15.4.8-4.4 6.6 2.9 17.3 5.2 15.7 3.3 27.9-4.1 36.9-5.7 3.2-.6 8.3 1.6 17.2 15.7.9 1.4 3.6 13.3 3.7 21.8 0 1.1 5.5-8.8 13.2-2 9.7 8.6-6.7 24.4-6.6 25.8.2 3.8-.4 15.4-1.4 19-1.6 5.6-.9 11.1-2.1 16.8-.8 3.8 6.3-.8 6.3 3.1l-.1 7.9z",fill:r}),i.jsx("path",{d:"M142.1 127.2c.5 12.3-4.1 38.6-3.5 38.9 3.4 2 29.7-1.5 44.6-6.2 2.8-11.1 3.8-24.6 3.2-48.2-.6-20.3-4-27.5-5.4-32.2-1.2-4-3.6-7.9-3.7-7.7 2.4-5.3-4.8-40.9-28.6-43m-6.6 138.1c-17.7 11.2-42.5 16.6-58 14.4-7.6-1.8-27.4-22.3-30.6-32.8-2.8-7.1-2.3-17.2-1.6-25.7l8.8-57.1M145 43.8c2.5-3.1 8.4-15.4-3-25.6-4.6-4.2-10.4-6.9-16.4-8.5-12.7-3.4-23.1-2.8-33.1-.9C59.3 15.2 43.1 54 63.2 67.5c13.5 9 32.9 6.1 52.4-.6 15 6.7 20.5 21.8 19.8 39.5m-66.5-4.2c.2 3.1-1.7 20.5-4 25m-2.6 19.3c2.7 1.4 3.8 2.2 6.8 2.7s7.9.8 10.7-.2m57.8-19c5.2-2.5 9.6-6.8 12.2-11.9 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-4.1 1.7-5.5 3.4s-2.4 3.7-3.3 5.7M56.2 59.2c-2.7 9.5-3.7 21.6.2 33.6M84 181.2l.1 6.8 1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-21.1m-60.9 16.9c-13.3 0-26.3 1.9-39 5.6l-14.2 4.1m114.3-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-142.4-41c0 3.6 0 11.9.1 12.1.1.3 7.2 1.8 9.9 1.4",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"left2_svg__a",gradientUnits:"userSpaceOnUse",x1:"4670.821",y1:"4319.57",x2:"4670.821",y2:"4271.634",gradientTransform:"matrix(0 1 1 0 -4207.72 -4556.822)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M108.9 227.6s2.9-55 2.9-113.6S108.7.3 108.7.3s-44.8 28.4-44.8 114c-.1 78.6 45 113.3 45 113.3",fill:"url(#left2_svg__a)"}),i.jsxs("linearGradient",{id:"left2_svg__b",gradientUnits:"userSpaceOnUse",x1:"114.6",y1:"6730.506",x2:"114.6",y2:"6748.182",gradientTransform:"translate(0 -6618.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M228.2 118.5s-55-6.7-113.6-6.7S.9 119.2.9 119.2s28.3 10.3 113.9 10.3c78.7 0 113.4-11 113.4-11",fill:"url(#left2_svg__b)"})]})},v2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"left",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M142.5 187.7c2.1-3.8.9-8.6 1-12.7 0-1.8 0-5.3 1.6-6.6 1.5-1.2 5.6-.8 7.5-1 8.8-1.1 22.6-1.6 29.7-7.7 4-3.5 3.8-29.9 2.1-52-1.1-14.6-2.8-27.3-4.2-30 0 0 12.8-36.1-28-48.4-6.4-19.1-25.6-25-58.8-21.1-23 .8-48.9 36.6-36.6 51.2 7.8 9.2.3 27.8.1 35.3-.2 10.1-10.9 29.4-10.7 30.1.1.4 6 3.8 6.3 4.4.4.8-3.8 16.7 6.8 33 9.4 14.4 23.9 13.6 23.3 18.2 0 .2-.3 2.7-.3 2.9-14.2.5-45.4 9.3-45.4 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0 0-26.9-11.4-40.6-13-.2.1-.4.3-.6.4z",fill:n}),i.jsx("path",{d:"M143.5 169c.9.4.4 18.9.4 18.9l-1.1 1c-17.2 14.8-42.8 14.4-59.5-1v-7c-2.6-1.4-10.1-6.7-12.4-8.6-6-4.8-17.3-13.1-18.9-26.1-.7-5.7-.8-12.2-.9-17.8-1.9-.7-5.7-3.4-5.8-3.7-.1-.4 5.4-11.1 7.7-16.2 1.3-3 5.1-34.4 7.1-41.6 6.1 2.6 12.3 4.9 18.8 6 6.5 1.1 25.2-4.2 28.3-4.3 3.8-.2 9.8 2.4 12.4 5.2s5.6 13.7 5.4 16.1c-1 11.9-2.2 10.2-4.8 14.2 2-1.7 6 0 7.8 1.8 2.5 2.4 3 7.5 2 10.8-1.1 3.6-5.6 10.2-7.7 13.3-2.3 3.4-3.4 16.7-4.1 21.3-.4 2.8-2.1 16.8-.4 18.8 2.3 2.5 25.6-1.2 25.7-1.1z",fill:r}),i.jsx("path",{d:"M121.6 129.7c.3-.3-6.2 39.3-4.1 40.2 2 .9 18.3.1 36.2-2.7 15.2-2.4 28.7-7.4 28.7-7.4 4.9-15.6 4.8-67.2-2.1-82 5.5-17.8-8.5-46.9-28-48.4m-17 140c-13.7 7.5-33.1 12.7-50.9 10.2-7.6-1.8-26.5-14.5-29.7-25-1.7-4.4-2.8-15.9-2.5-20.5.2-2.4.3-5.6.3-5.6-1.7-.4-5.4-2.3-7.1-3.9 3-6.9 7.5-15.1 10-22.2 1.5-4.1 2.7-19.6 3.2-23.8.5-4.5 1-8.9 1.4-13.4m87.8-18.8c6.1-7.8 7.7-20.3-3.7-30.5-4.6-4.2-12.7-8-18.5-8.7-12.6-1.6-24-.6-34 1.3-33.1 6.4-49.3 45.2-29.2 58.7 13.5 9 28.4 6.5 47.9-.2 15 6.7 19.5 23.1 11.5 36.2m-69.1 39.6c2.7 1.4 2.6 1.6 5.6 2.1s7.8.8 10.7-.2m47.8-12c5.2-2.5 9.6-6.8 12.2-11.9 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-4.1 1.7-5.5 3.4s-2.4 3.7-3.3 5.7m-29.7 68.6l.1 6.8 1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3l.1-19.2m-61 14.9c-13.3 0-26.3 1.9-39 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"left3_svg__a",gradientUnits:"userSpaceOnUse",x1:"4670.472",y1:"4318.721",x2:"4670.472",y2:"4252.791",gradientTransform:"matrix(0 1 1 0 -4207.72 -4556.822)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M107 227.3s4-55 4-113.6S106.7 0 106.7 0 45 28.4 45 114c0 78.5 62 113.3 62 113.3",fill:"url(#left3_svg__a)"}),i.jsxs("linearGradient",{id:"left3_svg__b",gradientUnits:"userSpaceOnUse",x1:"113.75",y1:"6730.156",x2:"113.75",y2:"6747.832",gradientTransform:"translate(0 -6618.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.4 118.2s-55-6.7-113.6-6.7S.1 118.9.1 118.9s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#left3_svg__b)"})]})},y2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"right",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M143.9 187.5c.6-7.6-1.7-18.7 9.1-21.7 0 .1-.1.1-.1.1l15-2.7v-18.6c.5-20.9 1.2-52.1 1.2-52.1s1.9-11.2.9-22.8c-.9-11-6.7-20.7-6.7-20.7-.4-9.3-2.2-16.3-10-24.9-7.6-8.3-17.8-11.4-28.8-13.5-12-2.3-22.9-.8-34.3 3.4-9.5 3.5-17.1 8-24 15.4-5.8 6.3-13 21-13 21v.2c-9 9.5-13.8 27.6-13.7 41.6.2 13.8-.3 64.2 3.1 70.9 2 3.9 35.2 4 36.5 3.8 5.1 2.1 5.3 6.6 3.8 16.7-14 .4-45.8 9.3-45.8 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0-.2-26.2-11.3-40-13.1z",fill:n}),i.jsx("path",{d:"M99.4 58.9c-9.2.1-18.5 2.5-25.4 8.5-7.7 6.6-11.9 17-11.4 27.1-5.3-.4-9.8 4.9-10 10.3-.3 11.3 8.5 17 8.9 17.9.5 1 3.9 20.3 8.8 31.3 2.4 5.3 7.3 15 12.5 17.1l.6 15.6 1.1 1c17.2 14.8 42.8 14.4 59.5-1v-14c4.5-3.5 8.8-7.5 16.7-17.2 4.6-5.6 7.8-20.2 7.6-27.5-.2-7.2-.2-15.2-.4-22.4-.4-14.9.7-32.1-8-45-3.6 3.3-11.6 9.9-22.6 10.4-15.6.7-31.2-12.1-37.9-12.1z",fill:r}),i.jsx("path",{d:"M121.7 149.4l5.9 1.8c2.7.8 5.6 1.1 8.4.8s5.6-1.2 8.1-2.6m-5.5-21.8c-1.2-8.3-1.6-16.7-1.1-25m-75.1-6.4c-2.1-15 9.5-27.6 17.4-32.4 7.3-4.4 18.6-6.6 26.8-3.6 5.3 1.9 9.8 5.6 15 7.6 9.3 3.7 20.5 3.4 29.8-.4 10.4-4.3 13.2-18.5 11.7-24.7-2.3-9.5-6.2-15.4-11.5-20.2-7.8-7.1-16.3-10-27-11.9-11.6-2.1-23.2-.5-34.3 3.4-9.2 3.2-17.6 8.3-24 15.4-10.3 11.3-14 23.5-13.9 35.5m116.3 33.8s-.6 9.5.3 23.3c.7 12-2.3 25.6-9.8 35.6-6.5 8.7-16.3 17.7-26.1 22.5-17.8 8.8-40.4-.7-56.9-14.8M55.6 46.4c-9.1 9.5-16.4 32.2-16.2 48.5-1 30.6 1.9 63.9 3.2 68.1 4.3 1.8 24.4 4.8 35 3.4-11.5-15.8-16-44.2-15.9-44m8.6-17.3c-1-2-1.9-4-3.3-5.7s-3.3-3.1-5.5-3.4c-3.9-.6-7.6 2.5-8.8 6.3-1.1 3.7-.2 7.9 1.6 11.3 2.6 5.2 7 9.4 12.2 11.9m93.6-66.3c6.2 9.2 9.1 29.5 8.6 39.5 5.2-14.2 1.3-38.1-5-51.9M83.4 171.6v16.2l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-14.9m-60.7 10.5c-13.3 0-26.5 1.9-39.2 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-27.8-63.8c-.2 11.2 0 33.4-.3 33.9s-11.8 2.8-16.5 2.6",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"right1_svg__a",gradientUnits:"userSpaceOnUse",x1:"113.65",y1:"6732.6",x2:"113.65",y2:"6750.276",gradientTransform:"translate(0 -6621)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.3 118.3s-55-6.7-113.6-6.7S0 119 0 119s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#right1_svg__a)"}),i.jsxs("linearGradient",{id:"right1_svg__b",gradientUnits:"userSpaceOnUse",x1:"4672.472",y1:"-188.98",x2:"4672.472",y2:"-219.041",gradientTransform:"rotate(90 2239.37 -2319.45)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M110.7 227.3S139 192.5 139 114c0-85.6-28.1-114-28.1-114s-2 55.1-2 113.7 1.8 113.6 1.8 113.6",fill:"url(#right1_svg__b)"})]})},I2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"right",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M183.7 200.3c-5.5-2.3-11-4.4-16.6-6.4-4.2-1.5-8.5-2.9-12.8-4.1-2-.6-4-1.1-6.1-1.5-2.1-.5-4.1-.5-4.1-3.3 0-3.4-1.1-6.3.5-9.4 1.7-3.2 4.5-5.7 7.3-7.8l2.1-1.5 14.7-4.6-1.4-12.1c.7-2.5 1.1-5.1 1.3-7.7 2-20.6-3.3-41.3-2.6-62 .2-5.1.7-10.4-.9-15.3-.2-.5-.4-1.1-.6-1.6 19.6-13.6 2.9-50.8-30.5-52.9C95.7 7.7 67 22 58.7 48.3c-31.2 20.2-20 96-13.1 114.4 10.3 5.3 28 5.2 37 4 .1.9.1 1.8.3 2.6.8 4.9 2.8 8.8-1.4 13-3.2 3.2-6.6 2.4-10.5 2.5-4.7.2-9.6 1.9-14.2 2.9-6.7 1.5-13.3 3.2-19.9 5 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4.1 0 0-.1 0-.1z",fill:n}),i.jsx("path",{d:"M165.9 64.1c-3.5 2.6-15.7 8.6-27 5.8-9.7-2.3-15.9-6.7-22.9-7.9-9.9-1.7-18.5.8-25.3 8.1-6.9 7.3-10.7 20.1-8.4 29.8-4.6-2.3-8.3.8-10.6 4-3.4 4.7 2.2 16.4 8.7 21.2 1.6 1.2 3.3 30.1 7.9 39.6-2.2.5-3.5 1.1-5.7 1.6 1.9 2.8.5 21.6.5 21.6s11 8.4 25.3 10.1c11.9 1.4 26.7-3.1 34.3-10.1l.2-10.3c-.4.2 14.1-13.1 19.5-22.3 6-10.1 8.6-22.2 7-33.9-.6-4-3.1-18.6-3.4-22-.1-2.6-1.5-26.2-.1-35.3z",fill:r}),i.jsx("path",{d:"M80.8 125.7c-.3 12.5 7.6 39 7.6 39-16.3 3.6-33.4 2.1-42.6-2.1-3.3-1.5-10.3-50.9-6-76.7C41.5 68 48.4 55.1 59 47.8c8.1-19 29.7-38.7 70.6-38.2 41.3 1.9 53.7 42.4 33.5 55.9-28.3 14.3-37.6-7-58.3-2.7-18.1 1.8-27.2 27.1-21.3 36.8m83.3-37s-.7 23.3-.3 31.9 3.7 27.1 3.8 30.7c.2 3.6-1.8 19.3-5.1 26.2-4 10.2-19.5 26.4-30.5 29.9-14.8 5.9-36.3-.2-53.2-14.1m76-40.9c-2.3-4.5-4.2-21.9-4-25m-10.9 47.8c2.9 1 7.7.8 10.7.2s4.1-1.3 6.8-2.7m-71.5-38.8c-.9-2-1.9-4-3.3-5.7S82 99 79.8 98.7c-3.9-.5-7.7 2.6-8.8 6.3-1.2 3.7-.2 7.8 1.6 11.3 2.6 5.1 7 9.4 12.2 11.9M58.9 47.8c-1.9 5.6-3.3 16-3.1 22.1m27.6 99.3v18.5l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-10.8m-60.7 6.5c-13.3 0-26.5 1.9-39.2 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-40.7-28.2c4.1 0 12.3-2.9 12.5-3.3.2-.2-1.2-14.5-.9-18.5",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"right2_svg__a",gradientUnits:"userSpaceOnUse",x1:"113.65",y1:"6730.3",x2:"113.65",y2:"6747.977",gradientTransform:"translate(0 -6618.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.3 118.3s-55-6.7-113.6-6.7S0 119 0 119s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#right2_svg__a)"}),i.jsxs("linearGradient",{id:"right2_svg__b",gradientUnits:"userSpaceOnUse",x1:"4670.472",y1:"-207.178",x2:"4670.472",y2:"-256.777",gradientTransform:"rotate(90 2229.272 -2327.55)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M111.9 227.3s46.7-34.8 46.7-113.3c0-85.6-46.4-114-46.4-114s-3.3 55.1-3.3 113.7 3 113.6 3 113.6",fill:"url(#right2_svg__b)"})]})},S2=()=>{var a,s,c,l,d,u,h;const{startIcon:e}=(a=ii())!=null?a:{},t=f.useContext(tt),n=(c=k((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(d=k((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?d:t.iconColorHighlight,o=(h=k((u=e==null?void 0:e["stroke-color"])==null?void 0:u.base.base))!=null?h:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"right",children:[i.jsx("path",{fill:"none",d:"M-2.2-2.7h233.3v233.3H-2.2z"}),i.jsx("path",{d:"M144.7 187.8c0-.1 0-.2.1-.3 1-4.8-1.4-10.8 2.1-14.3 1.1-1.1 9.9-7.1 12.1-10.1 6.4-8.8 10.4-19.3 11.5-30.1.1-1 .2-2 .5-2.9 1-2.8 4.1-4.3 6.9-5.4-.9-.5-10.8-27.2-11.7-38-.4-5.5-1.7-20.3-3.1-21.9.6-.4 1.3-.9 1.9-1.4 20.2-13.4 3.5-51.1-30.1-53.2-38.3-2.4-71 10.2-79.1 41.2-29.8 23.6-12.5 87-8.3 109.7 5.8 1.9 34.5 5.5 35.7 9.6.8 2.7.6 11.4.2 13-14.2.5-45.5 9.3-45.5 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4.1.1-26.1-11-40-12.9zm-41.5-45c.1.3.3.6.4.9l-.1.1c-.2-.3-.3-.6-.3-1z",fill:n}),i.jsx("path",{d:"M167.8 96.4c-1.7-4.4-2.5-25.1-3.7-30.4-12.6 6.5-24.4 7.1-36.7 4.1-6.5-1.6-13.6-2.6-19.9-.3-5.4 2-9.6 6.8-11.3 12.4-1.7 5.5-1.1 11.6 1 17 0 0-7.5 1.2-7.1 10.9.3 7.9 10.1 14.1 10.6 18.4 1.1 9.3 8.1 34.7 7.9 36.5-4.7 2.3-24.5 1.8-24.5 4.4 0 4.5.3 18.6.3 18.6s31.6 24.9 60.7 0l-.7-12.5c6.2-3.8 13.8-11 15.4-12.9 5.8-7.1 10-13.2 11.5-33l7.7-4.5c-.2.1-11.2-28.7-11.2-28.7z",fill:r}),i.jsx("path",{d:"M99.8 125.5c.8 9.7 7.4 36.1 9.4 39.9-12.8 3.6-26.4 2.3-39.6 1-9-.9-20.6-3.8-21-4.3s-10.7-40.3-9.1-69.2c-.1-18.4 5.8-34.2 16.4-41.5 8.3-26.2 33.6-42 74.5-41.5 41.3 1.9 53.7 42.4 33.5 55.9-28.3 14.3-40-2-55.9 4C97 74 91 89.5 96.9 99.2m53.6 47.3c2.9 1 7.7.8 10.7.2s4.1-1.3 6.8-2.7m-59.6-35.8c-.9-2-1.9-4-3.3-5.7s-3.3-3.1-5.5-3.4c-3.9-.5-7.7 2.6-8.8 6.3-1.2 3.7-.2 7.8 1.6 11.3 2.6 5.1 7 9.4 12.2 11.9M55.8 51.4c-1.9 5.6-2.7 23.9-.3 30.3m108.4-15.9c.8 6.3 1.6 12.7 2.4 19 .7 5.3.8 10.9 2.7 15.9 2.1 5.4 3.1 9.1 5.5 14.3.7 1.6 3.7 8.5 4.4 10.1-2.2 2.2-5.4 3-8.1 4.2 1.5 3.3-3.1 18.7-4.9 22.6-5 12.5-19.5 24.1-30.5 27.6-17.9 6.9-41 .8-56.8-12.1m5.6 5.8V188l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-10.8m-60.7 6.6c-13.3 0-26.5 1.9-39.2 5.6l-14.2 4.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"right3_svg__a",gradientUnits:"userSpaceOnUse",x1:"114.5",y1:"8936.65",x2:"114.5",y2:"8954.326",gradientTransform:"translate(0 -8824.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M228.1 118.7s-55-6.7-113.6-6.7S.8 119.3.8 119.3s28.3 10.3 113.9 10.3c78.7 0 113.4-10.9 113.4-10.9",fill:"url(#right3_svg__a)"}),i.jsxs("linearGradient",{id:"right3_svg__b",gradientUnits:"userSpaceOnUse",x1:"5980.821",y1:"-1104.028",x2:"5980.821",y2:"-1174.186",gradientTransform:"rotate(90 2436.272 -3430.55)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M113.9 227.6S180 192.8 180 114.3c0-85.6-65.6-114-65.6-114s-4.7 55.1-4.7 113.7 4.2 113.6 4.2 113.6",fill:"url(#right3_svg__b)"})]})},Xe=({children:e,frameDuration:t})=>f.Children.count(e)>1?i.jsx(_2,{frameDuration:t,children:e}):i.jsx(i.Fragment,{children:e});Xe.Center=b2;Xe.Left1=C2;Xe.Left2=x2;Xe.Left3=v2;Xe.Right1=y2;Xe.Right2=I2;Xe.Right3=S2;const w2=C.div.withConfig({displayName:"SelfiePictograph__SlidesContainer",componentId:"sc-1yjms2j-0"})(["position:relative;"]),_2=f.memo(function({children:t,frameDuration:n}){const r=f.useRef(f.Children.toArray(t).flatMap((s,c)=>{var l;return new Array((l=s.props.frames)!=null?l:1).fill(c)})),[o,a]=f.useState(0);return f.useEffect(()=>{const s=setTimeout(()=>a(c=>(c+1)%r.current.length),n);return()=>clearTimeout(s)}),i.jsx(w2,{children:f.Children.toArray(t)[r.current[o]]})},()=>!0),R2=C.div.withConfig({displayName:"InquirySelfiePromptView__Container",componentId:"sc-1duq5j2-0"})(["display:flex;flex-direction:column;"]),wb=C("div").withConfig({displayName:"InquirySelfiePromptView__Header",componentId:"sc-1duq5j2-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),jl=C(ge).withConfig({displayName:"InquirySelfiePromptView__OptionButton",componentId:"sc-1duq5j2-2"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],I.Spacing[4]),A2=C(qr).withConfig({displayName:"InquirySelfiePromptView__IconCameraStyled",componentId:"sc-1duq5j2-3"})(["path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),_b=C.div.withConfig({displayName:"InquirySelfiePromptView__CaptureOptionsContainer",componentId:"sc-1duq5j2-4"})(["width:100%;"]);function T2(e){const{enabledCaptureOptions:t,allowStillfieFallback:n}=e,[r,o]=K();return e.skipPromptPage&&t.length===0?i.jsx(vn,{}):t.includes("web_camera")?i.jsx(E2,{...e,t:r,i18n:o}):n||N.isDashboard?i.jsx(N2,{...e,t:r,i18n:o}):i.jsx(Ti,{to:"/inquiry/support/camera"})}function E2({assets:e,localizations:t,enabledCaptureOptions:n,handleDeviceHandoff:r,isProcessing:o,requireSelfieMatch:a,handleStartRecording:s,uiReady:c}){const{base:l}=ii();let d,u;switch(a){case Cn.ProfileAndCenter:case Cn.ConfigurablePoses:d=t["selfie-prompt"],u=i.jsx($e,{height:120,width:120,"aria-label":"selfie pictograph",children:i.jsx(Ye,{customImage:e["selfie-pictograph"],alt:"selfie pictograph",children:i.jsx(Kt,{url:"selfiePictographUrl",height:"selfiePictographHeight","aria-label":"selfie pictograph",themed:!1,children:i.jsxs(Xe,{frameDuration:100,children:[i.jsx(Xe.Center,{frames:8}),i.jsx(Xe.Left1,{}),i.jsx(Xe.Left2,{frames:8}),i.jsx(Xe.Left1,{}),i.jsx(Xe.Center,{}),i.jsx(Xe.Right1,{}),i.jsx(Xe.Right2,{frames:8}),i.jsx(Xe.Right1,{})]})})})});break;case Cn.OnlyCenter:d=t["selfie-prompt-center"],u=i.jsx($e,{height:120,width:120,"aria-label":"selfie pictograph",children:i.jsx(Ye,{customImage:e["selfie-center-pictograph"],alt:"selfie center pictograph",children:i.jsx(Kt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"selfie center pictograph",themed:!1,children:i.jsx(Xe,{children:i.jsx(Xe.Center,{})})})})});break;default:Z(new Error("Invalid selfie match requirement"));break}return i.jsxs(R2,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(wb,{children:[i.jsx(dt,{styles:l==null?void 0:l.titleStyle,children:i.jsx(J,{children:t["selfie-title"]})}),i.jsx(ot,{styles:l==null?void 0:l.textStyle,children:i.jsx(J,{children:d})})]}),u,i.jsx(ft,{children:i.jsx(_b,{children:n.map((h,m)=>i.jsx(k2,{isPrimary:m===0,option:h,handleDeviceHandoff:r,handleStartRecording:s,isProcessing:o,loading:!c,localizations:t},h))})})]})}function k2({handleDeviceHandoff:e,handleStartRecording:t,isPrimary:n,isProcessing:r,localizations:o,option:a,loading:s}){const{buttons:c}=ii(),l=n?ne.Primary:ne.Secondary,d=r!=null||s;switch(a){case"web_camera":return i.jsx(jl,{id:"selfie-prompt__button--camera","data-test":"selfie-prompt__button--camera",buttonType:l,disabled:d,styles:c==null?void 0:c[l],isPending:r===at.SelectCamera,onClick:t,children:o["btn-submit"]});case"device_handoff":return i.jsx(jl,{id:"selfie-prompt__button--to-mobile","data-test":"selfie-prompt__button--to-mobile",buttonType:l,disabled:d,styles:c==null?void 0:c[l],isPending:r===at.DeviceHandoff,onClick:e,children:o["btn-device-handoff"]});default:ct(a)}}const Wc=C.div.withConfig({displayName:"InquirySelfiePromptView__StillfieHint",componentId:"sc-1duq5j2-5"})(["display:flex;justify-content:center;"]),Go=C.div.withConfig({displayName:"InquirySelfiePromptView__StillfieHintColumn",componentId:"sc-1duq5j2-6"})(["display:flex;flex-direction:column;align-items:center;position:relative;width:145px;font-size:",";line-height:",";"],({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),Ja=C.div.withConfig({displayName:"InquirySelfiePromptView__StillfieHintIconContainer",componentId:"sc-1duq5j2-7"})(["position:absolute;top:108px;right:-4px;"]),Xa=C.p.withConfig({displayName:"InquirySelfiePromptView__StillfieHintText",componentId:"sc-1duq5j2-8"})(["width:100px;"]);function N2({assets:e,localizations:t,enabledCaptureOptions:n,isProcessing:r,currentStep:o,handleDeviceHandoff:a,handleSelectImage:s,uiReady:c}){f.useEffect(()=>{z.logAmplitude("selfie.stillfie",{currentStep:o})},[o]);const{base:l,buttons:d}=ii();let u,h;switch(o){case he.Center:u=t["selfie-prompt-center"],h=i.jsx($e,{height:120,width:120,"aria-label":"stillfie center pictograph",children:i.jsx(Ye,{customImage:e["selfie-center-pictograph"],alt:"stillfie center pictograph",children:i.jsx(Kt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"stillfie center pictograph",themed:!1,children:i.jsx(Wc,{children:i.jsx(Go,{children:i.jsx(Xe,{children:i.jsx(Xe.Center,{})})})})})})});break;case he.Left:u=t["selfie-prompt-left"],h=i.jsx($e,{height:null,width:null,"aria-label":"stillfie left pictograph",children:i.jsx(Ye,{customImage:e["selfie-left-pictograph"],alt:"stillfie left pictograph",children:i.jsx(Kt,{url:"selfieLeftPictographUrl",height:"selfieLeftPictographHeight","aria-label":"stillfie left pictograph",themed:!1,children:i.jsxs(Wc,{children:[i.jsxs(Go,{children:[i.jsx(Xe,{children:i.jsx(Xe.Left1,{})}),i.jsx(Ja,{children:i.jsx(hs,{})}),i.jsx(Xa,{children:t["stillfie-hint-left"]})]}),i.jsx(We,{width:3}),i.jsxs(Go,{children:[i.jsx(Xe,{children:i.jsx(Xe.Left3,{})}),i.jsx(Ja,{children:i.jsx(ps,{})}),i.jsx(Xa,{children:t["stillfie-hint-wrong"]})]})]})})})});break;case he.Right:u=t["selfie-prompt-right"],h=i.jsx($e,{height:null,width:null,"aria-label":"stillfie right pictograph",children:i.jsx(Ye,{customImage:e["selfie-right-pictograph"],alt:"stillfie right pictograph",children:i.jsx(Kt,{url:"selfieRightPictographUrl",height:"selfieRightPictographHeight","aria-label":"stillfie right pictograph",themed:!1,children:i.jsxs(Wc,{children:[i.jsxs(Go,{children:[i.jsx(Xe,{children:i.jsx(Xe.Right1,{})}),i.jsx(Ja,{children:i.jsx(hs,{})}),i.jsx(Xa,{children:t["stillfie-hint-right"]})]}),i.jsx(We,{width:3}),i.jsxs(Go,{children:[i.jsx(Xe,{children:i.jsx(Xe.Right3,{})}),i.jsx(Ja,{children:i.jsx(ps,{})}),i.jsx(Xa,{children:t["stillfie-hint-wrong"]})]})]})})})});break}return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(wb,{children:[i.jsx(dt,{styles:l==null?void 0:l.titleStyle,children:i.jsx(J,{children:t["stillfie-title"]})}),i.jsx(ot,{styles:l==null?void 0:l.textStyle,children:i.jsx(J,{children:u})})]}),h,i.jsx(We,{height:3}),i.jsx(ft,{children:i.jsxs(_b,{children:[i.jsx(Fo,{id:"selfie-prompt__button--stillfie","data-test":"selfie-prompt__button--stillfie",buttonType:ne.Primary,capture:"user",disabled:r!=null||!c,isPending:r===at.UploadImage,handleSelectImage:s,styles:d==null?void 0:d[ne.Primary],children:i.jsx(A2,{})}),n.includes("device_handoff")&&i.jsx(jl,{id:"selfie-prompt__button--to-mobile","data-test":"selfie-prompt__button--to-mobile",buttonType:ne.Secondary,disabled:!!r||!c,isPending:r===at.DeviceHandoff,onClick:a,styles:d==null?void 0:d[ne.Secondary],children:t["btn-device-handoff"]})]})})]})}const j2=e=>{const{inquiry:t,config:n,capturedSelfies:r,isWebGLIncompatible:o,featureFlags:a,hasCamera:s,styles:c,uiStatus:l,setTransitionStart:d,setUiReady:u}=e,h=Dt(),{t:m}=K(),p=f.useRef();f.useEffect(()=>{const[D,L]=Ci();return p.current=D,L},[]);const[g,b]=f.useState(void 0),[x,y]=f.useState(void 0);f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}},[]),f.useEffect(()=>{v()},[]),f.useEffect(()=>{if(n==null)return;if(e.match.params.step===da([],cs(t))&&e.verificationSelfieStart(),s==null)e.checkCamera();else{const L=Hy({config:n,isWebGLIncompatible:o,hasCamera:s});if(n["skip-prompt-page"])return L.includes("web_camera")?(y([]),_(h.replace)):L.includes("device_handoff")?e.history.replace("/inquiry/device-handoff/prompt"):e.history.push("/inquiry/support/camera");L.length===1&&L[0]==="device_handoff"?e.history.replace("/inquiry/device-handoff/prompt"):y(L)}},[s]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("selfie.prompt-page.entered",{})}catch{}},[]);const v=async()=>{try{await yt.loadModels()}catch{}},_=async(D=h.push)=>{e.clearMessages(),b(at.SelectCamera),a!=null&&a["inquiry:vcam-signals"]&&await h2();try{const L=zs(t),H=await Gg({highResolution:L,featureFlags:a}),M=bo(n);e.setVideoConstraints(H),e.setAudioConstraints(M);try{await Promise.all([An.prepare({video:H,audio:M},a),yt.loadModels()])}catch(B){if(M)z.logAmplitude("selfie.prompt-page.error-audio-perm",{error:B instanceof Error?{name:B.name,message:B.message}:JSON.stringify(B)}),e.setAudioConstraints(!1),An.prepare({video:H,audio:!1},a);else throw B}N.onEvent(Oe.SelfieCameraSelect),D("/inquiry/selfie/record")}catch(L){Z(L,"warning"),z.logAmplitude("selfie.record.errored",{error:{name:L.name,message:L.message}}),N.onEvent(Oe.LoadCameraFailed,{error:L.name,message:L.message}),D(bo(n)?"/inquiry/support/camera-microphone":"/inquiry/support/camera")}finally{u()}},A=async D=>{if(e.clearMessages(),window.FileReader==null){e.showMessage(m("government-id.prompt.failed-select-image"));return}b(at.UploadImage),N.onEvent(Oe.SelfieRecordUpload);const L=document.createElement("img");L.onload=async()=>{const M=Math.min(1e3,Math.max(L.width,L.height));yb(L,p.current,M);const B=p.current.toDataURL("image/jpeg");if(B==null){e.showMessage(m("government-id.prompt.failed-select-image")),Z(new Error("Stillfie canvas is empty"),"error",{fileSize:D==null?void 0:D.size,fileName:D==null?void 0:D.name,img:L.src});return}z.logAmplitude("selfie.upload",{fileSize:D==null?void 0:D.size,fileName:D==null?void 0:D.name,imgSize:L.src.length,canvasSize:B.length});let V;if(B.length<L.src.length&&B.length!==0?V=B:V=L.src,V==null){T();return}const q=e.match.params.step;e.saveCapturedSelfie(q,V,ut.Upload);const $=dd(r,q,V,ut.Upload),Q=cs(t),G=da($,Q,n["ordered-poses"]);if(G==null)try{await e.selfieSubmit({inquiry:t,config:n,capturedSelfiesSubmitData:{capturedSelfies:$,cameraInspectionData:null},debugForcedStatus:e.debugForcedStatus,history:h,t:m,featureFlags:a})}finally{b(void 0)}else h.push(`/inquiry/selfie/${G}/prompt`)},L.onerror=T;const H=await Ao(D);L.src=H},T=()=>{b(void 0),e.showMessage(m("government-id.prompt.failed-select-image"))},R=()=>{g==null&&(e.clearMessages(),b(at.DeviceHandoff),e.history.push("/inquiry/device-handoff/prompt"))};if(t==null||n==null||x==null||x.length===1&&x[0]==="device_handoff")return null;const O=cs(t);return i.jsx(ru,{value:c,children:i.jsx(T2,{assets:n.assets["prompt-page"],localizations:n.localizations["prompt-page"],handleSelectImage:A,handleStartRecording:async()=>{d(),await _(h.push)},handleDeviceHandoff:R,enabledCaptureOptions:x,allowStillfieFallback:n["web-camera-allow-stillfie-fallback"],isProcessing:g,currentStep:e.match.params.step,requireSelfieMatch:O,skipPromptPage:n["skip-prompt-page"],uiReady:l===tn.Ready})})},P2=e=>({capturedSelfies:e.verification.capturedSelfies,config:hi({state:e,stepType:Ae.Selfie}),styles:Xs(e.inquiry),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,isWebGLIncompatible:e.inquiry.isWebGLIncompatible,hasCamera:e.ui.hasCamera,uiStatus:e.ui.status}),D2={clearMessages:Lt,saveCapturedSelfie:Ea,setVideoConstraints:Ro,setAudioConstraints:ff,verificationSelfieStart:Rg,selfieSubmit:Gd,showMessage:se,checkCamera:$r,setTransitionStart:Nn,setUiReady:mt},O2=ke(P2,D2),L2=O2(j2);class F2{constructor(t){this.configs=t,this.currentState={currentStep:t.poseOrder[0],hasFace:!1,invalidReasons:null,stepIndex:0}}getNextPoseState({canvas:t,forceCapture:n,poseData:r}){let{currentStep:o,stepIndex:a}=this.currentState;if(o==="done"||r==null&&!n)return this.currentState;let s;if(r&&(s=this.getInvalidReasons(r,o)),n||!s&&r!=null&&this.canCapture(r,o)){const{poseOrder:c,onCapture:l}=this.configs;l(o,t,n),a=a+1,s=null,o=a>c.length-1?"done":c[a]}return this.currentState={currentStep:o,hasFace:n?!0:r!=null&&r.faceCount>=1,invalidReasons:s,stepIndex:a}}getInvalidReasons(t,n){const r=[];for(const o in Yc){const a=o;Yc[a].isEnabled(t)&&Yc[a].isTriggered(t,n,this.configs.requireHigherAccuracyCapture)&&r.push(a)}return r.length>0?r:null}canCapture(t,n){return B2[n](t)}}const M2=5,V2=20,zc=(e,t)=>e>Rb?t>=1:t===1,B2={[he.Left]:e=>zc(e.elapsedTime,e.faceCount)&&e.horizontalAngle<-20,[he.Right]:e=>zc(e.elapsedTime,e.faceCount)&&e.horizontalAngle>V2,[he.Center]:e=>zc(e.elapsedTime,e.faceCount)&&-5<e.horizontalAngle&&e.horizontalAngle<M2},Rb=1e4;var io=(e=>(e.MultipleFaces="multiple_faces",e.TooFar="too_far",e.TooClose="too_close",e.NotCentered="not_centered",e.NoFace="no_face",e))(io||{});const q2=.35,U2=.45,H2=.8,$2=3,Yc={multiple_faces:{isTriggered:e=>e.faceCount>1,isEnabled:e=>e.elapsedTime<=Rb},too_far:{isTriggered:(e,t,n=!1)=>{const r=Math.max(e.faceDimensions.width,e.faceDimensions.width),o=Math.min(e.videoDimensions.width,e.videoDimensions.height),a=n&&t===he.Center?U2:q2;return e.faceCount>0&&r<o*a},isEnabled:()=>!0},too_close:{isTriggered:e=>{const t=Math.max(e.faceDimensions.width,e.faceDimensions.width),n=Math.min(e.videoDimensions.width,e.videoDimensions.height);return e.faceCount>0&&t>n*H2},isEnabled:()=>!0},not_centered:{isTriggered:(e,t,n=!1)=>{const{faceBox:r,videoDimensions:o,faceCount:a,landmarks:s}=e;if(!n||r==null||a===0)return!1;if(r.top<0||r.bottom>o.height)return!0;if(s!=null&&(s==null?void 0:s.getNose().length)>2&&t===he.Center){const u=s.getNose()[3],h=u.x+r.x,m=u.y+r.y,p=Math.min(o.width,o.height)*.4,g=o.width/2-p/2,b=o.width/2+p/2,x=o.height/2-p/2,y=o.height/2+p/2;if(h<g||h>b||m<x||m>y)return!0}const c=Math.max(o.width-r.right,1),l=Math.max(r.left,1);return Math.max(l,c)/Math.min(l,c)>$2},isEnabled:()=>!0},no_face:{isTriggered:e=>e.faceCount<=0,isEnabled:()=>!0}};function G2(e,t){const n=f.useRef(t);return f.useEffect(()=>{n.current=e},[e]),n.current}const Ab=C("div").withConfig({displayName:"HintPrompt__BaseWrapper",componentId:"sc-r1ya50-0"})(["text-align:center;display:flex;align-items:center;justify-content:space-around;padding-left:",";padding-right:",";",";"],I.Spacing[6],I.Spacing[6],({styles:e})=>{var n;const t=(n=e==null?void 0:e["line-height"])==null?void 0:n.base.base;if(t!=null)return W(["min-height:",";"],E({...t,value:t.value*2}))}),W2=C(Ab).withConfig({displayName:"HintPrompt__Wrapper",componentId:"sc-r1ya50-1"})(["color:",";font-size:",";height:","px;@media ","{font-size:",";height:","px;}"],({color:e,theme:t})=>e!=null?e:t.colorFont,Yt.h3,sn*7.5,xt.isMobile,Yt.h2,sn*12.5);function z2({activeTrigger:e,color:t,styles:n,localizations:r}){const[o]=K();return i.jsx(ou,{color:t,styles:n,hintText:e.getPrompt({t:o,localizations:r})})}function ou({color:e,styles:t,hintText:n}){return i.jsx(i.Fragment,{children:t!=null?i.jsx(Ab,{styles:t,children:i.jsx(qe,{role:"alert",styles:t,children:n})}):i.jsx(W2,{color:e,children:i.jsx("p",{role:"alert",children:n})})})}const Tb=C(Gn).withConfig({displayName:"ThemedLottie",componentId:"sc-mvd4j1-0"})(["circle[stroke]:not(.no-theme),rect[stroke]:not(.no-theme),path[stroke]:not(.no-theme),g[stroke]:not(.no-theme),g:not(.no-theme) circle[stroke],g:not(.no-theme) rect[stroke],g:not(.no-theme) path[stroke]{stroke:",";}circle[fill]:not([fill='none']):not(.no-theme),rect[fill]:not([fill='none']):not(.no-theme),path[fill]:not([fill='none']):not(.no-theme),g[fill]:not([fill='none']):not(.no-theme),g:not(.no-theme) circle[fill],g:not(.no-theme) rect[fill],g:not(.no-theme) path[fill]{fill:",";}circle[fill].icon-color-highlight,rect[fill].icon-color-highlight,path[fill].icon-color-highlight,g[fill].icon-color-highlight,g.icon-color-highlight circle[fill],g.icon-color-highlight rect[fill],g.icon-color-highlight path[fill]{fill:"," !important;}circle[fill].icon-color-background,rect[fill].icon-color-background,path[fill].icon-color-background,g[fill].icon-color-background,g.icon-color-background circle[fill],g.icon-color-background rect[fill],g.icon-color-background path[fill]{fill:"," !important;}circle[fill].icon-color-stroke,rect[fill].icon-color-stroke,path[fill].icon-color-stroke,g[fill].icon-color-stroke,g.icon-color-stroke circle[fill],g.icon-color-stroke rect[fill],g.icon-color-stroke path[fill]{fill:"," !important;}line-height:0;"],({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke,({$primaryColor:e,theme:t})=>e!=null?e:t.iconColorPrimary,({$highlightColor:e,theme:t})=>e!=null?e:t.iconColorHighlight,({$backgroundColor:e,theme:t})=>e!=null?e:t.iconColorBackground,({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke),Y2=C("div").withConfig({displayName:"DirectionalHint__Positioner",componentId:"sc-wdhwga-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:center;"]),K2=C("div").withConfig({displayName:"DirectionalHint__Wrapper",componentId:"sc-wdhwga-1"})(["display:flex;align-items:center;justify-content:center;width:","px;height:","px;"],({profileSize:e})=>e,({profileSize:e})=>e),ah=C(Tb).withConfig({displayName:"DirectionalHint__StyledThemedLottie",componentId:"sc-wdhwga-2"})(["svg{width:","px !important;height:","px !important;}"],({$profileSize:e})=>e,({$profileSize:e})=>e);function Q2({assets:e,isActive:t,profileSize:n,currentStep:r,styles:o}){var c,l,d,u,h,m;const a=t&&!!r;let s;switch(r){case he.Left:s=i.jsx(Ye,{customImage:e==null?void 0:e["selfie-left-pictograph"],alt:"look left",children:i.jsx(ah,{role:"img","aria-label":"look left",animationData:UC,loop:!1,$profileSize:n,$primaryColor:k((c=o==null?void 0:o.fill)==null?void 0:c.color),$highlightColor:k((l=o==null?void 0:o.background)==null?void 0:l.color),$strokeColor:k((d=o==null?void 0:o.stroke)==null?void 0:d.color)})});break;case he.Right:s=i.jsx(Ye,{customImage:e==null?void 0:e["selfie-right-pictograph"],alt:"look right",children:i.jsx(ah,{role:"img","aria-label":"look right",animationData:qC,loop:!1,$profileSize:n,$primaryColor:k((u=o==null?void 0:o.fill)==null?void 0:u.color),$highlightColor:k((h=o==null?void 0:o.background)==null?void 0:h.color),$strokeColor:k((m=o==null?void 0:o.stroke)==null?void 0:m.color)})});break;case he.Center:break;case void 0:break;default:ct(r)}return i.jsx(Y2,{children:i.jsx(K2,{isVisible:a,profileSize:n,children:s})})}const Eb=500,Z2=C("circle").withConfig({displayName:"LoadingCircle__LoadingBar",componentId:"sc-quy236-0"})(["",";"],e=>e.useTransition?`transition: stroke-dashoffset ${Eb}ms ease-in`:""),J2=C.div.withConfig({displayName:"LoadingCircle__RotatedGroup",componentId:"sc-quy236-1"})(["transform:rotate(90deg);"]);function X2({width:e,strokeWidth:t,percent:n,color:r}){const[o,a]=f.useState(!1);f.useEffect(()=>{a(!0);const d=setTimeout(()=>{a(!1)},500);return()=>clearTimeout(d)},[n]);const s=e/2-t*2,c=Math.PI*s*2,l=c-n/100*c;return i.jsx(J2,{role:"img","aria-label":"loading circle",children:i.jsx("svg",{width:e,height:e,children:i.jsx(Z2,{cx:e/2,cy:e/2,r:s,fill:"none",stroke:r,strokeWidth:`${t}px`,strokeDasharray:`${c} ${c}`,strokeDashoffset:l,useTransition:o})})})}const eN=C("div").withConfig({displayName:"ProgressOverlay__Container",componentId:"sc-1tn3hsu-0"})(["position:relative;height:100%;"]),tN=C("div").withConfig({displayName:"ProgressOverlay__OverlayCrop",componentId:"sc-1tn3hsu-1"})(["position:relative;height:100%;width:100%;overflow-y:hidden;"]),nN=C("div").withConfig({displayName:"ProgressOverlay__Overlay",componentId:"sc-1tn3hsu-2"})(["position:absolute;box-shadow:0 0 1px 750px ",";height:100%;width:100%;left:50%;top:50%;transform:translate(-50%,-50%);margin-left:-1px;margin-right:-1px;background-color:rgba(255,255,255,0);transition:0.7s;",";",";"],({styles:e,theme:t})=>{var n,r;return(r=k((n=e==null?void 0:e.base)==null?void 0:n.backgroundColor))!=null?r:t.colorModalBackground},({isNarrowed:e,profileSize:t})=>e&&W(["border-radius:49.9%;height:","px;width:","px;"],t,t),({isComplete:e,fadeOutOnComplete:t,styles:n,theme:r})=>{var o,a;return e&&t&&W(["background-color:",";"],(a=k((o=n==null?void 0:n.base)==null?void 0:o.backgroundColor))!=null?a:r.colorModalBackground)}),sh=C("div").withConfig({displayName:"ProgressOverlay__HudPositioner",componentId:"sc-1tn3hsu-3"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);opacity:",";transition:opacity 1s ease-in-out;",""],({isVisible:e})=>e?1:0,({constrainWidth:e})=>e&&"max-width: 100%;");function iN(e,t){let n=100;const r=t.findIndex(o=>o===e);return e==null?n=100:r===0||r===1?n=0:r===2?n=50:Z(new TypeError(`currentStep is unrecognizable type: ${JSON.stringify(e)}`)),n}function kb({assets:e,showDelayedHint:t,isNarrowed:n,profileSize:r,currentStep:o,poseOrder:a,styles:s,uploadProgress:c,showLoadingCircle:l,enableMobilePendingExperienceForWeb:d}){var b,x,y,v,_,A,T,R,O,D;const u=f.useContext(tt),h=l?iN(o,a):100,m=((_=(v=(y=(x=(b=s==null?void 0:s.captureFeedbox)==null?void 0:b.border)==null?void 0:x.width)==null?void 0:y.top)==null?void 0:v.value)!=null?_:5)*2,p=r-2+m*4,g=o==null;return i.jsxs(eN,{children:[i.jsxs(tN,{children:[i.jsx(nN,{isComplete:g,isNarrowed:n,profileSize:r,styles:s,fadeOutOnComplete:(e==null?void 0:e["loading-pictograph"])!=null||d}),l&&i.jsx(sh,{isVisible:!g,children:i.jsx(X2,{width:p,strokeWidth:m,percent:h,color:(R=k((T=(A=s==null?void 0:s.captureFeedbox)==null?void 0:A.border)==null?void 0:T.color))!=null?R:u.colorPrimary})}),i.jsx(sh,{isVisible:g,constrainWidth:!0,children:g&&!d&&i.jsx(Ye,{customImage:e==null?void 0:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(cN,{strokeColor:(D=k((O=s==null?void 0:s.captureCompleteIcon)==null?void 0:O.stroke.color))!=null?D:u.colorPrimary,uploadProgress:c})})})]}),i.jsx(Q2,{assets:e,isActive:t,profileSize:r,currentStep:o,styles:s==null?void 0:s.captureIcon})]})}const rN=C.span.withConfig({displayName:"ProgressOverlay__ProgressNumber",componentId:"sc-1tn3hsu-4"})(["color:",";position:absolute;left:0;top:0;right:0;bottom:0;font-weight:",";display:flex;justify-content:center;align-items:center;"],({color:e})=>e,Ma.Medium),oN=C.div.withConfig({displayName:"ProgressOverlay__LoadingPositioner",componentId:"sc-1tn3hsu-5"})(["position:relative;"]),aN=3e3,sN=1e4,cN=({strokeColor:e,uploadProgress:t})=>{const[n,{enable:r}]=st(!1),[o,{enable:a}]=st(!1),s=Zi(),c=()=>{setTimeout(()=>{s&&r()},aN),setTimeout(()=>{s&&a()},sN)};return e==null&&Z(new Error(`unexpected ${e} strokeColor`),"warning"),i.jsxs(oN,{children:[i.jsx(Tb,{"aria-label":"complete checkmark","aria-busy":!0,"aria-live":"polite",role:"alert",animationData:n?HC:$C,onComplete:c,loop:n,$strokeColor:e}),o&&t!=null&&t>0&&i.jsxs(rN,{color:e,children:[Math.round(t*100),"%"]})]})},lN=300,dN=({assets:e,children:t,delayUntilManualCaptureMs:n,localizations:r,stepOrder:o,stepState:a,profileSize:s,showLoadingSpinner:c,styles:l,videoHeight:d,handleManualCapture:u,enableMobilePendingExperienceForWeb:h})=>{var M,B,V;const[m,p]=f.useState(!1),[g,b]=f.useState(!!(n===0||Pn())),[x,y]=f.useState(he.Center),v=Zi(),_=G2(a),A=f.useCallback(q=>{b1(lN,$=>{v&&y($)})(q)},[y,v]),[T]=K();f.useEffect(()=>{a&&(_!=null&&_.currentStep!==a.currentStep?y(ch(a)):A(ch(a)),p(a.hasFace))},[a,_]),f.useEffect(()=>{n!=null&&n>0&&setTimeout(()=>{b(!0)},n)},[n]);const R=a==null?void 0:a.currentStep,O=R==null||R==="done",D=R!=null&&R!==he.Center&&m,L=x!=null?CN[x]({localizations:r,t:T}):void 0,H=m?R==="done"?void 0:R!=null?R:o[0]:he.Center;return i.jsxs(uN,{children:[i.jsx(ou,{styles:l==null?void 0:l.captureHintText,hintText:c?T("selfie-scanner.hint.loading-camera"):L}),c&&i.jsx(bN,{backgroundColor:(M=l==null?void 0:l.base)==null?void 0:M.backgroundColor,children:i.jsx(vn,{})}),i.jsxs(mN,{style:d?{maxHeight:d}:void 0,children:[i.jsx(gN,{isActive:D&&!ox(),backgroundColor:(B=l==null?void 0:l.base)==null?void 0:B.backgroundColor,children:t}),i.jsx(hN,{children:i.jsx(kb,{assets:e,showDelayedHint:!0,isNarrowed:m,profileSize:s,currentStep:H,poseOrder:o,styles:l,showLoadingCircle:!1,enableMobilePendingExperienceForWeb:h})})]}),g&&R!=="done"&&i.jsx(ft,{children:i.jsx(pN,{id:"configurable_poses_scanner__capture--manual","data-test":"configurable_poses_scanner__capture--manual",onClick:u,disabled:O,styles:(V=l==null?void 0:l.buttons)==null?void 0:V[Xp.Primary],children:T("selfie-scanner.prompt.btn-capture-manual")})})]})},uN=C.div.withConfig({displayName:"ConfigurablePosesScannerView__Container",componentId:"sc-1cqrhgs-0"})(["position:relative;max-width:100%;margin:0 auto;"]),mN=C.div.withConfig({displayName:"ConfigurablePosesScannerView__VideoWrapper",componentId:"sc-1cqrhgs-1"})(["position:relative;width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;video{transform:scaleX(-1);flex:0 1 auto;}"]),hN=C("div").withConfig({displayName:"ConfigurablePosesScannerView__OverlayPositioner",componentId:"sc-1cqrhgs-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;"]),pN=C(ge).withConfig({displayName:"ConfigurablePosesScannerView__ButtonStyled",componentId:"sc-1cqrhgs-3"})(["margin-top:",";margin-bottom:",";"],I.Spacing[4],I.Spacing[5]),fN=5,gN=C("div").withConfig({displayName:"ConfigurablePosesScannerView__VideoBlurrer",componentId:"sc-1cqrhgs-4"})(["line-height:0;transition:filter 0.5s;filter:",";border-width:","px;border-style:solid;border-color:",";"],e=>e.isActive?"blur(5px)":"",fN,({isActive:e,backgroundColor:t,theme:n})=>{var r;return e?`${(r=k(t))!=null?r:n.colorModalBackground}`:"transparent"}),bN=C.div.withConfig({displayName:"ConfigurablePosesScannerView__LoadingSpinnerWrapper",componentId:"sc-1cqrhgs-5"})(["background-color:",";position:absolute;width:100%;padding-bottom:100%;z-index:1;"],({backgroundColor:e,theme:t})=>{var n;return`${(n=k(e))!=null?n:t.colorModalBackground}`}),ch=e=>{var n;const t=(n=e.invalidReasons)==null?void 0:n[0];return t&&e.currentStep!=="done"?t:e.currentStep},CN={[he.Center]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")},[he.Left]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")},[he.Right]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")},[io.MultipleFaces]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-multiple-faces"])!=null?n:t("selfie-scanner.hint.multiple-faces")},[io.NotCentered]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-pose-not-center"])!=null?n:t("selfie-scanner.hint.not-centered")},[io.TooFar]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-far"])!=null?n:t("selfie-scanner.hint.move-closer")},[io.TooClose]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-close"])!=null?n:t("selfie-scanner.hint.move-away")},[io.NoFace]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")},done:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-verifying"])!=null?n:t("selfie-scanner.hint.verifying")}},Nb=1e4,xN=5,vN=20,jb=1e4;function Pb(e){const t=e.getNose(),n=(l,d)=>Math.sqrt(Math.pow(l.x-d.x,2)+Math.pow(l.y-d.y,2)),r=t[4],o=t[3],a=t[8],s=n(o,r),c=n(a,o);return s>c?-(s/c-1)*30:(c/s-1)*30}const yN=.35,IN=.45,SN=.8,wN=3,yo=2,Db=2;var Rt=(e=>(e[e.Verifying=0]="Verifying",e[e.MultipleFaces=1]="MultipleFaces",e[e.TooFar=2]="TooFar",e[e.TooClose=3]="TooClose",e[e.NotCentered=4]="NotCentered",e[e.LeftDelayed=5]="LeftDelayed",e[e.RightDelayed=6]="RightDelayed",e[e.LeftCapture=7]="LeftCapture",e[e.RightCapture=8]="RightCapture",e[e.CenterCapture=9]="CenterCapture",e[e.Left=10]="Left",e[e.Right=11]="Right",e[e.Center=12]="Center",e[e.Empty=13]="Empty",e))(Rt||{});const _N=e=>{const t=e[1]===he.Right;return new qd(Ob({rightBeforeLeft:t}).map(n=>new Jn(n)))},RN=[{type:8,shouldShow:e=>!Di(e.capturedSelfies,he.Right)&&e.currentStep===he.Right&&sr(e)&&e.horizontalAngle>vN&&!Fr(e)&&!Mr(e)&&!Io(e),showAfterFrames:yo,hideAfterFrames:15,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")}},{type:6,shouldShow:e=>!Di(e.capturedSelfies,he.Right)&&e.currentStep===he.Right&&(sr(e)||e.manualVisible)&&!Fr(e)&&!Mr(e)&&!Io(e),showAfterFrames:yo+Db,hideAfterFrames:3,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")}},{type:11,shouldShow:e=>!Di(e.capturedSelfies,he.Right)&&e.currentStep===he.Right&&(sr(e)||e.manualVisible),showAfterFrames:1,hideAfterFrames:10,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")}}],AN=[{type:7,shouldShow:e=>!Di(e.capturedSelfies,he.Left)&&e.currentStep===he.Left&&sr(e)&&e.horizontalAngle<-20&&!Fr(e)&&!Mr(e)&&!Io(e),showAfterFrames:yo,hideAfterFrames:15,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")}},{type:5,shouldShow:e=>(sr(e)||e.manualVisible)&&e.currentStep===he.Left&&!Fr(e)&&!Mr(e)&&!Io(e),showAfterFrames:yo+Db,hideAfterFrames:3,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")}},{type:10,shouldShow:e=>(sr(e)||e.manualVisible)&&e.currentStep===he.Left,showAfterFrames:1,hideAfterFrames:10,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")}}],TN=[{type:0,shouldShow:e=>!e.currentStep,showAfterFrames:1,hideAfterFrames:99999,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-verifying"])!=null?n:t("selfie-scanner.hint.verifying")}},{type:1,shouldShow:kN,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-multiple-faces"])!=null?n:t("selfie-scanner.hint.multiple-faces")}},{type:2,shouldShow:Fr,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-far"])!=null?n:t("selfie-scanner.hint.move-closer")}},{type:3,shouldShow:Mr,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-close"])!=null?n:t("selfie-scanner.hint.move-away")}},{type:4,shouldShow:Io,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-pose-not-center"])!=null?n:t("selfie-scanner.hint.not-centered")}}],EN=[{type:9,shouldShow:e=>!Di(e.capturedSelfies,he.Center)&&sr(e)&&e.currentStep===he.Center&&-5<e.horizontalAngle&&e.horizontalAngle<xN&&!Fr(e)&&!Mr(e)&&!Io(e),showAfterFrames:yo,hideAfterFrames:50,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")}},{type:12,shouldShow:e=>e.currentStep===he.Center&&(sr(e)||e.manualVisible),showAfterFrames:yo,hideAfterFrames:50,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")}},{type:13,shouldShow:e=>e.currentStep===he.Center,showAfterFrames:20,hideAfterFrames:3,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-delayed"])!=null?n:t("selfie-scanner.hint.center-delayed")}},{type:13,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")}}],Ob=({rightBeforeLeft:e})=>{const t=ls(AN),n=ls(RN),r=e?[...t,...n]:[...n,...t];return[...TN,...r,...EN]},or=Ob({rightBeforeLeft:!1});function Fr(e){const t=Math.max(e.faceWidth,e.faceHeight),n=Math.min(e.videoWidth,e.videoHeight),r=e.requireHigherAccuracyCapture&&e.currentStep===he.Center?IN:yN;return e.faceCount>0&&t<n*r}function Mr(e){const t=Math.max(e.faceWidth,e.faceHeight),n=Math.min(e.videoWidth,e.videoHeight);return e.faceCount>0&&t>n*SN}function Io(e){const{faceBox:t,requireHigherAccuracyCapture:n,videoWidth:r,videoHeight:o,faceCount:a,landmarks:s,currentStep:c}=e;if(!n||t==null||a===0||Fr(e)||Mr(e))return!1;if(t.top<0||t.bottom>o)return!0;if((s==null?void 0:s.getNose().length)>2&&c===he.Center){const h=s.getNose()[3],m=h.x+t.x,p=h.y+t.y,g=Math.min(r,o)*.4,b=r/2-g/2,x=r/2+g/2,y=o/2-g/2,v=o/2+g/2;if(m<b||m>x||p<y||p>v)return!0}const l=Math.max(r-t.right,1),d=Math.max(t.left,1);return Math.max(d,l)/Math.min(d,l)>wN}function kN(e){return e.elapsedTime>jb?!1:e.faceCount>1}function sr(e){return e.elapsedTime>jb?e.faceCount>=1:e.faceCount===1}function NN(e){switch(e){case 9:return he.Center;case 7:return he.Left;case 8:return he.Right;default:return null}}const jN=320,PN=.4,DN=({handleFailed:e,handleModelLoaded:t})=>{const n=f.useRef(null),r=f.useRef(null);return f.useEffect(()=>{(async()=>{try{await yt.loadModels(),await t()}catch(a){e(a,"load");return}})()},[]),f.useEffect(()=>{const[o,a]=Ci();n.current=o;const[s,c]=Ci();return r.current=s,()=>{a(),c()}},[]),{getCanvasFromVideo:o=>{const{videoWidth:a,videoHeight:s}=o;return Kc({source:{element:o,height:s,width:a},destination:{canvas:r.current,height:s,width:a}}),r.current},canRunPoseDetection:o=>yt.isLoaded()&&yt.isMediaLoaded(o),getPoseDetectionData:async o=>{if(o==null||r.current==null)return null;const{videoWidth:a,videoHeight:s}=o;Kc({source:{element:o,height:s,width:a},destination:{canvas:r.current,height:s,width:a}});const c=await yt.detectFaces(r.current,{inputSize:jN,scoreThreshold:PN}),l=c.length===1?c[0].box:void 0;let d=0,u=null;if(l!=null&&n.current!=null){const h=Math.floor(l.width),m=Math.floor(l.height);Kc({source:{element:r.current,height:m,width:h,x:Math.floor(l.x),y:Math.floor(l.y)},destination:{canvas:n.current,height:m,width:h}}),u=await yt.detectLandmarks(n.current),d=Pb(u)}return{canvas:r.current,faceBox:l,faceCount:c.length,faceDimensions:{width:l!=null?l.width:0,height:l!=null?l.height:0},horizontalAngle:d,landmarks:u}},setTfBackend:async o=>await yt.setBackend(o),getTfBackend:()=>yt.getBackend()}},Kc=({source:e,destination:t})=>{if(e.element==null||t.canvas==null)return;const{canvas:n}=t;n.width=e.width,n.height=e.height;const r=n.getContext("2d",{willReadFrequently:!0,alpha:!1});if(r==null||r.clearRect(0,0,t.width,t.height),n.width===0&&n.height===0||r==null)throw new Error("Canvas getContext returned null during runPoseDetection");return r==null||r.drawImage(e.element,e.x!=null?e.x:0,e.y!=null?e.y:0,e.width,e.height,t.x!=null?t.x:0,t.y!=null?t.y:0,t.width,t.height),t},ON=12e4,LN=({enableVideoRecording:e,videoCaptureMethods:t,videoSessionJwt:n,captureIsDone:r,handleFailed:o,handleRestartStep:a})=>{const s=f.useRef(!e),[c,l]=f.useState(void 0),[d,u]=f.useState(void 0),h=(m,p)=>{const g=Re.getNewClient(t);if(e&&!g.isSupported()){o("MediaRecorder not supported","load");return}const b=g.init({stream:m,video:p,jwt:n,maxRecordingTime:ON,stepName:"selfie",onError:x=>{Re.shouldReinitializeWithUpload(x,t)?(Re.destroy(),h(m,p)):Re.videoCanBeReattempted()?a==null||a():o("mediaRecorderClient failed","capture"),z.logAmplitude("selfie.video.errored",{message:typeof x=="string"?x:x==null?void 0:x.message}),x instanceof Error?Z(x,"error"):Z(new Error(`Unexpected error: ${JSON.stringify(x)}`),"error")},onRecordingComplete:(x,y)=>{var v;c||(z.logAmplitude("selfie.video.stop",{elapsedTime:y,type:g.type,chunksLength:x.type==="upload"?(v=x.chunks)==null?void 0:v.length:0}),x.type==="upload"&&(x.chunks==null||x.chunks.length<=0)?(Re.videoCanBeReattempted()&&(a==null||a()),Z(new Error("MediaRecorderClient error: no chunks recorded"),"info")):l(x))},onStart:x=>{s.current=!0,l(void 0),z.logAmplitude("selfie.video.start",{isRestart:x,type:g.type})},onTimeExceeded:()=>{z.logAmplitude("selfie.video.timeExceeded"),r||a==null||a({timeExceeded:!0})}});g.startRecording(),Re.recordVideoAttempt(),z.logAmplitude("selfie.video.initialized",{type:g.type,attempt:Re.videoAttempts}),u(b)};return{capturedVideoData:c,cleanUpVideoCapture:()=>{Re.destroy()},isAudioEnabled:()=>e&&N.canRequestMicrophone,isVideoReady:()=>s.current,initVideoCapture:(m,p)=>{e&&!d&&p&&h(m,p)},stopVideoCapture:()=>{var m;(m=Re.currentClient)==null||m.stopRecording()}}},FN=250,MN=250,VN=250,BN=.92,qN=({assets:e,delayUntilManualCaptureMs:t,detectTimeout:n,enableVideoRecording:r,localizations:o,stepOrder:a,requireHigherAccuracyCapture:s,styles:c,videoCaptureMethods:l,videoConstraints:d,videoSessionJwt:u,handleComplete:h,handleFailed:m,handleRestartStep:p,handleSlowFaceDetection:g,enableMobilePendingExperienceForWeb:b})=>{const x=f.useRef(null),y=f.useRef(null),v=f.useRef(new Date().getTime()),_=f.useRef([]),A=f.useRef(null),T=f.useRef(0),R=f.useRef(30),O=Zi(),[D,L]=f.useState(!1),[H,M]=f.useState(null),[B,V]=f.useState(null),[q,$]=f.useState(null),Q=Xt("inquiry:enable-inline-wasm-fallback-on-vertex-shader-error"),{getCanvasFromVideo:G,canRunPoseDetection:Y,getPoseDetectionData:re,getTfBackend:ae,setTfBackend:Ce}=DN({handleFailed:m,handleModelLoaded:async()=>{await Fe()}}),{logCameraInspectionFromStream:we,logCameraInspectionSnapshot:me,getCameraInspectionData:Ie}=Ud(),[le,ee]=f.useState(VN),ce=!!H&&H.currentStep==="done"&&_.current.length===a.length,{capturedVideoData:_e,isAudioEnabled:pe,isVideoReady:Je,initVideoCapture:lt,stopVideoCapture:ue,cleanUpVideoCapture:Pe}=LN({enableVideoRecording:!!r,videoCaptureMethods:l||["stream"],videoSessionJwt:u,captureIsDone:ce,handleFailed:m,handleRestartStep:p}),Le=()=>{var ve;if(((ve=x.current)==null?void 0:ve.video)==null)return;R.current=T.current;const{clientWidth:de,videoHeight:be,videoWidth:Se}=x.current.video;if(be>Se)$(de);else{const He=Se/be,Ve=Math.floor(Math.max(de,MN*He));V(Ve)}},Fe=async()=>{const de=new Date().getTime();let be;try{(!zl()||T.current>R.current+5)&&(be=await nt())}catch(He){if(Z(He,x.current?"warning":"info",{...dl(),...Ne()}),Q&&He instanceof Error&&He.message==="Failed to link vertex and fragment shaders."&&ae()==="webgl")if(x.current)try{z.logAmplitude("face-api.wasm-fallback-start"),await Ce("wasm")}catch(Ve){m(Ve,"capture");return}else return;else{x.current&&m(He,"capture");return}}const Se=new Date().getTime()-de;if(T.current===0&&n!=null&&Se>n){g();return}if((be==null?void 0:be.currentStep)==="done"){ue();return}if(T.current++,!O)return;const ve=Math.max(0,FN-Se);y.current=window.setTimeout(()=>{window.requestAnimationFrame!=null?window.requestAnimationFrame(Fe):Fe()},ve)},nt=async()=>{A.current==null&&(A.current=new F2({poseOrder:a,requireHigherAccuracyCapture:s,onCapture:(ve,He,Ve)=>{var wt;if(((wt=x.current)==null?void 0:wt.video)==null)return;const ze=He.toDataURL("image/jpeg",BN),St=Ve?ut.Manual:ut.Auto;if(ze==null||ze.length<Br){Z(new Error(`Selfie ${St} capture captured a potentially blank image`),"warning",Ne()),m(`Selfie ${St} capture captured a potentially blank image`,"capture");return}_.current=[..._.current,{capturedAt:new Date().toISOString(),captureMethod:St,dataUrl:ze,pose:ve}]}}));const de=x.current;if(!(de!=null&&de.video)||!Y(de==null?void 0:de.video)||!Je())return;const be=await re(de.video);if(be==null||!(de!=null&&de.video))return;const Se=A.current.getNextPoseState({canvas:be.canvas,forceCapture:!1,poseData:{elapsedTime:Date.now()-v.current,faceBox:be.faceBox,faceCount:be.faceCount,faceDimensions:be.faceDimensions,horizontalAngle:be.horizontalAngle,landmarks:be.landmarks,videoDimensions:{width:de.video.videoWidth,height:de.video.videoHeight}}});return M(Se),ee(Math.min(de.video.clientWidth,de.video.clientHeight)-8),be.faceBox!=null&&me(be.canvas),Se},Qe=()=>{var Se;const de=H==null?void 0:H.currentStep;if(de==="done"||de==null||((Se=x.current)==null?void 0:Se.video)==null||A.current==null)return;const be=G(x.current.video);if(be==null){Z(new Error("Selfie manual capture has a blank canvas"),"warning",Ne());return}M(A.current.getNextPoseState({canvas:be,forceCapture:!0,poseData:null}))},Ne=()=>({tickCount:T.current,elapsedTime:Date.now()-v.current});return f.useEffect(()=>()=>{y.current!=null&&(clearTimeout(y.current),y.current=null),Pe()},[]),f.useEffect(()=>{if(!D&&ce&&(r&&_e||!r)){const de=v.current?new Date(v.current).toISOString():void 0;h({capturedSelfies:_.current,captureStartedAt:de,cameraInspectionData:Ie({includeSmallImages:!0}),capturedVideoData:_e}),L(!0)}},[ce,_e,r,D,Ie,h]),i.jsx(dN,{assets:e,delayUntilManualCaptureMs:t,localizations:o,stepOrder:a,stepState:H,profileSize:le,styles:c,showLoadingSpinner:!Je(),videoHeight:q,handleManualCapture:Qe,enableMobilePendingExperienceForWeb:b,children:i.jsx(Os,{audio:pe(),height:"initial",onUserMedia:async de=>{var be;await we(de),lt(de,(be=x.current)==null?void 0:be.video)},onUserMediaError:de=>m(de,"load"),ref:de=>{x.current=de,de!=null&&de.video&&(de.video.addEventListener("canplay",Le),de.video.defaultMuted=!0,de.video.muted=!0)},videoConstraints:d,width:B!=null?B:"100%"})})},UN=C.div.withConfig({displayName:"InquirySelfiePendingView__Container",componentId:"sc-1a3itvm-0"})(["display:flex;flex-direction:column;"]),HN=C("div").withConfig({displayName:"InquirySelfiePendingView__Header",componentId:"sc-1a3itvm-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),$N=C("div").withConfig({displayName:"InquirySelfiePendingView__AnimationContainer",componentId:"sc-1a3itvm-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],F.base*8);function GN({assets:e,localizations:t,textVerticalPosition:n}){const{base:r,processingPage:o}=ii(),a=i.jsxs(HN,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(J,{children:t.title})}),i.jsx(ot,{styles:o==null?void 0:o.textStyle,children:i.jsx(J,{children:t.description})})]});return i.jsx(tp,{autoFocus:!0,children:i.jsxs(UN,{"data-test":"inquiry-selfie-pending-view__container",children:[n!=="end"&&a,i.jsx($N,{children:i.jsx(Ye,{customImage:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(Lo,{icon:"verification",$primaryColor:k(r==null?void 0:r.fill.color),$strokeColor:k(r==null?void 0:r.stroke.color)})})}),n==="end"&&a]})})}const WN=({dimensions:e})=>{const{videoDimensionsUpdated:t}=bb();return f.useEffect(()=>{e&&t(e.width,e.height)},[e,t]),i.jsx(i.Fragment,{})},zN=320,YN=.4,KN=500,QN=12e4,ZN=250,JN=250,Lb=250,Fb=5,Mb=[Rt.Verifying,Rt.TooFar,Rt.TooClose,Rt.NotCentered,Rt.Left,Rt.Right,Rt.LeftDelayed,Rt.RightDelayed,Rt.Center,Rt.LeftCapture,Rt.RightCapture,Rt.CenterCapture],XN=1350,e7=450,t7=C("div").withConfig({displayName:"SelfieScanner__Container",componentId:"sc-1fc5wia-0"})(["position:relative;max-width:",";margin:0 auto;",""],({styles:e})=>{var t;return(t=e==null?void 0:e.video)!=null&&t.maxWidth?`min(${E(e.video.maxWidth)}, 100%)`:"100%"},({templatePreferredDimensionsEnabled:e})=>e?`
    @media ${xt.isNotMobile} {
      max-width: ${e7}px;
      margin: auto;
    }
    `:""),n7=C("div").withConfig({displayName:"SelfieScanner__VideoWrapper",componentId:"sc-1fc5wia-1"})(["position:relative;width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;video{transform:scaleX(-1);flex:0 1 auto;}"]),i7=C("div").withConfig({displayName:"SelfieScanner__OverlayPositioner",componentId:"sc-1fc5wia-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;"]),r7=C(ge).withConfig({displayName:"SelfieScanner__ButtonStyled",componentId:"sc-1fc5wia-3"})(["margin-top:",";margin-bottom:",";"],I.Spacing[4],I.Spacing[5]),o7=C.div.withConfig({displayName:"SelfieScanner__EditorPreviewVideoPlaceholder",componentId:"sc-1fc5wia-4"})(["background-color:",";width:100%;height:","px;"],I.Color.CoreSlate400,Lb+Fb*2),a7=C("div").withConfig({displayName:"SelfieScanner__VideoBlurrer",componentId:"sc-1fc5wia-5"})(["line-height:0;transition:filter 0.5s;filter:",";border-width:","px;border-style:solid;border-color:",";"],e=>e.isActive?"blur(5px)":"",Fb,({isActive:e,backgroundColor:t,theme:n})=>{var r;return e?`${(r=k(t))!=null?r:n.colorModalBackground}`:"transparent"}),s7=C.div.withConfig({displayName:"SelfieScanner__LoadingSpinnerWrapper",componentId:"sc-1fc5wia-6"})(["background-color:",";position:absolute;width:100%;padding-bottom:100%;z-index:1;"],({backgroundColor:e,theme:t})=>{var n;return`${(n=k(e))!=null?n:t.colorModalBackground}`}),Vb=({audioEnabled:e,autoCaptureDisabled:t,assets:n,localizations:r,currentStep:o,poseOrder:a,activeTrigger:s,videoWidthOverride:c,videoHeightOverride:l,setWebcamRef:d,videoConstraints:u,handleUserMedia:h,handleFailed:m,handleManualCapture:p,manualVisible:g,profileSize:b,debug:x,isEditorPreview:y,styles:v,buttonStyles:_,showPreloadingSpinner:A,showPreloadingHint:T,uploadProgress:R,enableMobilePendingExperienceForWeb:O,allowNarrowCanvas:D,featureFlags:L})=>{var Q,G,Y;const H=!!D&&(Mb.indexOf(s.getType())!==-1||g),[M]=K(),B=[Rt.LeftDelayed,Rt.RightDelayed,Rt.Left,Rt.Right].indexOf(s.getType())!==-1,V=o==null,q=(V||![Rt.Center,Rt.Empty,Rt.LeftDelayed,Rt.RightDelayed].includes(s.getType()))&&!t,$=B||V;return i.jsxs(t7,{"data-test":"selfie-scanner",styles:v,templatePreferredDimensionsEnabled:!!L["inquiry:enable-template-preferred-dimensions-configuration"],children:[!A&&i.jsx(z2,{activeTrigger:s,styles:v==null?void 0:v.captureHintText,localizations:r}),T&&i.jsx(ou,{styles:v==null?void 0:v.captureHintText,hintText:M("selfie-scanner.hint.loading-camera")}),A&&i.jsx(s7,{backgroundColor:(Q=v==null?void 0:v.base)==null?void 0:Q.backgroundColor,children:i.jsx(vn,{})}),i.jsxs(n7,{style:{maxHeight:l},children:[y?i.jsx(o7,{"data-test":"selfie-scanner__editor-preview-video-placeholder"}):i.jsx(a7,{isActive:$,backgroundColor:(G=v==null?void 0:v.base)==null?void 0:G.backgroundColor,children:i.jsx(Os,{audio:e,width:c!=null?c:"100%",height:"initial",ref:d,videoConstraints:u,onUserMedia:h,onUserMediaError:re=>m(re,"load")})}),i.jsx(i7,{children:i.jsx(kb,{assets:n,showDelayedHint:B,isNarrowed:H,profileSize:b,currentStep:o,poseOrder:a,styles:v,uploadProgress:R,showLoadingCircle:!0,enableMobilePendingExperienceForWeb:!!O})})]}),g&&i.jsx(ft,{children:i.jsx(r7,{id:"selfie-scanner__capture--manual","data-test":"selfie-scanner__capture--manual",onClick:p,disabled:q,styles:(_==null?void 0:_[ne.Primary])||((Y=v==null?void 0:v.buttons)==null?void 0:Y.primary),children:M("selfie-scanner.prompt.btn-capture-manual")})}),x&&i.jsx("canvas",{style:{width:"100%"},id:"debugLandmarks"})]})};class Bb extends f.Component{constructor(t){super(t),this.capturedSelfiesLocal=[],this.componentDidMount=async()=>{var m;this.props.debug&&console.info(dl());try{await yt.loadModels()}catch(p){(m=this.props)==null||m.handleFailed(p,"load");return}this.runTick(),this.updatePoseManualCaptureTimer(this.state.currentStep),this.timerNarrowCanvasEnable=window.setTimeout(()=>{this.setState({allowNarrowCanvas:!0})},KN),this.timerShowSpinnerForNonVideo=window.setTimeout(()=>{this.setState({showPreloadingSpinnerForUserMedia:!0})},XN)},this.setWebcamRef=m=>{var p;this.refWebcam=m,(p=this.refWebcam)!=null&&p.video&&(this.refWebcam.video.addEventListener("canplay",this.resizeVideo),this.refWebcam.video.defaultMuted=!0,this.refWebcam.video.muted=!0)},this.resizeVideo=()=>{var b;if(((b=this.refWebcam)==null?void 0:b.video)==null)return;const{clientWidth:m,videoHeight:p,videoWidth:g}=this.refWebcam.video;if(this.tickCountWhenFeedIsReady=this.state.tickCount,p>g)this.setState({videoHeightOverride:m});else{const x=g/p,y=Math.floor(Math.max(m,Lb*x));this.setState({videoWidthOverride:y})}},this.runTick=async()=>{var b,x,y,v,_,A,T,R,O;const m=new Date().getTime();try{(!zl()&&!ax()||this.state.tickCount>this.tickCountWhenFeedIsReady+5)&&await this.runDetection()}catch(D){if(Z(D,"info",dl(),{jira:"PER-19877"}),this.props.featureFlags["inquiry:enable-inline-wasm-fallback-on-vertex-shader-error"]&&D instanceof Error&&D.message==="Failed to link vertex and fragment shaders."&&yt.getBackend()==="webgl")try{z.logAmplitude("face-api.wasm-fallback-start"),await yt.setBackend("wasm")}catch(L){this.props.handleFailed(L,"capture");return}else{this.props.handleFailed(D,"capture");return}}const p=new Date().getTime()-m;if(this.state.tickCount===0&&this.props.detectTimeout!=null&&p>this.props.detectTimeout&&!this.state.autoCaptureDisabled){this.props.handleSlowFaceDetection();return}const g=Math.max(0,ZN-p);if(this.setState(({tickCount:D})=>({tickCount:D+1})),((x=(b=this.refWebcam)==null?void 0:b.video)==null?void 0:x.videoHeight)!=null&&((v=(y=this.refWebcam)==null?void 0:y.video)==null?void 0:v.videoWidth)!=null&&this.setState({videoDimensions:{width:this.refWebcam.video.videoWidth,height:this.refWebcam.video.videoHeight}}),!this.state.hasSentSelfieData){if(!this.state.hasUnmounted&&this.refWebcam)this.timerDetect=window.setTimeout(()=>{window.requestAnimationFrame!=null?window.requestAnimationFrame(this.runTick):this.runTick()},g);else if(this.state.hasUnmounted&&this.refWebcam)try{Z(new Error("SelfieScanner runTick finished before hasSentSelfieData was true"),"warning",{hasUnmounted:this.state.hasUnmounted,refWebcamExists:this.refWebcam!=null,refWebcamVideoExists:((_=this.refWebcam)==null?void 0:_.video)!=null,videoHeight:(T=(A=this.refWebcam)==null?void 0:A.video)==null?void 0:T.height,videoWidth:(O=(R=this.refWebcam)==null?void 0:R.video)==null?void 0:O.width})}catch(D){Z(new Error("SelfieScanner runTick finished early and failed to log reason"),"warning",D)}}},this.logCameraInspectionSnapshot=()=>{var m;if(!(this.cameraInspectionSnapshots.length>=5))if(this.shouldCaptureCameraInspectionSnapshots){const p=wp((m=this.canvasBuffer)==null?void 0:m.toDataURL("image/jpeg"));p!=null&&(this.cameraInspectionSnapshots.push(p),this.shouldCaptureCameraInspectionSnapshots=!1)}else this.shouldCaptureCameraInspectionSnapshots=!0},this.completeCameraInspection=()=>{this.cameraInspectionData&&(this.cameraInspectionData.streamStability=yp({snapshots:this.cameraInspectionSnapshots,includeSmallImages:!0}))},this.handleUserMedia=async m=>{clearTimeout(this.timerShowSpinnerForNonVideo),this.setState({showPreloadingSpinnerForUserMedia:!1}),!(this.cameraInspectionData||!m)&&(this.cameraInspectionData={...vp},this.cameraInspectionData={...this.cameraInspectionData,...Ip(m)},this.cameraInspectionData={...this.cameraInspectionData,...await Sp(m,this.props.featureFlags["inquiry:vcam-signals"])},this.props.enableVideoRecording&&!this.state.mediaRecorderSubId&&this.initMediaRecorderClient(m,this.props.videoSessionJwt))},this.completeSelfieScan=m=>{const p=this.getCapturedSelfies();this.runTick(),this.completeCameraInspection(),clearTimeout(this.timerDetect),clearTimeout(this.timerManualShow);const g=this.state.startTime?new Date(this.state.startTime).toISOString():void 0;this.props.handleComplete({capturedSelfies:p,captureStartedAt:g,cameraInspectionData:this.cameraInspectionData,capturedVideoData:m}),this.setState({...this.state,hasSentSelfieData:!0,manualVisible:!1})},this.runDetection=async()=>{var Q;const m=this.getCapturedSelfies(),{requireHigherAccuracyCapture:p,poseOrder:g,poseConfigs:b,featureFlags:x}=this.props;if(!this.refWebcam||!yt.isLoaded()||!yt.isMediaLoaded(this.refWebcam.video)||!this.state.readyToCapture)return;const{clientHeight:y,clientWidth:v}=this.refWebcam.video,{videoHeight:_,videoWidth:A}=this.refWebcam.video;if(!this.refWebcam||!this.canvasBuffer)return;this.canvasBuffer.width=A,this.canvasBuffer.height=_;const T=this.canvasBuffer.getContext("2d",{willReadFrequently:!0,alpha:!1});T==null&&Z(new Error("Canvas getContext returned null during runDetection"),"warning",this.getSentryErrorContext()),T==null||T.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height),T==null||T.drawImage(this.refWebcam.video,0,0,A,_);const R=await yt.detectFaces(this.canvasBuffer,{inputSize:zN,scoreThreshold:YN}),O=R.length===1?R[0].box:void 0;let D=0,L=null;if(!this.refWebcam||!this.canvasBuffer)return;if(O!=null){try{this.logCameraInspectionSnapshot()}catch(Y){Z(Y)}if(!this.refWebcam||!this.faceCanvasBuffer||!this.canvasBuffer)return;this.faceCanvasBuffer.width=Math.floor(O.width),this.faceCanvasBuffer.height=Math.floor(O.height);const G=this.faceCanvasBuffer.getContext("2d",{willReadFrequently:!0,alpha:!1});if(G==null||G.clearRect(0,0,this.faceCanvasBuffer.width,this.faceCanvasBuffer.height),G==null||G.drawImage(this.canvasBuffer,Math.floor(O.x),Math.floor(O.y),Math.floor(O.width),Math.floor(O.height),0,0,Math.floor(O.width),Math.floor(O.height)),!this.refWebcam||!this.faceCanvasBuffer)return;L=await yt.detectLandmarks(this.faceCanvasBuffer),D=Pb(L),this.drawDebugMarks(O,L)}if(!this.refWebcam)return;const H=Ei(this.getCapturedSelfies(),g),M=R.length,B=O!=null?O.height:0,V=O!=null?O.width:0,q=Date.now()-this.state.startTime;this.hintTriggerClient.runTick({capturedSelfies:m,currentStep:H,faceCount:M,horizontalAngle:D,faceHeight:B,faceWidth:V,manualVisible:this.state.manualVisible,videoHeight:_,videoWidth:A,requireHigherAccuracyCapture:p,faceBox:O,landmarks:L,elapsedTime:q});const $=this.hintTriggerClient.getTriggered();if(Mb.indexOf($.getType())===-1)this.props.clearCapturedSelfies(),this.capturedSelfiesLocal=[];else{const G=this.canvasBuffer.toDataURL("image/jpeg",92);G==null&&(Z(new Error("Selfie autocapture captured an empty image"),"warning",this.getSentryErrorContext(),{jira:"PER-20180"}),this.props.handleFailed("Canvas buffer data URL is empty","capture"));const Y=$.getType(),re=NN(Y),ae=re!=null&&si(m,re)==null,Ce=H&&Rc(H,b),we=(Ce==null?void 0:Ce["auto-capture-enabled"])!==!1||!x["inquiry:dynamic-selfie-config"],me=this.props.enableVideoRecording&&this.props.featureFlags["inquiry:selfie-missing-images-fix"];if(m.length===0&&this.props.featureFlags["inquiry:capture-selfie-start"])this.props.saveCapturedSelfie(ld.Start,G,ut.Auto,new Date().toISOString());else if(ae&&we)switch(Y){case Rt.CenterCapture:{this.props.saveCapturedSelfie(he.Center,G,ut.Auto,new Date().toISOString()),me&&this.capturedSelfiesLocal.push({pose:he.Center,dataUrl:G,capturedAt:new Date().toISOString(),captureMethod:ut.Auto});break}case Rt.LeftCapture:{this.props.saveCapturedSelfie(he.Left,G,ut.Auto,new Date().toISOString()),me&&this.capturedSelfiesLocal.push({pose:he.Left,dataUrl:G,capturedAt:new Date().toISOString(),captureMethod:ut.Auto});break}case Rt.RightCapture:{this.props.saveCapturedSelfie(he.Right,G,ut.Auto,new Date().toISOString()),me&&this.capturedSelfiesLocal.push({pose:he.Right,dataUrl:G,capturedAt:new Date().toISOString(),captureMethod:ut.Auto});break}}me&&Ei(this.getCapturedSelfies(),this.props.poseOrder)==null&&!this.state.hasStoppedRecording&&((Q=Re.currentClient)==null||Q.stopRecording(),this.setState({hasStoppedRecording:!0}))}this.setState(G=>({...G,activeTrigger:$,profileSize:Math.min(v,y)-8}))},this.handleManualCapture=()=>{var b,x,y,v;const{poseOrder:m}=this.props,p=Ei(this.getCapturedSelfies(),m);if((b=this.refWebcam)!=null&&b.video){const{videoHeight:_,videoWidth:A}=this.refWebcam.video;this.canvasBuffer.width=A,this.canvasBuffer.height=_;const T=this.canvasBuffer.getContext("2d",{willReadFrequently:!0,alpha:!1});T==null&&Z(new Error("Canvas getContext returned null during handleManualCapture"),"warning",this.getSentryErrorContext(),{videoEnabled:(!!this.props.enableVideoRecording).toString(),videoCaptureMethod:(x=Re.currentClient)==null?void 0:x.type}),T==null||T.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height),T==null||T.drawImage(this.refWebcam.video,0,0,A,_)}const g=this.canvasBuffer.toDataURL("image/jpeg",92);(g==null||g.length<Br)&&(Z(new Error("Selfie manual capture captured a potentially blank image"),"warning",this.getSentryErrorContext(),{videoEnabled:(!!this.props.enableVideoRecording).toString(),videoCaptureMethod:(y=Re.currentClient)==null?void 0:y.type}),this.props.handleFailed("Selfie manual capture captured a potentially blank image","capture")),p&&this.props.saveCapturedSelfie(p,g,ut.Manual,new Date().toISOString()),p&&this.props.enableVideoRecording&&this.props.featureFlags["inquiry:selfie-missing-images-fix"]&&(this.capturedSelfiesLocal.push({pose:p,dataUrl:g,capturedAt:new Date().toISOString(),captureMethod:ut.Manual}),Ei(this.getCapturedSelfies(),this.props.poseOrder)==null&&!this.state.hasStoppedRecording&&((v=Re.currentClient)==null||v.stopRecording(),this.setState({hasStoppedRecording:!0})))},this.getCapturedSelfies=()=>this.props.enableVideoRecording&&this.props.featureFlags["inquiry:selfie-missing-images-fix"]?this.capturedSelfiesLocal:this.props.capturedSelfies;const n=Ei(this.getCapturedSelfies(),t.poseOrder),r=n&&Rc(n,t.poseConfigs);this.hintTriggerClient=_N(t.poseOrder);const o=(r==null?void 0:r["auto-capture-enabled"])===!1&&!!this.props.featureFlags["inquiry:dynamic-selfie-config"],a=t.delayUntilManualCaptureMs===0,s=r!=null?r["manual-capture-delay-ms"]===0||o:t.delayUntilManualCaptureMs===0,c=Pn()||(this.props.featureFlags["inquiry:dynamic-selfie-config"]?s:a);this.state={profileSize:JN,activeTrigger:this.hintTriggerClient.getTriggered(),autoCaptureDisabled:o,hasSentSelfieData:!1,hasUnmounted:!1,manualVisible:c,videoWidthOverride:void 0,videoHeightOverride:void 0,tickCount:0,capturedVideoData:void 0,mediaRecorderSubId:void 0,hasStoppedRecording:!1,showPreloadingSpinnerVideo:!!t.enableVideoRecording,showPreloadingSpinnerForUserMedia:!1,readyToCapture:!t.enableVideoRecording,startTime:Date.now(),videoDimensions:void 0,currentStep:n};const[l,d]=Ci(),[u,h]=Ci();this.faceCanvasBuffer=l,this.cleanupFaceCanvasBuffer=d,this.canvasBuffer=u,this.cleanupCanvasBuffer=h,this.cameraInspectionSnapshots=[],this.shouldCaptureCameraInspectionSnapshots=!0,this.cameraInspectionData=void 0,this.tickCountWhenFeedIsReady=30}updatePoseManualCaptureTimer(t){var r;if(!this.props.featureFlags["inquiry:dynamic-selfie-config"]){this.props.delayUntilManualCaptureMs&&this.props.delayUntilManualCaptureMs>0&&(this.timerManualShow=window.setTimeout(()=>{this.setState({manualVisible:!0})},this.props.delayUntilManualCaptureMs||0));return}this.timerManualShow&&clearTimeout(this.timerManualShow);let n=this.props.delayUntilManualCaptureMs;if(t){const o=Rc(t,this.props.poseConfigs);n=(r=o==null?void 0:o["manual-capture-delay-ms"])!=null?r:n}n&&n>0?this.timerManualShow=window.setTimeout(()=>{this.setState({manualVisible:!0})},n):n===0&&this.setState({manualVisible:!0})}onSelfieStepChange(){var a;const{poseOrder:t}=this.props,n=Ei(this.getCapturedSelfies(),t),r=(a=this.props.poseConfigs)==null?void 0:a.find(s=>s.pose===n);if(!this.props.featureFlags["inquiry:dynamic-selfie-config"])return this.setState({currentStep:n});const o=(r==null?void 0:r["auto-capture-enabled"])===!1&&!!this.props.featureFlags["inquiry:dynamic-selfie-config"];this.setState({currentStep:n,autoCaptureDisabled:o}),r!=null&&this.setState({manualVisible:(r==null?void 0:r["manual-capture-delay-ms"])===0||o}),r!=null&&r["manual-capture-enabled"]===!1&&r["auto-capture-enabled"]!==!1?(this.setState({manualVisible:!1}),clearTimeout(this.timerManualShow)):this.updatePoseManualCaptureTimer(n)}componentDidUpdate(){var r;const{hasSentSelfieData:t}=this.state,n=Ei(this.getCapturedSelfies(),this.props.poseOrder);n!==this.state.currentStep&&this.onSelfieStepChange(),n==null&&!t&&(this.props.enableVideoRecording?this.state.hasStoppedRecording||((r=Re.currentClient)==null||r.stopRecording(),this.setState({hasStoppedRecording:!0})):this.completeSelfieScan())}componentWillUnmount(){this.setState({...this.state,hasUnmounted:!0}),clearTimeout(this.timerDetect),clearTimeout(this.timerManualShow),clearTimeout(this.timerShowSpinnerForNonVideo),clearTimeout(this.timerNarrowCanvasEnable),An.dispose(),this.props.enableVideoRecording&&Re.destroy(),this.cleanupCanvasBuffer(),this.canvasBuffer=null,this.cleanupCanvasBuffer=null,this.cleanupFaceCanvasBuffer(),this.faceCanvasBuffer=null,this.cleanupFaceCanvasBuffer=null}render(){var _;const{assets:t,buttonStyles:n,localizations:r,poseOrder:o,videoConstraints:a,handleFailed:s,debug:c,styles:l,uploadProgress:d}=this.props,{profileSize:u,activeTrigger:h,manualVisible:m,videoWidthOverride:p,videoHeightOverride:g,autoCaptureDisabled:b,currentStep:x}=this.state,y=this.props.enableVideoRecording&&((_=Re.currentClient)==null?void 0:_.type)==="stream",v=this.state.showPreloadingSpinnerVideo&&(sx()||y)||this.state.showPreloadingSpinnerForUserMedia;return i.jsxs(i.Fragment,{children:[i.jsx(Vb,{audioEnabled:this.props.audioEnabled,autoCaptureDisabled:b,assets:t,buttonStyles:n,localizations:r,currentStep:x,poseOrder:o,activeTrigger:h,videoWidthOverride:p,videoHeightOverride:g,setWebcamRef:this.setWebcamRef,videoConstraints:a,handleUserMedia:this.handleUserMedia,handleFailed:s,handleManualCapture:this.handleManualCapture,manualVisible:m,profileSize:u,debug:c,styles:l,showPreloadingSpinner:v,showPreloadingHint:v,uploadProgress:this.props.enableVideoRecording?d:void 0,enableMobilePendingExperienceForWeb:this.props.enableMobilePendingExperienceForWeb,featureFlags:this.props.featureFlags,allowNarrowCanvas:this.state.allowNarrowCanvas}),i.jsx(WN,{dimensions:this.state.videoDimensions})]})}drawDebugMarks(t,n){if(!this.props.debug)return;const r=document.getElementById("debugLandmarks"),o=this.canvasBuffer.width,a=this.canvasBuffer.height;r.width=o,r.height=a;const s=r.getContext("2d");if(s==null)return;s.globalAlpha=.4,s.drawImage(this.canvasBuffer,0,0),s.globalAlpha=1;const c=t.left,l=t.top;s.fillStyle="#000000";for(const m of n.positions)s.fillRect(m.x-2+c,m.y-2+l,4,4);const d=n.getNose()[3];s.fillStyle="#0000ff",s.fillRect(d.x-8+c,d.y-8+l,16,16),s.strokeStyle="#ff0000",s.lineWidth=8;const u=Math.min(o,a)*.4,h=Math.min(o,a);s.rect(o/2-u/2,a/2-u/2,u,u),s.stroke(),s.strokeStyle="#00ff00",s.rect(o/2-h/2,a/2-h/2,h,h),s.stroke()}initMediaRecorderClient(t,n){const r=Re.getNewClient(this.props.videoCaptureMethods);if(this.props.enableVideoRecording&&!r.isSupported()){Re.markClientError(0),this.props.handleFailed("MediaRecorder not supported","load");return}if(this.refWebcam==null){this.props.handleFailed("Webcam ref is not available","load");return}const o=r.init({stream:t,video:this.refWebcam.video,jwt:n,maxRecordingTime:QN,trackingEventsEnabled:this.props.featureFlags["inquiry:enable-te-cloud-run"],stepName:"selfie",onRecordingComplete:(a,s)=>{var c,l,d;this.state.capturedVideoData||(z.logAmplitude("selfie.video.stop",{elapsedTime:s,type:r.type,chunksLength:a.type==="upload"?(c=a.chunks)==null?void 0:c.length:0}),a.type==="upload"&&(a.chunks==null||a.chunks.length<=0)?Re.videoCanBeReattempted()&&((d=(l=this.props).handleRestartStep)==null||d.call(l)):(this.setState({capturedVideoData:a}),this.completeSelfieScan(a)))},onError:a=>{var c,l,d;const s=Re.shouldReinitializeWithUpload(a,this.props.videoCaptureMethods);Re.markClientError(),Re.destroy(),(c=this.refWebcam)!=null&&c.stream&&s?this.initMediaRecorderClient(this.refWebcam.stream,n):(d=(l=this.props).handleRestartStep)==null||d.call(l),z.logAmplitude("selfie.video.errored",{message:typeof a=="string"?a:a==null?void 0:a.message}),Z(a instanceof Error?a:new Error(`Unexpected error: ${JSON.stringify(a)}`),"error")},onStart:a=>{this.setState({showPreloadingSpinnerVideo:!1,readyToCapture:!0}),a&&!this.state.hasStoppedRecording&&(this.props.clearCapturedSelfies(),this.capturedSelfiesLocal=[]),z.logAmplitude("selfie.video.start",{isRestart:a,type:r.type})},onTimeExceeded:()=>{var a,s;z.logAmplitude("selfie.video.timeExceeded"),Ei(this.getCapturedSelfies(),this.props.poseOrder)!=null&&((s=(a=this.props).handleRestartStep)==null||s.call(a,{timeExceeded:!0}))}});Re.recordVideoAttempt(),r.startRecording(),z.logAmplitude("selfie.video.initialized",{type:r.type,attempt:Re.videoAttempts}),Bt.track({event:{type:"inquiry.video.initialize",data:{capture_method:r.type,attempt:Re.videoAttempts,step_name:"selfie"}},featureFlags:this.props.featureFlags}),this.setState({mediaRecorderSubId:o})}getSentryErrorContext(){return{tickCount:this.state.tickCount,elapsedTime:Date.now()-this.state.startTime}}}const c7=250,qb=[{trigger:new Jn(zt(or.filter(e=>e.type===Rt.Empty))),currentStep:he.Center},{trigger:new Jn(C1(or.filter(e=>e.type===Rt.Empty))),currentStep:he.Center},{trigger:new Jn(or.find(e=>e.type===Rt.Center)),currentStep:he.Center},{trigger:new Jn(or.find(e=>e.type===Rt.Center)),currentStep:he.Center}],l7=[...qb,{trigger:new Jn(or.find(e=>e.type===Rt.Left)),currentStep:he.Left},{trigger:new Jn(or.find(e=>e.type===Rt.Right)),currentStep:he.Right},{trigger:new Jn(or.find(e=>e.type===Rt.Verifying)),currentStep:void 0}],d7=[...qb,{trigger:new Jn(or.find(e=>e.type===Rt.Verifying)),currentStep:void 0}],u7=({assets:e,localizations:t,requireSelfieMatch:n,styles:r,featureFlags:o})=>{const a=n===Cn.OnlyCenter?d7:l7,s=n===Cn.OnlyCenter?[he.Center]:[he.Center,he.Left,he.Right],[c,l]=f.useState(0);f.useEffect(()=>{const h=setInterval(()=>{l(m=>m+1)},2e3);return()=>{clearInterval(h)}},[]);const{trigger:d,currentStep:u}=a[c%a.length];return i.jsx(Vb,{assets:e,localizations:t,currentStep:u,activeTrigger:d,videoWidthOverride:void 0,videoHeightOverride:void 0,setWebcamRef:()=>{},videoConstraints:{},handleUserMedia:()=>{},handleFailed:()=>{},handleManualCapture:()=>{},manualVisible:!0,profileSize:c7,isEditorPreview:!0,styles:r,poseOrder:s,audioEnabled:!1,enableMobilePendingExperienceForWeb:!1,autoCaptureDisabled:!1,featureFlags:o})};function m7(e){var v;const[t,{enable:n,disable:r}]=st(),[o,a]=f.useState(!1),s=ii(),{modal:c,titleStyle:l,textStyle:d}=(v=s==null?void 0:s.base)!=null?v:{},u=s==null?void 0:s.buttons,h=hf({orderedPoses:e.orderedPoses,requireSelfieMatch:e.requireSelfieMatch}),m=Ei(e.capturedSelfies,h)==null,p=!e.enableVideoRecording||e.enableVideoRecording&&o,{t:g}=K(),[b,x]=f.useState(!1),y=Zi();return f.useEffect(()=>{if(m&&p&&e.enableMobilePendingExperienceForWeb){const _=setTimeout(()=>{y()&&x(!0)},Eb);return()=>clearTimeout(_)}},[m,p]),b?i.jsx(GN,{assets:e.assets,localizations:e.mobileExperienceLocalizations,textVerticalPosition:e.mobileExperienceVerticalPosition}):i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:t,onClose:r,styles:c,"data-test":"inquiry-selfie-record-view__slow-detection-dialog","aria-labelledby":"inquiry-selfie-record-view__slow-detection-dialog--title","aria-describedby":"inquiry-selfie-record-view__slow-detection-dialog--description",children:[i.jsx(dt,{id:"inquiry-selfie-record-view__slow-detection-dialog--title",styles:l,children:i.jsx(J,{children:g("selfie.record.slow-detection-title")})}),i.jsx(ot,{id:"inquiry-selfie-record-view__slow-detection-dialog--description",styles:d,children:i.jsx(J,{children:g("selfie.record.slow-detection-prompt")})}),i.jsx(We,{height:2}),i.jsx(ge,{id:"inquiry-selfie-record-view__slow-detection-dialog--wait-btn","data-test":"inquiry-selfie-record-view__slow-detection-dialog--wait-btn",onClick:r,styles:u==null?void 0:u[ne.Primary],children:g("selfie.record.slow-detection-wait")}),u==null&&i.jsx(We,{height:1}),i.jsx(ge,{id:"inquiry-selfie-record-view__slow-detection-dialog--try-another-device-btn","data-test":"inquiry-selfie-record-view__slow-detection-dialog--try-another-device-btn",onClick:e.handleSlowFaceDetection,buttonType:ne.Secondary,styles:u==null?void 0:u[ne.Secondary],children:g("selfie.record.slow-detection-try-another-device")})]}),e.localizations.title?i.jsxs(i.Fragment,{children:[i.jsx(dt,{styles:l,children:e.localizations.title}),i.jsx(We,{height:2})]}):null,e.isEditorPreview?i.jsx(u7,{assets:e.assets,localizations:e.localizations,requireSelfieMatch:e.requireSelfieMatch,styles:s,buttonStyles:u,featureFlags:e.featureFlags}):i.jsx(i.Fragment,{children:e.requireSelfieMatch==="configurable_poses"?i.jsx(qN,{assets:e.assets,delayUntilManualCaptureMs:e.webCameraManualCaptureDelayMs,detectTimeout:e.detectTimeout,enableVideoRecording:e.enableVideoRecording,localizations:e.localizations,stepOrder:h,requireHigherAccuracyCapture:e.requireHigherAccuracyCapture,styles:s,handleComplete:e.handleComplete,handleFailed:e.handleFailed,handleRestartStep:e.handleRestartStep,handleSlowFaceDetection:e.handleSlowFaceDetection,videoConstraints:e.videoConstraints,videoCaptureMethods:e.videoCaptureMethods,videoSessionJwt:e.videoSessionJwt,enableMobilePendingExperienceForWeb:e.enableMobilePendingExperienceForWeb}):i.jsx(Bb,{audioEnabled:e.audioEnabled,assets:e.assets,localizations:e.localizations,capturedSelfies:e.capturedSelfies,saveCapturedSelfie:e.saveCapturedSelfie,clearCapturedSelfies:e.clearCapturedSelfies,delayUntilManualCaptureMs:e.webCameraManualCaptureDelayMs,handleComplete:_=>{e.enableVideoRecording&&a(!0),e.handleComplete(_)},handleFailed:e.handleFailed,handleSlowFaceDetection:n,handleRestartStep:e.handleRestartStep,detectTimeout:e.detectTimeout,poseOrder:h,poseConfigs:e.poseConfigs,enableVideoRecording:e.enableVideoRecording,videoConstraints:e.videoConstraints,requireHigherAccuracyCapture:e.requireHigherAccuracyCapture,featureFlags:e.featureFlags,styles:s,buttonStyles:u,uploadProgress:e.uploadProgress,videoSessionJwt:e.videoSessionJwt,videoCaptureMethods:e.videoCaptureMethods,enableMobilePendingExperienceForWeb:e.enableMobilePendingExperienceForWeb})})]})}const h7=1e3,p7=e=>{const{inquiry:t,config:n,capturedSelfies:r,videoConstraints:o,audioConstraints:a,featureFlags:s,styles:c}=e,[l]=K(),d=Xt("inquiry:dynamic-selfie-config"),u=f.useMemo(()=>Re.shouldInitializeVideo(n==null?void 0:n["enabled-capture-file-types"],s),[]);f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}try{window.parent.Cypress&&m("Push to stillfie in Cypress tests!","load")}catch{}},[]),f.useEffect(()=>{try{s!=null&&s["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&z.logAmplitude("selfie.record-page.entered",{})}catch{}},[]);const h=async y=>{var _,A;e.clearMessages();const v=d&&((A=(_=e.config)==null?void 0:_["pose-configs"])==null?void 0:A.map(T=>T["allow-review"]).some(T=>T===!0));try{if(N.onEvent(Oe.SelfieCameraCapture),v)return e.updateCameraInspectionData(y.cameraInspectionData),e.saveCaptureStartedAt(y.captureStartedAt),setTimeout(()=>e.history.replace("/inquiry/selfie/check"),h7);await e.selfieSubmit({inquiry:t,config:n,capturedSelfiesSubmitData:y,debugForcedStatus:e.debugForcedStatus,history:e.history,t:l,featureFlags:s})}catch(T){T instanceof mn||e.showMessage(l("errors.network"),!0),e.clearCapturedSelfies(),e.history.replace(`/inquiry/selfie/${he.Center}/prompt`)}},m=(y,v)=>{var A,T;const _=y instanceof Error?y.message:typeof y=="string"?y:"";z.logAmplitude("selfie.record-page.errored",{state:v,errorMessage:_,tfBackend:yt.getBackend()}),e.showMessage(l("selfie.record.failed-video"),!0),e.saveIsWebGLIncompatible(!0),y instanceof Error?(v==="load"&&N.onEvent(Oe.LoadCameraFailed,{error:y.name,message:y.message}),Z(y,"warning",{state:v},{jira:"PER-10182",videoEnabled:u.toString(),videoCaptureMethod:(A=Re.currentClient)==null?void 0:A.type})):(v==="load"&&N.onEvent(Oe.LoadCameraFailed,{message:y}),Z(new Error(y),"warning",{state:v},{jira:"PER-10182",videoEnabled:u.toString(),videoCaptureMethod:(T=Re.currentClient)==null?void 0:T.type})),Re.currentClient!=null&&v==="capture"&&Re.markClientError(),setTimeout(()=>{e.history.goBack()},500)},p=()=>{e.saveIsWebGLIncompatible(!0),e.history.goBack()},g=(y={})=>{const{timeExceeded:v}=y;e.clearCapturedSelfies(),e.showMessage(l(v?"selfie.record.recording-timeout":"errors.network"),!0),e.history.goBack()};if(t==null||n==null)return null;const b=zs(t),x=Re.getVideoCaptureMethods(n==null?void 0:n["enabled-capture-file-types"],n==null?void 0:n["video-capture-methods"]);return i.jsx(ru,{value:c,children:i.jsx(m7,{audioEnabled:u&&!!a,assets:n.assets["record-page"],capturedSelfies:r,saveCapturedSelfie:e.saveCapturedSelfie,clearCapturedSelfies:e.clearCapturedSelfies,detectTimeout:Nb,enableVideoRecording:u,poseConfigs:n["pose-configs"],featureFlags:s,handleComplete:h,handleFailed:m,handleRestartStep:g,handleSlowFaceDetection:p,localizations:n.localizations["capture-page"],orderedPoses:n["ordered-poses"],requireHigherAccuracyCapture:b,requireSelfieMatch:cs(t),uploadProgress:e.uploadProgress,videoCaptureMethods:x,videoConstraints:o,videoSessionJwt:n["video-session-jwt"],webCameraManualCaptureDelayMs:n["web-camera-manual-capture-delay-ms"],enableMobilePendingExperienceForWeb:!!n["enable-mobile-pending-experience-for-web"],mobileExperienceLocalizations:n.localizations["pending-page"],mobileExperienceVerticalPosition:n["pending-page-text-vertical-position"]})})},f7=e=>({capturedSelfies:e.verification.capturedSelfies,config:hi({state:e,stepType:Ae.Selfie}),styles:Xs(e.inquiry),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,videoConstraints:e.verification.videoConstraints,audioConstraints:e.verification.audioConstraints,uploadProgress:e.verification.uploadProgress}),g7={clearCapturedSelfies:Ys,clearMessages:Lt,routeToNextStep:Tt,selfieSubmit:Gd,saveCapturedSelfie:Ea,saveIsWebGLIncompatible:of,updateCameraInspectionData:md,saveCaptureStartedAt:ty,showMessage:se},b7=ke(f7,g7),C7=b7(p7),x7=qn()(C7),v7=C.div.withConfig({displayName:"InquirySupportCameraView__Container",componentId:"sc-hsbo74-0"})(["display:flex;flex-direction:column;"]),y7=C("div").withConfig({displayName:"InquirySupportCameraView__Header",componentId:"sc-hsbo74-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),I7=e=>{var c,l,d,u;const[t]=K(),{base:n,buttons:r}=Xi(),[o,a]=f.useState(void 0);if(f.useEffect(()=>{_p(e.requestedMicrophone).then(h=>a(h))},[]),o==null)return null;const s=o?t("support-camera.prompt-issues"):e.requestedMicrophone?t("support-camera.prompt-permissions-camera-and-mic"):t("support-camera.prompt-permissions");return i.jsxs(v7,{children:[i.jsxs(y7,{children:[i.jsx(dt,{styles:n==null?void 0:n.titleStyle,children:e.requestedMicrophone?t("support-camera.title-camera-and-mic"):t("support-camera.title")}),i.jsx(ot,{styles:n==null?void 0:n.textStyle,children:i.jsx(J,{children:s})})]}),i.jsx(Kt,{url:"cameraSupportPictographUrl",height:"cameraSupportPictographHeight",children:i.jsx($e,{"aria-label":"pictograph showing camera error",children:i.jsx(ye,{$primaryColor:k((c=n==null?void 0:n.fill)==null?void 0:c.color),$highlightColor:k((l=n==null?void 0:n.fill)==null?void 0:l.highlightColor),$backgroundColor:k((d=n==null?void 0:n.fill)==null?void 0:d.backgroundColor),$strokeColor:k((u=n==null?void 0:n.stroke)==null?void 0:u.color),children:i.jsx(kn,{})})})}),i.jsx(ft,{children:i.jsx(ge,{styles:r==null?void 0:r[ne.Primary],onClick:e.handleContinue,id:"support-camera__button--handle-continue","data-test":"support-camera__button--handle-continue",children:e.requestedMicrophone?t("support-camera.button-camera-and-mic"):t("support-camera.button")})})]})},S7=e=>{const t=()=>{e.routeToNextStep(e.inquiry)};return i.jsx(pr,{value:e.styles,children:i.jsx(I7,{requestedMicrophone:e.requestedMicrophone,handleContinue:t})})};function w7(e){return{inquiry:e.inquiry.inquiry,styles:pi(e)}}const _7={routeToNextStep:Tt},R7=ke(w7,_7),lh=R7(S7),A7=e=>{const{inquiry:t,inquiryTemplateVersion:n,currentSession:r,uiStatus:o,debugForcedStatus:a,untouch:s,collectedData:c,featureFlags:l}=e,d=Dt(),{t:u}=K(),{error:h,callback:m}=It(async(x,y)=>{s(t.attributes["next-step"].name,...Object.keys(x));try{await e.transitionInquiry({inquiry:t,componentParams:x,fromComponent:y,workflowInitialVariables:{debugForcedStatus:a},featureFlags:l})}catch(v){const _=j7(v);if(_!=null){const A=x1(T=>T.message,_);throw new Te.SubmissionError(A)}else throw v}},[t,a]),{error:p,callback:g}=It(async x=>{await e.transitionInquiry({inquiry:t,componentParams:{},fromComponent:x,workflowInitialVariables:{debugForcedStatus:a},featureFlags:l})},[t,a]),b=f.useCallback(()=>{Wr(t,c)},[t,c]);return Et({error:h||p,onError:x=>{var y;switch(x.status){case 409:((y=x.errors)==null?void 0:y[0].code)==="pending_transition_error"?e.showMessage(u("errors.network")):e.showMessage(u("errors.inquiry-conflict"));return;default:e.showMessage("Unexpected error, please try again.")}},onNetworkError:()=>e.showMessage("Unexpected error, please try again.")}),f.useEffect(()=>{if(t==null||t.attributes["next-step"].type!==Ae.Ui)return;const{components:x}=t.attributes["next-step"].config;Sd(t)&&x.length===0&&vi(t)&&b()},[t]),f.useEffect(()=>{t==null&&N.redirectToStart()},[]),Sa.useAsyncEffect(()=>{if(t==null)return;const x=wi(t);(x===an.BACKGROUND||x===an.BLOCKING)&&e.pollInquiry(t).catch(()=>{e.showMessage(u("errors.network"),!0)})},[t]),t==null?null:i.jsx(gr,{inquiry:t,inquiryTemplateVersion:n,currentSession:r,uiStatus:o,onTransitionSubmit:m,onTransitionAction:g,onComplete:b,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:d.push,showMessage:e.showMessage,setComponent:e.setComponent,featureFlags:l})};function T7(e){return{debugForcedStatus:e.test.forcedStatus,inquiry:e.inquiry.inquiry,inquiryTemplateVersion:e.inquiry.inquiryTemplateVersion,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const E7={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setCachedInquiryTransitionParams:sf,setComponent:Ki,showMessage:se,transitionInquiry:xd,untouch:Te.untouch,pollInquiry:jn},k7=ke(T7,E7),N7=k7(A7);function j7(e){var t;if(e instanceof pt&&e.status===422&&((t=e.errors)==null?void 0:t[0].title)==="Record invalid"&&typeof e.errors[0].details=="object")return e.errors[0].details}function P7(e){return{inquiry:e.inquiry.inquiry,component:yd(e),currentSession:e.inquiry.currentSession,nextInquiry:e.verifyWithPersona.nextInquiry,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const D7={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setComponent:Ki,showMessage:se,routeToNextStep:Tt},O7=ke(P7,D7),L7=e=>{var y,v;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s,nextInquiry:c,routeToNextStep:l}=e,d=Dt(),[u]=K(),h=(v=(y=n==null?void 0:n.attributes)==null?void 0:y.pages)==null?void 0:v.error,m=h==null?void 0:h["ui-step"],p=h==null?void 0:h["component-name-mapping"];f.useEffect(()=>{z.logAmplitude("reusable-persona.verify.error-page.entered")},[]);const{error:g,callback:b}=It(async(_,A)=>{var T;if(A===(p==null?void 0:p["continue-button"]))if(z.logAmplitude("reusable-persona.verify.error-page.dismissed"),N.isReusablePersonaPopup){(T=window.opener)==null||T.focus(),window.close();return}else return l(c)},[c,p]),x=f.useCallback(()=>{Wr(t,a)},[t,a]);return Et({error:g,onError:()=>{e.showMessage(u("error.message"))},onNetworkError:()=>e.showMessage(u("errors.network"))}),m==null||t==null?null:i.jsx(gr,{inquiry:t,nextStep:m,currentSession:r,uiStatus:o,onTransitionSubmit:b,onTransitionAction:async()=>{},onComplete:x,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:d.push,showMessage:e.showMessage,setComponent:e.setComponent})},F7=O7(L7),M7=e=>{var _,A;const{inquiry:t,component:n,currentSession:r,debugForcedStatus:o,uiStatus:a,collectedData:s,featureFlags:c,transitionInquiryFromVerifyWithPersonaStep:l}=e,d=Dt(),[u]=K(),h=(A=(_=n==null?void 0:n.attributes)==null?void 0:_.pages)==null?void 0:A["passkey-authentication"],m=h==null?void 0:h["ui-step"],p=h==null?void 0:h["component-name-mapping"];f.useEffect(()=>{z.logAmplitude("reusable-persona.verify.passkey-authentication-page.entered")},[]);const g=Ke(T=>T.inquiry.cachedInquiryTransitionParams),{error:b,loading:x,callback:y}=It(async(T,R)=>{var O,D;if(R===(p==null?void 0:p["confirm-button"])){z.logAmplitude("reusable-persona.verify.passkey-authentication-page.confirm-btn-clicked");const L=await Vl((await te.postResourceSingletonActionNew(S.Persona,"authentication-initiate")).meta);return(O=L==null?void 0:L.response)!=null&&O.userHandle?(z.logAmplitude("reusable-persona.verify.passkey-authentication-page.submitted"),await l(t,L.response.userHandle,JSON.stringify(L),n.name,{"debug-forced-status":o},g,!1)):(e.setNextInquiry({inquiry:t}),d.replace("/inquiry/verify-with-persona/error"))}else{if(R===(p==null?void 0:p["cancel-button"]))return c["inquiry:enable-reusable-personas-verify-only-flow"]||c["inquiry:enable-reusable-personas-new-verify-flow-with-create"]?z.logAmplitude("reusable-persona.verify.passkey-authentication-page.skip-btn-clicked"):z.logAmplitude("reusable-persona.verify.passkey-authentication-page.not-now-btn-clicked"),N.isReusablePersonaPopup?((D=window.opener)==null||D.focus(),window.close()):d.goBack();if(R===(p==null?void 0:p["create-persona-button"]))return z.logAmplitude("reusable-persona.verify.passkey-authentication-page.create-persona-btn-clicked"),d.replace("/inquiry/create-persona/passkey-registration")}},[m,p,t,c,o,g]),v=f.useCallback(()=>{Wr(t,s)},[t,s]);return Et({error:b,onError:()=>{e.setNextInquiry({inquiry:t}),d.replace("/inquiry/verify-with-persona/error")},onNetworkError:()=>e.showMessage(u("errors.network"))}),m==null||t==null?null:i.jsx(gr,{inquiry:t,nextStep:m,currentSession:r,uiStatus:x?tn.Blocked:a,onTransitionSubmit:y,onTransitionAction:async()=>{},onComplete:v,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:d.push,showMessage:e.showMessage,setComponent:e.setComponent})};function V7(e){return{inquiry:e.inquiry.inquiry,component:yd(e),currentSession:e.inquiry.currentSession,debugForcedStatus:e.test.forcedStatus,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const B7={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setComponent:Ki,setNextInquiry:vs,showMessage:se,transitionInquiryFromVerifyWithPersonaStep:_f},q7=ke(V7,B7),U7=q7(M7),H7=e=>({uiStatus:e.ui.status}),$7={loadVerifyWithPersonaPopupFromCode:Cy,setUiReady:mt,showMessage:se},G7=ke(H7,$7),W7=e=>{const{i18n:t,t:n}=K();return fr({loader:async()=>{const{uiStatus:r,loadVerifyWithPersonaPopupFromCode:o,setUiReady:a}=e;await o(t,N.inquiryParams.code,N.inquiryParams.component),r===tn.Initializing&&(N.onEvent(Oe.Ready),a())},deps:[],onError:()=>e.showMessage(n("errors.network")),onNetworkError:()=>e.showMessage(n("errors.network"))}),i.jsx(vn,{})},z7=G7(W7);function Y7(e){return{inquiry:e.inquiry.inquiry,component:yd(e),currentSession:e.inquiry.currentSession,nextInquiry:e.verifyWithPersona.nextInquiry,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const K7={handleLanguageChange:Hr,openConfirmCancelDialog:mr,setComponent:Ki,showMessage:se,routeToNextStep:Tt},Q7=ke(Y7,K7),Z7=e=>{var y,v;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s,nextInquiry:c,routeToNextStep:l}=e,d=Dt(),[u]=K(),h=(v=(y=n==null?void 0:n.attributes)==null?void 0:y.pages)==null?void 0:v.success,m=h==null?void 0:h["ui-step"],p=h==null?void 0:h["component-name-mapping"];f.useEffect(()=>{z.logAmplitude("reusable-persona.verify.success-page.entered")},[]);const{error:g,callback:b}=It(async(_,A)=>{var T;if(A===(p==null?void 0:p["continue-button"]))if(z.logAmplitude("reusable-persona.verify.success-page.dismissed"),N.isReusablePersonaPopup){(T=window.opener)==null||T.focus(),window.close();return}else return l(c)},[c,p]),x=f.useCallback(()=>{Wr(t,a)},[t,a]);return Et({error:g,onError:()=>{e.showMessage(u("error.message"))},onNetworkError:()=>e.showMessage(u("errors.network"))}),m==null||t==null?null:i.jsx(gr,{inquiry:t,nextStep:m,currentSession:r,uiStatus:o,onTransitionSubmit:b,onTransitionAction:async()=>{},onComplete:x,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:d.push,showMessage:e.showMessage,setComponent:e.setComponent})},J7=Q7(Z7),X7=()=>(f.useEffect(()=>{window.location.replace("/404")}),i.jsx("div",{})),ej=C("div").withConfig({displayName:"VerifyDatabaseFailedView__Header",componentId:"sc-o4blb-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function tj(e){const{handleContinue:t,verification:n}=e,[r]=K();return i.jsxs("div",{children:[i.jsx(nj,{t:r,displayErrors:n.attributes["failed-checks"]}),i.jsx(ft,{children:i.jsx(ge,{id:"database-failed__continue",buttonType:ne.Primary,onClick:t,children:r("database.failed.btn-submit")})})]})}const nj=({t:e,displayErrors:t})=>{const n=t.filter(s=>Object.values(bl).includes(s));let r,o,a;if(n.length===0)r=e("database.failed.failed-checks.generic.title"),o=e("database.failed.failed-checks.generic.description"),a=i.jsx(Wl,{});else{const s=n[0];switch(s){case bl.AddressDeliverableDetection:r=e("database.failed.failed-checks.address-deliverable-detection.title"),o=e("database.failed.failed-checks.address-deliverable-detection.description"),a=i.jsx(bp,{});break;default:ct(s)}}return i.jsxs(i.Fragment,{children:[i.jsxs(ej,{children:[i.jsx(et,{children:i.jsx(J,{children:r})}),i.jsx(qe,{children:i.jsx(J,{children:o})})]}),i.jsx($e,{"aria-label":"verification failed pictograph",children:i.jsx(ye,{children:a})})]})},ij=e=>(f.useEffect(()=>{(e.inquiry==null||e.verification==null)&&N.redirectToStart()},[]),e.inquiry==null||e.verification==null?null:i.jsx(tj,{handleContinue:()=>e.routeToNextStep(e.inquiry,jt),verification:e.verification}));function rj(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const oj={routeToNextStep:Gt},aj=ke(rj,oj),sj=aj(ij),cj=C("div").withConfig({displayName:"VerifyDatabasePendingView__Container",componentId:"sc-1r1zvtv-0"})(["",""],e=>e.asOverlay&&W(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"])),lj=C("div").withConfig({displayName:"VerifyDatabasePendingView__Header",componentId:"sc-1r1zvtv-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),dj=C("div").withConfig({displayName:"VerifyDatabasePendingView__AnimationContainer",componentId:"sc-1r1zvtv-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],F.base*8);function uj({asOverlay:e=!1}){const[t]=K();return i.jsxs(cj,{asOverlay:e,children:[!e&&i.jsxs(lj,{children:[i.jsx(et,{children:t("database.pending.title")}),i.jsx(qe,{children:t("database.pending.description")})]}),i.jsx(dj,{children:i.jsx(Lo,{icon:"verification"})})]})}const mj=e=>{const t=Dt(),[n]=K(),{processingDisplayStyle:r}=f.useContext(tt),o=r===ka.Overlay;return f.useEffect(()=>{const{verification:a,inquiry:s}=e;if(a==null||s==null){N.redirectToStart();return}(async()=>{try{await e.pollVerification({verification:a,history:t,handleFailed:c=>{const l=c.included.find(d=>d.id===c.data.relationships.inquiry.data.id);l.attributes["next-step"].type===w.VerificationDatabase?t.push("/verify/database/failed"):e.routeToNextStep(l)},featureFlags:e.featureFlags})}catch{e.showMessage(n("errors.network"),!0)}})()},[]),e.verification==null?null:i.jsx(uj,{asOverlay:o})};function hj(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification,featureFlags:e.inquiry.featureFlags}}const pj={pollVerification:Do,routeToNextStep:Gt,showMessage:se},fj=ke(hj,pj),gj=fj(mj),bj=C("div").withConfig({displayName:"LocationSearchInput__DropdownWrapper",componentId:"sc-g9rhkb-0"})(["position:relative;margin-bottom:","px;& > div{margin-bottom:0;}"],F.base*2),Cj=C("div").withConfig({displayName:"LocationSearchInput__DropdownContainer",componentId:"sc-g9rhkb-1"})(["background-color:",";border:1px solid ",";position:absolute;z-index:",";width:100%;",""],({theme:e})=>e.colorDropdownBackground,Be.gray20,At.dropdown,({openUpwards:e})=>e&&`bottom: ${Vi.input}`),Ub=C("div").withConfig({displayName:"LocationSearchInput__DropdownItem",componentId:"sc-g9rhkb-2"})(["cursor:pointer;padding:","px;&:hover,&:focused{background-color:",";}",";"],F.base,({theme:e})=>e.colorDropdownOption,e=>e.active&&W(["background-color:",";"],({theme:t})=>t.colorDropdownOption));class Qc extends f.Component{constructor(){super(...arguments),this.state={isFocused:!1},this.renderSuggestions=({getInputProps:t,suggestions:n,getSuggestionItemProps:r,loading:o})=>{const{onBlur:a,onChange:s,onFocus:c,input:l,...d}=this.props,{isFocused:u}=this.state,m=(u?n:[]).map(p=>f.createElement(Ub,{...r(p,{key:p.description,active:p.active}),key:p.placeId},p.description));return i.jsxs(bj,{children:[i.jsx(Zn,{id:l.name,input:l,...t({name:l.name,placeholder:"Address",onBlur:this.handleInputBlur,onFocus:this.handleInputFocus}),...d}),i.jsx(xj,{loading:o,children:m})]})},this.handleAutocompleteError=t=>{[google.maps.places.PlacesServiceStatus.ZERO_RESULTS,google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR,google.maps.places.PlacesServiceStatus.REQUEST_DENIED,google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT].includes(t)||Z(new Error(`Google Maps API returned error with status: ${t}`))},this.handleChange=t=>{this.props.input.onChange(t)},this.handleSelect=async(t,n)=>{if(!n)return;let r;try{r=await zf(n)}catch(c){this.handleAutocompleteError(c)}const o=r[0].address_components,a=(c,l=!1)=>{const d=o.filter(u=>u.types.indexOf(c)!==-1);return d.length>0?l?d[0].short_name:d[0].long_name:""},s=a("street_number");s?(this.props.boundChangeFormValue(je.AddressStreet1,[s,a("route")].filter(c=>c).join(" ")),this.props.boundChangeFormValue(je.AddressStreet2,a("subpremise"))):this.props.boundChangeFormValue(je.AddressStreet1,[a("subpremise"),a("route")].filter(c=>c).join(" ")),this.props.boundChangeFormValue(je.AddressCity,a("locality")||a("sublocality_level_1")||a("administrative_area_level_2")||a("neighborhood")),this.props.boundChangeFormValue(je.AddressSubdivision,a("administrative_area_level_1")),this.props.boundChangeFormValue(je.AddressPostalCode,a("postal_code"))},this.handleInputBlur=t=>{this.setState({isFocused:!1}),this.props.input.onBlur&&this.props.input.onBlur(t)},this.handleInputFocus=t=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(t)}}render(){var o,a;const{selectedCountryCode:t,latLng:n}=this.props;let r;return n&&((a=(o=window.google)==null?void 0:o.maps)!=null&&a.LatLng)?r={componentRestrictions:{country:t},location:new window.google.maps.LatLng(n),radius:4e3}:r={componentRestrictions:{country:t}},i.jsx(Ss,{onChange:this.handleChange,onError:this.handleAutocompleteError,value:this.props.input.value,onSelect:this.handleSelect,searchOptions:r,googleCallbackName:"onGoogleMapsLoaded",children:this.renderSuggestions})}}const xj=({loading:e,children:t})=>{const[n,r]=f.useState(!1),o=f.useRef(),a=f.Children.count(t);return f.useLayoutEffect(()=>{if(o.current==null||o.current.offsetParent==null)return;const c=o.current.offsetParent.getBoundingClientRect().bottom+o.current.getBoundingClientRect().height;r(document.documentElement.clientHeight<c)},[a]),a===0?null:i.jsxs(Cj,{ref:o,openUpwards:n,children:[e&&i.jsx(Ub,{active:!1,children:"Loading..."}),t]})},fi={autocompleteClosed:[bt("Fill out the details of your current address",()=>!1)],addressStreet1:[bt("Try a shorter street address format",dS(80)),bt("Your current street address is required",Rn)],addressCityI18n:[],addressPostalCode:[],addressSubdivision:[],addressPostalCodeGB:[bt("Please enter your full postal code",Rn),bt("Please enter your full postal code",ur(H3))],addressCityUs:bt("The city of your current address is required",Rn),addressState:bt("The state of your current address is required",Rn),addressZipCode:[bt("Enter your current ZIP or postal code to verify your address",Rn),bt("The ZIP code you entered is invalid",ur(U3))]};class vj extends f.Component{constructor(){var t,n;super(...arguments),this.state={manualInputOpen:!((n=(t=window.google)==null?void 0:t.maps)!=null&&n.places)},this.handleAddressChange=(r,o)=>{this.props.boundChangeFormValue(r,o),this.setState({manualInputOpen:!0})},this.handleOpenManualInput=()=>{this.setState({manualInputOpen:!0})},this.renderCountryOrderedAddress=()=>{const{selectedCountryCode:r,disabled:o,lockedAttributes:a,t:s,theme:c}=this.props,l=i.jsx(Te.Field,{autoComplete:"address-line2",name:"address-street-2",component:Zn,disabled:o||(a==null?void 0:a[je.AddressStreet1]),type:"text",placeholder:s("form.address.street-2")}),d=i.jsx(Te.Field,{autoComplete:"address-level2",name:je.AddressCity,component:Zn,disabled:o||(a==null?void 0:a[je.AddressCity]),type:"text",placeholder:s("form.address.city"),validate:r==="US"?fi.addressCityUs:fi.addressCityI18n}),u=i.jsx(Ij,{selectedCountryCode:r,disabled:o||!!(a!=null&&a[je.AddressSubdivision]),t:s,theme:c});return this.getFieldOrder(r,this.getStreet1Field(),l,d,u,this.getPostalCodeField()).map((m,p)=>i.jsx("div",{className:"row",children:m.map((g,b)=>i.jsx("div",{className:"col-sm-12",children:g},b))},p))}}render(){const{t,theme:{inputStyle:n}}=this.props;return i.jsxs(li,{children:[n===Pt.Outlined&&i.jsx("label",{htmlFor:je.AddressStreet1,children:t("form.address.label")}),this.renderAddressFields()]})}renderAddressFields(){const{selectedCountryCode:t,disabled:n,forceOpen:r,t:o,theme:{inputStyle:a},addressAutocompleteMethod:s}=this.props;if(this.state.manualInputOpen||r||s===la.None)return this.renderCountryOrderedAddress();{const c=a===Pt.Outlined?o("form.address.placeholder",{context:t}):o("form.address.label");return i.jsxs("div",{children:[i.jsx(Te.Field,{selectedCountryCode:t,name:this.getAutocompleteInputName(),boundChangeFormValue:this.handleAddressChange,component:Qc,disabled:n,type:"text",validate:fi.autocompleteClosed,latLng:this.props.latLng,placeholder:c}),i.jsx("a",{id:"address_input_section__manual_edit","data-test":"address_input_section__manual_edit",onClick:this.handleOpenManualInput,tabIndex:0,children:o("form.address.edit-address-manually")})]})}}getStreet1Field(){const{addressAutocompleteMethod:t,selectedCountryCode:n,disabled:r,lockedAttributes:o,t:a}=this.props;return this.getAutocompleteInputName()===je.AddressStreet1&&t===la.GoogleMaps?i.jsx(Te.Field,{autoComplete:"address-line1",selectedCountryCode:n,name:je.AddressStreet1,disabled:r||o&&o[je.AddressStreet1],placeholder:a("form.address.street-1"),type:"text",validate:fi.addressStreet1,boundChangeFormValue:this.props.boundChangeFormValue,component:Qc,latLng:this.props.latLng}):i.jsx(Te.Field,{autoComplete:"address-line1",name:je.AddressStreet1,disabled:r||o&&o[je.AddressStreet1],placeholder:a("form.address.street-1"),type:"text",validate:fi.addressStreet1,component:Zn})}getPostalCodeField(){const{selectedCountryCode:t,disabled:n,lockedAttributes:r,t:o}=this.props;let a;switch(t){case"US":a=fi.addressZipCode;break;case"GB":a=fi.addressPostalCodeGB;break;default:a=fi.addressPostalCode;break}return this.getAutocompleteInputName()===je.AddressPostalCode?i.jsx(Te.Field,{autoComplete:"postal-code",selectedCountryCode:t,name:je.AddressPostalCode,disabled:n||r&&r[je.AddressPostalCode],placeholder:o("form.address.postal-code"),type:"text",validate:a,boundChangeFormValue:this.props.boundChangeFormValue,component:Qc,latLng:this.props.latLng}):i.jsx(Te.Field,{autoComplete:"postal-code",name:je.AddressPostalCode,disabled:n||r&&r[je.AddressPostalCode],placeholder:o("form.address.postal-code"),type:"text",validate:a,boundChangeFormValue:this.props.boundChangeFormValue,component:Zn})}getFieldOrder(t,n,r,o,a,s){switch(t){case"AR":case"GL":case"IS":return[[n],[r],[s,o]];case"AT":case"BE":case"DK":return[[n,r],[s,o]];case"BR":case"CR":return[[n,r],[o,a],[s]];case"CA":return[[r,n],[o,a,s]];case"CN":return[[r],[n,o],[a,s]];case"IT":return[[n,r],[s,o,a]];case"AU":case"GB":case"PH":case"US":return[[n,r],[o,a,s]];case"FI":case"FR":case"DE":case"IL":return[[n,r],[s,o]];case"JP":case"KR":return[[n,r],[o,s]];case"IN":return[[r],[n],[o,s]];case"FJ":return[[n,r],[o]];case"HK":return[[r],[n],[o]];case"EE":case"CZ":case"TW":case"ID":default:return[[n,r],[o,s]]}}getAutocompleteInputName(){return Hs.includes(this.props.selectedCountryCode)?je.AddressPostalCode:je.AddressStreet1}}const yj=Ml(vj);function Ij({selectedCountryCode:e,disabled:t,t:n,theme:r}){return e==="US"&&r.usStateInputMethod===Qs.Select?i.jsxs(Te.Field,{autoComplete:"address-level1",name:je.AddressSubdivision,component:tg,disabled:t,type:"text",placeholder:n("form.address.province-us"),validate:fi.addressState,children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:n("form.address.province-us")}),Object.keys(Cs).map(o=>i.jsx("option",{value:Cs[o],children:o},o))]}):i.jsx(Te.Field,{autoComplete:"address-level1",name:je.AddressSubdivision,component:Zn,disabled:t,type:"text",placeholder:n(e==="US"?"form.address.province-us":"form.address.province"),validate:e==="US"?fi.addressState:fi.addressSubdivision})}const Sj=C("div").withConfig({displayName:"ThemedMaskedInput__FormError",componentId:"sc-lqknb0-0"})(["",""],jo),dh=C("div").withConfig({displayName:"ThemedMaskedInput__Container",componentId:"sc-lqknb0-1"})(["position:relative;"]),wj=C(Ds).withConfig({displayName:"ThemedMaskedInput__StyledThemedMaskedInput",componentId:"sc-lqknb0-2"})(["",";font-family:",";left:0;position:absolute;background:transparent !important;border-color:transparent;caret-color:#000000;color:transparent !important;-webkit-text-fill-color:transparent !important;"],e=>ko(e,e.theme),I.FontFamilies.Monospace),_j=C(zi).withConfig({displayName:"ThemedMaskedInput__DisplayInput",componentId:"sc-lqknb0-3"})(["",";font-family:",";"],e=>ko(e,e.theme),I.FontFamilies.Monospace),Rj=C(Ds).withConfig({displayName:"ThemedMaskedInput__StyledMaterialThemedMaskedInput",componentId:"sc-lqknb0-4"})(["width:100%;padding:","px ","px ","px ","px;font-family:",";left:0;position:absolute;background-color:",";border-color:transparent;caret-color:#000000;color:transparent !important;"],F.base,F.base,F.base,F.base/2,I.FontFamilies.Monospace,({theme:e})=>e.colorInputBackground),Aj=C(dr).withConfig({displayName:"ThemedMaskedInput__DisplayMaterialInput",componentId:"sc-lqknb0-5"})(["background-color:transparent !important;pointer-events:none;> input{font-family:",";background-color:transparent !important;}"],I.FontFamilies.Monospace),Tj=C("div").withConfig({displayName:"ThemedMaskedInput__OutlinedContainer",componentId:"sc-lqknb0-6"})(["margin-bottom:","px;"],F.base*2),Ej=C("div").withConfig({displayName:"ThemedMaskedInput__MaterialContainer",componentId:"sc-lqknb0-7"})(["margin-bottom:","px;position:relative;padding-top:","px;"],F.base,F.base*2),kj=C("div").withConfig({displayName:"ThemedMaskedInput__MaterialFormError",componentId:"sc-lqknb0-8"})(["",";top:","px;"],jo,Ed+F.base),Hb=C.div.withConfig({displayName:"ThemedMaskedInput__ButtonContainer",componentId:"sc-lqknb0-9"})(["position:absolute;right:0;z-index:",";height:100%;display:flex;align-items:center;padding-right:","px;[dir='rtl'] &{right:unset;left:0;padding-right:unset;padding-left:","px;}"],At.inputButtons,F.base,F.base),Nj=C(Hb).withConfig({displayName:"ThemedMaskedInput__MaterialButtonContainer",componentId:"sc-lqknb0-10"})(["height:","px;"],Ed),jj=({meta:{error:e,submitFailed:t},input:n,mask:r,label:o,secure:a=!0,...s})=>{const{inputStyle:c}=f.useContext(tt),[l,{toggle:d}]=st(a),u=l?Pj(n.value,r):n.value,h=!!(e&&t),[m,{enable:p,disable:g}]=st(!1);switch(c){case Pt.Material:return i.jsx(Ej,{children:i.jsxs(dh,{children:[a&&i.jsx(Nj,{children:i.jsx(fo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:d,tabIndex:-1,"aria-label":l?"show value":"hide value",children:l?i.jsx(ds,{"aria-hidden":!0,height:16,width:16}):i.jsx(us,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(Rj,{...s,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholder:void 0,placeholderChar:" ",onFocus:p,onBlur:g}),i.jsx(Aj,{value:u,readOnly:!0,disabled:s.disabled,hasError:h,labelText:o,tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input",focused:m}),h&&i.jsx(kj,{children:e})]})});default:return i.jsxs(Tj,{children:[o&&i.jsx(J,{wrapper:"label",wrapperProps:{htmlFor:n.name},children:o}),i.jsxs(dh,{children:[a&&i.jsx(Hb,{children:i.jsx(fo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:d,tabIndex:-1,"aria-label":l?"show value":"hide value",children:l?i.jsx(ds,{"aria-hidden":!0,height:16,width:16}):i.jsx(us,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(wj,{...s,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholder:void 0,placeholderChar:" "}),i.jsx(_j,{value:u,readOnly:!0,disabled:s.disabled,hasError:h,placeholder:s.placeholder,tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input"})]}),h&&i.jsx(Sj,{role:"alert",children:e})]})}},uh="•";function Pj(e,t){return Array.isArray(t)?e.split("").map((n,r)=>t[r]instanceof RegExp?uh:n).join(""):uh.repeat(e.length)}const Dj={socialSecurityNumber:[bt("You cannot have an empty value",Rn),bt("The value you entered is invalid",Jf(/\D/g,Qf(9)))]};function Oj(e){const{disabled:t,name:n="social-security-number"}=e;return i.jsx(Te.Field,{name:n,label:Lj(e.countryCode),component:jj,disabled:t,mask:Fj(e.countryCode),type:"text",placeholder:$b(e.countryCode),validate:Dj.socialSecurityNumber})}function Lj(e){const[t]=K();switch(e){case"BR":return t("form.identification-number.country.BR");case"CA":return t("form.identification-number.country.CA");case"DE":return t("form.identification-number.country.DE");case"FR":return t("form.identification-number.country.FR");case"GB":return t("form.identification-number.country.GB");case"IT":return t("form.identification-number.country.IT");case"JP":return t("form.identification-number.country.JP");case"KR":return t("form.identification-number.country.KR");case"MX":return t("form.identification-number.country.MX");case"NL":return t("form.identification-number.country.NL");case"PL":return t("form.identification-number.country.PL");case"RO":return t("form.identification-number.country.RO");case"RU":return t("form.identification-number.country.RU");case"US":return t("form.identification-number.country.US");default:return t("form.identification-number.identification-number")}}function $b(e){switch(e){case"BR":return"###.###.###-##";case"CA":return"###-###-###";case"DE":return"############";case"FR":return"###############";case"GB":return"###-###-####";case"IT":return"################";case"JP":return"############";case"KR":return"######-#######";case"MX":return"##################";case"NL":return"#########";case"PL":return"###########";case"RO":return"#############";case"RU":return"###-###-### ##";case"US":return"###-##-####";default:return"###-##-####"}}function Fj(e){return Array.from($b(e)).map(t=>t==="#"?/\d/:t)}const mh=C("div").withConfig({displayName:"ThemedFormDateInput__Container",componentId:"sc-134qv0i-0"})(["display:flex;flex-wrap:wrap;margin-left:-","px;margin-right:-","px;margin-bottom:","px;",";"],F.base,F.base,F.base*2,({inputStyle:e})=>e===Pt.Material?`padding-top: ${F.base*2}px;`:""),Mj=C("div").withConfig({displayName:"ThemedFormDateInput__OutlinedLabelContainer",componentId:"sc-134qv0i-1"})(["&:focus-within label{color:",";}"],e=>e.theme.colorPrimary),hh=C("div").withConfig({displayName:"ThemedFormDateInput__FormError",componentId:"sc-134qv0i-2"})([""," padding-left:","px;"],jo,F.base),ph=C("div").withConfig({displayName:"ThemedFormDateInput__Month",componentId:"sc-134qv0i-3"})(["flex:0 0 40%;max-width:40%;padding-left:","px;padding-right:","px;text-transform:capitalize;"],F.base,F.base),es=C("div").withConfig({displayName:"ThemedFormDateInput__DayOrYear",componentId:"sc-134qv0i-4"})(["flex:0 0 30%;max-width:30%;padding-left:","px;padding-right:","px;"],F.base,F.base);class Vj extends f.Component{constructor(t){super(t),this.handleChangeDay=n=>{const r={...this.deserializedValue,day:n.target.value};this.propagateDateChange(r)},this.handleChangeMonth=n=>{const r={...this.deserializedValue,month:n.target.value};this.propagateDateChange(r)},this.handleChangeYear=n=>{const r={...this.deserializedValue,year:n.target.value};this.propagateDateChange(r)},this.state={day:"",month:"",year:""}}render(){const{theme:{inputStyle:t}}=this.props;switch(t){case Pt.Material:return this.renderMaterial();case Pt.Outlined:default:return this.renderOutlined()}}renderOutlined(){const{disabled:t,input:n,t:r,meta:{error:o,submitFailed:a},theme:{inputStyle:s}}=this.props,c=!!(o&&a);return i.jsxs(Mj,{children:[i.jsx("label",{children:r("database.form.birthdate-label")}),i.jsxs(mh,{inputStyle:s,children:[i.jsxs(ph,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:n.name+"-month",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.month.placeholder")}`})}),i.jsxs(ic,{name:n.name+"-month",disabled:t,hasError:c,onChange:this.handleChangeMonth,"aria-label":r("form.date-input.month.placeholder"),value:this.deserializedValue.month,children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:r("form.date-input.month.placeholder")}),i.jsx("option",{value:0,children:r("form.date-input.month.option.january")}),i.jsx("option",{value:1,children:r("form.date-input.month.option.february")}),i.jsx("option",{value:2,children:r("form.date-input.month.option.march")}),i.jsx("option",{value:3,children:r("form.date-input.month.option.april")}),i.jsx("option",{value:4,children:r("form.date-input.month.option.may")}),i.jsx("option",{value:5,children:r("form.date-input.month.option.june")}),i.jsx("option",{value:6,children:r("form.date-input.month.option.july")}),i.jsx("option",{value:7,children:r("form.date-input.month.option.august")}),i.jsx("option",{value:8,children:r("form.date-input.month.option.september")}),i.jsx("option",{value:9,children:r("form.date-input.month.option.october")}),i.jsx("option",{value:10,children:r("form.date-input.month.option.november")}),i.jsx("option",{value:11,children:r("form.date-input.month.option.december")})]})]}),i.jsxs(es,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:n.name+"-day",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.day")}`})}),i.jsx(zi,{name:n.name+"-day",disabled:t,hasError:c,min:0,max:31,onChange:this.handleChangeDay,"aria-label":r("form.date-input.day"),placeholder:r("form.date-input.day"),type:"number",value:this.deserializedValue.day})]}),i.jsxs(es,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:n.name+"-year",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.year")}`})}),i.jsx(zi,{name:n.name+"-year",disabled:t,hasError:c,min:1900,max:new Date().getFullYear(),onChange:this.handleChangeYear,"aria-label":r("form.date-input.year"),placeholder:r("form.date-input.year"),type:"number",value:this.deserializedValue.year})]}),c&&i.jsx(hh,{role:"alert",children:o})]})]})}renderMaterial(){const{disabled:t,input:n,t:r,meta:{error:o,submitFailed:a},theme:{inputStyle:s}}=this.props,c=!!(o&&a);return i.jsxs(mh,{inputStyle:s,children:[i.jsxs(ph,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:n.name+"-month",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.month.placeholder")}`})}),i.jsxs(eg,{name:n.name+"-month",disabled:t,hasError:c,onChange:this.handleChangeMonth,value:this.deserializedValue.month,labelText:r("database.form.birthdate-label"),children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:r("form.date-input.month.placeholder")}),i.jsx("option",{value:0,children:r("form.date-input.month.option.january")}),i.jsx("option",{value:1,children:r("form.date-input.month.option.february")}),i.jsx("option",{value:2,children:r("form.date-input.month.option.march")}),i.jsx("option",{value:3,children:r("form.date-input.month.option.april")}),i.jsx("option",{value:4,children:r("form.date-input.month.option.may")}),i.jsx("option",{value:5,children:r("form.date-input.month.option.june")}),i.jsx("option",{value:6,children:r("form.date-input.month.option.july")}),i.jsx("option",{value:7,children:r("form.date-input.month.option.august")}),i.jsx("option",{value:8,children:r("form.date-input.month.option.september")}),i.jsx("option",{value:9,children:r("form.date-input.month.option.october")}),i.jsx("option",{value:10,children:r("form.date-input.month.option.november")}),i.jsx("option",{value:11,children:r("form.date-input.month.option.december")})]})]}),i.jsxs(es,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:n.name+"-day",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.day")}`})}),i.jsx(dr,{name:n.name+"-day",disabled:t,hasError:c,min:0,max:99,onChange:this.handleChangeDay,type:"number",value:this.deserializedValue.day,labelText:r("form.date-input.day")})]}),i.jsxs(es,{children:[i.jsx(ai,{children:i.jsx("label",{htmlFor:n.name+"-year",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.year")}`})}),i.jsx(dr,{name:n.name+"-year",disabled:t,hasError:c,min:1900,max:9999,onChange:this.handleChangeYear,labelText:r("form.date-input.year"),type:"number",value:this.deserializedValue.year})]}),c&&i.jsx(hh,{role:"alert",children:o})]})}get deserializedValue(){if(/\d{4}-\d{2}-\d{2}/.test(this.props.input.value)){const t=new Date(this.props.input.value);return{year:String(t.getUTCFullYear()),month:String(t.getUTCMonth()),day:String(t.getUTCDate())}}else return this.state}propagateDateChange(t){this.setState(t);const n=parseInt(t.year,10),r=parseInt(t.month,10),o=parseInt(t.day,10),a=new Date(Date.UTC(n,r,o));if(!isNaN(a.getTime())&&a.getUTCFullYear()===n&&a.getUTCMonth()===r&&a.getUTCDate()===o){const s=a.toISOString().split("T")[0];this.props.input.onChange(s)}else this.props.input.onChange("")}}const Bj=Ml(Vj),qj=({disabled:e,validate:t})=>{const[n]=K(),{inputStyle:r}=f.useContext(tt),o=r===Pt.Material;return i.jsxs(li,{children:[!o&&i.jsx("label",{htmlFor:je.EmailAddress,children:n("email-address.form.label")}),i.jsx(Te.Field,{name:je.EmailAddress,component:Zn,disabled:e,placeholder:n("email-address.form.label"),type:"email",validate:t.emailAddress})]})},Uj=C(li).withConfig({displayName:"ThemedFormNameInput__StyledFormGroup",componentId:"sc-1mgtya5-0"})(["margin-bottom:0;"]),Hj=C.div.withConfig({displayName:"ThemedFormNameInput__InputContainer",componentId:"sc-1mgtya5-1"})(["display:flex;column-gap:",";flex-direction:row;flex-wrap:none;> *{flex:auto;}@media ","{flex-direction:column;}"],I.Spacing[4],xt.isMobileSmall),$j=({disabledNameFirst:e,disabledNameLast:t,validate:n})=>{const[r]=K(),{inputStyle:o}=f.useContext(tt),a=o===Pt.Material;return i.jsxs(Uj,{children:[!a&&i.jsx("label",{htmlFor:je.NameFirst,children:r("database.form.name-label")}),i.jsxs(Hj,{children:[i.jsx(Te.Field,{name:je.NameFirst,component:Zn,autoComplete:"given-name",disabled:e,placeholder:r("database.form.first_name"),type:"text",validate:n.firstName}),i.jsx(Te.Field,{name:je.NameLast,component:Zn,autoComplete:"family-name",disabled:t,placeholder:r("database.form.last_name"),type:"text",validate:n.lastName})]})]})},Gj={socialSecurityNumberLast4:[bt("Please enter the last 4 digits of your SSN",Rn),bt("The SSN you entered is invalid",Jf(/\D/g,Qf(4)))]},Wj=e=>{const{disabled:t,name:n="social-security-number"}=e,[r]=K();return i.jsx(f.Fragment,{children:i.jsx(Te.Field,{name:n,component:Zn,disabled:t,type:"tel",maxLength:4,placeholder:"####",label:r("form.identification-number.ssn-last-4"),validate:Gj.socialSecurityNumberLast4})})},ts={firstName:[bt("Please enter your first name",Rn)],lastName:[bt("Please enter your last name",Rn)],birthdate:[bt("Your legal birth date is required",uS),bt("Enter a valid date",mS),bt("Birthdate must be within last century",hS),bt("Birthdate must be more than a year ago",pS)],phoneNumber:[bt("The phone number you entered is not valid",Zf),bt("Enter your phone number",Rn)],emailAddress:[bt("Please enter your email address",Rn),bt("The email you entered is not valid",ur(Dd))]};function zj(e,t,n,r){var o,a,s,c,l,d,u;switch(e){case xn.Name:return i.jsx($j,{disabledNameFirst:r.submitting||((o=r.lockedAttributes)==null?void 0:o[je.NameFirst])!=null,disabledNameLast:r.submitting||((a=r.lockedAttributes)==null?void 0:a[je.NameLast])!=null,validate:ts},xn.Name);case xn.Birthdate:return i.jsx(li,{children:i.jsx(Te.Field,{name:je.Birthdate,component:Bj,disabled:r.submitting||((s=r.lockedAttributes)==null?void 0:s[je.Birthdate]),t:n,type:"text",validate:ts.birthdate})},xn.Birthdate);case xn.PhoneNumber:return i.jsxs(li,{children:[i.jsx("label",{children:n("phone-number.form.label")}),i.jsx(gg,{name:je.PhoneNumber,disabled:r.submitting||((c=r.lockedAttributes)==null?void 0:c[je.PhoneNumber]),t:n,validate:ts.phoneNumber,component:Cg,type:"tel",defaultCountry:r.selectedCountryCode})]},xn.PhoneNumber);case xn.IdentificationNumberFull9:return i.jsx(li,{children:i.jsx(Oj,{disabled:r.submitting||((l=r.lockedAttributes)==null?void 0:l[je.IdentificationNumber])!=null,name:je.IdentificationNumber,countryCode:r.selectedCountryCode})},xn.IdentificationNumberFull9);case xn.IdentificationNumberLast4:return i.jsx(li,{children:i.jsx(Wj,{disabled:r.submitting||((d=r.lockedAttributes)==null?void 0:d[je.IdentificationNumber])!=null,name:je.IdentificationNumber})},xn.IdentificationNumberLast4);case xn.Address:return i.jsx(yj,{boundChangeFormValue:(h,m)=>r.changeFormValue(r.form,h,m),selectedCountryCode:r.selectedCountryCode,disabled:r.submitting,forceOpen:r.submitFailed||t,latLng:r.latLng,lockedAttributes:r.lockedAttributes,t:n,addressAutocompleteMethod:r.addressAutocompleteMethod},xn.Address);case xn.EmailAddress:return i.jsx(qj,{disabled:r.submitting||((u=r.lockedAttributes)==null?void 0:u[je.EmailAddress])!=null,validate:ts},xn.EmailAddress)}}function Yj(e){const t=Ke(a=>{const s=Te.formValueSelector(e.form);return{[je.AddressStreet1]:s(a,je.AddressStreet1)||"",[je.AddressStreet2]:s(a,je.AddressStreet2)||"",[je.AddressCity]:s(a,je.AddressCity)||"",[je.AddressSubdivision]:s(a,je.AddressSubdivision)||"",[je.AddressPostalCode]:s(a,je.AddressPostalCode)||""}}),n=[je.AddressStreet2,je.AddressCity,je.AddressSubdivision,Hs.includes(e.selectedCountryCode)?je.AddressStreet1:je.AddressPostalCode].some(a=>t[a]),[r]=K(),o=e.inputFields.map(a=>zj(a,n,r,e));return i.jsxs("form",{onSubmit:e.handleSubmit,children:[o,i.jsx(ft,{children:i.jsx(ge,{type:"submit",buttonType:ne.Primary,disabled:e.pristine||e.submitting||e.isProcessing,isPending:e.submitting||e.isProcessing,children:r("database.form.btn-submit")})})]})}const Pl="database",Kj=Te.reduxForm({form:Pl,destroyOnUnmount:!1})(Yj);function Va(e,t,n){return async r=>{Object.values(je).forEach(o=>{const{"locked-attributes":a,prefill:s,fields:c}=t;a!=null&&a[o]?r(Te.autofill(e,o,a[o])):n!=null&&n[o]?r(Te.autofill(e,o,n[o])):s!=null&&s[o]?r(Te.autofill(e,o,s[o])):c!=null&&c[o]&&r(Te.autofill(e,o,c[o]))})}}const fh=C("div").withConfig({displayName:"VerifyDatabaseView__Header",componentId:"sc-yae4il-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function Qj(e){const[t]=K();return i.jsxs("div",{children:[e.hasSubmittedValues&&e.inputFields.length===1&&e.inputFields[0]===xn.IdentificationNumberFull9?i.jsxs(fh,{children:[i.jsx(et,{children:t("database.title-retry")}),i.jsx(qe,{children:t("database.prompt-retry")})]}):i.jsxs(fh,{children:[i.jsx(et,{children:t("database.title")}),i.jsx(qe,{children:t("database.prompt")})]}),i.jsx(Kj,{changeFormValue:e.changeFormValue,selectedCountryCode:e.selectedCountryCode,latLng:e.latLng,lockedAttributes:e.hasSubmittedValues?void 0:N.inquiryParams["locked-attributes"],onSubmit:e.handleSubmit,inputFields:e.inputFields,isProcessing:e.isProcessing,addressAutocompleteMethod:e.addressAutocompleteMethod})]})}const Zj=e=>{var h,m;const{featureFlags:t,forcedStatus:n,inquiry:r,latLng:o,selectedCountryCode:a,submittedValues:s}=e;f.useEffect(()=>{r==null?N.redirectToStart():e.autofillForm(Pl,N.inquiryParams,e.submittedValues)},[]);const{error:c,loading:l,callback:d}=It(async p=>{e.clearMessages(),await e.verificationDatabaseSubmit(r,n,{"country-code":a,"phone-number":r.attributes["phone-number"],...s,...p},e.history,t),e.change(Pl,"identification-number",null),e.saveSubmittedValues({...p,"identification-number":null}),document.body.scrollTo(0,0)},[a,r,n,s,t,e.history]);if(Et({error:c,onError:()=>e.showMessage(e.t("errors.network")),onNetworkError:()=>e.showMessage(e.t("errors.network"))}),r==null)return null;const u=r.attributes["next-step"].config||{};return i.jsx(Qj,{changeFormValue:e.change,selectedCountryCode:a,handleSubmit:d,hasSubmittedValues:Object.keys((h=e.submittedValues)!=null?h:{}).length>0,latLng:o,inputFields:(m=u["input-fields"])!=null?m:[],isProcessing:l,addressAutocompleteMethod:u["address-autocomplete-method"]||la.GoogleMaps})};function Jj(e){var n;const t=mf(e.inquiry.template,N.inquiryParams.prefill,e.locale.localeInfo.country_code);return{selectedCountryCode:((n=e.inquiry.inquiry)==null?void 0:n.attributes["selected-country-code"])||t,forcedStatus:e.test.forcedStatus,latLng:Yf(e),inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues,verifications:e.inquiry.verifications,featureFlags:e.inquiry.featureFlags}}const Xj={autofillForm:Va,change:Te.change,clearMessages:Lt,saveSubmittedValues:pf,showMessage:se,verificationDatabaseSubmit:KA},eP=ke(Jj,Xj),tP=eP(Zj),nP=qn()(tP),iP=C("div").withConfig({displayName:"VerifyDeviceHandoffEmailPromptView__Header",componentId:"sc-r4xrxo-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function rP(e){const{handleEmailOneTimeLink:t}=e,[n]=K();return i.jsxs("div",{children:[i.jsxs(iP,{children:[i.jsx(et,{children:n("to-mobile.title")}),i.jsx(qe,{children:n("to-email.prompt")})]}),i.jsx(Od,{onSubmit:t,labelContinue:n("to-email.btn-submit")})]})}function oP(e){f.useEffect(()=>{e.autofillForm("email-address",N.inquiryParams,e.submittedValues)},[]);const[t]=K(),{error:n,callback:r}=It(async o=>{const a=o["email-address"],{inquiry:s}=e,c={attributes:{"email-address":a},id:s.id,type:s.type};e.saveEmailAddress(a),await te.postResourceAction(c,"email-one-time-link"),z.logAmplitude("one-time-link.sent",{method:"email"}),N.onEvent(Oe.OneTimeLinkSent,{method:"email"}),e.history.push("/verify/device-handoff/email/sent")},[e.inquiry,e.history]);return Et({error:n,onError:o=>{o.status===409?e.showMessage(t("errors.inquiry-conflict")):e.showMessage(t("errors.network"))},onNetworkError:()=>e.showMessage(t("errors.network"))}),i.jsx(rP,{handleEmailOneTimeLink:r})}function aP(e){return{defaultCountry:e.locale.localeInfo.country_code,inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues}}const sP={autofillForm:Va,saveEmailAddress:oc,showMessage:se},cP=ke(aP,sP),lP=cP(oP),dP=C("div").withConfig({displayName:"VerifyDeviceHandoffEmailSentView__Header",componentId:"sc-z0hyrs-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function uP(e){const[t]=K(),[n,{enable:r}]=st(),o=()=>{n||(e.resendOneTimeLink(),r())};return i.jsxs("div",{children:[i.jsxs(dP,{children:[i.jsx(et,{children:t("mobile-sent.title")}),i.jsx(qe,{children:t("mobile-sent.prompt-email",{emailAddress:e.emailAddress})})]}),i.jsx($e,{"aria-label":"SMS pictograph",children:i.jsx(ye,{children:i.jsx(Ls,{})})}),i.jsx(qe,{children:i.jsxs(Bn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-email__resend-link",onClick:o,children:"resend the secure link"})]})})]})}const gh=3e3;let Zc;function mP(e){const[t]=K();f.useEffect(()=>(e.inquiry==null&&N.redirectToStart(),a(),()=>clearTimeout(Zc)),[]);const{inquiry:n,emailAddress:r}=e,o=f.useCallback(async()=>{e.clearMessages();try{const s={attributes:{"email-address":r},id:n.id,type:n.type};await te.postResourceAction(s,"email-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch{e.showMessage(t("mobile-sent.failed-to-resend"))}},[n,e.showMessage,e.clearMessages]),a=f.useCallback(async()=>{try{const s=(await te.getResource(Zt(n.type),n.id)).data;switch(s.attributes.status){case fe.Created:case fe.Pending:Zc=window.setTimeout(a,gh);return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(s),e.routeToNextStep(s);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ct(s.attributes.status)}}catch(s){if(s instanceof Ct)Zc=window.setTimeout(a,gh);else if(s instanceof pt&&s.status!==401)e.showMessage(t("errors.session-expired"));else throw s}},[n]);return n==null?null:i.jsx(uP,{emailAddress:r,resendOneTimeLink:o})}function hP(e){return{inquiry:e.inquiry.inquiry,emailAddress:e.oneTimeLink.emailAddress}}const pP={clearMessages:Lt,showMessage:se,saveInquiry:Ot,routeToNextStep:Gt,saveEmailAddress:oc},fP=ke(hP,pP),gP=fP(mP),bP=qn()(gP),CP=C("div").withConfig({displayName:"VerifyDeviceHandoffPromptView__Header",componentId:"sc-4mxuyp-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),xP=C.div.withConfig({displayName:"VerifyDeviceHandoffPromptView__CaptureOptionsContainer",componentId:"sc-4mxuyp-1"})(["width:100%;"]),Jc=C(ge).withConfig({displayName:"VerifyDeviceHandoffPromptView__OptionButton",componentId:"sc-4mxuyp-2"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],I.Spacing[4]);function vP({handleSmsDeviceHandoff:e,handleEmailDeviceHandoff:t,handleQrDeviceHandoff:n,isPrimary:r,option:o}){const[a]=K();switch(o){case on.Sms:return i.jsx(Jc,{id:"button__sms",buttonType:r?ne.Primary:ne.Secondary,"data-test":"to-mobile__via-sms",onClick:e,children:a("to-mobile.via-sms")});case on.Email:return i.jsx(Jc,{id:"button__email",buttonType:r?ne.Primary:ne.Secondary,"data-test":"to-mobile__via-email",onClick:t,children:a("to-mobile.via-email")});case on.Qr:return i.jsx(Jc,{id:"button__qr",buttonType:r?ne.Primary:ne.Secondary,"data-test":"to-mobile__via-qr",onClick:n,children:a("to-mobile.via-qr")});default:ct(o)}}function yP(e){var t;return i.jsx(xP,{id:"to-mobile-prompt__view",children:((t=e.deviceHandoffOptions)!=null?t:[]).map((n,r)=>i.jsx(vP,{isPrimary:r===0,option:n,...e},n))})}function IP(e){const[t]=K();return i.jsxs("div",{children:[i.jsxs(CP,{children:[i.jsx(et,{children:t("to-mobile.title")}),i.jsx(qe,{children:t("to-mobile.description")})]}),i.jsx(ft,{children:i.jsx(yP,{...e})})]})}const SP=e=>{const t=Dt(),n=Xt("inquiry:hide-sms-device-handoff-option-inverse");let r=e.inquiry.attributes["next-step"].config["device-handoff-options"];return Ol(r)&&(r=[on.Sms,on.Email,on.Qr]),n||(r=r.filter(o=>o!==on.Sms)),f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}if(r.length===1){const o=r[0];switch(o){case on.Sms:t.replace("/verify/device-handoff/sms");break;case on.Email:t.replace("/verify/device-handoff/email");break;case on.Qr:t.replace("/verify/device-handoff/qr");break;default:ct(o)}}},[]),r.length===1?null:i.jsx(IP,{handleSmsDeviceHandoff:()=>t.push("/verify/device-handoff/sms"),handleEmailDeviceHandoff:()=>t.push("/verify/device-handoff/email"),handleQrDeviceHandoff:()=>t.push("/verify/device-handoff/qr"),deviceHandoffOptions:r})};function wP(e){return{inquiry:e.inquiry.inquiry}}const _P=ke(wP),RP=_P(SP),AP=C("div").withConfig({displayName:"VerifyDeviceHandoffQrView__Header",componentId:"sc-3euhfa-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function TP({link:e}){const[t]=K();return i.jsxs("div",{children:[i.jsxs(AP,{children:[i.jsx(et,{children:t("to-mobile.title")}),i.jsx(qe,{children:t("qr-code.prompt")})]}),e!=null&&i.jsx($e,{height:132,width:132,"aria-label":t("qr-code.prompt"),role:"img",children:i.jsx(_d,{value:e,accessibleTitle:t("qr-code.prompt"),"data-test":"device-handoff-qr__qr-code"})})]})}const bh=3e3;function EP(e){let t;const[n]=K(),[r,o]=f.useState(void 0);fr({loader:async()=>{var l;const c=await te.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"generate-one-time-link");o((l=c==null?void 0:c.meta)==null?void 0:l["one-time-link-code"]),z.logAmplitude("one-time-link.sent",{method:"qr"}),N.onEvent(Oe.OneTimeLinkSent,{method:"qr"})},deps:[],onError:c=>{c.status===409?e.showMessage(n("errors.inquiry-conflict")):e.showMessage(n("errors.network"))},onNetworkError:()=>e.showMessage(n("errors.network"))}),f.useEffect(()=>(e.inquiry==null&&N.redirectToStart(),a(),()=>clearTimeout(t)),[]);const a=f.useCallback(async()=>{try{const c=(await te.getResource(Zt(e.inquiry.type),e.inquiry.id)).data;switch(c.attributes.status){case fe.Created:case fe.Pending:t=window.setTimeout(a,bh);return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(c),e.routeToNextStep(c);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(this.props.t("errors.session-expired"));return;default:ct(c.attributes.status)}}catch(c){if(c instanceof Ct)t=window.setTimeout(a,bh);else if(c instanceof pt&&c.status!==401)e.showMessage(n("errors.session-expired"));else throw c}},[e.inquiry]);if(e.inquiry==null)return null;const s=r?`${location.protocol}//${location.host}/verify?code=${r}`:void 0;return i.jsx(TP,{link:s})}function kP(e){return{inquiry:e.inquiry.inquiry}}const NP={clearMessages:Lt,showMessage:se,saveInquiry:Ot,routeToNextStep:Gt},jP=ke(kP,NP),PP=jP(EP),DP=C("div").withConfig({displayName:"VerifyDeviceHandoffSmsPromptView__Header",componentId:"sc-1njtbwt-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function OP(e){const{defaultCountry:t,handleSmsOneTimeLink:n}=e,[r]=K();return i.jsxs("div",{children:[i.jsxs(DP,{children:[i.jsx(et,{children:r("to-mobile.title")}),i.jsx(qe,{children:r("to-mobile.prompt")})]}),i.jsx(Bd,{onSubmit:n,labelContinue:r("to-mobile.btn-submit"),defaultCountry:t})]})}function LP(e){f.useEffect(()=>{e.autofillForm("phone-number",N.inquiryParams,e.submittedValues)},[]);const[t]=K(),{error:n,callback:r}=It(async o=>{const a=o["phone-number"],{inquiry:s}=e,c={attributes:{"phone-number":a},id:s.id,type:s.type};e.savePhoneNumber(a),await te.postResourceAction(c,"sms-one-time-link"),z.logAmplitude("one-time-link.sent",{method:"sms"}),N.onEvent(Oe.OneTimeLinkSent,{method:"sms"}),e.history.push("/verify/device-handoff/sms/sent")},[e.inquiry,e.history]);return Et({error:n,onError:o=>{var a;o.status===409?e.showMessage(t("errors.inquiry-conflict")):o.status===400&&((a=o.errors)==null?void 0:a[0].title)==="Phone number unsubscribed"?e.showMessage(t("mobile-sent.sms-unsubscribed")):e.showMessage(t("mobile-sent.failed-to-resend"))},onNetworkError:()=>e.showMessage(t("errors.network"))}),i.jsx(OP,{defaultCountry:e.defaultCountry,handleSmsOneTimeLink:r})}function FP(e){return{defaultCountry:e.locale.localeInfo.country_code,inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues}}const MP={autofillForm:Va,savePhoneNumber:rc,showMessage:se},VP=ke(FP,MP),BP=VP(LP),qP=C("div").withConfig({displayName:"VerifyDeviceHandoffSmsSentView__Header",componentId:"sc-1z04rs5-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function UP(e){const t=Bl(e.phoneNumber,"National"),[n]=K(),[r,{enable:o}]=st(),a=()=>{r||(e.resendOneTimeLink(),o())};return i.jsxs("div",{children:[i.jsxs(qP,{children:[i.jsx(et,{children:n("mobile-sent.title")}),i.jsx(qe,{children:i.jsx(Bn,{i18nKey:"mobile-sent.prompt",components:[i.jsx("bdo",{dir:"ltr"},0)],values:{phoneNumber:t}})})]}),i.jsx($e,{"aria-label":"SMS pictograph",children:i.jsx(ye,{children:i.jsx(Ls,{})})}),i.jsx(qe,{children:i.jsxs(Bn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-sms__resend-link",onClick:a,children:"resend the secure link"})]})})]})}const Ch=3e3;let Xc;function HP(e){const[t]=K();f.useEffect(()=>(e.inquiry==null&&N.redirectToStart(),a(),()=>clearTimeout(Xc)),[]);const{inquiry:n,phoneNumber:r}=e,o=f.useCallback(async()=>{var s;e.clearMessages();try{const c={attributes:{"phone-number":r},id:n.id,type:n.type};await te.postResourceAction(c,"sms-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch(c){c.status===400&&((s=c.errors)==null?void 0:s[0].title)==="Phone number unsubscribed"?e.showMessage(t("mobile-sent.sms-unsubscribed")):e.showMessage(t("mobile-sent.failed-to-resend"))}},[n,e.showMessage,e.clearMessages]),a=f.useCallback(async()=>{try{const s=(await te.getResource(Zt(n.type),n.id)).data;switch(s.attributes.status){case fe.Created:case fe.Pending:Xc=window.setTimeout(a,Ch);return;case fe.Completed:case fe.Approved:case fe.NeedsReview:case fe.Declined:case fe.Failed:e.saveInquiry(s),e.routeToNextStep(s);return;case fe.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ct(s.attributes.status)}}catch(s){if(s instanceof Ct)Xc=window.setTimeout(a,Ch);else if(s instanceof pt&&s.status!==401)e.showMessage(t("errors.session-expired"));else throw s}},[n]);return n==null?null:i.jsx(UP,{phoneNumber:r,resendOneTimeLink:o})}function $P(e){return{inquiry:e.inquiry.inquiry,phoneNumber:e.oneTimeLink.phoneNumber}}const GP={clearMessages:Lt,showMessage:se,saveInquiry:Ot,savePhoneNumber:rc,routeToNextStep:Gt},WP=ke($P,GP),zP=WP(HP),YP=qn()(zP);function KP(e){const[t]=K();return i.jsx(Al,{handleCapture:e.handleCapture,handleError:e.handleError,labelTakePhoto:t("documents.capture.btn-take-photo"),videoConstraints:e.videoConstraints})}function QP(e){const{inquiry:t,documentConfigs:n,videoConstraints:r,history:o}=e,a=parseInt(e.match.params.documentNumber,10),s=n[a],[c]=K();if(f.useEffect(()=>{if(t==null){N.redirectToStart();return}},[]),t==null)return null;const l=async(u,h)=>{e.saveCaptureMethod(h),u=u.filter(p=>p!=null);const m=u[u.length-1];z.logAmplitude("document.camera.capture",{imageSize:m.length});try{e.uploadFile({filename:`${s.kind}_live_captured.jpg`,fileType:"image/jpeg",dataUrl:m}),e.history.replace(Xn(a,Nt.Check))}catch(p){d(p,"capture")}},d=(u,h)=>{h==="capture"&&e.showMessage(c("documents.capture.failed-screenshot")),u instanceof Error?(Z(u,"error",{state:h},{jira:"PER-10182"}),h==="load"&&(N.onEvent(Oe.LoadCameraFailed,{error:u.name,message:u.message}),o.push("/verify/support/camera"))):(Z(new Error(u),"error",{state:h},{jira:"PER-10182"}),h==="load"&&(N.onEvent(Oe.LoadCameraFailed,{message:u}),o.push("/verify/support/camera")))};return i.jsx(KP,{handleCapture:l,handleError:d,videoConstraints:r})}const ZP=e=>({inquiry:e.inquiry.inquiry,documentConfigs:Fa(e),videoConstraints:e.document.videoConstraints}),JP={saveCaptureMethod:hr,showMessage:se,uploadFile:dc},XP=ke(ZP,JP),eD=XP(QP),tD=C("div").withConfig({displayName:"ConfirmFileUploadView__Header",componentId:"sc-1frnc05-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),nD=C("div").withConfig({displayName:"ConfirmFileUploadView__ConfirmFileContainer",componentId:"sc-1frnc05-1"})(["background-color:",";border-radius:",";margin-bottom:","px;min-height:80px;padding:0px ","px;display:flex;flex-direction:row;justify-content:start;align-items:center;"],Be.gray4,un.rounded,F.base*8,F.base*2),iD=C.div.withConfig({displayName:"ConfirmFileUploadView__IconContainer",componentId:"sc-1frnc05-2"})(["margin-right:","px;display:flex;"],F.base),rD=C("div").withConfig({displayName:"ConfirmFileUploadView__FileNameContainer",componentId:"sc-1frnc05-3"})(["color:",";font-weight:",";word-break:break-all;"],Be.black,pn.semiBold),oD=C(ge).withConfig({displayName:"ConfirmFileUploadView__ButtonContinue",componentId:"sc-1frnc05-4"})(["margin-bottom:","px;"],F.base*4),aD=C("div").withConfig({displayName:"ConfirmFileUploadView__Minify",componentId:"sc-1frnc05-5"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function Gb(e){const{fileName:t,isProcessing:n}=e,[r]=K();return i.jsxs("div",{children:[i.jsxs(tD,{children:[i.jsx(et,{children:r("confirm-file-upload.title")}),i.jsx(qe,{children:r("confirm-file-upload.prompt")})]}),i.jsxs(nD,{children:[i.jsx(iD,{children:i.jsx(ye,{children:i.jsx(Bs,{})})}),i.jsx(rD,{children:t})]}),i.jsx(oD,{buttonType:ne.Primary,disabled:n,onClick:e.handleContinue,"data-test":"confirm-file-upload__continue",children:n?i.jsxs("span",{children:[r("confirm-file-upload.uploading"),i.jsx(aD,{children:i.jsx(Ji,{})})]}):r("confirm-file-upload.btn-submit")}),i.jsx(qe,{children:i.jsxs(Bn,{i18nKey:"confirm-file-upload.or-retry",children:["Or",i.jsx("a",{id:"confirm-file-upload__upload-link",onClick:e.handleRetry,children:"upload a new file"})]})})]})}function Wb(e){return i.jsx(pc,{src:e.src,style:{imageOrientation:"from-image"}})}const sD=C("div").withConfig({displayName:"VerifyDocumentsCheckView__Header",componentId:"sc-1fs6ydv-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),cD=C("div").withConfig({displayName:"VerifyDocumentsCheckView__ImagePositioner",componentId:"sc-1fs6ydv-1"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],F.base*2),lD=C("div").withConfig({displayName:"VerifyDocumentsCheckView__Minify",componentId:"sc-1fs6ydv-2"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function dD(e){const{currentUpload:t,isProcessing:n,handleContinue:r,handleRetry:o}=e,[a]=K();return Oo.includes(t.fileType)?i.jsxs("div",{children:[i.jsxs(sD,{children:[i.jsx(et,{children:a("documents.check.title")}),i.jsx(qe,{children:a("documents.check.prompt")})]}),i.jsx(cD,{children:i.jsx(Wb,{src:t.dataUrl,alt:"upload preview"})}),i.jsxs(ft,{children:[i.jsx(ge,{id:"documents-check__use-image",buttonType:ne.Primary,disabled:n,onClick:r,"data-test":"documents-check__continue",children:n?i.jsxs("span",{children:[a("documents.check.uploading"),i.jsx(lD,{children:i.jsx(Ji,{})})]}):a("documents.check.btn-submit")}),i.jsx(We,{height:2}),i.jsx(ge,{id:"documents-check__retake",buttonType:ne.Secondary,disabled:n,onClick:o,"data-test":"documents-check__retake",children:a("documents.check.btn-retake")})]})]}):i.jsx(Gb,{fileName:t.filename,isProcessing:n,handleContinue:r,handleRetry:o})}function uD(e){const{inquiry:t,currentStepName:n,documentConfigs:r,fileToUpload:o,forcedStatus:a,featureFlags:s}=e,c=parseInt(e.match.params.documentNumber,10),[l]=K();f.useEffect(()=>{if(t==null){N.redirectToStart();return}e.fileToUpload||(e.showMessage(l("errors.network")),e.history.goBack())},[]);const{error:d,loading:u,callback:h}=It(async()=>{e.clearMessages(),o.dataUrl.length>ua&&e.showMessage(Oo.includes(o.fileType)?l("documents.check.large-image-upload"):l("documents.check.large-file-upload")),await e.createDocumentGenericWithVerification({stepName:n,documentsToVerify:r,documentNumber:c,history:e.history,fileToUpload:o,t:l,forcedStatus:a,featureFlags:s})},[n,r,c,e.history,o,a,s]);Et({error:d,onError:()=>e.showMessage(l("errors.network")),onNetworkError:()=>e.showMessage(l("errors.network"))});const m=()=>{u||(e.history.goBack(),e.clearUpload(o))};return t==null||!e.fileToUpload?null:i.jsx(dD,{currentUpload:e.fileToUpload,handleContinue:h,handleRetry:m,isProcessing:u})}const mD=e=>({inquiry:e.inquiry.inquiry,currentStepName:e.inquiry.currentStep.name,documentConfigs:Fa(e),fileToUpload:Bg(e),forcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags}),hD={clearMessages:Lt,createDocumentGenericWithVerification:t8,showMessage:se,clearUpload:uc},pD=ke(mD,hD),fD=pD(uD),gD=C("div").withConfig({displayName:"VerifyDocumentsFailedView__Header",componentId:"sc-t3x4k2-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function bD(e){const[t]=K();return i.jsxs(i.Fragment,{children:[i.jsxs(gD,{children:[i.jsx(et,{children:i.jsx(J,{children:t("documents.failed.title")})}),i.jsx(qe,{children:i.jsx(J,{children:t("documents.failed.prompt")})})]}),i.jsx($e,{"aria-label":"document failed pictograph",children:i.jsx(ye,{children:i.jsx(sp,{})})}),i.jsx(ft,{children:i.jsx(ge,{id:"document-failed__retry",buttonType:ne.Primary,onClick:e.handleRetry,children:t("documents.failed.btn-submit")})})]})}const CD=e=>{const{inquiry:t}=e,n=parseInt(e.match.params.documentNumber,10);f.useEffect(()=>{if(t==null){N.redirectToStart();return}},[]);const r=f.useCallback(()=>{e.history.replace(Xn(n,Nt.Prompt))},[e.updateDocumentAtIndex,e.history]);return t==null?null:i.jsx(bD,{handleRetry:r})},xD=e=>({inquiry:e.inquiry.inquiry,documents:e.inquiry.documents}),vD={updateDocumentAtIndex:ca},yD=ke(xD,vD),ID=yD(CD),SD=C("div").withConfig({displayName:"VerifyDocumentsIntroView__Header",componentId:"sc-1unhl6h-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),wD=C("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentsList",componentId:"sc-1unhl6h-1"})(["margin-bottom:","px;padding:0 ","px 0 ","px;"],F.base*4,F.base,F.base),_D=C("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentsListItem",componentId:"sc-1unhl6h-2"})([""]),RD=C("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentDescription",componentId:"sc-1unhl6h-3"})(["display:flex;margin-bottom:","px;"],F.base*2),xh=C("div").withConfig({displayName:"VerifyDocumentsIntroView__IconContainer",componentId:"sc-1unhl6h-4"})(["padding:4px ","px 0 0;position:relative;"],F.base),AD=mi(["0%{opacity:0;}100%{opacity:1;}"]),TD=mi(["0%{opacity:1;}100%{opacity:0;}"]),ED=C(fs).withConfig({displayName:"VerifyDocumentsIntroView__AnimatedIconCircleBullet",componentId:"sc-1unhl6h-5"})(["animation:"," 0.5s ease-in;animation-fill-mode:forwards;"],TD),kD=C(Ix).withConfig({displayName:"VerifyDocumentsIntroView__AnimatedIconCircleChecked",componentId:"sc-1unhl6h-6"})(["animation:"," 0.5s ease-in;position:absolute;transform:translate(-100%,0);path{transition-duration:150ms;stroke:",";}"],AD,Be.green100),ND=C("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentExample",componentId:"sc-1unhl6h-7"})(["display:flex;padding-left:","px;margin-bottom:","px;"],F.base*3,F.base*2);function jD(e){const{handleContinue:t,isLoading:n,isProcessing:r,introScreenConfig:o,documentConfigs:a}=e,[s]=K();return f.useEffect(()=>{a.length===0&&Z(new Error("Unexpected empty list of required documents in step config"))},[]),i.jsxs("div",{children:[i.jsxs(SD,{children:[i.jsx(et,{children:(o==null?void 0:o.title)||s("documents.intro.title")}),i.jsx(qe,{children:(o==null?void 0:o.prompt)||s("documents.intro.prompt")})]}),i.jsx(wD,{children:a.map((c,l)=>{var d;return i.jsxs(_D,{children:[i.jsxs(RD,{children:[i.jsx(xh,{children:c.submitted?i.jsxs(i.Fragment,{children:[i.jsx(ED,{}),i.jsx(kD,{})]}):i.jsx(fs,{})}),i.jsx("p",{children:c.description})]}),(d=c.examples)==null?void 0:d.map((u,h)=>i.jsxs(ND,{children:[i.jsx(xh,{children:i.jsx(fs,{})}),i.jsx("p",{children:u})]},`${c.kind}-${l}-example-${h}`))]},`${c.kind}-${l}`)})}),i.jsx(ft,{children:i.jsx(ge,{id:"documents.intro__button--select",buttonType:ne.Primary,onClick:t,disabled:r||n,isPending:r||n,children:s("documents.intro.btn-submit")})})]})}function PD(e){const{inquiry:t,documentConfigs:n,introScreenConfig:r,skipIntroScreen:o}=e,[a]=K();f.useEffect(()=>{if(t==null){N.redirectToStart();return}if(n!=null&&(n.length===1||o)){e.history.replace(Xn(0,Nt.Prompt));return}},[]);const{loading:s}=fr({loader:e.loadDocumentsForInquiry,deps:[],onError:()=>e.showMessage(a("errors.network")),onNetworkError:()=>e.showMessage(a("errors.network"))}),[c,l]=f.useState(!1);if(t==null||n!=null&&(n.length===1||o))return null;const d=()=>{l(!0);const u=n.findIndex(h=>!h.submitted);e.history.push(Xn(u,Nt.Prompt))};return i.jsx(jD,{handleContinue:d,isProcessing:c,isLoading:s,introScreenConfig:r,documentConfigs:n})}function DD(e){return{inquiry:e.inquiry.inquiry,documentConfigs:Fa(e),introScreenConfig:$8(e),skipIntroScreen:G8(e)}}const OD={loadDocumentsForInquiry:py,showMessage:se},LD=ke(DD,OD),FD=LD(PD),MD=C("div").withConfig({displayName:"VerifyDocumentsPendingView__Container",componentId:"sc-17xf5u9-0"})(["",""],e=>e.asOverlay&&W(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"])),VD=C("div").withConfig({displayName:"VerifyDocumentsPendingView__Header",componentId:"sc-17xf5u9-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),BD=C("div").withConfig({displayName:"VerifyDocumentsPendingView__AnimationContainer",componentId:"sc-17xf5u9-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],F.base*8);function qD({asOverlay:e=!1}){const[t]=K();return i.jsxs(MD,{asOverlay:e,children:[!e&&i.jsxs(VD,{children:[i.jsx(et,{children:t("documents.pending.title")}),i.jsx(qe,{children:t("documents.pending.description")})]}),i.jsx(BD,{children:i.jsx(Lo,{icon:"document"})})]})}function UD(e){const{inquiry:t,currentStepName:n,documentConfigs:r,documents:o,forcedStatus:a,featureFlags:s}=e,c=parseInt(e.match.params.documentNumber,10),l=o[c],[d]=K(),{processingDisplayStyle:u}=f.useContext(tt),h=u===ka.Overlay;return f.useEffect(()=>{if(t==null||l==null){N.redirectToStart();return}(async()=>{try{await e.pollDocumentAndSubmitVerification({document:l,stepName:n,documentsToVerify:r,documentNumber:c,history:e.history,forcedStatus:a,featureFlags:s})}catch{e.showMessage(d("errors.network"),!0)}})()},[]),t==null||l==null?null:i.jsx(qD,{asOverlay:h})}const HD=e=>({inquiry:e.inquiry.inquiry,currentStepName:e.inquiry.currentStep.name,documentConfigs:Fa(e),documents:e.inquiry.documents,forcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags}),$D={pollDocumentAndSubmitVerification:kg,routeToNextStep:Gt,showMessage:se},GD=ke(HD,$D),WD=GD(UD);var ci=(e=>(e.WebCamera="web_camera",e.MobileCamera="mobile_camera",e.Upload="upload",e.ToMobile="to_mobile",e))(ci||{});const zD=(e,t,n)=>{const r=n&&(e==null?void 0:e.includes(ci.WebCamera));return[{option:ci.WebCamera,condition:r},{option:ci.MobileCamera,condition:!r&&t},{option:ci.Upload,condition:!0},{option:ci.ToMobile,condition:!t}].filter(o=>o.condition&&(e==null?void 0:e.includes(o.option))).map(o=>o.option)},YD=["application/pdf","image/jpeg","image/png","image/heic"],KD=C("div").withConfig({displayName:"VerifyDocumentsPromptView__Container",componentId:"sc-ertrmr-0"})([""]),QD=C("div").withConfig({displayName:"VerifyDocumentsPromptView__Header",componentId:"sc-ertrmr-1"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]),ZD=C.div.withConfig({displayName:"VerifyDocumentsPromptView__CaptureOptionsContainer",componentId:"sc-ertrmr-2"})(["width:100%;"]),el=C(ge).withConfig({displayName:"VerifyDocumentsPromptView__OptionButton",componentId:"sc-ertrmr-3"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],I.Spacing[4]),JD=C(qr).withConfig({displayName:"VerifyDocumentsPromptView__ImgCamera",componentId:"sc-ertrmr-4"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),XD=C("div").withConfig({displayName:"VerifyDocumentsPromptView__DocumentExampleList",componentId:"sc-ertrmr-5"})(["margin:"," 0 "," 0;padding:0 "," 0 ",";"],I.Spacing[4],I.Spacing[6],I.Spacing[2],I.Spacing[2]),eO=C("div").withConfig({displayName:"VerifyDocumentsPromptView__DocumentExample",componentId:"sc-ertrmr-6"})(["display:flex;margin-bottom:",";"],I.Spacing[4]),tO=C("div").withConfig({displayName:"VerifyDocumentsPromptView__IconContainer",componentId:"sc-ertrmr-7"})(["padding:4px "," 0 0;position:relative;"],I.Spacing[2]),nO=C(Kt).withConfig({displayName:"VerifyDocumentsPromptView__StyledCustomizablePictograph",componentId:"sc-ertrmr-8"})(["width:100%;"]),iO=e=>{const{documentConfig:t}=e,[n]=K(),{documentPictographPosition:r}=f.useContext(tt);if(t==null)return null;const o=t.examples!=null&&t.examples.length>0,a=!o&&i.jsx($e,{height:null,width:null,"aria-label":"document pictograph",children:i.jsx(nO,{url:"documentPictographUrl",height:"documentPictographHeight",vectorEffect:"initial",children:i.jsx(In,{children:i.jsx(Gl,{height:80,width:"100%"})})})});return i.jsxs(KD,{children:[r===Wt.Start&&a,i.jsxs(QD,{children:[i.jsx(et,{children:t.title||n("documents.prompt.title")}),i.jsx(qe,{children:i.jsx(J,{children:t.prompt||n("documents.prompt.prompt")})}),o&&i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsx("p",{children:n("documents.prompt.examples-prompt",{count:t.examples.length})}),i.jsx(XD,{children:t.examples.map((s,c)=>i.jsxs(eO,{"data-test":"documents-prompt__documents-example",children:[i.jsx(tO,{children:i.jsx(fs,{})}),i.jsx(J,{children:s})]},`${s}-${c}`))})]})]}),r===Wt.Center&&a,i.jsx(ft,{children:i.jsx(rO,{...e})}),t.optional&&i.jsx(qe,{children:i.jsxs(Bn,{i18nKey:"documents.prompt.or-skip",children:["Or click",i.jsx("a",{id:"document-prompt__skip",onClick:e.handleSkipDocument,children:"here to skip this document"}),"."]})})]})},rO=e=>i.jsx(ZD,{id:"document-prompt__view",children:e.allowedCaptureOptions.map((t,n)=>i.jsx(oO,{isPrimary:n===0,option:t,...e},t))});function oO(e){const{handleDrop:t,handleDropRejected:n,handleSelectCamera:r,handleInputCapture:o,isProcessing:a,documentPromptCaptureButton:s,option:c,handleDeviceHandoff:l}=e,{getRootProps:d,getInputProps:u}=wa({accept:YD,onDrop:t,onDropRejected:n,multiple:!1,disabled:a!=null}),[h]=K();switch(c){case ci.WebCamera:return i.jsx(el,{id:"document-prompt__button--web-camera",buttonType:ne.Primary,disabled:a!=null,onClick:r,isPending:a===at.SelectCamera,children:i.jsx(vh,{content:s})});case ci.MobileCamera:return i.jsx(Fo,{id:"document-prompt__button--mobile-camera","data-test":"document-prompt__button--mobile-camera",buttonType:ne.Primary,disabled:a!=null,handleSelectImage:o,isPending:a===at.UploadImage,children:i.jsx(vh,{content:s})});case ci.Upload:return i.jsxs(el,{id:"document-prompt__button--upload",buttonType:e.isPrimary?ne.Primary:ne.Secondary,disabled:a!=null,isPending:a===at.UploadImage,...d(),children:[i.jsx("input",{...u(),"data-test":"document-prompt__view--file-upload","data-cy":"file-upload"}),h("documents.prompt.upload")]});case ci.ToMobile:return i.jsx(el,{id:"document-prompt__button--to-mobile","data-test":"document-prompt__button--to-mobile",buttonType:e.isPrimary?ne.Primary:ne.Secondary,disabled:a!=null,onClick:l,isPending:a===at.DeviceHandoff,children:h("documents.prompt.btn-continue-on-device")});default:ct(c)}}const vh=({content:e})=>e?i.jsx("span",{children:e}):i.jsx(JD,{"data-test":"document-prompt__image--camera"});function aO(e){const{inquiry:t,template:n,documentConfigs:r,enabledCaptureOptions:o,hasCamera:a,featureFlags:s}=e,c=parseInt(e.match.params.documentNumber,10),[l,d]=f.useState(void 0),[u,h]=f.useState([]),[m]=K(),p=ni();f.useEffect(()=>{if(t==null||n==null){N.redirectToStart();return}},[]),f.useEffect(()=>{if(a==null)e.checkCamera();else{const A=zD(o,p,a);h(A),A.length===1&&A[0]===ci.ToMobile&&e.history.replace("/verify/device-handoff/prompt")}},[a]);const g=f.useCallback(async()=>{e.clearMessages(),d(at.SelectCamera),e.saveCaptureMethod(ut.Auto);try{const A=$g({facingMode:Vs()});e.setVideoConstraints(A),await An.prepare({video:A},s),e.history.push(Xn(c,Nt.TakePhoto))}catch{e.showMessage(m("documents.prompt.failed-video")),d(void 0)}},[c]),b=f.useCallback(()=>{e.clearMessages(),e.showMessage(m("documents.prompt.failed-select-image")),d(void 0)},[]),x=f.useCallback(async([A])=>{e.clearMessages(),d(at.UploadImage),e.saveCaptureMethod(ut.Upload);try{const T=await Ao(A);e.uploadFile({filename:A.name,fileType:A.type,dataUrl:T}),e.history.push(Xn(c,Nt.Check))}catch(T){switch(T.name){case"NotReadableError":e.showMessage(m("documents.prompt.failed-select-image-permissions"));break;default:e.showMessage(m("documents.prompt.failed-select-image"))}d(void 0)}},[c]),y=()=>{l==null&&(e.clearMessages(),d(at.DeviceHandoff),e.history.push("/verify/device-handoff/prompt"))},v=f.useCallback(A=>{e.clearMessages(),d(at.UploadImage),z.logAmplitude("document.camera.upload",{method:"input_capture",files:[{name:A==null?void 0:A.name,type:A==null?void 0:A.type,size:A==null?void 0:A.size}]}),x([A])},[x]),_=f.useCallback(()=>{e.routeToNextStepFromDocument(t,r,c)},[t,c]);return t==null||n==null||u.length===1&&u[0]===ci.ToMobile?null:i.jsx(iO,{documentConfig:r[c],documentPromptCaptureButton:n.attributes["document-prompt-capture-button"],isProcessing:l,handleDrop:x,handleDropRejected:b,handleSelectCamera:g,handleInputCapture:v,handleDeviceHandoff:y,handleSkipDocument:_,allowedCaptureOptions:u})}const sO=e=>{var t;return{inquiry:e.inquiry.inquiry,template:e.inquiry.template,documentConfigs:Fa(e),enabledCaptureOptions:(t=fc(e))==null?void 0:t["enabled-capture-options"],hasCamera:e.ui.hasCamera,featureFlags:e.inquiry.featureFlags}},cO={clearMessages:Lt,routeToNextStepFromDocument:$d,saveCaptureMethod:hr,setVideoConstraints:Sg,showMessage:se,uploadFile:dc,checkCamera:$r},lO=ke(sO,cO),dO=lO(aO),uO=C("div").withConfig({displayName:"PinInput__Container",componentId:"sc-1kcot7q-0"})(["display:flex;justify-content:space-between;position:relative;margin-left:-","px;margin-right:-","px;direction:ltr;"],F.base,F.base),mO=C(zi).withConfig({displayName:"PinInput__HiddenInput",componentId:"sc-1kcot7q-1"})(["background:transparent !important;border-color:transparent !important;box-shadow:none !important;caret-color:transparent;color:transparent !important;position:absolute;left:0;right:0;top:0;bottom:0;&::selection{color:transparent;}"]),hO=mi(["49%{color:",";}50%{color:transparent;}99%{color:transparent;}100%{color:",";}"],Be.gray100,Be.gray100),pO=C(zi).withConfig({displayName:"PinInput__CodeInput",componentId:"sc-1kcot7q-2"})(["text-align:center;margin-left:","px;margin-right:","px;",";",";"],F.base,F.base,e=>e.isFocused&&W(["border-color:",";color:",";box-shadow:0 0 0 1px ",";"],e.theme.colorPrimary,Be.gray100,e.theme.colorPrimary),e=>e.isCursor&&W(["animation-name:",";animation-duration:1s;animation-iteration-count:infinite;"],hO)),fO=({id:e,"data-test":t,allowsLetters:n=!1,autoFocus:r=!1,codeLength:o=Nd,disabled:a=!1,name:s,value:c="",handleSubmitCode:l=()=>{},onChange:d,refHiddenInput:u})=>{const[h,m]=f.useState(r),p=tl(c,{allowsLetters:n,codeLength:o});u!=null||(u=f.createRef());const g=()=>{u.current.selectionStart=u.current.selectionEnd=p.length},b=()=>{m(!0)},x=()=>{m(!1)},y=_=>{d(tl(_.target.value,{allowsLetters:n,codeLength:o}))},v=_=>{const A=_.clipboardData||window.clipboardData;if(!A)return;const T=tl(A.getData("text"),{allowsLetters:n,codeLength:o});new RegExp(`\\d{${o}}`).test(T)&&(d(T),l({"confirmation-code":T}))};return i.jsxs(uO,{"data-test":t,children:[i.jsx(mO,{id:e,autoComplete:"no-autocomplete",autoFocus:r,name:s,ref:u,value:p,onBlur:x,onChange:y,onFocus:b,onKeyDown:g,onPaste:v}),Yh(o).map(_=>{const A=h&&Math.min(p.length,o-1)===_,T=p.charAt(_),R=T!==""?T:A?"|":"";return i.jsx(pO,{disabled:a,isCursor:T==="",isFocused:A,maxLength:1,onChange:()=>{},tabIndex:-1,type:"tel",value:R},_)})]})};function tl(e,{allowsLetters:t,codeLength:n}){return e.trim().toUpperCase().replace(t?/[^0-9０-９A-Z]/g:/[^0-9０-９]/g,"").replace(/[０-９]/g,r=>(r.charCodeAt(0)-65296).toString()).substring(0,n)}const gO=C("div").withConfig({displayName:"PinInputField__Container",componentId:"sc-16jlhqo-0"})(["display:flex;align-items:center;margin-bottom:","px;"],F.base*2),bO=C("div").withConfig({displayName:"PinInputField__FormError",componentId:"sc-16jlhqo-1"})(["",";"],jo);function CO(e){const{input:t,className:n,disabled:r,meta:{error:o,submitFailed:a,submitting:s},autoFocus:c,handleSubmitCode:l,...d}=e,u=!!(o&&a),h=f.createRef(),[m,p]=f.useState(void 0);f.useEffect(()=>{u&&t.value.length===4&&(p(o),t.onChange(""),h.current.focus())},[u]);const g=b=>{p(void 0),t==null||t.onChange(b)};return i.jsxs(i.Fragment,{children:[i.jsx(gO,{className:n,children:i.jsx(fO,{...d,...t,onChange:g,autoFocus:c,handleSubmitCode:l,disabled:r||s,refHiddenInput:h,"aria-invalid":u})}),(u||!!m)&&i.jsx(bO,{role:"alert",children:m||o})]})}const yh={phoneConfirmationCode:[bt("Check your SMS messages for a verification code from us",Rn)],emailConfirmationCode:[bt("Check your email inbox for a verification code from us",Rn)]};function xO(e){const{handleSubmit:t,handleSubmitCode:n,handleResendCode:r,verificationType:o,submitting:a}=e,[s]=K();return i.jsxs("form",{onSubmit:t,children:[i.jsx(Te.Field,{disabled:a,name:"confirmation-code",className:"col-sm-12",component:CO,handleSubmitCode:n,validate:o===w.VerificationEmailAddress?yh.emailConfirmationCode:yh.phoneConfirmationCode}),i.jsxs(ft,{children:[i.jsx(ge,{type:"submit",buttonType:ne.Primary,disabled:a,isPending:a,children:s("form.confirmation-code.btn-submit")}),i.jsx(We,{height:2}),i.jsx(ge,{id:"form-confirmation-code__resend-confirmation-code","data-test":"form-confirmation-code__resend-confirmation-code",buttonType:ne.Secondary,disabled:a,onClick:r,children:s("phone-number.confirm.resend-confirmation-code")})]})]})}const zb=Te.reduxForm({form:"confirmation-code"})(xO),vO=C("div").withConfig({displayName:"VerifyEmailAddressConfirmView__Header",componentId:"sc-1rmhsk9-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),yO=C("div").withConfig({displayName:"VerifyEmailAddressConfirmView__FormSection",componentId:"sc-1rmhsk9-1"})(["margin-bottom:","px;"],F.base*4);function IO(e){const{handleResendCode:t,handleSubmitCode:n,verification:r}=e,[o]=K();return i.jsxs("div",{children:[i.jsxs(vO,{children:[i.jsx(et,{children:o("email-address.confirm.title")}),i.jsx(qe,{children:o("email-address.confirm.prompt",{codeLength:r.attributes["confirmation-code"].length,emailAddress:r.attributes["email-address"]})})]}),i.jsx(yO,{children:i.jsx(zb,{handleSubmitCode:n,handleResendCode:t,verificationType:r.type,onSubmit:n})})]})}class SO extends f.Component{constructor(){super(...arguments),this.handleResendCode=async()=>{const{t,verification:n}=this.props;this.props.clearMessages(),this.props.showMessage(t("email-address.confirm.resent-code")),await te.postResourceAction(n,"email-confirmation-code")},this.handleSubmitCode=async t=>{const{t:n,verification:r}=this.props;this.props.clearMessages();try{await this.props.verificationEmailAddressSubmit(r,t,this.props.history,this.props.featureFlags)}catch{this.props.showMessage(n("email-address.confirm.failed"))}}}componentDidMount(){const{verification:t}=this.props;if(t==null){N.redirectToStart();return}}render(){const{verification:t}=this.props;return t==null?null:i.jsx(IO,{verification:t,handleSubmitCode:this.handleSubmitCode,handleResendCode:this.handleResendCode})}}function wO(e){return{verification:e.verification.verification,featureFlags:e.inquiry.featureFlags}}const _O={clearMessages:Lt,verificationEmailAddressSubmit:GA,showMessage:se},RO=ke(wO,_O),AO=RO(SO),TO=qn()(AO),EO=C("div").withConfig({displayName:"VerifyEmailAddressPromptView__Header",componentId:"sc-k883p3-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),kO=C("div").withConfig({displayName:"VerifyEmailAddressPromptView__FormSection",componentId:"sc-k883p3-1"})(["margin-bottom:","px;"],F.base*4);function NO(e){const[t]=K();return i.jsxs("div",{children:[i.jsxs(EO,{children:[i.jsx(et,{children:t("email-address.title")}),i.jsx(qe,{children:t("email-address.prompt.prompt")})]}),i.jsx(kO,{children:i.jsx(Od,{labelContinue:t("email-address.prompt.btn-submit"),onSubmit:e.handleSubmit})})]})}class jO extends f.Component{constructor(){super(...arguments),this.handleSubmit=async t=>{const{t:n}=this.props;this.props.clearMessages();try{await this.props.verificationEmailAddressStart(t)}catch{this.props.showMessage(n("email-address.prompt.invalid")),document.body.scrollTo(0,0)}}}componentDidMount(){const{template:t}=this.props;if(t==null){N.redirectToStart();return}}render(){const{template:t}=this.props;return t==null?null:i.jsx(NO,{handleSubmit:this.handleSubmit})}}function PO(e){return{template:e.inquiry.template}}const DO={clearMessages:Lt,showMessage:se,verificationEmailAddressStart:$A},OO=ke(PO,DO),LO=OO(jO),FO=qn()(LO),MO=C("div").withConfig({displayName:"VerifyExitView__Header",componentId:"sc-1kpause-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),VO=C("div").withConfig({displayName:"VerifyExitView__ActionSection",componentId:"sc-1kpause-1"})(["margin-bottom:","px;"],F.base*4);function BO(e){const{handleGoBack:t,handleSubmit:n}=e,[r]=K(),{exitPictographPosition:o}=f.useContext(tt),a=i.jsx($e,{"aria-label":"exit pictograph",children:i.jsx(Kt,{url:"exitPictographUrl",height:"exitPictographHeight",children:i.jsx(kn,{})})});return i.jsxs("div",{children:[o===Wt.Start&&a,i.jsxs(MO,{children:[i.jsx(et,{children:r("exit.title")}),i.jsx(qe,{children:r("exit.prompt")})]}),o===Wt.Center&&a,i.jsx(VO,{children:i.jsx(ge,{id:"exit__button--close","data-test":"exit-view__close",onClick:n,"aria-label":"close",children:r("exit.btn-submit")})}),i.jsx(qe,{children:i.jsx(Bn,{i18nKey:"exit.or-go-back",defaults:"Or <0>click here to close</0>",components:[i.jsx("a",{id:"exit__link--back","data-test":"exit-view__back",onClick:t,href:"#",children:"click here to close"},"exit__link--back")],children:"Or click here to close"})})]})}const qO=()=>{const e=Dt(),t=Ke(a=>a.inquiry.inquiry),n=Ke(a=>a.inquiry.featureFlags),r=()=>{e.goBack()},o=()=>{vd(),z.logAmplitude("verify-ui.exited"),z.logAmplitude("verify-ui.exit-view.submit-button.clicked"),N.onEvent(Oe.Exit,{inquiryId:t==null?void 0:t.id,sessionToken:te.accessToken},{inquiry:t}),n["inquiry:remove-clear-memory-history"]?e.push("/widget",{preventBackNavigation:!0}):(Vn(e),e.push("/widget"))};return i.jsx(BO,{handleGoBack:r,handleSubmit:o})},Ih={email:[bt("The email you entered is not valid",ur(Dd)),bt("Enter your email address",Rn)],name:bt("Please enter your name",ur(/..+/))};function UO(e){const{handleSubmit:t,pristine:n,submitting:r}=e,[o]=K();return i.jsxs("form",{onSubmit:t,children:[i.jsxs(li,{children:[i.jsx("label",{htmlFor:"name",children:o("support-prompt.name-label")}),i.jsx(Te.Field,{name:"name",component:mm,autoComplete:"name",disabled:r,type:"text",placeholder:o("support-prompt.name"),validate:Ih.name})]}),i.jsxs(li,{children:[i.jsx("label",{htmlFor:"email-address",children:o("support-prompt.email-address-label")}),i.jsx(Te.Field,{name:"email-address",component:mm,autoComplete:"email",disabled:r,type:"email",placeholder:"you@example.com",validate:Ih.email})]}),i.jsx(Te.Field,{name:"comment",component:LR,disabled:r,type:"text",rows:5,placeholder:o("support-prompt.comment")}),i.jsx(ft,{children:i.jsx(ge,{type:"submit",buttonType:ne.Primary,disabled:n||r,isPending:r,children:o("support-prompt.btn-submit")})})]})}const Yb=Te.reduxForm({form:"support-ticket"})(UO),Sh=C("div").withConfig({displayName:"VerifyFailedView__Header",componentId:"sc-9nspp9-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),ns=C("div").withConfig({displayName:"VerifyFailedView__TextDefaultCentered",componentId:"sc-9nspp9-1"})(["text-align:",";"],({theme:e})=>e.textAlign===Zs.Default?"center":e.textAlign),HO=C("div").withConfig({displayName:"VerifyFailedView__SupportContent",componentId:"sc-9nspp9-2"})([""]);function $O({handleClose:e,handleSubmitTicket:t,hasSupport:n,hasCompleteButton:r,pictograph:o}){const[a]=K(),{failedPictographPosition:s}=f.useContext(tt),c=o!=="none"&&i.jsx($e,{"aria-label":"failed pictograph",children:i.jsx(Kt,{url:"failedPictographUrl",height:"failedPictographHeight",children:i.jsx(Wl,{style:{width:"120px",height:"120px"}})})});return n?i.jsxs(HO,{children:[i.jsxs(Sh,{children:[i.jsx(et,{children:i.jsx(ns,{children:a("failed.title-support")})}),i.jsx(ns,{children:a("failed.prompt-support")})]}),i.jsx(Yb,{onSubmit:t})]}):i.jsxs("div",{children:[s===Wt.Start&&c,i.jsxs(Sh,{children:[i.jsx(et,{children:i.jsx(ns,{children:a("failed.title")})}),i.jsx(ns,{children:i.jsx(J,{children:a("failed.prompt")})})]}),s===Wt.Center&&c,r&&i.jsx(ft,{children:i.jsx(ge,{onClick:e,id:"failed__button","data-test":"failed__button",children:a("failed.btn-submit")})})]})}const wh=1e3;function GO(e){const{inquiry:t,template:n}=e,[r]=K(),o=Dt();f.useEffect(()=>{if(n==null||t==null){N.redirectToStart();return}},[]);const a=async p=>{const{inquiry:g}=e;try{const b=(await te.getResource(S.Inquiry,g.id)).data;switch(e.saveInquiry(b),b.attributes.status){case fe.Created:case fe.Pending:setTimeout(()=>a(p),wh);break;case fe.Completed:case fe.NeedsReview:case fe.Approved:case fe.Declined:case fe.Expired:case fe.Failed:p(b);break;default:ct(b.attributes.status)}}catch(b){b instanceof Ct?setTimeout(()=>a(p),wh):Z(b)}},s=async()=>new Promise(p=>a(p)),{error:c,callback:l}=It(async()=>{const p=await s();N.onEvent(Oe.Fail,{inquiryId:p.id,referenceId:p.attributes["reference-id"],status:p.attributes.status,fields:p.attributes.fields},{inquiry:p})},[s]),{error:d,callback:u}=It(async p=>{await te.postResourceAction({id:t.id,type:t.type},"send-support-ticket",{meta:p}),await s(),o.push("/verify/support/sent")},[t,s]);if(Et({error:c!=null?c:d,onError:()=>se(r("support-prompt.failed")),onNetworkError:()=>se(r("errors.network"))}),n==null||t==null)return null;const m=(t.attributes["next-step"].config||{}).pictograph;return i.jsx($O,{handleClose:l,handleSubmitTicket:u,hasCompleteButton:vi(t),hasSupport:n.attributes["has-support"],pictograph:m})}function WO(e){return{inquiry:e.inquiry.inquiry,organization:e.inquiry.organization,template:e.inquiry.template}}const zO={saveInquiry:Ot,showMessage:se},YO=ke(WO,zO),KO=YO(GO),QO=C("div").withConfig({displayName:"VerifyGovernmentIdCaptureView__Header",componentId:"sc-1lf35hz-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[4]),ZO=C("div").withConfig({displayName:"VerifyGovernmentIdCaptureView__CameraSelect",componentId:"sc-1lf35hz-1"})(["margin-bottom:",";"],I.Spacing[2]),JO=C(qe).withConfig({displayName:"VerifyGovernmentIdCaptureView__SelectCameraLabel",componentId:"sc-1lf35hz-2"})(["font-weight:",";"],Ma.Medium),XO=({countryCode:e,governmentIdClass:t,governmentIdSide:n})=>{const[r]=K(),o=Ii(r,["government-id.capture.title","government-id.title"],e,t,n);return i.jsx(et,{children:o})},eL=({governmentIdClass:e,governmentIdSide:t})=>{const[n]=K(),r=Ii(n,["government-id.capture.prompt"],null,e,t);return i.jsx(qe,{children:i.jsx(J,{children:r})})};function tL(e){var g;const{requiresSide:t,handleCapture:n,handleCameraChange:r,handleError:o,selectedCountryCode:a,governmentIdClass:s,selectedCamera:c,videoConstraints:l,featureFlags:d,zoomFactor:u}=e,[h]=K(),m=i.jsx(eb,{governmentIdClass:s,requiresSide:t,mirrored:l.facingMode==="user",simple:d["verify:remove-front-overlay-for-id-and-dl"]&&t===U.Front&&["id","dl"].includes(s)});let p;return t===U.BarcodePdf417?e.shouldUseMicroblink?p=i.jsx(ks,{handleCapture:n,handleError:o,labelTakePhoto:h("government-id.capture.btn-take-photo"),videoConstraints:l,requiresSide:t,governmentIdClass:e.governmentIdClass,overlay:m,zoomFactor:u}):p=i.jsx(nb,{handleCapture:n,handleError:o,labelTakePhoto:h("government-id.capture.btn-take-photo"),videoConstraints:l,requiresSide:t,overlay:m,zoomFactor:u}):p=e.shouldUseMicroblink?i.jsx(ks,{handleCapture:n,handleError:o,labelTakePhoto:h("government-id.capture.btn-take-photo"),videoConstraints:l,overlay:m,requiresSide:t,governmentIdClass:e.governmentIdClass,zoomFactor:u}):i.jsx(lb,{isPassport:s==="pp",handleCapture:n,handleError:o,labelTakePhoto:h("government-id.capture.btn-take-photo"),videoConstraints:l,overlay:m,zoomFactor:u}),i.jsxs("div",{children:[i.jsxs(QO,{children:[i.jsx(XO,{countryCode:a,governmentIdClass:s,governmentIdSide:t}),i.jsx(eL,{governmentIdClass:s,governmentIdSide:t})]}),e.shouldDisplayCameraSelector&&((g=e.cameraSelectOptions)==null?void 0:g.length)>1&&i.jsxs(ZO,{children:[i.jsx(JO,{children:"Select Camera"}),i.jsx(ic,{"data-test":"gov-id-capture__select-camera",value:c,onChange:r,children:e.cameraSelectOptions.map((b,x)=>i.jsx("option",{value:b.deviceId,children:`Camera ${x+1}`},b.deviceId))})]}),p]})}const nL=1e6,iL=2e3,rL=e=>{var T;const{selectedCountryCode:t,featureFlags:n,match:r,governmentIdClass:o,videoConstraints:a,cameraOptions:s,history:c}=e,l=parseInt(r.params.step,10),d=gd(e.inquiry.attributes["next-step"].config,t,o,l),u=a.deviceId,h=!!n["inquiry:show-government-id-camera-selector"],m=zd();let p=[];s!=null&&(s.backCameras.length>0?p=s.backCameras:p=s.frontCameras);const[g]=K(),[b,x]=f.useState(!1);f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}h&&e.loadCameraOptions()},[]),f.useEffect(()=>{Ca(window.location.host)?xa(d,t,o,n)||z.logAmplitude("government-id.microblink.unsupported-side",{currentSide:d,selectedCountryCode:t,governmentIdClass:o}):z.logAmplitude("government-id.microblink.unsupported-browser",{host:window.location.host})},[n]);const y=async(R,O,D,L,H)=>{var V;e.updateCameraInspectionData(D),e.saveCaptureMethod(O),R=R.filter(q=>q!=null);const M=(V=p.find(q=>q.deviceId===(u==null?void 0:u.exact)))==null?void 0:V.label,B={...h&&M!=null&&{cameraName:M},imageSizes:R.map(q=>q.length)};try{if(z.logAmplitude("government-id.camera.capture",B),R.some($=>$.length>nL)){const $=[];for(const Q of R)$.push(await vb(Q,iL));R=$}const q=R.map(($,Q)=>({filename:`photo${Q+1}.jpg`,fileType:go,dataUrl:$,captureMethod:O,captureFlow:_o.Guided}));e.uploadFiles(d,q,L,H),N.onEvent(Oe.DocumentCameraCapture),e.history.index>0?e.history.replace(Qn(l,Ue.Check)):e.history.push(Qn(l,Ue.Check))}catch(q){e.showMessage(g("government-id.capture.failed-screenshot")),Z(new Error("failed to capture screenshot"),"error",{error:q})}},v=(R,O)=>{O==="capture"&&e.showMessage(g("government-id.capture.failed-screenshot")),R instanceof ln?(Z(R,"warning",{...R.originalError,state:O},{jira:"PER-10182"}),x(!0),O==="load"&&N.onEvent(Oe.LoadCameraFailed,{error:R.name,message:R.message})):R instanceof Error?(Z(R,"error",{state:O},{jira:"PER-10182"}),O==="load"&&(N.onEvent(Oe.LoadCameraFailed,{error:R.name,message:R.message}),c.push("/verify/support/camera"))):(typeof R=="object"&&Object.prototype.hasOwnProperty.call(R,"message")?Z(new Error(R.message),"error",{...R,state:O},{jira:"PER-10182"}):Z(new Error(R),"error",{state:O},{jira:"PER-10182"}),O==="load"&&(N.onEvent(Oe.LoadCameraFailed,{message:R}),c.push("/verify/support/camera")))},_=!Pn()&&Ca(window.location.host)&&!b&&xa(d,t,o,n),A=R=>{const O=R.target.value,D=p.find(H=>H.deviceId===O).label;z.logAmplitude("government-id.camera.changed",{deviceId:O,cameraName:D}),An.dispose();const L={...a,deviceId:{exact:O}};An.prepare({video:L},n),e.setVideoConstraints(L)};return i.jsx(tL,{requiresSide:d,shouldUseMicroblink:_,shouldDisplayCameraSelector:h,featureFlags:n,selectedCountryCode:t,governmentIdClass:o,cameraSelectOptions:p,selectedCamera:(T=u==null?void 0:u.exact)!=null?T:"",handleCapture:y,handleCameraChange:A,handleError:v,videoConstraints:a,zoomFactor:m})};function oL(e){var t;return{selectedCountryCode:(t=e.inquiry.inquiry)==null?void 0:t.attributes["selected-country-code"],inquiry:e.inquiry.inquiry,featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,videoConstraints:e.verification.videoConstraints,cameraOptions:e.ui.cameraOptions}}const aL={updateCameraInspectionData:md,saveCaptureMethod:hr,setVideoConstraints:Ro,showMessage:se,loadCameraOptions:Kl,uploadFiles:Ks},sL=ke(oL,aL),cL=sL(rL),lL=qn()(cL),dL=C("div").withConfig({displayName:"VerifyGovernmentIdCheckView__Header",componentId:"sc-73oem0-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),uL=C("div").withConfig({displayName:"VerifyGovernmentIdCheckView__ImagePositioner",componentId:"sc-73oem0-1"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],F.base*2),mL=C("div").withConfig({displayName:"VerifyGovernmentIdCheckView__Minify",componentId:"sc-73oem0-2"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function hL(e){const{currentUpload:t,handleContinue:n,handleRetry:r,isProcessing:o}=e,[a]=K();return["image/jpeg","image/png"].includes(t.fileType)?i.jsxs("div",{children:[i.jsxs(dL,{children:[i.jsx(et,{children:a("government-id.check.title")}),i.jsx(qe,{children:a("government-id.check.prompt")})]}),i.jsx(uL,{children:i.jsx(Wb,{src:t.dataUrl,alt:"upload preview"})}),i.jsxs(ft,{children:[i.jsx(ge,{id:"government_id__use-image",buttonType:ne.Primary,disabled:o,onClick:n,"data-test":"government-id-check__continue",children:o?i.jsxs("span",{children:[a("government-id.check.uploading"),i.jsx(mL,{children:i.jsx(Ji,{})})]}):a("government-id.check.btn-submit")}),i.jsx(We,{height:2}),i.jsx(ge,{id:"government_id__retake",buttonType:ne.Secondary,disabled:o,onClick:r,"data-test":"government-id-check__retake",children:a("government-id.check.btn-retake")})]})]}):i.jsx(Gb,{fileName:t.filename,isProcessing:o,handleContinue:n,handleRetry:r})}function pL(e){const{clientExtractions:t,forcedStatus:n,governmentIdClass:r,inquiry:o,match:a,routingInputs:s,selectedCountryCode:c,uploads:l,cameraInspectionData:d}=e,u=parseInt(a.params.step,10),[h]=f.useState(()=>gd(o.attributes["next-step"].config,c,r,u)),m=l[h],p=m&&m[m.length-1];f.useEffect(()=>{const{inquiry:_}=e;if(_==null){N.redirectToStart();return}if(h==null){N.redirectToStart();return}(m==null||m.length===0||!p)&&(e.showMessage(g("errors.network")),e.history.goBack())},[]);const[g]=K(),{error:b,loading:x,callback:y}=It(async()=>{e.clearMessages(),uo(Object.values(l)).map(A=>A.dataUrl.length).reduce((A,T)=>A+T,0)>ua&&e.showMessage(g("government-id.check.large-upload")),sy(o,c,r,u+1)?await e.verificationGovernmentIdSubmit(s,r,l,d,t,e.history,n,g,e.featureFlags):e.history.push(Qn(u+1,Ue.Prompt))},[l,o,c,r,u,s,t,n]);Et({error:b,onError:()=>e.showMessage(g("errors.network")),onNetworkError:()=>e.showMessage(g("errors.network"))});const v=()=>{x||e.history.goBack()};return m==null||m.length===0||!p?null:i.jsx(hL,{currentUpload:p,handleContinue:y,handleRetry:v,isProcessing:x})}function fL(e){var t;return{inquiry:e.inquiry.inquiry,clientExtractions:e.verification.clientExtractions,clientExtractionSource:e.verification.clientExtractionSource,selectedCountryCode:(t=e.inquiry.inquiry)==null?void 0:t.attributes["selected-country-code"],forcedStatus:e.test.forcedStatus,governmentIdClass:e.verification.governmentIdClass,routingInputs:vc(e),uploads:e.verification.uploads,cameraInspectionData:e.verification.cameraInspectionData,featureFlags:e.inquiry.featureFlags}}const gL={clearMessages:Lt,showMessage:se,verificationGovernmentIdSubmit:QA},bL=ke(fL,gL),CL=bL(pL),xL=C("div").withConfig({displayName:"VerifyGovernmentIdFailedView__Header",componentId:"sc-fi89xw-0"})(["",""],e=>e.withIcon?W(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4):W(["margin-bottom:","px;"],F.base*2)),vL=C("div").withConfig({displayName:"VerifyGovernmentIdFailedView__FailureReasonSection",componentId:"sc-fi89xw-1"})(["margin-bottom:","px;"],F.base*6),yL=C("div").withConfig({displayName:"VerifyGovernmentIdFailedView__FailureReasonOption",componentId:"sc-fi89xw-2"})(["display:flex;align-items:center;margin-bottom:","px;"],F.base*2),IL=C.div.withConfig({displayName:"VerifyGovernmentIdFailedView__FailureReasonPictograph",componentId:"sc-fi89xw-3"})(["display:flex;align-items:center;flex-shrink:0;justify-content:space-around;margin-right:","px;> img,svg{height:50px;width:50px;}"],F.base*2);function SL({handleContinue:e,verification:t}){const[n]=K(),{iconStyle:r}=f.useContext(tt),o=r!==Gr.None,a=(t.attributes["entity-confidence-reasons"]||[]).filter(c=>Object.values(cn).includes(c)),s=a.length===0?cn.Generic:a[0];return i.jsxs("div",{children:[i.jsxs(xL,{withIcon:o,children:[i.jsx(et,{children:i.jsx(J,{children:n("government-id.failed.title")})}),i.jsx(qe,{children:i.jsx(J,{children:n("government-id.failed.prompt")})})]}),i.jsx(vL,{children:i.jsx(wL,{withIcon:o,failureReason:s,t:n})}),i.jsx(ft,{children:i.jsx(ge,{id:"government-id-failed__continue",buttonType:ne.Primary,onClick:e,children:n("government-id.failed.btn-submit")})})]})}const wL=({withIcon:e,failureReason:t,t:n})=>{let r,o;switch(t){case cn.BarcodeNotDetected:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(Rr,{})}),o=n("government-id.failed.failure-reasons.barcode-missing");break;case cn.MrzNotDetected:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(Rr,{})}),o=n("government-id.failed.failure-reasons.mrz-missing");break;case cn.Blurry:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ki,{})}),o=n("government-id.failed.failure-reasons.blurry");break;case cn.Glare:r=i.jsx(ye,{children:i.jsx(Cp,{})}),o=n("government-id.failed.failure-reasons.glare");break;case cn.PortraitMissing:r=i.jsx(ye,{children:i.jsx(ll,{})}),o=n("government-id.failed.failure-reasons.missing-portrait");break;case cn.DoubleFrontDetected:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(Rr,{})}),o=n("government-id.failed.failure-reasons.id-back");break;case cn.DisabledIdClass:r=i.jsx(ye,{children:i.jsx(kn,{})}),o=n("government-id.failed.failure-reasons.disabled-id-class");break;case cn.MilitaryId:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ki,{})}),o=n("government-id.failed.failure-reasons.military-id");break;case cn.Expired:r=i.jsx(ye,{children:i.jsx(kn,{})}),o=n("government-id.failed.failure-reasons.expired");break;case cn.CornerMissing:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ki,{})}),o=n("government-id.failed.failure-reasons.corner-missing");break;case cn.SelectedCountryMismatch:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ki,{})}),o=n("government-id.failed.failure-reasons.selected-country-mismatch");break;case cn.FailedAgeComparison:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ki,{})}),o=n("government-id.failed.failure-reasons.failed-age-comparison");break;case cn.UnprocessableImage:r=i.jsx(ye,{children:i.jsx(kn,{})}),o=n("government-id.failed.failure-reasons.unprocessable-image");break;case cn.UnacceptableGovernmentId:r=i.jsx(ye,{children:i.jsx(kn,{})}),o=n("government-id.failed.failure-reasons.unacceptable-government-id");break;case cn.PortraitNotClear:r=i.jsx(ye,{children:i.jsx(ll,{})}),o=n("government-id.failed.failure-reasons.portrait-not-clear");break;case cn.Generic:r=i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ki,{})}),o=n("government-id.failed.failure-reasons.generic");break;default:ct(t)}return i.jsxs(yL,{children:[e&&i.jsx(IL,{"data-test":"government-id-failed__failure-reason-pictograph",children:r}),i.jsx(J,{children:o})]})},_L=e=>(f.useEffect(()=>{(e.inquiry==null||e.verification==null)&&N.redirectToStart()},[]),e.inquiry==null||e.verification==null?null:i.jsx(SL,{handleContinue:()=>e.routeToNextStep(e.inquiry,jt),verification:e.verification}));function RL(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const AL={routeToNextStep:Gt},TL=ke(RL,AL),EL=TL(_L),kL=C("div").withConfig({displayName:"VerifyGovernmentIdPendingView__Container",componentId:"sc-w317h0-0"})(["",""],e=>e.asOverlay&&W(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"])),NL=C("div").withConfig({displayName:"VerifyGovernmentIdPendingView__Header",componentId:"sc-w317h0-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),jL=C("div").withConfig({displayName:"VerifyGovernmentIdPendingView__AnimationContainer",componentId:"sc-w317h0-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],F.base*8);function PL({asOverlay:e=!1}){const[t]=K();return i.jsxs(kL,{asOverlay:e,children:[!e&&i.jsxs(NL,{children:[i.jsx(et,{children:t("government-id.pending.title")}),i.jsx(qe,{children:t("government-id.pending.description")})]}),i.jsx(jL,{children:i.jsx(Lo,{icon:"verification"})})]})}const DL=e=>{const t=Dt(),[n]=K(),{processingDisplayStyle:r}=f.useContext(tt),o=r===ka.Overlay;return f.useEffect(()=>{const{verification:a,inquiry:s}=e;if(a==null||s==null){N.redirectToStart();return}(async()=>{try{await e.pollVerification({verification:a,history:t,handleFailed:c=>{const l=c.included.find(d=>d.id===c.data.relationships.inquiry.data.id);l.attributes["next-step"].type===w.VerificationGovernmentId?t.push("/verify/government-id/failed"):e.routeToNextStep(l)},featureFlags:e.featureFlags})}catch{e.showMessage(n("errors.network"),!0)}})()},[]),e.verification==null?null:i.jsx(PL,{asOverlay:o})};function OL(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification,featureFlags:e.inquiry.featureFlags}}const LL={pollVerification:Do,routeToNextStep:Gt,showMessage:se},FL=ke(OL,LL),ML=FL(DL),Kb=["application/pdf","image/jpeg","image/png","image/heic"],VL=C("div").withConfig({displayName:"VerifyGovernmentIdPromptView__Header",componentId:"sc-1n4u91d-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[4]),BL=({countryCode:e,governmentIdClass:t,governmentIdSide:n})=>{const[r]=K(),o=Ii(r,["government-id.prompt.title","government-id.title"],e,t,n);return i.jsx(et,{children:o})},qL=({governmentIdClass:e,governmentIdSide:t})=>{const[n]=K(),r=Ii(n,["government-id.prompt.prompt"],null,e,t);return i.jsx(qe,{children:i.jsx(J,{children:r})})},UL=C.div.withConfig({displayName:"VerifyGovernmentIdPromptView__CaptureOptionsContainer",componentId:"sc-1n4u91d-1"})(["width:100%;"]),nl=C(ge).withConfig({displayName:"VerifyGovernmentIdPromptView__OptionButton",componentId:"sc-1n4u91d-2"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],I.Spacing[4]),HL=C(qr).withConfig({displayName:"VerifyGovernmentIdPromptView__ImgCamera",componentId:"sc-1n4u91d-3"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary);function $L(e){return i.jsx(UL,{id:"government-id-prompt__view",children:e.enabledCaptureOptions.map((t,n)=>i.jsx(GL,{isPrimary:n===0,option:t,...e},t))})}function GL(e){const{handleSelectCamera:t,handleInputCapture:n,handleDeviceHandoff:r,isProcessing:o,documentPromptCaptureButton:a,option:s}=e,{getRootProps:c,getInputProps:l}=wa({onDrop:e.handleDrop,multiple:!1,accept:Kb}),[d]=K(),u=o!=null;switch(s){case wn.WebCamera:return i.jsx(nl,{id:"government-id-prompt__button--web-camera",buttonType:ne.Primary,disabled:u,onClick:t,isPending:o===at.SelectCamera,"aria-label":a||d("government-id.prompt.btn-take-photo-label"),children:i.jsx(_h,{children:a})});case wn.MobileCamera:return i.jsx(Fo,{buttonType:ne.Primary,disabled:u,id:"government-id-prompt__button--mobile-camera",handleSelectImage:n,isPending:o===at.UploadImage,"aria-label":a||d("government-id.prompt.btn-take-photo-label"),children:i.jsx(_h,{children:a})});case wn.Upload:return i.jsxs(nl,{buttonType:e.isPrimary?ne.Primary:ne.Secondary,disabled:u,...c(),children:[i.jsx("input",{...l(),"data-test":"file-upload","data-cy":"file-upload"}),d("government-id.prompt.upload")]});case wn.DeviceHandoff:return i.jsx(nl,{id:"government-id-prompt__button--device-handoff","data-test":"government-id-prompt__button--device-handoff",buttonType:e.isPrimary?ne.Primary:ne.Secondary,disabled:u,onClick:r,isPending:o===at.DeviceHandoff,children:d("government-id.prompt.btn-send-to-device")});default:ct(s)}}const _h=({children:e})=>e?i.jsx(i.Fragment,{children:e}):i.jsx(HL,{"data-test":"government-id-prompt__image--camera"}),to=C(Kt).withConfig({displayName:"VerifyGovernmentIdPromptView__StyledCustomizablePictograph",componentId:"sc-1n4u91d-4"})(["width:100%;"]),WL=({currentSide:e,governmentIdClass:t})=>{if(t==="pp")switch(e){case U.PassportSignature:return i.jsx(to,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",children:i.jsx(In,{children:i.jsx(ms,{height:64,width:"100%"})})});default:return i.jsx(to,{url:"passportFrontPictographUrl",height:"passportFrontPictographHeight","aria-label":"passport front",vectorEffect:"initial",children:i.jsx(In,{children:i.jsx(mp,{height:80,width:"100%"})})})}switch(e){case U.Back:case U.BarcodePdf417:return i.jsx(to,{url:"idBackPictographUrl",height:"idBackPictographHeight","aria-label":"id back",vectorEffect:"initial",children:i.jsx(In,{children:i.jsx(Rr,{height:64,width:"100%"})})});case U.Front:return i.jsx(to,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",children:i.jsx(In,{children:i.jsx(ki,{height:64,width:"100%"})})});case U.FrontOrBack:return i.jsx(to,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",children:i.jsxs(In,{children:[i.jsx(ki,{height:48,width:"100%"}),i.jsx(Rr,{height:48,width:"100%"})]})});case U.PassportSignature:return i.jsx(to,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",children:i.jsx(In,{children:i.jsx(ms,{height:64,width:"100%"})})});default:ct(e)}},zL=e=>{const{selectedCountryCode:t,currentSide:n,governmentIdClass:r,enabledCaptureOptions:o}=e,{governmentIdPictographPosition:a}=f.useContext(tt);if(o.length===0)return i.jsx(vn,{});const s=i.jsx($e,{height:null,width:null,role:null,"aria-label":null,children:i.jsx(WL,{currentSide:n,governmentIdClass:r})}),c=t==="US"&&n===U.Back;return i.jsxs("div",{children:[a===Wt.Start&&s,i.jsxs(VL,{children:[i.jsx(BL,{countryCode:t,governmentIdClass:r,governmentIdSide:n}),i.jsx(qL,{governmentIdClass:r,governmentIdSide:n})]}),a===Wt.Center&&s,c&&i.jsx(vo,{agreeToPolicyType:"barcode"}),i.jsx(ft,{children:i.jsx($L,{...e})})]})},YL=e=>{const{currentSession:t,featureFlags:n,governmentIdClass:r,hasCamera:o,inquiry:a,selectedCountryCode:s,template:c}=e,[l,d]=f.useState(void 0),[u,h]=f.useState([]),{t:m}=K(),p=Dt(),g=np(),b=parseInt(g.step,10),x=f.useMemo(()=>gd(a.attributes["next-step"].config,s,r,b),[a,s,r,b]),y=!Pn()&&o&&u.includes(wn.WebCamera),v=y&&Ca(window.location.host)&&xa(x,s,r,n),_=y&&!v,A=ni()?"basic":"advanced";f.useEffect(()=>{if(a==null){N.redirectToStart();return}},[]),f.useEffect(()=>{if(o==null)e.checkCamera();else{c.attributes["force-link-from-react-native"]&&t.relationships["parent-session"].data==null&&(z.logAmplitude("government-id.redirect-to-mobile-for-react-native"),p.replace("/verify/device-handoff/sms"));const V=a.attributes["next-step"].config||{},q=s.toLowerCase(),$=Yv(V,q,r,o);switch($.length){case 0:p.replace("/verify/invalid/verification");break;case 1:M($[0]);break;default:h($)}}},[o]),f.useEffect(()=>{if(v&&!Fi.isLoaded()){const V=performance.now();Fi.preload(A).then(()=>{z.logAmplitude("government-id.microblink.preload",{durationSeconds:(performance.now()-V)/1e3,side:x,idClass:r,microblinkModel:A})}).catch(q=>{q instanceof ln?Z(q,"warning",{...q.originalError,state:"preload"},{jira:"PER-10182"}):q instanceof Error?Z(q,"warning",{state:"preload"},{jira:"PER-10182"}):Z(new Error(q),"warning",{state:"preload"},{jira:"PER-10182"})})}},[v]),f.useEffect(()=>{_&&yt.loadModels()},[_]);const T=async V=>{e.clearMessages(),d(at.SelectCamera),e.saveCaptureMethod(ut.Auto);try{const q=Hg({currentSide:x,facingMode:Vs(),isMicroblink:v,isGovidRedesign:!1,featureFlags:n});if(n["inquiry:show-government-id-camera-selector"]&&e.loadCameraOptions(),navigator.userAgent.includes("Android")){const Q=await cx(null,lx.BackFacingCamera);Q&&Q.label!==""&&(q.deviceId={exact:Q.deviceId})}e.setVideoConstraints(q),await An.prepare({video:q},n),N.onEvent(Oe.DocumentCameraSelect),V(Qn(b,Ue.TakePhoto))}catch(q){z.logAmplitude("government-id.camera.errored",{error:{name:q.name,message:q.message}}),N.onEvent(Oe.LoadCameraFailed,{error:q.name,message:q.message}),V("/verify/support/camera")}},R=V=>{e.clearMessages(),d(at.UploadImage),z.logAmplitude("government-id.upload",{method:"drop",files:V.map(q=>({name:q==null?void 0:q.name,type:q==null?void 0:q.type,size:q==null?void 0:q.size}))}),O(V)?(N.onEvent(Oe.DocumentUpload),L(V[0],ut.Upload)):d(void 0)},O=V=>V.length!==1?(z.logAmplitude("government-id.upload.invalid",{detail:"wrong number of files"}),e.showMessage(m("government-id.prompt.failed-select-image")),!1):Kb.includes(V[0].type)?!0:(z.logAmplitude("government-id.upload.invalid",{detail:"wrong file type"}),e.showMessage(m("government-id.prompt.failed-invalid-type")),!1),D=V=>{e.clearMessages(),d(at.UploadImage),z.logAmplitude("government-id.upload",{method:"input_capture",files:[{name:V==null?void 0:V.name,type:V==null?void 0:V.type,size:V==null?void 0:V.size}]}),L(V,ut.Manual)},L=async(V,q)=>{e.saveCaptureMethod(q);try{const $=await Ao(V);e.uploadFiles(x,[{filename:V.name,fileType:V.type,dataUrl:$,captureMethod:q,captureFlow:_o.Unguided}]),p.push(Qn(b,Ue.Check))}catch($){switch(z.logAmplitude("government-id.upload.errored",{file:{type:V==null?void 0:V.type}}),$.name){case"NotReadableError":e.showMessage(m("government-id.prompt.failed-select-image-permissions"));break;case"SecurityError":e.showMessage(m("government-id.prompt.failed-select-image"));break;case"NotFoundError":default:Z($,"warning",{filename:V==null?void 0:V.name,fileType:V==null?void 0:V.type,captureMethod:q,currentSide:x}),e.showMessage(m("government-id.prompt.failed-select-image"))}d(void 0)}},H=V=>{l==null&&(e.clearMessages(),d(at.DeviceHandoff),V("/verify/device-handoff/prompt"))},M=async V=>{const{featureFlags:q}=e;switch(V){case wn.WebCamera:q["verify:skip-gov-id-prompt-web-camera-only-by-org"]?await T(p.replace):h([V]);break;case wn.DeviceHandoff:H(p.replace);break;case wn.MobileCamera:case wn.Upload:h([V]);break;default:ct(V)}};if(o==null||x==null)return null;const B=c.attributes["document-prompt-capture-button"];return i.jsx(zL,{currentSide:x,handleDrop:R,handleSelectCamera:()=>T(p.push),handleInputCapture:D,handleDeviceHandoff:()=>H(p.push),isProcessing:l,governmentIdClass:r,enabledCaptureOptions:u,documentPromptCaptureButton:B,selectedCountryCode:s})};function KL(e){var t;return{featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,template:e.inquiry.template,selectedCountryCode:(t=e.inquiry.inquiry)==null?void 0:t.attributes["selected-country-code"],hasCamera:e.ui.hasCamera}}const QL={clearMessages:Lt,saveCaptureMethod:hr,setVideoConstraints:Ro,showMessage:se,uploadFiles:Ks,checkCamera:$r,loadCameraOptions:Kl},ZL=ke(KL,QL),JL=ZL(YL),XL=C("div").withConfig({displayName:"OptionVertical__OptionBlock",componentId:"sc-uxd4q2-0"})(["display:flex;justify-content:space-between;align-items:center;cursor:pointer;",""],({verticalOptionsStyle:e})=>{switch(e){case Wi.Default:return W(["padding-top:",";padding-bottom:",";padding-left:",";padding-right:",";border-bottom:1px solid ",";:first-child{border-top:1px solid ",";}:hover,:focus{background-color:",";}"],I.Spacing[4],I.Spacing[4],I.Spacing[5],I.Spacing[5],Be.gray50,Be.gray50,({theme:t})=>t.colorDropdownOption);case Wi.Light:return W(["padding-top:18px;padding-bottom:18px;padding-left:0;padding-right:",";border-bottom:1px solid ",";:first-child{border-top:1px solid ",";}color:",";margin-left:",";font-weight:500;:focus-within{background-color:",";}"],I.Spacing[5],({theme:t})=>t.colorDivider,({theme:t})=>t.colorDivider,({theme:t})=>t.colorFontTitle,I.Spacing[5],({theme:t})=>t.colorDropdownOption)}}),eF=C("span").withConfig({displayName:"OptionVertical__ThemedIcon",componentId:"sc-uxd4q2-1"})(["rect[fill]:not([fill='none']){fill:",";}path[fill]:not([fill='none']){fill:",";}height:32px;margin-right:",";"],e=>e.theme.iconColorGovernmentIdType,e=>e.theme.colorModalBackground,I.Spacing[4]),tF=C("span").withConfig({displayName:"OptionVertical__Text",componentId:"sc-uxd4q2-2"})(["flex-grow:1;"]),nF=C(ge).withConfig({displayName:"OptionVertical__OptionVerticalButton",componentId:"sc-uxd4q2-3"})(["width:100%;& + &{margin-top:",";}"],I.Spacing[5]);function iF(e){const{iconStyle:t,verticalOptionsStyle:n}=f.useContext(tt),{countryCode:r,governmentIdClass:o}=e,[a]=K();if(n===Wi.Button)return i.jsx(nF,{id:`select__option--${o}`,"data-test":"option-block",onClick:()=>e.handleSelectType(o),children:Ii(a,["government-id.title"],r,o)},o);let s;switch(o){case"dl":s=i.jsx(gp,{});break;case"ofw":case"pp":case"ppc":case"visa":s=i.jsx(fp,{});break;case"id":s=i.jsx(pp,{});break;case"rp":case"pr":default:s=i.jsx(hp,{});break}return i.jsxs(XL,{verticalOptionsStyle:n,id:`select__option--${o}`,"data-test":"option-block",onClick:()=>e.handleSelectType(o),onKeyPress:()=>e.handleSelectType(o),tabIndex:0,role:"button",children:[t!==Gr.None&&i.jsx(eF,{"data-test":"option-vertical__pictograph","aria-hidden":!0,children:s}),i.jsx(tF,{children:Ii(a,["government-id.title"],r,o)}),i.jsx(Ql,{"aria-hidden":!0})]},o)}const rF=C("div").withConfig({displayName:"GovernmentIdOptions__Container",componentId:"sc-1pihot-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;"]),oF=C("div").withConfig({displayName:"GovernmentIdOptions__OptionBlockPositioner",componentId:"sc-1pihot-1"})(["",";"],({theme:e})=>e.verticalOptionsStyle===Wi.Button?W(["width:100%;"]):W(["margin-left:-24px;width:calc(100% + 48px);margin-right:-24px;"])),aF=C("div").withConfig({displayName:"GovernmentIdOptions__NoticeVertical",componentId:"sc-1pihot-2"})(["",";color:",";font-weight:",";margin-bottom:","px;"],({theme:e})=>e.verticalOptionsStyle===Wi.Button&&W(["display:none;"]),({theme:e})=>e.colorFontTitle,pn.medium,F.base),sF=C("div").withConfig({displayName:"GovernmentIdOptions__OptionsVertical",componentId:"sc-1pihot-3"})(["width:100%;flex-direction:column;margin-bottom:","px;"],F.base*4);function cF(e){const{selectedCountryCode:t,enabledIdClassesByCountryEntries:n,handleSelectType:r}=e,[o]=K();return n&&n.length>0?i.jsxs(rF,{children:[i.jsx(aF,{children:o("select.option-notice")}),i.jsx(oF,{children:i.jsx(sF,{children:n.map(a=>i.jsx(iF,{countryCode:t,handleSelectType:r,governmentIdClass:a.class},a.class))})})]}):i.jsxs(Bn,{i18nKey:"select.unsupported",children:["We are unable to verify identities in this country."," ",i.jsx("a",{id:"government-id-options__support-link",onClick:e.handleRouteToSupport,children:"Please contact us"})," ","if you don’t have another form of identification."]})}const lF=C("div").withConfig({displayName:"VerifyGovernmentIdSelectView__Header",componentId:"sc-oi672g-0"})(["margin-bottom:","px;",""],F.base*4,({verticalOptionsStyle:e})=>{switch(e){case Wi.Default:return W(["min-height:",";"],Me.header);case Wi.Light:return}});function dF(e){const{selectedCountryCode:t,handleSelectType:n,enabledIdClassesByCountryEntries:r,hasEnabledSkipUnknown:o,showDisclaimer:a}=e,[s]=K(),{governmentIdPictographPosition:c,verticalOptionsStyle:l,governmentIdSelectPictographUrl:d}=f.useContext(tt),u=d?i.jsx($e,{"aria-label":"government id prompt",children:i.jsx(Kt,{url:"governmentIdSelectPictographUrl",height:"governmentIdSelectPictographHeight","aria-label":"government id prompt picture"})}):null;return i.jsxs("div",{children:[c===Wt.Start&&u,i.jsxs(lF,{verticalOptionsStyle:l,children:[i.jsx(et,{children:s("select.title")}),i.jsx(qe,{children:s("select.prompt")})]}),c===Wt.Center&&u,i.jsx(cF,{selectedCountryCode:t,enabledIdClassesByCountryEntries:r,handleRouteToSupport:e.handleRouteToSupport,handleSelectType:n}),o&&i.jsx(qe,{children:i.jsx(Bn,{i18nKey:"select.or-other-identity-card",defaults:"Don’t see your ID above? <0/><1>Click here to upload another document.</1>",components:[i.jsx("br",{},0),i.jsx("a",{id:"verify-government-id-select__other-identity-card",onClick:()=>n(void 0),children:"Click here to upload another ID."},1)],children:"Don’t see your ID above? Click here to upload another document."})}),a&&i.jsx(vo,{})]})}function uF(e){var d,u,h,m;const{inquiry:t,template:n}=e,r=t?(d=t.attributes["selected-country-code"])!=null?d:t.attributes["country-code"]:null;let o=[],a=!1,s=!0;if(t!=null&&r!=null){const p=t.attributes["next-step"].config||{};o=(h=((u=p["enabled-id-classes-by-country"])!=null?u:{})[r.toLowerCase()])!=null?h:[],a=(m=p["enabled-skip-unknown"])!=null?m:!1,p.disclaimer===cf.None&&(s=!1)}if(f.useEffect(()=>{if(n==null||t==null){N.redirectToStart();return}!a&&o&&o.length===1&&c(o[0].class,!0)},[]),n==null||t==null)return null;function c(p,g=!1){e.selectGovernmentIdClass(p),g?e.history.replace(Qn(0,Ue.Prompt)):e.history.push(Qn(0,Ue.Prompt))}function l(){e.history.push("/verify/support/prompt")}return i.jsx(dF,{selectedCountryCode:r,enabledIdClassesByCountryEntries:o,hasEnabledSkipUnknown:a,handleRouteToSupport:l,handleSelectType:c,showDisclaimer:s})}function mF(e){return{inquiry:e.inquiry.inquiry,template:e.inquiry.template,theme:e.inquiry.theme}}const hF={selectGovernmentIdClass:ud},pF=ke(mF,hF),fF=pF(uF);var Qb=(e=>(e.New="new",e.Active="active",e.Deactivated="deactivate",e))(Qb||{});const gF=C(pc).withConfig({displayName:"OrganizationLogo",componentId:"sc-alxtof-0"})(["display:block;margin-top:","px;margin-bottom:","px;height:",";width:",";object-fit:contain;"],F.base*2,F.base*2,e=>e.theme.logoWidth?"unset":e.theme.logoHeight||"100%",e=>e.theme.logoWidth||"100%");var ea=(e=>(e.None="none",e.Checkbox="checkbox",e.Default="default",e.Biometric="biometric",e))(ea||{});const Rh=C("div").withConfig({displayName:"VerifyIntroView__Header",componentId:"sc-msfdyj-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),bF=e=>{const{template:t,theme:n}=e,r=t.attributes["intro-disclaimer"],[o]=K(),[a,s]=f.useState(!1),[c,l]=f.useState(!1),d=a||r===ea.Checkbox&&!c,u=f.useCallback(()=>{s(!0),e.handleSubmit().catch(()=>s(!1))},[e.handleSubmit]),h=n.attributes["logo-url"];return r===ea.Biometric?i.jsxs("div",{children:[i.jsxs(Rh,{children:[i.jsx(Ah,{logoUrl:h,t:o}),i.jsx(Th,{t:o})]}),i.jsxs(ft,{children:[i.jsx(vo,{agreeToPolicyType:"biometric"}),i.jsx(ge,{id:"intro__button--start",buttonType:ne.Primary,disabled:d,isPending:a,onClick:u,children:o("intro.btn-submit")})]}),i.jsx(kh,{template:t})]}):i.jsxs("div",{children:[i.jsxs(Rh,{children:[i.jsx(Ah,{logoUrl:h,t:o}),i.jsx(Th,{t:o})]}),r===ea.Checkbox&&i.jsx(c9,{checked:c,onChange:l}),i.jsxs(ft,{children:[i.jsx(ge,{id:"intro__button--start",buttonType:ne.Primary,disabled:d,isPending:a,onClick:u,children:o("intro.btn-submit")}),r===ea.Default?i.jsxs(i.Fragment,{children:[i.jsx(vo,{}),i.jsx(We,{height:4})]}):i.jsx(We,{height:7})]}),i.jsx(kh,{template:t})]})},Ah=({logoUrl:e,t})=>e?i.jsx(gF,{alt:"logo",src:e}):i.jsx(et,{children:t("intro.title")}),Th=({t:e})=>i.jsx(qe,{children:i.jsx(J,{children:e("intro.prompt")})}),CF=C(bg).withConfig({displayName:"VerifyIntroView__StyledFooter",componentId:"sc-msfdyj-1"})(["flex-direction:row;background-color:",";padding-bottom:","px;"],({theme:e})=>e.colorFooterBackground,F.base),xF=C("div").withConfig({displayName:"VerifyIntroView__LanguageWrapper",componentId:"sc-msfdyj-2"})(["position:relative;display:flex;align-items:center;select{appearance:none;background-color:transparent;color:",";font-size:",";margin:-","px;padding:","px;padding-right:","px;&:focus-visible{outline:"," auto 1px;}}&::after{",";height:0;width:0;pointer-events:none;right:0;}"],I.Color.CoreSlate600,Yt.h4,F.base,F.base,F.base*2,({theme:e})=>e.colorPrimary,nc),vF=C("div").withConfig({displayName:"VerifyIntroView__GlobeSpacer",componentId:"sc-msfdyj-3"})(["padding-right:4px;svg{display:block;}"]),yF=C("div").withConfig({displayName:"VerifyIntroView__Wordmark",componentId:"sc-msfdyj-4"})(["padding-top:8px;margin-bottom:-3px;float:right;"]),Eh="persona-branding-title",kh=({template:e})=>{const[t,n]=K(),r=e.attributes["enabled-locales"];let o=i.jsx("div",{});return r.length!==1&&(o=i.jsxs(xF,{children:[i.jsx(vF,{children:i.jsx(kp,{})}),i.jsx("select",{"aria-label":t("intro.language-select-label"),"data-test":"footer__language-selector",dir:"ltr",onChange:a=>IF(n,a,e.attributes["custom-translations"]||[]),defaultValue:n.language,children:Object.keys(Nr).filter(a=>r.length===0||r.includes(a)).map(a=>i.jsx("option",{value:a,children:Nr[a]},a))})]})),i.jsxs(CF,{children:[o,i.jsx(yF,{children:i.jsxs("svg",{role:"img",width:"82",height:"29",viewBox:"0 0 82 29",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":Eh,children:[i.jsx("title",{id:Eh,children:t("intro.persona-logo-label")}),i.jsxs("g",{clipPath:"url(#clip0)",children:[i.jsx("path",{d:"M0 18.3669C0 15.3419 2.214 13.0828 5.3464 13.0828C8.4542 13.0828 10.7338 15.3419 10.7338 18.4087C10.7338 21.4132 8.53702 23.651 5.2398 23.651H2.6937V27.6296C2.6937 27.7748 2.6732 27.7936 2.5297 27.7936H0.164C0.01886 27.7936 0 27.7731 0 27.6296V18.3669ZM8.0401 18.3874C8.0401 16.79 7.04544 15.5699 5.3464 15.5699C3.6244 15.5699 2.6937 16.7925 2.6937 18.3669V21.1647H5.24226C7.04544 21.1647 8.0401 19.9831 8.0401 18.3874Z",fill:"#696A7B"}),i.jsx("path",{d:"M18.5738 13.0828C15.4029 13.0828 13.1446 15.4034 13.1446 18.5325C13.1446 21.496 15.1749 23.8584 18.7395 23.8584C20.1072 23.8584 21.4127 23.5058 22.3475 22.7596C22.3649 22.7447 22.3765 22.7241 22.3803 22.7015C22.384 22.6788 22.3797 22.6556 22.368 22.6358L21.1043 21.0196C21.0823 20.9921 21.0503 20.9744 21.0153 20.9705C20.9803 20.9665 20.9451 20.9765 20.9174 20.9983C20.2777 21.3775 19.5479 21.5781 18.8042 21.5788C16.9387 21.5788 16.1105 20.7703 15.8203 19.6313H23.3421C23.3682 19.6336 23.3945 19.6304 23.4193 19.6222C23.4441 19.6138 23.467 19.6004 23.4864 19.5829C23.506 19.5654 23.5215 19.544 23.5324 19.5202C23.5433 19.4964 23.5491 19.4706 23.5496 19.4444C23.5701 19.2992 23.5906 18.7605 23.5906 18.4292C23.5881 15.2378 21.6406 13.0828 18.5738 13.0828ZM15.7555 17.683C15.9834 16.1914 16.8953 15.2796 18.4697 15.2796C20.0859 15.2796 20.9977 16.2324 21.1847 17.683H15.7555Z",fill:"#696A7B"}),i.jsx("path",{d:"M30.7615 13.0828C31.7561 13.0828 32.4835 13.3288 32.7295 13.6011C32.7713 13.6429 32.7713 13.6831 32.7295 13.7651L31.88 15.6511C31.839 15.7331 31.798 15.7544 31.7348 15.7544C31.6315 15.7544 31.383 15.6724 30.9894 15.6724C29.5799 15.6724 28.8755 16.7089 28.8755 18.1586V23.4886C28.8755 23.6338 28.855 23.6526 28.7115 23.6526H26.3474C26.2023 23.6526 26.1834 23.6321 26.1834 23.4886V17.7486C26.1818 14.927 28.0678 13.0828 30.7615 13.0828Z",fill:"#696A7B"}),i.jsx("path",{d:"M43.3181 20.6047C43.3181 22.366 41.9299 23.9413 39.0492 23.9413C36.7081 23.9413 35.2772 22.9048 34.677 22.1594C34.6578 22.1364 34.6472 22.1074 34.6472 22.0774C34.6472 22.0474 34.6578 22.0184 34.677 21.9954L35.7135 20.3792C35.734 20.3382 35.8168 20.3382 35.8586 20.3792C36.5835 21.0631 37.5576 21.8503 39.0492 21.8503C40.0234 21.8503 40.4998 21.5223 40.4998 20.9597C40.4998 20.4833 40.1267 20.1512 37.5781 19.4673C35.178 18.8228 34.6155 17.4551 34.6155 16.3366C34.6155 14.5752 36.0037 13 38.8836 13C41.2255 13 42.6556 14.0365 43.2558 14.7819C43.2753 14.8047 43.2861 14.8338 43.2861 14.8639C43.2861 14.8939 43.2753 14.923 43.2558 14.9459L42.2202 16.5645C42.1988 16.6055 42.116 16.6055 42.075 16.5645C41.3493 15.8807 40.376 15.0885 38.8836 15.0885C37.9094 15.0885 37.433 15.4206 37.433 15.9799C37.433 16.4563 37.8061 16.7884 40.3547 17.4723C42.7589 18.1184 43.3181 19.4862 43.3181 20.6047Z",fill:"#696A7B"}),i.jsx("path",{d:"M45.7011 18.471C45.7011 15.4452 47.9593 13.0828 51.109 13.0828C54.2176 13.0828 56.4759 15.4452 56.4759 18.471C56.4759 21.5165 54.2176 23.8584 51.109 23.8584C47.9593 23.8584 45.7011 21.5165 45.7011 18.471ZM51.086 21.3714C52.808 21.3714 53.7797 20.0873 53.7797 18.4915C53.7797 16.8958 52.808 15.5699 51.086 15.5699C49.364 15.5699 48.3923 16.8958 48.3923 18.4915C48.3923 20.0873 49.3689 21.3714 51.086 21.3714Z",fill:"#696A7B"}),i.jsx("path",{d:"M59.0662 23.4853V18.1594C59.0662 15.1968 60.6201 13.0828 63.9567 13.0828C67.0022 13.0828 68.8054 14.8442 68.8054 18.1594V23.4894C68.8054 23.6346 68.7841 23.6534 68.6414 23.6534H66.2773C66.1322 23.6534 66.1133 23.6329 66.1133 23.4894V18.5744C66.1133 16.9163 65.5951 15.6732 63.937 15.6732C62.279 15.6732 61.7616 16.9163 61.7616 18.5744V23.4853C61.7616 23.6305 61.7411 23.6493 61.5976 23.6493H59.2319C59.0867 23.651 59.0662 23.6305 59.0662 23.4853Z",fill:"#696A7B"}),i.jsx("path",{d:"M81.836 23.651H76.8422C73.6926 23.651 71.4302 21.4132 71.4302 18.3874C71.4302 15.3419 73.7098 13.0828 76.7602 13.0828C79.786 13.0828 82 15.3419 82 18.3669V23.4853C82 23.6305 81.9795 23.651 81.836 23.651ZM76.8422 21.1647H79.3079V18.3669C79.3079 16.7925 78.3756 15.5699 76.7594 15.5699C75.1194 15.5699 74.1272 16.7925 74.1272 18.3874C74.1272 19.9823 75.0997 21.1647 76.8406 21.1647H76.8422Z",fill:"#696A7B"})]}),i.jsx("path",{d:"M3.389 7.09C2.855 7.09 2.396 7.01 2.012 6.847C1.628 6.685 1.337 6.472 1.139 6.208C0.947826 5.96259 0.837738 5.66378 0.824 5.353C0.823165 5.32796 0.827482 5.303 0.836684 5.2797C0.845887 5.25639 0.859778 5.23522 0.877498 5.2175C0.895217 5.19978 0.916388 5.18589 0.939696 5.17668C0.963005 5.16748 0.987955 5.16316 1.013 5.164H1.814C1.886 5.164 1.94 5.179 1.976 5.209C2.02507 5.24039 2.06533 5.28375 2.093 5.335C2.153 5.539 2.291 5.71 2.507 5.848C2.723 5.986 3.017 6.055 3.389 6.055C3.815 6.055 4.136 5.986 4.352 5.848C4.45329 5.78603 4.53653 5.69855 4.59339 5.59431C4.65025 5.49006 4.67874 5.37271 4.676 5.254C4.67845 5.17682 4.66448 5.09999 4.635 5.02862C4.60552 4.95725 4.56121 4.89295 4.505 4.84C4.397 4.732 4.232 4.64 4.01 4.561C3.794 4.483 3.47 4.387 3.038 4.273C2.33 4.105 1.811 3.883 1.481 3.607C1.157 3.325 0.995 2.927 0.995 2.41C0.995 2.062 1.088 1.753 1.274 1.483C1.48347 1.19915 1.76673 0.978148 2.093 0.844001C2.453 0.688001 2.87 0.610001 3.344 0.610001C3.836 0.610001 4.262 0.697001 4.622 0.871001C4.982 1.045 5.255 1.264 5.441 1.528C5.633 1.786 5.735 2.044 5.747 2.302C5.74798 2.32713 5.74376 2.35219 5.73462 2.37561C5.72548 2.39904 5.71161 2.42033 5.69388 2.43816C5.67615 2.45599 5.65493 2.46997 5.63155 2.47924C5.60817 2.4885 5.58313 2.49284 5.558 2.492H4.721C4.66473 2.49551 4.60884 2.48063 4.56177 2.4496C4.51469 2.41858 4.47897 2.37309 4.46 2.32C4.424 2.128 4.304 1.97 4.1 1.843C3.896 1.711 3.644 1.645 3.344 1.645C3.008 1.645 2.744 1.708 2.552 1.835C2.4599 1.8928 2.38474 1.97394 2.33416 2.07019C2.28358 2.16644 2.25937 2.27437 2.264 2.383C2.25807 2.53422 2.30951 2.6821 2.408 2.797C2.504 2.905 2.654 3.001 2.858 3.085C3.068 3.169 3.368 3.262 3.758 3.365C4.286 3.485 4.706 3.619 5.018 3.769C5.336 3.919 5.57 4.109 5.72 4.336C5.87 4.564 5.945 4.856 5.945 5.209C5.945 5.593 5.837 5.929 5.621 6.217C5.411 6.499 5.111 6.715 4.721 6.865C4.337 7.015 3.893 7.09 3.389 7.09V7.09ZM8.542 7C8.51354 7.00053 8.48528 6.99521 8.45897 6.98437C8.43265 6.97353 8.40884 6.95741 8.389 6.937C8.36859 6.91716 8.35247 6.89335 8.34163 6.86703C8.3308 6.84072 8.32548 6.81246 8.326 6.784V0.925001C8.32353 0.866207 8.34275 0.808554 8.38 0.763001C8.40131 0.742047 8.42666 0.725655 8.45451 0.714823C8.48237 0.703992 8.51213 0.698948 8.542 0.700001H12.502C12.5319 0.698948 12.5616 0.703992 12.5895 0.714823C12.6173 0.725655 12.6427 0.742047 12.664 0.763001C12.685 0.784309 12.7013 0.809662 12.7122 0.837515C12.723 0.865367 12.7281 0.895135 12.727 0.925001V1.519C12.7281 1.54887 12.723 1.57863 12.7122 1.60649C12.7013 1.63434 12.685 1.65969 12.664 1.681C12.6184 1.71825 12.5608 1.73747 12.502 1.735H9.542V3.328H12.304C12.3339 3.32695 12.3636 3.33199 12.3915 3.34282C12.4193 3.35365 12.4447 3.37005 12.466 3.391C12.4874 3.4101 12.5041 3.43379 12.515 3.46028C12.5259 3.48678 12.5307 3.5154 12.529 3.544V4.102C12.5301 4.13187 12.525 4.16163 12.5142 4.18949C12.5033 4.21734 12.487 4.24269 12.466 4.264C12.4204 4.30125 12.3628 4.32047 12.304 4.318H9.541V5.965H12.574C12.6039 5.96395 12.6336 5.96899 12.6615 5.97982C12.6893 5.99065 12.7147 6.00705 12.736 6.028C12.757 6.04931 12.7733 6.07466 12.7842 6.10251C12.795 6.13037 12.8001 6.16013 12.799 6.19V6.784C12.8001 6.81387 12.795 6.84363 12.7842 6.87149C12.7733 6.89934 12.757 6.92469 12.736 6.946C12.6904 6.98325 12.6328 7.00247 12.574 7H8.542V7ZM17.652 7.09C16.824 7.09 16.182 6.877 15.726 6.451C15.276 6.025 15.036 5.425 15.006 4.651C14.9987 4.38707 14.9957 4.12303 14.997 3.859C14.997 3.487 15 3.217 15.007 3.049C15.037 2.281 15.279 1.684 15.735 1.259C16.197 0.826001 16.836 0.610001 17.652 0.610001C18.186 0.610001 18.652 0.703001 19.047 0.890001C19.443 1.07 19.749 1.318 19.965 1.636C20.181 1.948 20.295 2.302 20.307 2.698V2.716C20.307 2.764 20.287 2.806 20.244 2.842C20.2088 2.87178 20.1641 2.88777 20.118 2.887H19.263C19.191 2.887 19.137 2.872 19.101 2.842C19.065 2.812 19.035 2.755 19.011 2.672C18.915 2.293 18.756 2.029 18.534 1.879C18.312 1.723 18.015 1.645 17.644 1.645C16.779 1.645 16.329 2.128 16.294 3.095C16.2865 3.34359 16.2832 3.5923 16.284 3.841C16.284 4.177 16.287 4.432 16.294 4.606C16.329 5.572 16.779 6.056 17.644 6.056C18.015 6.056 18.312 5.977 18.534 5.821C18.762 5.665 18.921 5.401 19.011 5.029C19.029 4.945 19.056 4.889 19.092 4.859C19.1428 4.82615 19.2026 4.81006 19.263 4.813H20.118C20.172 4.813 20.218 4.831 20.253 4.867C20.295 4.903 20.313 4.948 20.307 5.002C20.2993 5.38461 20.1805 5.75672 19.965 6.073C19.749 6.385 19.443 6.634 19.047 6.82C18.651 7 18.187 7.09 17.652 7.09ZM25.236 7.09C24.426 7.09 23.796 6.883 23.346 6.47C22.896 6.055 22.671 5.428 22.671 4.588V0.925001C22.6685 0.866207 22.6877 0.808554 22.725 0.763001C22.7463 0.742047 22.7717 0.725655 22.7995 0.714823C22.8274 0.703992 22.8571 0.698948 22.887 0.700001H23.706C23.7346 0.698285 23.7632 0.703061 23.7897 0.713971C23.8162 0.724881 23.8399 0.741642 23.859 0.763001C23.88 0.784309 23.8963 0.809662 23.9072 0.837515C23.918 0.865367 23.9231 0.895135 23.922 0.925001V4.588C23.922 5.068 24.036 5.431 24.264 5.678C24.492 5.918 24.816 6.038 25.236 6.038C25.656 6.038 25.976 5.918 26.199 5.678C26.427 5.431 26.541 5.068 26.541 4.588V0.925001C26.5399 0.895135 26.545 0.865367 26.5558 0.837515C26.5667 0.809662 26.583 0.784309 26.604 0.763001C26.6253 0.742047 26.6507 0.725655 26.6785 0.714823C26.7064 0.703992 26.7361 0.698948 26.766 0.700001H27.576C27.6046 0.698285 27.6332 0.703061 27.6597 0.713971C27.6862 0.724881 27.7099 0.741642 27.729 0.763001C27.75 0.784309 27.7663 0.809662 27.7772 0.837515C27.788 0.865367 27.7931 0.895135 27.792 0.925001V4.588C27.792 5.428 27.567 6.055 27.117 6.469C26.673 6.883 26.046 7.09 25.236 7.09V7.09ZM30.707 7C30.6785 7.00053 30.6503 6.99521 30.624 6.98437C30.5976 6.97353 30.5738 6.95741 30.554 6.937C30.5336 6.91716 30.5175 6.89335 30.5066 6.86703C30.4958 6.84072 30.4905 6.81246 30.491 6.784V0.925001C30.4885 0.866207 30.5077 0.808554 30.545 0.763001C30.5663 0.742047 30.5917 0.725655 30.6195 0.714823C30.6474 0.703992 30.6771 0.698948 30.707 0.700001H33.037C33.77 0.700001 34.343 0.871001 34.757 1.213C35.177 1.555 35.387 2.041 35.387 2.671C35.387 3.109 35.279 3.478 35.063 3.778C34.853 4.072 34.559 4.285 34.181 4.418L35.495 6.712C35.5117 6.74277 35.5209 6.77702 35.522 6.812C35.5223 6.83764 35.5168 6.86301 35.5059 6.88622C35.4949 6.90943 35.4789 6.92986 35.459 6.946C35.4428 6.96311 35.4232 6.97673 35.4016 6.98601C35.3799 6.9953 35.3566 7.00006 35.333 7H34.513C34.4334 7.00453 34.3546 6.98236 34.289 6.937C34.2337 6.88544 34.188 6.8245 34.154 6.757L32.993 4.624H31.742V6.784C31.742 6.844 31.721 6.895 31.679 6.937C31.6599 6.95836 31.6362 6.97512 31.6097 6.98603C31.5832 6.99694 31.5546 7.00172 31.526 7H30.706H30.707ZM33.011 3.607C33.371 3.607 33.641 3.527 33.821 3.364C34.007 3.202 34.1 2.968 34.1 2.662C34.1 2.356 34.007 2.119 33.82 1.952C33.64 1.783 33.37 1.699 33.01 1.699H31.742V3.607H33.011ZM38.112 7C38.0835 7.00053 38.0553 6.99521 38.029 6.98437C38.0026 6.97353 37.9788 6.95741 37.959 6.937C37.9386 6.91716 37.9225 6.89335 37.9116 6.86703C37.9008 6.84072 37.8955 6.81246 37.896 6.784V0.925001C37.8935 0.866207 37.9127 0.808554 37.95 0.763001C37.9713 0.742047 37.9967 0.725655 38.0245 0.714823C38.0524 0.703992 38.0821 0.698948 38.112 0.700001H42.072C42.1019 0.698948 42.1316 0.703992 42.1595 0.714823C42.1873 0.725655 42.2127 0.742047 42.234 0.763001C42.255 0.784309 42.2713 0.809662 42.2822 0.837515C42.293 0.865367 42.2981 0.895135 42.297 0.925001V1.519C42.2981 1.54887 42.293 1.57863 42.2822 1.60649C42.2713 1.63434 42.255 1.65969 42.234 1.681C42.1884 1.71825 42.1308 1.73747 42.072 1.735H39.112V3.328H41.874C41.9039 3.32695 41.9336 3.33199 41.9615 3.34282C41.9893 3.35365 42.0147 3.37005 42.036 3.391C42.0574 3.4101 42.0741 3.43379 42.085 3.46028C42.0959 3.48678 42.1007 3.5154 42.099 3.544V4.102C42.1001 4.13187 42.095 4.16163 42.0842 4.18949C42.0733 4.21734 42.057 4.24269 42.036 4.264C41.9904 4.30125 41.9328 4.32047 41.874 4.318H39.111V5.965H42.144C42.1739 5.96395 42.2036 5.96899 42.2315 5.97982C42.2593 5.99065 42.2847 6.00705 42.306 6.028C42.327 6.04931 42.3433 6.07466 42.3542 6.10251C42.365 6.13037 42.3701 6.16013 42.369 6.19V6.784C42.3701 6.81387 42.365 6.84363 42.3542 6.87149C42.3433 6.89934 42.327 6.92469 42.306 6.946C42.2604 6.98325 42.2028 7.00247 42.144 7H38.112V7ZM45.06 7C45.0317 7.00039 45.0036 6.995 44.9775 6.98417C44.9514 6.97334 44.9277 6.95729 44.908 6.937C44.8876 6.91716 44.8715 6.89335 44.8606 6.86703C44.8498 6.84072 44.8445 6.81246 44.845 6.784V0.925001C44.8425 0.866207 44.8617 0.808554 44.899 0.763001C44.9202 0.742171 44.9454 0.72585 44.9731 0.715023C45.0007 0.704195 45.0303 0.699085 45.06 0.700001H47.256C49.02 0.700001 49.92 1.516 49.956 3.148C49.968 3.496 49.974 3.73 49.974 3.85C49.974 3.964 49.968 4.195 49.956 4.543C49.932 5.383 49.706 6.004 49.281 6.406C48.855 6.802 48.195 7 47.301 7H45.06V7ZM47.257 5.965C47.761 5.965 48.124 5.855 48.346 5.632C48.568 5.404 48.685 5.032 48.696 4.516C48.709 4.156 48.715 3.931 48.715 3.841C48.715 3.745 48.709 3.523 48.697 3.175C48.685 2.683 48.559 2.32 48.319 2.086C48.085 1.852 47.716 1.736 47.212 1.736H46.096V5.966H47.256L47.257 5.965ZM56.86 7C56.7812 7.00422 56.7037 6.97851 56.643 6.928C56.5871 6.87621 56.5519 6.80583 56.544 6.73L55.474 0.961001L55.464 0.889001C55.464 0.835001 55.482 0.790001 55.518 0.754001C55.5548 0.720031 55.6029 0.700809 55.653 0.700001H56.445C56.595 0.700001 56.679 0.760001 56.697 0.880001L57.444 4.957L58.254 2.32C58.314 2.17 58.414 2.095 58.551 2.095H59.037C59.187 2.095 59.283 2.17 59.325 2.32L60.145 4.948L60.89 0.880001C60.902 0.814001 60.926 0.770001 60.962 0.745001C61.0159 0.711795 61.0788 0.696077 61.142 0.700001H61.934C61.982 0.700001 62.024 0.718001 62.06 0.754001C62.0777 0.771619 62.0917 0.792688 62.101 0.815907C62.1103 0.839126 62.1147 0.864003 62.114 0.889001C62.114 0.919001 62.111 0.943001 62.105 0.961001L61.035 6.731C61.005 6.911 60.899 7.001 60.719 7.001H60.116C60.0417 7.00381 59.9687 6.98124 59.909 6.937C59.856 6.89651 59.818 6.83951 59.801 6.775L58.794 3.77L57.786 6.776C57.726 6.926 57.618 7.001 57.462 7.001H56.859L56.86 7ZM64.738 7C64.7095 7.00053 64.6813 6.99521 64.655 6.98437C64.6287 6.97353 64.6048 6.95741 64.585 6.937C64.5646 6.91716 64.5485 6.89335 64.5376 6.86703C64.5268 6.84072 64.5215 6.81246 64.522 6.784V0.916001C64.5203 0.887398 64.5251 0.858778 64.536 0.832282C64.5469 0.805787 64.5636 0.782102 64.585 0.763001C64.6048 0.742591 64.6287 0.726469 64.655 0.715632C64.6813 0.704796 64.7095 0.699475 64.738 0.700001H65.584C65.6126 0.698285 65.6412 0.703061 65.6677 0.713971C65.6942 0.724881 65.7179 0.741642 65.737 0.763001C65.7584 0.782102 65.7751 0.805787 65.786 0.832282C65.7969 0.858778 65.8017 0.887398 65.8 0.916001V6.784C65.8 6.844 65.779 6.895 65.737 6.937C65.7179 6.95836 65.6942 6.97512 65.6677 6.98603C65.6412 6.99694 65.6126 7.00172 65.584 7H64.738ZM70.163 7C70.1345 7.00053 70.1063 6.99521 70.08 6.98437C70.0536 6.97353 70.0298 6.95741 70.01 6.937C69.9896 6.91716 69.9735 6.89335 69.9626 6.86703C69.9518 6.84072 69.9465 6.81246 69.947 6.784V1.807H68.282C68.2535 1.80753 68.2253 1.80221 68.199 1.79137C68.1726 1.78053 68.1488 1.76441 68.129 1.744C68.1086 1.72416 68.0925 1.70035 68.0816 1.67403C68.0708 1.64772 68.0655 1.61946 68.066 1.591V0.925001C68.0635 0.866207 68.0828 0.808554 68.12 0.763001C68.1413 0.742047 68.1667 0.725655 68.1945 0.714823C68.2224 0.703992 68.2521 0.698948 68.282 0.700001H72.872C72.9019 0.698948 72.9316 0.703992 72.9595 0.714823C72.9873 0.725655 73.0127 0.742047 73.034 0.763001C73.055 0.784309 73.0713 0.809662 73.0822 0.837515C73.093 0.865367 73.0981 0.895135 73.097 0.925001V1.591C73.097 1.651 73.077 1.702 73.034 1.744C73.0127 1.76495 72.9873 1.78135 72.9595 1.79218C72.9316 1.80301 72.9019 1.80805 72.872 1.807H71.216V6.784C71.216 6.844 71.196 6.895 71.153 6.937C71.1317 6.95795 71.1063 6.97435 71.0785 6.98518C71.0506 6.99601 71.0209 7.00105 70.991 7H70.163V7ZM75.577 7C75.5485 7.00053 75.5203 6.99521 75.494 6.98437C75.4676 6.97353 75.4438 6.95741 75.424 6.937C75.4036 6.91716 75.3875 6.89335 75.3766 6.86703C75.3658 6.84072 75.3605 6.81246 75.361 6.784V0.925001C75.3585 0.866207 75.3777 0.808554 75.415 0.763001C75.4363 0.742047 75.4617 0.725655 75.4895 0.714823C75.5174 0.703992 75.5471 0.698948 75.577 0.700001H76.396C76.4246 0.698285 76.4532 0.703061 76.4797 0.713971C76.5062 0.724881 76.5299 0.741642 76.549 0.763001C76.57 0.784309 76.5863 0.809662 76.5972 0.837515C76.608 0.865367 76.6131 0.895135 76.612 0.925001V3.247H79.267V0.925001C79.2645 0.866207 79.2837 0.808554 79.321 0.763001C79.3423 0.742047 79.3677 0.725655 79.3955 0.714823C79.4234 0.703992 79.4531 0.698948 79.483 0.700001H80.293C80.3229 0.698948 80.3526 0.703992 80.3805 0.714823C80.4083 0.725655 80.4337 0.742047 80.455 0.763001C80.476 0.784309 80.4923 0.809662 80.5032 0.837515C80.514 0.865367 80.5191 0.895135 80.518 0.925001V6.785C80.5189 6.8147 80.5138 6.84428 80.503 6.87195C80.4921 6.89962 80.4758 6.92481 80.455 6.946C80.4094 6.98325 80.3518 7.00247 80.293 7H79.483C79.4545 7.00053 79.4263 6.99521 79.4 6.98437C79.3736 6.97353 79.3498 6.95741 79.33 6.937C79.3096 6.91716 79.2935 6.89335 79.2826 6.86703C79.2718 6.84072 79.2665 6.81246 79.267 6.784V4.372H76.612V6.784C76.612 6.844 76.591 6.895 76.549 6.937C76.5299 6.95836 76.5062 6.97512 76.4797 6.98603C76.4532 6.99694 76.4246 7.00172 76.396 7H75.576H75.577Z",fill:"#696A7B"}),i.jsx("defs",{children:i.jsx("clipPath",{id:"clip0",children:i.jsx("rect",{width:"82",height:"16.4",fill:"white",transform:"translate(0 11)"})})})]})})]})};async function IF(e,t,n){const r=t.target.value;z.logAmplitude("verify-ui.language-change",{"from-language":js.language,"to-language":r});const o=n.filter(a=>a.lang===r);o.length>0&&await cd(o.shift()["translation-url"],e,r),await e.changeLanguage(r)}function SF(e){const{template:t,theme:n}=e,[r]=K();f.useEffect(()=>{(t==null||n==null)&&N.redirectToStart()},[]);const{inquiry:o,organization:a}=e,{error:s,callback:c}=It(async()=>{o==null?await e.startInquiry(N.inquiryParams,n,window.location.host):await e.continueInquiry(o)},[n,o,a,e.startInquiry,e.showMessage]);return Et({error:s,onNetworkError:()=>e.showMessage(r("errors.network")),onError:l=>{a.attributes.status&&a.attributes.status!==Qb.Active?e.showMessage("You do not have a production environment set up. Pass an environment parameter to use sandbox, or please reach out to support@withpersona.com to let us know if you’d like to upgrade."):l instanceof pt?l.status===422?e.showMessage("Invalid configuration. Please check your parameters."):l.status>=500?Z(new Error("Server error when starting inquiry"),"error",{error:l}):Z(new Error("Client error when starting inquiry"),"warning",{error:l}):Z(new Error("Unknown error when starting inquiry"),"error",{error:l})}}),t==null||n==null?null:i.jsx(bF,{template:t,handleSubmit:c,theme:n})}function wF(e){return{template:e.inquiry.template,inquiry:e.inquiry.inquiry,organization:e.inquiry.organization,theme:e.inquiry.theme}}const _F={routeToNextStep:Gt,showMessage:se,startInquiry:xf,continueInquiry:dy},RF=ke(wF,_F),AF=RF(SF),TF=C("div").withConfig({displayName:"VerifyInvalidCodeView__Header",componentId:"sc-sb0cs4-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),EF=C.a.withConfig({displayName:"VerifyInvalidCodeView__HelpLinkContainer",componentId:"sc-sb0cs4-1"})(["margin:0 ",";display:inline-block;vertical-align:middle;"],I.Spacing[2]),kF="https://help.withpersona.com/articles/c4aR3PAzMNynOxBYNm5Pz/how-do-i-request-a-new-inquiry-link/";function NF(){const[e]=K();return i.jsxs("div",{children:[i.jsxs(TF,{children:[i.jsx(et,{children:e("invalid-code.title")}),i.jsxs(qe,{children:[e("invalid-code.prompt"),i.jsx(EF,{href:kF,target:"_blank",rel:"noreferrer",children:i.jsx(ip,{})})]})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})})]})}function jF(){return i.jsx(NF,{})}const Nh=C("div").withConfig({displayName:"VerifyInvalidConfigView__Header",componentId:"sc-1w539v6-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function PF({hasTemplate:e}){var o,a;const t=(o=Vr().state)==null?void 0:o.error;f.useEffect(()=>{t!=null&&fx(s=>{s.setFingerprint(["inquiry-invalid-config"]),Z(t,"warning")})},[]);const n=(a=t==null?void 0:t.errors)==null?void 0:a.find(s=>s.code==="account_inquiry_quota_exceeded"&&s.details&&s.title);if(n)return i.jsxs("div",{children:[i.jsxs(Nh,{children:[i.jsx(et,{children:n.title}),typeof n.details=="string"&&i.jsx(qe,{children:n.details})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})})]});const r=[];return e||r.push("Could not load template, check template-id"),N.isEmbedded||r.push("Possibly mismatched redirect-uri"),i.jsxs("div",{children:[i.jsxs(Nh,{children:[i.jsx(et,{children:"This application is misconfigured"}),i.jsx(qe,{children:"If you are a user, please contact the organization that sent you here."}),i.jsx(We,{height:1}),i.jsxs(qe,{children:["If you are a developer, please check the errors below with the documentation"," ",i.jsx(qh,{target:"_blank",rel:"noreferrer",to:{pathname:"https://docs.withpersona.com"},children:"here"}),"."]})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})}),r.map(s=>i.jsxs("div",{children:["- ",s]},s))]})}function DF(e){return i.jsx(PF,{hasTemplate:e.template!=null||e.inquiryTemplateVersion!=null})}function OF(e){return{template:e.inquiry.template,inquiryTemplateVersion:e.inquiry.inquiryTemplateVersion}}const LF=ke(OF),FF=LF(DF),MF=C("div").withConfig({displayName:"VerifyInvalidInquiryView__Header",componentId:"sc-qvxp99-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),VF=C.a.withConfig({displayName:"VerifyInvalidInquiryView__HelpLinkContainer",componentId:"sc-qvxp99-1"})(["margin:0 ",";display:inline-block;vertical-align:middle;"],I.Spacing[2]),BF="https://help.withpersona.com/articles/c4aR3PAzMNynOxBYNm5Pz/how-do-i-request-a-new-inquiry-link/";function qF(){const[e]=K();return i.jsxs("div",{"data-test":"invalid-inquiry",children:[i.jsxs(MF,{children:[i.jsx(et,{children:e("invalid-inquiry.title")}),i.jsxs(qe,{children:[e("invalid-inquiry.prompt"),i.jsx(VF,{href:BF,target:"_blank",rel:"noreferrer",children:i.jsx(ip,{})})]})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})})]})}function UF(){return i.jsx(qF,{})}const HF=C("div").withConfig({displayName:"VerifyInvalidVerificationView__Header",componentId:"sc-lcyx6g-0"})(["min-height:",";margin-bottom:",";"],Me.header,I.Spacing[6]);function $F(){const[e]=K();return i.jsx("div",{children:i.jsxs(HF,{children:[i.jsx(et,{children:e("invalid-verification.title")}),i.jsx(qe,{children:e("invalid-verification.prompt")})]})})}function GF(){return i.jsx($F,{})}const WF=C("div").withConfig({displayName:"VerifyPhoneNumberConfirmView__Header",componentId:"sc-1hvaf4a-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),zF=C("div").withConfig({displayName:"VerifyPhoneNumberConfirmView__FormSection",componentId:"sc-1hvaf4a-1"})(["margin-bottom:","px;"],F.base*4);function YF(e){const{handleResendCode:t,handleSubmitCode:n,verification:r}=e,o=f.useRef(r.attributes["phone-number"]),a=Bl(o.current,"National"),[s]=K();return i.jsxs("div",{children:[i.jsxs(WF,{children:[i.jsx(et,{children:s("phone-number.confirm.title")}),i.jsx(qe,{children:i.jsx(Bn,{i18nKey:"phone-number.confirm.prompt",components:[i.jsx("bdo",{dir:"ltr"},0)],values:{codeLength:Nd,phoneNumber:a}})})]}),i.jsx(zF,{children:i.jsx(zb,{handleSubmitCode:n,handleResendCode:t,verificationType:r.type,onSubmit:n})})]})}class KF extends f.Component{constructor(){super(...arguments),this.handleResendCode=async()=>{var r;const{t,verification:n}=this.props;this.props.clearMessages();try{await te.postResourceAction(n,"sms-confirmation-code"),this.props.showMessage(t("phone-number.confirm.resent-code"))}catch(o){o.status===400&&((r=o.errors)==null?void 0:r[0].title)==="Phone number unsubscribed"?this.props.showMessage(t("phone-number.prompt.sms-unsubscribed")):this.props.showMessage(t("phone-number.confirm.failed-to-resend"))}},this.handleSubmitCode=async t=>{const{t:n,inquiry:r,verification:o}=this.props;this.props.clearMessages();const s=(r.attributes["next-step"].config||{})["require-info-match"];try{await this.props.verificationPhoneNumberConfirm(o,s,t,this.props.history,this.props.featureFlags)}catch{this.props.showMessage(n("phone-number.confirm.failed"))}}}componentDidMount(){const{verification:t}=this.props;if(t==null){N.redirectToStart();return}}render(){const{verification:t}=this.props;return t==null?null:i.jsx(YF,{verification:t,handleSubmitCode:this.handleSubmitCode,handleResendCode:this.handleResendCode})}}function QF(e){return{verification:e.verification.verification,inquiry:e.inquiry.inquiry,featureFlags:e.inquiry.featureFlags}}const ZF={clearMessages:Lt,verificationPhoneNumberConfirm:zA,showMessage:se},JF=ke(QF,ZF),XF=JF(KF),eM=qn()(XF),tM=C("div").withConfig({displayName:"FormName__PersonalSection",componentId:"sc-1ojg0j9-0"})(["margin-bottom:","px;"],F.base*2),jh={firstName:bt("Please enter your full first name",ur(/^..+$/)),lastName:bt("Please enter your full last name",ur(/^..+$/))};function nM(e){const{handleSubmit:t,pristine:n,submitting:r}=e,[o]=K();return i.jsxs("form",{onSubmit:t,children:[i.jsx(tM,{children:i.jsxs(li,{children:[i.jsx("label",{htmlFor:je.NameFirst,children:o("form.name.name-label")}),i.jsx(Te.Field,{name:je.NameFirst,component:Zn,autoComplete:"given-name",className:"col-sm-12",disabled:r,placeholder:o("form.name.first_name"),type:"text",validate:jh.firstName}),i.jsx(Te.Field,{name:je.NameLast,component:Zn,autoComplete:"family-name",className:"col-sm-12",disabled:r,placeholder:o("form.name.last_name"),type:"text",validate:jh.lastName})]})}),i.jsx(ft,{children:i.jsx(ge,{type:"submit",buttonType:ne.Primary,disabled:n||r,isPending:r,tabIndex:n||r?-1:0,children:o("form.name.btn-submit")})})]})}const iM=Te.reduxForm({form:"name"})(nM),rM=C("div").withConfig({displayName:"VerifyPhoneNumberInfoView__Header",componentId:"sc-118vczo-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),oM=C("div").withConfig({displayName:"VerifyPhoneNumberInfoView__FormSection",componentId:"sc-118vczo-1"})(["margin-bottom:","px;"],F.base*4);function aM(e){const[t]=K();return i.jsxs("div",{children:[i.jsxs(rM,{children:[i.jsx(et,{children:t("phone-number.info.title")}),i.jsx(qe,{children:t("phone-number.info.prompt")})]}),i.jsx(oM,{children:i.jsx(iM,{onSubmit:e.handleSubmit})})]})}const sM=e=>{const[t]=K();f.useEffect(()=>{e.autofillForm("name",N.inquiryParams,e.submittedValues)},[]);const n=async r=>{const{verification:o}=e;e.clearMessages(),e.saveSubmittedValues(r);try{await e.verificationPhoneNumberSubmit(o,r,e.history,e.featureFlags)}catch{e.showMessage(t("errors.network"))}};return i.jsx(aM,{handleSubmit:n})};function cM(e){return{inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues,verification:e.verification.verification,featureFlags:e.inquiry.featureFlags}}const lM={autofillForm:Va,clearMessages:Lt,routeToNextStep:Gt,saveSubmittedValues:pf,showMessage:se,verificationPhoneNumberSubmit:YA},dM=ke(cM,lM),uM=dM(sM),mM=C("div").withConfig({displayName:"VerifyPhoneNumberPromptView__Header",componentId:"sc-kmtmex-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),hM=C("div").withConfig({displayName:"VerifyPhoneNumberPromptView__FormSection",componentId:"sc-kmtmex-1"})(["margin-bottom:","px;"],F.base*4);function pM(e){const[t]=K();return i.jsxs("div",{children:[i.jsxs(mM,{children:[i.jsx(et,{children:t("phone-number.title")}),i.jsx(qe,{children:t("phone-number.prompt.prompt")})]}),i.jsx(hM,{children:i.jsx(Bd,{defaultCountry:e.defaultCountry,labelContinue:t("phone-number.prompt.btn-submit"),onSubmit:e.handleSubmit,onCountryChange:e.onCountryChange})})]})}const fM=({autofillForm:e,clearMessages:t,countryCode:n,forcedStatus:r,showMessage:o,submittedValues:a,template:s,verificationPhoneNumberStart:c})=>{const[l]=K();f.useEffect(()=>{if(s==null){N.redirectToStart();return}e("phone-number",N.inquiryParams,a)},[]);const[d,u]=f.useState(n),h=f.useCallback(async m=>{var p;t();try{await c(d,r,m)}catch(g){g.status===400&&((p=g.errors)==null?void 0:p[0].title)==="Phone number unsubscribed"?(o(l("phone-number.prompt.sms-unsubscribed")),document.body.scrollTo(0,0)):(o(l("phone-number.prompt.invalid")),document.body.scrollTo(0,0))}},[c,d,r,l]);return s==null?null:i.jsx(pM,{defaultCountry:n,handleSubmit:h,onCountryChange:u})};function gM(e){return{countryCode:e.inquiry.inquiry.attributes["selected-country-code"]||e.locale.localeInfo.country_code,forcedStatus:e.test.forcedStatus,submittedValues:e.verification.submittedValues,template:e.inquiry.template}}const bM={autofillForm:Va,clearMessages:Lt,showMessage:se,verificationPhoneNumberStart:WA},CM=ke(gM,bM),xM=CM(fM);function vM(e){const{i18n:t}=K(),n=Dt(),{inquiry:r,uiStatus:o,inquiryTemplateVersion:a}=e,[s,c]=f.useState(!1),l=Xt("inquiry:enable-template-preferred-dimensions-configuration");f.useEffect(()=>{(async()=>{const{loadInquiryFromCode:h,loadInquiryFromId:m,createInquiry:p,loadThemeAndRedirect:g,setUiReady:b}=e;if(N.inquiryParams["session-token"]&&(te.accessToken=N.inquiryParams["session-token"]),r!=null){await m(t,r.id);return}N.inquiryParams.code?await h(t,N.inquiryParams.code,{deviceHandoffMethod:N.inquiryParams["device-handoff-method"]}):N.inquiryParams["inquiry-id"]?await m(t,N.inquiryParams["inquiry-id"]):N.inquiryParams["template-id"]!=null&&typeof N.inquiryParams["template-id"]=="string"&&N.inquiryParams["template-id"].startsWith("itmpl")||N.inquiryParams["inquiry-template-id"]||N.inquiryParams["inquiry-template-version-id"]?await p(t,N.inquiryParams,window.location.host):N.inquiryParams["template-id"]!=null?await g(t,N.inquiryParams["template-id"]):n.replace("/verify/invalid/config"),o===tn.Initializing&&(b(),c(!0))})()},[]);const d=Ur();return f.useEffect(()=>{!l&&s&&(c(!1),N.onEvent(Oe.Ready)),l&&s&&a&&(c(!1),N.onEvent(Oe.Ready,{preferredDimensions:{maximumWidth:E(d==null?void 0:d["maximum-width"]),minimumWidth:E(d==null?void 0:d["minimum-width"]),maximumHeight:E(d==null?void 0:d["maximum-height"]),minimumHeight:E(d==null?void 0:d["minimum-height"])}}))},[o,s,a,l]),i.jsx(vn,{})}const yM=e=>({inquiry:e.inquiry.inquiry,inquiryTemplateVersion:e.inquiry.inquiryTemplateVersion,uiStatus:e.ui.status}),IM={loadInquiryFromCode:bd,loadInquiryFromId:cy,loadThemeAndRedirect:ly,createInquiry:vy,setUiReady:mt},SM=ke(yM,IM),il=SM(vM),Zb=Object.keys(xs),wM=new Set(Zb);function _M(e){return e.length===0?Zb:e.filter(t=>wM.has(t))}function RM(e,t,n,r){return t==null||n==null||r==null||po(n)||[fe.Completed,fe.Approved,fe.Declined,fe.NeedsReview].includes(n.attributes.status)||e==null||!t.attributes["has-support"]||r.length>0&&r[r.length-1].attributes.status===kt.Passed?!1:r.filter(a=>[kt.Failed,kt.RequiresRetry,kt.Canceled].includes(a.attributes.status)).some(a=>a.type!==w.VerificationDatabase)}const AM=C("div").withConfig({displayName:"VerifySelectCountryView__CountrySelector",componentId:"sc-9bsemy-0"})(["margin-bottom:","px;"],F.base*2),TM=C("div").withConfig({displayName:"VerifySelectCountryView__Header",componentId:"sc-9bsemy-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function EM(e){const{countryCode:t,handleContinue:n,isProcessing:r,template:o}=e,{"enabled-country-codes":a}=o.attributes,[s]=K();return i.jsxs("div",{children:[i.jsxs(TM,{children:[i.jsx(et,{children:s("select-country.title")}),i.jsx(qe,{children:s("select-country.prompt")})]}),i.jsx(AM,{children:i.jsxs(ic,{"data-test":"country-selector__select",value:t!=null?t:"",onChange:e.handleCountryChange,children:[i.jsx("option",{value:"",disabled:!0,children:s("select-country.placeholder")}),_M(a).map(c=>[s(`countries.${c}`),c]).sort((c,l)=>c[0].toLowerCase().localeCompare(l[0].toLowerCase())).map(([c,l])=>i.jsx("option",{value:l,children:c},l))]})}),i.jsx(ft,{children:i.jsx(ge,{id:"select-country__button--select",buttonType:ne.Primary,onClick:n,disabled:r||!t,isPending:r,children:s("select-country.btn-submit")})})]})}function kM(e){const{template:t,selectedCountryCode:n,inquiry:r}=e,[o,a]=f.useState(n);f.useEffect(()=>{if(t==null||r==null){N.redirectToStart();return}},[]);const[s,c]=f.useState(void 0),[l]=K();if(t==null)return null;async function d(){const{inquiry:h}=e;c(!0),z.logAmplitude("country-select",{"country-code":o}),N.onEvent(Oe.CountrySelect,{"country-code":o});try{const m={id:h.id,type:h.type,attributes:{"selected-country-code":o}},p=(await te.updateResource(m)).data;e.saveInquiry(p),e.routeToNextStep(p)}catch(m){if(c(void 0),m instanceof Ct){e.showMessage(l("errors.network"));return}else if(m instanceof pt&&m.status!==401){e.showMessage(l("errors.session-expired"));return}}}const u=h=>{a(h.currentTarget.value)};return i.jsx(EM,{countryCode:o,handleContinue:d,handleCountryChange:u,isProcessing:s,template:t})}function NM(e){var n;const t=mf(e.inquiry.template,N.inquiryParams.prefill,e.locale.localeInfo.country_code);return{selectedCountryCode:((n=e.inquiry.inquiry)==null?void 0:n.attributes["selected-country-code"])||t,inquiry:e.inquiry.inquiry,template:e.inquiry.template}}const jM={routeToNextStep:Gt,saveInquiry:Ot,showMessage:se},PM=ke(NM,jM),DM=PM(kM),OM=C("div").withConfig({displayName:"VerifySelfieFailedView__Header",componentId:"sc-1437e1b-0"})(["",""],e=>e.withIcon?W(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4):W(["margin-bottom:","px;"],F.base*2)),LM=C("div").withConfig({displayName:"VerifySelfieFailedView__FailureReasonSection",componentId:"sc-1437e1b-1"})(["margin-bottom:","px;"],F.base*6),rl=C("div").withConfig({displayName:"VerifySelfieFailedView__FailureReasonOption",componentId:"sc-1437e1b-2"})(["display:flex;align-items:center;margin-bottom:","px;"],F.base*2),ol=C.div.withConfig({displayName:"VerifySelfieFailedView__FailureReasonPictograph",componentId:"sc-1437e1b-3"})(["display:flex;align-items:center;flex-shrink:0;justify-content:space-around;margin-right:","px;> img,svg{height:50px;width:50px;}"],F.base*2);function FM(e){const{handleContinue:t,verification:n}=e,[r]=K(),{iconStyle:o}=f.useContext(tt),a=o!==Gr.None,s=(n.attributes["entity-confidence-reasons-public"]||[]).filter(l=>Object.values(lo).includes(l)),c=s.length===0?lo.Generic:s[0];return i.jsxs("div",{children:[i.jsxs(OM,{withIcon:a,children:[i.jsx(et,{children:i.jsx(J,{children:r("selfie.failed.title")})}),i.jsx(qe,{children:i.jsx(J,{children:r("selfie.failed.prompt")})})]}),i.jsx(LM,{children:i.jsx(MM,{withIcon:a,failureReason:c,t:r})}),i.jsx(ft,{children:i.jsx(ge,{id:"selfie-failed__continue",buttonType:ne.Primary,onClick:t,children:r("selfie.failed.btn-submit")})})]})}const MM=({withIcon:e,failureReason:t,t:n})=>{switch(t){case lo.Glasses:return i.jsxs(rl,{children:[e&&i.jsx(ol,{"data-test":"selfie-failed__failure-reason-pictograph",children:i.jsx(ye,{children:i.jsx(GC,{})})}),i.jsx(J,{children:n("selfie.failed.failure-reasons.glasses")})]});case lo.Glare:return i.jsxs(rl,{children:[e&&i.jsx(ol,{"data-test":"selfie-failed__failure-reason-pictograph",children:i.jsx(ye,{children:i.jsx(Cp,{})})}),i.jsx(J,{children:n("selfie.failed.failure-reasons.glare")})]});case lo.Generic:return i.jsxs(rl,{children:[e&&i.jsx(ol,{"data-test":"selfie-failed__failure-reason-pictograph",children:i.jsx(ye,{children:i.jsx(ll,{})})}),i.jsx(J,{children:n("selfie.failed.failure-reasons.generic")})]});default:ct(t)}};function VM(e){return f.useEffect(()=>{if(e.verification==null){N.redirectToStart();return}}),e.verification==null?null:i.jsx(FM,{handleContinue:()=>e.routeToNextStep(e.inquiry,jt),verification:e.verification})}function BM(e){return{featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const qM={routeToNextStep:Gt},UM=ke(BM,qM),HM=UM(VM),Jb=C("div").withConfig({displayName:"VerifySelfiePromptView__Header",componentId:"sc-1l6vrjs-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),$M=C("div").withConfig({displayName:"VerifySelfiePromptView__OptionPrimary",componentId:"sc-1l6vrjs-1"})(["margin-bottom:","px;"],F.base*2),GM=C(qr).withConfig({displayName:"VerifySelfiePromptView__IconCameraStyled",componentId:"sc-1l6vrjs-2"})(["path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),Xb=C.div.withConfig({displayName:"VerifySelfiePromptView__CaptureOptionsContainer",componentId:"sc-1l6vrjs-3"})(["width:100%;"]);function WM(e){const{enabledCaptureOptions:t}=e,[n,r]=K();return t.includes(Kn.WebCamera)?i.jsx(zM,{...e,t:n,i18n:r}):t.includes(Kn.Stillfie)?i.jsx(Ph,{...e,t:n,i18n:r}):(Z(new Error("Expected either web_camera or stillfie capture options"),"warning",{enabledCaptureOptions:t}),i.jsx(Ph,{...e,t:n,i18n:r}))}function e0(e){const{handleDeviceHandoff:t,isProcessing:n}=e,[r]=K();return i.jsx(ge,{id:"selfie-prompt__button--device-handoff","data-test":"selfie-prompt__button--device-handoff",buttonType:ne.Secondary,disabled:!!n,isPending:n===at.DeviceHandoff,onClick:t,children:r("selfie.prompt.btn-continue-on-device")})}function zM({t:e,enabledCaptureOptions:t,isProcessing:n,requireSelfieMatch:r,handleDeviceHandoff:o,handleStartRecording:a}){let s="",c;switch(r){case Cn.ProfileAndCenter:s=e("selfie.prompt.prompt"),c=i.jsx($e,{height:120,width:120,"aria-label":"selfie pictograph",children:i.jsx(Kt,{url:"selfiePictographUrl",height:"selfiePictographHeight","aria-label":"selfie pictograph",themed:!1,children:i.jsxs(Xe,{frameDuration:100,children:[i.jsx(Xe.Center,{frames:8}),i.jsx(Xe.Left1,{}),i.jsx(Xe.Left2,{frames:8}),i.jsx(Xe.Left1,{}),i.jsx(Xe.Center,{}),i.jsx(Xe.Right1,{}),i.jsx(Xe.Right2,{frames:8}),i.jsx(Xe.Right1,{})]})})});break;case Cn.OnlyCenter:s=e("selfie.prompt.prompt-center"),c=i.jsx($e,{height:120,width:120,"aria-label":"selfie center pictograph",children:i.jsx(Kt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"selfie center pictograph",themed:!1,children:i.jsx(Xe,{children:i.jsx(Xe.Center,{})})})});break;default:Z(new Error("Invalid selfie match requirement"));break}return i.jsxs(i.Fragment,{children:[i.jsxs(Jb,{children:[i.jsx(et,{children:i.jsx(J,{children:e("selfie.prompt.title")})}),i.jsx(qe,{children:i.jsx(J,{children:s})})]}),c,i.jsx(ft,{children:i.jsxs(Xb,{children:[i.jsx($M,{children:i.jsx(ge,{id:"selfie-prompt__button--camera",buttonType:ne.Primary,disabled:!!n,isPending:n===at.SelectCamera,onClick:a,children:e("selfie.prompt.btn-submit")})}),t.includes(Kn.DeviceHandoff)&&i.jsx(e0,{handleDeviceHandoff:o,isProcessing:n})]})})]})}const al=C.div.withConfig({displayName:"VerifySelfiePromptView__StillfieHint",componentId:"sc-1l6vrjs-4"})(["display:flex;justify-content:center;"]),Wo=C.div.withConfig({displayName:"VerifySelfiePromptView__StillfieHintColumn",componentId:"sc-1l6vrjs-5"})(["display:flex;flex-direction:column;align-items:center;position:relative;width:145px;font-size:",";line-height:",";"],({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),is=C.div.withConfig({displayName:"VerifySelfiePromptView__StillfieHintIconContainer",componentId:"sc-1l6vrjs-6"})(["position:absolute;top:108px;right:-4px;"]),rs=C.p.withConfig({displayName:"VerifySelfiePromptView__StillfieHintText",componentId:"sc-1l6vrjs-7"})(["width:100px;"]);function Ph({t:e,enabledCaptureOptions:t,isProcessing:n,currentStep:r,handleDeviceHandoff:o,handleSelectImage:a}){f.useEffect(()=>{z.logAmplitude("selfie.stillfie",{currentStep:r})},[r]);let s,c;switch(r){case he.Center:s=e("selfie.prompt.prompt-center"),c=i.jsx($e,{height:120,width:120,"aria-label":"stillfie center pictograph",children:i.jsx(Kt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"stillfie center pictograph",themed:!1,children:i.jsx(al,{children:i.jsx(Wo,{children:i.jsx(Xe,{children:i.jsx(Xe.Center,{})})})})})});break;case he.Left:s=e("selfie.prompt.prompt-left"),c=i.jsx($e,{height:null,width:null,"aria-label":"stillfie left pictograph",children:i.jsx(Kt,{url:"selfieLeftPictographUrl",height:"selfieLeftPictographHeight","aria-label":"stillfie left pictograph",themed:!1,children:i.jsxs(al,{children:[i.jsxs(Wo,{children:[i.jsx(Xe,{children:i.jsx(Xe.Left1,{})}),i.jsx(is,{children:i.jsx(hs,{})}),i.jsx(rs,{children:e("selfie.prompt.prompt-stillfie-hint-left")})]}),i.jsx(We,{width:3}),i.jsxs(Wo,{children:[i.jsx(Xe,{children:i.jsx(Xe.Left3,{})}),i.jsx(is,{children:i.jsx(ps,{})}),i.jsx(rs,{children:e("selfie.prompt.prompt-stillfie-hint-wrong")})]})]})})});break;case he.Right:s=e("selfie.prompt.prompt-right"),c=i.jsx($e,{height:null,width:null,"aria-label":"stillfie right pictograph",children:i.jsx(Kt,{url:"selfieRightPictographUrl",height:"selfieRightPictographHeight","aria-label":"stillfie right pictograph",themed:!1,children:i.jsxs(al,{children:[i.jsxs(Wo,{children:[i.jsx(Xe,{children:i.jsx(Xe.Right1,{})}),i.jsx(is,{children:i.jsx(hs,{})}),i.jsx(rs,{children:e("selfie.prompt.prompt-stillfie-hint-right")})]}),i.jsx(We,{width:3}),i.jsxs(Wo,{children:[i.jsx(Xe,{children:i.jsx(Xe.Right3,{})}),i.jsx(is,{children:i.jsx(ps,{})}),i.jsx(rs,{children:e("selfie.prompt.prompt-stillfie-hint-wrong")})]})]})})});break}return i.jsxs(i.Fragment,{children:[i.jsxs(Jb,{children:[i.jsx(et,{children:i.jsx(J,{children:e("selfie.prompt.title-stillfie")})}),i.jsx(qe,{children:i.jsx(J,{children:s})})]}),c,i.jsx(We,{height:3}),i.jsx(ft,{children:i.jsxs(Xb,{children:[i.jsx(Fo,{id:"selfie-prompt__button--stillfie",buttonType:ne.Primary,capture:"user",disabled:n!=null,isPending:n===at.UploadImage,handleSelectImage:a,children:i.jsx(GM,{})}),t.includes(Kn.DeviceHandoff)&&i.jsx(e0,{handleDeviceHandoff:o,isProcessing:n})]})})]})}const YM=e=>{const{inquiry:t,currentSession:n,currentStep:r,featureFlags:o,isWebGLIncompatible:a,template:s,hasCamera:c}=e,{t:l}=K(),d=f.useRef();f.useEffect(()=>{const[T,R]=Ci();return d.current=T,R},[]);const[u,h]=f.useState(void 0),[m,p]=f.useState(void 0),g=ni();f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}},[]),f.useEffect(()=>{b()},[]),f.useEffect(()=>{if(s.attributes["force-link-from-react-native"]&&n.relationships["parent-session"].data==null){e.history.replace("/verify/device-handoff/sms");return}if(e.match.params.step===da([],ss(t))&&e.verificationSelfieStart(),c==null)e.checkCamera();else{const R=Kv({verificationConfigSelfie:r.config,isMobile:g,isWebGLIncompatible:a,hasCamera:c});p(R),R.length===0&&e.history.replace("/verify/invalid/verification"),R.length===1&&R[0]===Kn.DeviceHandoff&&e.history.replace("/verify/device-handoff/prompt")}},[c]);const b=async()=>{try{await yt.loadModels()}catch{}},x=async()=>{e.clearMessages(),h(at.SelectCamera);const T=zs(t);try{const R=await Gg({highResolution:T,featureFlags:o});e.setVideoConstraints(R),await Promise.all([An.prepare({video:R},o),yt.loadModels()]),N.onEvent(Oe.SelfieCameraSelect),e.history.push("/verify/selfie/record")}catch(R){Z(R,"warning"),z.logAmplitude("selfie.record.errored",{error:{name:R.name,message:R.message}}),N.onEvent(Oe.LoadCameraFailed,{error:R.name,message:R.message}),e.history.push("/verify/support/camera")}},y=async T=>{if(e.clearMessages(),window.FileReader==null){e.showMessage(l("government-id.prompt.failed-select-image"));return}h(at.UploadImage),N.onEvent(Oe.SelfieRecordUpload);const R=document.createElement("img");R.onload=async()=>{const D=Math.min(1e3,Math.max(R.width,R.height));yb(R,d.current,D);const L=d.current.toDataURL("image/jpeg");if(L==null){e.showMessage(l("government-id.prompt.failed-select-image")),Z(new Error("Stillfie canvas is empty"),"error",{fileSize:T==null?void 0:T.size,fileName:T==null?void 0:T.name,img:R.src});return}z.logAmplitude("selfie.upload",{fileSize:T==null?void 0:T.size,fileName:T==null?void 0:T.name,imgSize:R.src.length,canvasSize:L.length});let H;L.length<R.src.length&&L.length!==0?H=L:H=R.src;const M=e.match.params.step;e.saveCapturedSelfie(M,H,ut.Upload);const B=dd(e.capturedSelfies,M,H,ut.Upload),V=ss(t),q=da(B,V);if(q==null)try{await e.verificationSelfieSubmit(e.routingInputs,B,null,e.history,e.forcedStatus,e.featureFlags)}catch{h(void 0)}else e.history.push(`/verify/selfie/${q}/prompt`)},R.onerror=v;const O=await Ao(T);R.src=O},v=()=>{h(void 0),e.showMessage(l("government-id.prompt.failed-select-image"))},_=()=>{u==null&&(e.clearMessages(),h(at.DeviceHandoff),e.history.push("/verify/device-handoff/prompt"))};if(t==null||s.attributes["force-link-from-react-native"]&&n.relationships["parent-session"].data==null||m==null||m.length===0||m.length===1&&m[0]===Kn.DeviceHandoff)return null;const A=ss(t);return i.jsx(WM,{handleSelectImage:y,handleStartRecording:x,handleDeviceHandoff:_,enabledCaptureOptions:m,isProcessing:u,currentStep:e.match.params.step,requireSelfieMatch:A})},KM=e=>({capturedSelfies:e.verification.capturedSelfies,forcedStatus:e.test.forcedStatus,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,currentStep:e.inquiry.currentStep,isWebGLIncompatible:e.inquiry.isWebGLIncompatible,routingInputs:vc(e),template:e.inquiry.template,featureFlags:e.inquiry.featureFlags,hasCamera:e.ui.hasCamera}),QM={clearMessages:Lt,routeToNextStep:Gt,saveCapturedSelfie:Ea,setVideoConstraints:Ro,verificationSelfieStart:Rg,showMessage:se,verificationSelfieSubmit:Ag,checkCamera:$r},ZM=ke(KM,QM),JM=ZM(YM),XM=15e3;function eV(e){var c;const t=(c=e.enabledCaptureOptions)!=null&&c.includes(Kn.Manual)?XM:null,[n,{enable:r,disable:o}]=st(),{t:a}=K(),s=hf({requireSelfieMatch:e.requireSelfieMatch});return i.jsxs(i.Fragment,{children:[i.jsxs(_i,{isOpen:n,onClose:o,"data-test":"verify-selfie-record-view__slow-detection-dialog","aria-labelledby":"verify-selfie-record-view__slow-detection-dialog--title","aria-describedby":"verify-selfie-record-view__slow-detection-dialog--description",children:[i.jsx(et,{id:"verify-selfie-record-view__slow-detection-dialog--title",children:i.jsx(J,{children:a("selfie.record.slow-detection-title")})}),i.jsx(qe,{id:"verify-selfie-record-view__slow-detection-dialog--description",children:i.jsx(J,{children:a("selfie.record.slow-detection-prompt")})}),i.jsx(We,{height:2}),i.jsx(ge,{id:"verify-selfie-record-view__slow-detection-dialog--wait-btn","data-test":"verify-selfie-record-view__slow-detection-dialog--wait-btn",onClick:o,children:a("selfie.record.slow-detection-wait")}),i.jsx(We,{height:1}),i.jsx(ge,{id:"verify-selfie-record-view__slow-detection-dialog--try-another-device-btn","data-test":"verify-selfie-record-view__slow-detection-dialog--try-another-device-btn",onClick:e.handleSlowFaceDetection,buttonType:ne.Secondary,children:a("selfie.record.slow-detection-try-another-device")})]}),i.jsx(Bb,{capturedSelfies:e.capturedSelfies,clearCapturedSelfies:e.clearCapturedSelfies,delayUntilManualCaptureMs:t,handleComplete:l=>e.handleComplete(l.capturedSelfies,l.cameraInspectionData),handleFailed:e.handleFailed,detectTimeout:e.detectTimeout,handleSlowFaceDetection:r,poseOrder:s,saveCapturedSelfie:e.saveCapturedSelfie,videoConstraints:e.videoConstraints,requireHigherAccuracyCapture:e.requireHigherAccuracyCapture,featureFlags:e.featureFlags,audioEnabled:!1,enableMobilePendingExperienceForWeb:!1})]})}const tV=e=>{const[t]=K(),{currentStep:n,routingInputs:r,inquiry:o,videoConstraints:a}=e;if(f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}try{window.parent.Cypress&&c("Push to stillfie in Cypress tests!","load")}catch{}},[]),o==null)return null;const s=async(h,m)=>{e.clearMessages();try{N.onEvent(Oe.SelfieCameraCapture),await e.verificationSelfieSubmit(r,h,m,e.history,e.forcedStatus,e.featureFlags)}catch{e.showMessage(t("errors.network"),!0),e.clearCapturedSelfies(),e.history.replace(`/verify/selfie/${he.Center}/prompt`)}},c=(h,m)=>{e.showMessage(t("selfie.record.failed-video"),!0),e.saveIsWebGLIncompatible(!0),h instanceof Error?(m==="load"&&N.onEvent(Oe.LoadCameraFailed,{error:h.name,message:h.message}),Z(h,"warning",{state:m},{jira:"PER-10182"})):(m==="load"&&N.onEvent(Oe.LoadCameraFailed,{message:h}),Z(new Error(h),"warning",{state:m},{jira:"PER-10182"})),setTimeout(()=>{e.history.goBack()},500)},l=()=>{e.saveIsWebGLIncompatible(!0),e.history.goBack()},d=ni(),u=zs(e.inquiry);return i.jsx(eV,{capturedSelfies:e.capturedSelfies,enabledCaptureOptions:n.config[d?"enabled-capture-options-mobile":"enabled-capture-options-desktop"],clearCapturedSelfies:e.clearCapturedSelfies,handleComplete:s,handleFailed:c,handleSlowFaceDetection:l,requireSelfieMatch:ss(o),saveCapturedSelfie:e.saveCapturedSelfie,videoConstraints:a,requireHigherAccuracyCapture:u,detectTimeout:Nb,featureFlags:e.featureFlags})};function nV(e){return{capturedSelfies:e.verification.capturedSelfies,currentStep:e.inquiry.currentStep,inquiry:e.inquiry.inquiry,routingInputs:vc(e),videoConstraints:e.verification.videoConstraints,forcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags}}const iV={clearCapturedSelfies:Ys,clearMessages:Lt,routeToNextStep:Gt,saveCapturedSelfie:Ea,saveIsWebGLIncompatible:of,showMessage:se,verificationSelfieSubmit:Ag},rV=ke(nV,iV),oV=rV(tV),aV=qn()(oV),Dh=C("div").withConfig({displayName:"VerifySuccessView__Header",componentId:"sc-7bvk95-0"})(["margin-bottom:","px;"],F.base*8),sV=C("div").withConfig({displayName:"VerifySuccessView__AnimationContainer",componentId:"sc-7bvk95-1"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:","px;"],F.base*5),Oh=C("div").withConfig({displayName:"VerifySuccessView__TextDefaultCentered",componentId:"sc-7bvk95-2"})(["text-align:",";"],({theme:e})=>e.textAlign===Zs.Default?"center":e.textAlign);function cV(e){const{handleSubmit:t,hasCompleteButton:n,isChildFlow:r,isProcessing:o,pictograph:a}=e,[s]=K(),{successPictographPosition:c}=f.useContext(tt),l=a!=="none"&&i.jsx($e,{height:null,width:null,"aria-label":"success",children:i.jsx(Kt,{url:"successPictographUrl",height:"successPictographHeight",themed:!1,children:i.jsx(sV,{children:i.jsx(Gf,{})})})});return r?i.jsxs("div",{"data-test":"verify-success-view__child-flow",children:[i.jsxs(Dh,{children:[i.jsx(et,{children:s("success.title-exchange-flow")}),i.jsx(qe,{children:i.jsx(J,{children:s("success.prompt-exchange-flow")})})]}),i.jsx($e,{"aria-label":"desktop pictograph",children:i.jsx(ye,{vectorEffect:"initial",children:i.jsx(ql,{})})})]}):i.jsxs("div",{children:[c===Wt.Start&&l,i.jsxs(Dh,{children:[i.jsx(et,{children:i.jsx(Oh,{children:s("success.title")})}),i.jsx(Oh,{children:i.jsx(J,{children:s("success.prompt")})})]}),c===Wt.Center&&l,n&&i.jsx(ft,{children:i.jsx(ge,{id:"success__button--complete",buttonType:ne.Primary,onClick:t,disabled:o,isPending:o,children:s("success.btn-submit")})})]})}const Lh=500;class lV extends f.Component{constructor(t){super(t),this.handleSubmit=async()=>{this.setState({isProcessing:!0});const n=await this.pollForInquiryComplete(),r={inquiryId:n.id,referenceId:n.attributes["reference-id"],subject:n.attributes["reference-id"],scopes:{name:{first:n.attributes["name-first"],middle:n.attributes["name-middle"],last:n.attributes["name-last"]},birthdate:n.attributes.birthdate,address:{"street-1":n.attributes["address-street-1"],"street-2":n.attributes["address-street-2"],city:n.attributes["address-city"],subdivision:n.attributes["address-subdivision"],"subdivision-abbr":n.attributes["address-subdivision-abbr"],"postal-code":n.attributes["address-postal-code"]},"email-address":n.attributes["email-address"]},status:n.attributes.status,fields:n.attributes.fields},o={inquiry:n};z.logAmplitude("verify-ui.success",{duration:Mn.local().diff(Mn.fromISO(n.attributes["created-at"]),"seconds").seconds}),N.onEvent(Oe.Success,r),z.logAmplitude("verify-ui.complete"),N.onEvent(Oe.Complete,r,o),this.setState({isProcessing:!1})},this.pollForInquiryComplete=async()=>new Promise(n=>this.pollHelper(n)),this.pollHelper=async n=>{const{inquiry:r}=this.props;try{const o=(await te.getResource(Zt(r.type),r.id)).data;switch(o.attributes.status){case fe.Created:case fe.Pending:setTimeout(()=>this.pollHelper(n),Lh);break;case fe.Completed:case fe.NeedsReview:case fe.Approved:case fe.Declined:case fe.Expired:case fe.Failed:n(o);break;default:ct(o.attributes.status)}}catch(o){o instanceof Ct?setTimeout(()=>this.pollHelper(n),Lh):Z(o)}},this.state={isProcessing:!1}}componentDidMount(){const{template:t}=this.props;if(t==null){N.redirectToStart();return}t.attributes["auto-trigger-complete-event"]&&setTimeout(()=>{this.handleSubmit()},5e3)}render(){const{template:t,inquiry:n,currentSession:r}=this.props;if(t==null)return null;const a=(n.attributes["next-step"].config||{}).pictograph;return i.jsx(cV,{handleSubmit:this.handleSubmit,hasCompleteButton:vi(n),isChildFlow:r.relationships["parent-session"].data!=null,isProcessing:this.state.isProcessing,pictograph:a})}}function dV(e){return{template:e.inquiry.template,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession}}const uV={clearMessages:Lt},mV=ke(dV,uV),hV=mV(lV),pV=C("div").withConfig({displayName:"VerifySupportCameraView__Header",componentId:"sc-gfv5nj-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),fV=e=>{const[t]=K(),[n,r]=f.useState(void 0);if(f.useEffect(()=>{_p(e.requestedMicrophone).then(a=>r(a))},[]),n==null)return null;const o=n?t("support-camera.prompt-issues"):e.requestedMicrophone?t("support-camera.prompt-permissions-camera-and-mic"):t("support-camera.prompt-permissions");return i.jsxs("div",{children:[i.jsxs(pV,{children:[i.jsx(et,{children:e.requestedMicrophone?t("support-camera.title-camera-and-mic"):t("support-camera.title")}),i.jsx(qe,{children:i.jsx(J,{children:o})})]}),i.jsx(Kt,{url:"cameraSupportPictographUrl",height:"cameraSupportPictographHeight",children:i.jsx($e,{"aria-label":"pictograph showing camera error",children:i.jsx(ye,{children:i.jsx(kn,{})})})}),i.jsx(ft,{children:i.jsx(ge,{onClick:e.handleContinue,"data-test":"support-camera__button--handle-continue",children:e.requestedMicrophone?t("support-camera.button-camera-and-mic"):t("support-camera.button")})})]})},gV=e=>{const t=Dt(),n=()=>{if(e.supportLink!=null&&e.supportLink!=="")if(N.isEmbedded||N.isWebView){const r=e.supportLink.startsWith("/"),o=Lx(document.referrer),a=r?`${o}${e.supportLink}`:e.supportLink;window.open(a,"_top"),N.onEvent(Oe.Exit,{inquiryId:e.inquiry.id,sessionToken:te.accessToken},{inquiry:e.inquiry}),t.goBack()}else window.open(e.supportLink,"_self");else t.goBack()};return i.jsx(fV,{requestedMicrophone:e.requestedMicrophone,handleContinue:n})};function bV(e){var t;return{inquiry:e.inquiry.inquiry,supportLink:(t=e.inquiry.template)==null?void 0:t.attributes["camera-support-external-link"],featureFlags:e.inquiry.featureFlags}}const CV={routeToNextStep:Gt},xV=ke(bV,CV),Fh=xV(gV),vV=C("div").withConfig({displayName:"VerifySupportPromptView__Header",componentId:"sc-14anlrq-0"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4),yV=C("div").withConfig({displayName:"VerifySupportPromptView__SupportContent",componentId:"sc-14anlrq-1"})([""]);function IV(e){const[t]=K();return i.jsxs(yV,{children:[i.jsxs(vV,{children:[i.jsx(et,{children:t("support-prompt.title")}),i.jsx(qe,{children:t("support-prompt.prompt")})]}),i.jsx(Yb,{onSubmit:e.handleSubmitTicket})]})}const SV=e=>{const[t]=K();f.useEffect(()=>{if(e.inquiry==null){N.redirectToStart();return}},[]);const n=f.useCallback(async r=>{try{await te.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"send-support-ticket",{meta:r}),e.history.push("/verify/support/sent");return}catch{e.showMessage(t("support-prompt.failed"))}},[e.inquiry,e.showMessage,t]);return e.inquiry==null?null:i.jsx(IV,{handleSubmitTicket:n})};function wV(e){return{inquiry:e.inquiry.inquiry}}const _V={showMessage:se},RV=ke(wV,_V),AV=RV(SV),TV=C("div").withConfig({displayName:"VerifySupportSentView__Positioner",componentId:"sc-1locv3x-0"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:100%;padding:",";"],F.widgetPadding),EV=C("div").withConfig({displayName:"VerifySupportSentView__MessageSentContent",componentId:"sc-1locv3x-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:","px;"],F.base*4),kV=C.div.withConfig({displayName:"VerifySupportSentView__IconContainer",componentId:"sc-1locv3x-2"})(["margin-bottom:","px;"],F.base*5),NV=C("p").withConfig({displayName:"VerifySupportSentView__MessageSentBody",componentId:"sc-1locv3x-3"})(["margin-left:","px;margin-right:","px;"],F.base*4,F.base*4),jV=C("div").withConfig({displayName:"VerifySupportSentView__TextCentered",componentId:"sc-1locv3x-4"})(["text-align:center;"]);function PV({handleClose:e,hasCompleteButton:t}){const[n]=K();return i.jsxs(TV,{children:[i.jsxs(EV,{children:[i.jsx(kV,{children:i.jsx(ye,{children:i.jsx(bp,{})})}),i.jsxs(jV,{children:[i.jsx(et,{children:n("support-sent.title")}),i.jsx(NV,{children:n("support-sent.prompt")})]})]}),t&&i.jsx(ge,{onClick:e,children:n("support-sent.button")})]})}const DV=({inquiry:e})=>{const t=f.useCallback(()=>{e.attributes.status===fe.Failed?N.onEvent(Oe.Fail,{inquiryId:e.id,referenceId:e.attributes["reference-id"]},{inquiry:e}):N.onEvent(Oe.Exit,{inquiryId:e.id,sessionToken:te.accessToken},{inquiry:e})},[e]);return i.jsx(PV,{handleClose:t,hasCompleteButton:vi(e)})};function OV(e){return{inquiry:e.inquiry.inquiry}}const LV=ke(OV),FV=LV(DV),MV=f.lazy(()=>Ze(()=>import("./index-DzIvZXYR.js"),__vite__mapDeps([23,1,2,3,4,5,6,24,7,8,9,10,11,12,13,14,15]))),VV=f.lazy(()=>Ze(()=>import("./index-DbaTprQo.js"),__vite__mapDeps([25,1,2,3,4,26,27,24,5,6,7,8,9,10,11,12,13,14,15,28]))),BV=({location:e})=>i.jsx(f.Suspense,{fallback:i.jsx(vn,{}),children:i.jsxs(v1,{location:e,children:[i.jsx(xe,{component:il,exact:!0,path:"/widget"}),i.jsx(xe,{component:il,exact:!0,path:"/verify"}),i.jsx(xe,{component:FF,exact:!0,path:"/verify/invalid/config"}),i.jsx(xe,{component:UF,exact:!0,path:"/verify/invalid/inquiry"}),i.jsx(xe,{component:GF,exact:!0,path:"/verify/invalid/verification"}),i.jsx(xe,{component:jF,exact:!0,path:"/verify/invalid/code"}),i.jsx(xe,{component:AF,exact:!0,path:"/verify/intro"}),i.jsx(xe,{component:DM,exact:!0,path:"/verify/select-country"}),i.jsx(xe,{component:qO,exact:!0,path:"/verify/exit"}),i.jsx(xe,{component:hV,exact:!0,path:"/verify/success"}),i.jsx(xe,{component:KO,exact:!0,path:"/verify/failed"}),i.jsx(xe,{component:AV,exact:!0,path:"/verify/support/prompt"}),i.jsx(xe,{component:FV,exact:!0,path:"/verify/support/sent"}),i.jsx(xe,{render:t=>i.jsx(Fh,{requestedMicrophone:!1,...t}),exact:!0,path:"/verify/support/camera"}),i.jsx(xe,{render:t=>i.jsx(Fh,{requestedMicrophone:!0,...t}),exact:!0,path:"/verify/support/camera-microphone"}),i.jsx(xe,{component:RP,exact:!0,path:"/verify/device-handoff/prompt"}),i.jsx(xe,{component:lP,exact:!0,path:"/verify/device-handoff/email"}),i.jsx(xe,{component:bP,exact:!0,path:"/verify/device-handoff/email/sent"}),i.jsx(xe,{component:BP,exact:!0,path:"/verify/device-handoff/sms"}),i.jsx(xe,{component:YP,exact:!0,path:"/verify/device-handoff/sms/sent"}),i.jsx(xe,{component:PP,exact:!0,path:"/verify/device-handoff/qr"}),i.jsx(xe,{component:xM,exact:!0,path:"/verify/phone-number/prompt"}),i.jsx(xe,{component:eM,exact:!0,path:"/verify/phone-number/confirm"}),i.jsx(xe,{component:uM,exact:!0,path:"/verify/phone-number/info"}),i.jsx(xe,{component:FO,exact:!0,path:"/verify/email-address/prompt"}),i.jsx(xe,{component:TO,exact:!0,path:"/verify/email-address/confirm"}),i.jsx(xe,{component:JM,exact:!0,path:"/verify/selfie/:step/prompt"}),i.jsx(xe,{component:aV,exact:!0,path:"/verify/selfie/record"}),i.jsx(xe,{component:HM,exact:!0,path:"/verify/selfie/failed"}),i.jsx(xe,{component:nP,exact:!0,path:"/verify/database"}),i.jsx(xe,{component:gj,exact:!0,path:"/verify/database/pending"}),i.jsx(xe,{component:sj,exact:!0,path:"/verify/database/failed"}),i.jsx(xe,{component:fF,exact:!0,path:"/verify/government-id/select"}),i.jsx(xe,{component:JL,exact:!0,path:"/verify/government-id/:step/prompt"}),i.jsx(xe,{component:lL,exact:!0,path:"/verify/government-id/:step/capture"}),i.jsx(xe,{component:CL,exact:!0,path:"/verify/government-id/:step/check"}),i.jsx(xe,{component:ML,exact:!0,path:"/verify/government-id/pending"}),i.jsx(xe,{component:EL,exact:!0,path:"/verify/government-id/failed"}),i.jsx(xe,{component:FD,exact:!0,path:"/verify/documents/intro"}),i.jsx(xe,{component:dO,exact:!0,path:"/verify/documents/:documentNumber/prompt"}),i.jsx(xe,{component:eD,exact:!0,path:"/verify/documents/:documentNumber/capture"}),i.jsx(xe,{component:fD,exact:!0,path:"/verify/documents/:documentNumber/check"}),i.jsx(xe,{component:WD,exact:!0,path:"/verify/documents/:documentNumber/pending"}),i.jsx(xe,{component:ID,exact:!0,path:"/verify/documents/:documentNumber/failed"}),i.jsx(xe,{component:il,exact:!0,path:"/inquiry"}),i.jsx(xe,{component:k3,exact:!0,path:Op}),i.jsx(xe,{component:z7,exact:!0,path:Lp}),i.jsx(xe,{component:KT,exact:!0,path:"/inquiry/documents/prompt"}),i.jsx(xe,{component:qA,exact:!0,path:"/inquiry/documents/capture"}),i.jsx(xe,{component:Q8,exact:!0,path:"/inquiry/documents/check"}),i.jsx(xe,{component:oT,exact:!0,path:"/inquiry/documents/pending"}),i.jsx(xe,{component:G9,exact:!0,path:"/inquiry/government-id/select"}),i.jsx(xe,{component:S9,exact:!0,path:"/inquiry/government-id/:step/prompt"}),i.jsx(xe,{component:T6,exact:!0,path:"/inquiry/government-id/:step/capture-lead-in-animation"}),i.jsx(xe,{component:yk,exact:!0,path:"/inquiry/government-id/:step/capture"}),i.jsx(xe,{component:eh,exact:!0,path:"/inquiry/government-id/:step/check"}),i.jsx(xe,{component:eh,exact:!0,path:"/inquiry/government-id/:step/check-upload"}),i.jsx(xe,{component:nE,exact:!0,path:"/inquiry/government-id/autoclassification-failure"}),i.jsx(xe,{component:dE,exact:!0,path:"/inquiry/government-id/autoclassification-select"}),i.jsx(xe,{component:Yk,exact:!0,path:"/inquiry/government-id/pending"}),i.jsx(xe,{component:MV,exact:!0,path:"/inquiry/selfie-reflection/prompt"}),i.jsx(xe,{component:VV,exact:!0,path:"/inquiry/selfie-reflection/record"}),i.jsx(xe,{component:L2,exact:!0,path:"/inquiry/selfie/:step/prompt"}),i.jsx(xe,{component:x7,exact:!0,path:"/inquiry/selfie/record"}),i.jsx(xe,{component:d2,exact:!0,path:"/inquiry/selfie/check"}),i.jsx(xe,{render:t=>i.jsx(lh,{requestedMicrophone:!1,...t}),exact:!0,path:"/inquiry/support/camera"}),i.jsx(xe,{render:t=>i.jsx(lh,{requestedMicrophone:!0,...t}),exact:!0,path:"/inquiry/support/camera-microphone"}),i.jsx(xe,{component:xI,exact:!0,path:"/inquiry/app-handoff"}),i.jsx(xe,{component:kR,exact:!0,path:"/inquiry/device-handoff/prompt"}),i.jsx(xe,{component:cA,exact:!0,path:"/inquiry/device-handoff/started"}),i.jsx(xe,{component:rR,exact:!0,path:"/inquiry/device-handoff/email"}),i.jsx(xe,{component:mR,exact:!0,path:"/inquiry/device-handoff/email/sent"}),i.jsx(xe,{component:WR,exact:!0,path:"/inquiry/device-handoff/sms"}),i.jsx(xe,{component:eA,exact:!0,path:"/inquiry/device-handoff/sms/sent"}),i.jsx(xe,{component:f3,exact:!0,path:"/inquiry/create-persona/passkey-registration"}),i.jsx(xe,{component:O3,exact:!0,path:"/inquiry/create-persona/success"}),i.jsx(xe,{component:U7,exact:!0,path:"/inquiry/verify-with-persona/passkey-authentication"}),i.jsx(xe,{component:J7,exact:!0,path:"/inquiry/verify-with-persona/success"}),i.jsx(xe,{component:F7,exact:!0,path:"/inquiry/verify-with-persona/error"}),i.jsx(xe,{component:e2,exact:!0,path:"/inquiry/integration"}),i.jsx(xe,{component:N7,exact:!0,path:"/inquiry/ui"}),i.jsx(xe,{component:B3,exact:!0,path:"/inquiry/create-persona/update-success"}),i.jsx(xe,{component:Y9,exact:!0,path:"/inquiry/inactive"}),i.jsx(xe,{component:X7})]})}),Ni=300,t0=400,n0=200,i0=100,qV=C("div").withConfig({displayName:"AnimatedPage__Transitioner",componentId:"sc-8r1su2-0"})(["width:100%;@media ","{position:absolute;z-index:",";height:100%;&.slide-left-enter{transform:translateX(100%);}&.slide-left-enter-active{pointer-events:none;transform:translateX(0%);transition:","ms;}&.slide-left-exit{transform:translateX(0%);}&.slide-left-exit-active{pointer-events:none;transform:translateX(-100%);transition:","ms;}&.slide-right-enter{transform:translate(-100%);}&.slide-right-enter-active{pointer-events:none;transform:translateX(0%);transition:","ms;}&.slide-right-exit{transform:translateX(0%);}&.slide-right-exit-active{pointer-events:none;transform:translateX(100%);transition:","ms;}&.slide-down-enter{z-index:",";}&.slide-down-enter-active{pointer-events:none;}&.slide-down-exit{z-index:",";transform:translateY(0%);}&.slide-down-exit-active{transform:translateY(100%);pointer-events:none;transition:","ms;}&.slide-up-enter{transform:translateY(100%);z-index:",";}&.slide-up-enter-active{pointer-events:none;transform:translateY(0%);transition:","ms;}&.slide-up-exit{z-index:",";}&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;pointer-events:none;transition:","ms;transition-delay:","ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;pointer-events:none;transition:","ms;}}@media ","{&.slide-left-exit,&.slide-right-exit,&.slide-up-exit,&.slide-down-exit,&.fade-exit{display:none;}&.slide-left-exit-active,&.slide-right-exit-active,&.slide-up-exit-active,&.slide-down-exit-active,&.fade-exit-active{display:none;}}&.none-exit{display:none;}&.none-exit-active{display:none;}"],xt.isMobile,At.page,Ni,Ni,Ni,Ni,At.notifications-2,At.notifications-1,Ni,At.notifications-1,Ni,At.notifications-2,t0,i0,n0,xt.isNotMobile),UV=C("div").withConfig({displayName:"AnimatedPage__ScrollingPage",componentId:"sc-8r1su2-1"})(["",";@media ","{position:relative;height:100%;overflow-y:auto;}"],({isFullscreenPage:e})=>!e&&`
      padding-top: ${N.widgetPadding.top}px;
      padding-left: ${N.widgetPadding.left}px;
      padding-right: ${N.widgetPadding.right}px;
      padding-bottom: ${N.widgetPadding.bottom}px;

      /* For Apple devices with notches; will be ignored for other devices */
      /* This allows us to use object-fit=cover in the HTML's meta tag */
      /* https://webkit.org/blog/7929/designing-websites-for-iphone-x/ */
      padding-left: calc(${N.widgetPadding.left}px + env(safe-area-inset-left));
      padding-right: calc(${N.widgetPadding.right}px + env(safe-area-inset-right));
      padding-top: calc(${N.widgetPadding.top}px + env(safe-area-inset-top));
      padding-bottom: calc(${N.widgetPadding.bottom}px + env(safe-area-inset-bottom));
  `,xt.isMobile),HV=e=>t=>f.cloneElement(t,{classNames:e}),$V=({scrollingPageRef:e,enableGovidRedesign:t,timeoutEnter:n,onEntered:r,location:o})=>(f.useLayoutEffect(()=>{const a=setTimeout(r,n!=null?n:0);return()=>clearTimeout(a)},[]),i.jsxs(qV,{children:[i.jsx(UV,{"data-test":"animated-page__scrolling-page",ref:e,isFullscreenPage:r0(o,t),children:i.jsx(BV,{location:o})}),i.jsx(Id,{})]}));function GV({pageTransition:e=Pi.Slide,onPageTransition:t}){var h,m,p;const n=Dt(),r=Vr(),o=Ke(g=>{var b;return((b=g.inquiry.inquiryTemplateVersion)==null?void 0:b.attributes["govid-design-version"])===To.V1}),a=f.useRef(),s=f.useCallback(()=>{var b,x;const g=Array.from((x=(b=a.current)==null?void 0:b.children)!=null?x:[]).reduce((y,v)=>y+v.scrollHeight,r0(r,o)?0:N.widgetPadding.top+N.widgetPadding.bottom);t==null||t({pageHeight:g}),cr()},[r,o,t]);let c,l=0,d=0;if(WV(r))c="none";else{const g=n.action==="POP"||((h=r.state)==null?void 0:h.back),b=g?(m=r.state)==null?void 0:m.backTransition:(p=r.state)==null?void 0:p.transition;switch(e=b!=null?b:e,e){case Pi.None:c="none",l=0,d=0;break;case Pi.Fade:c="fade",l=i0+t0,d=n0;break;case Pi.Slide:g?c="slide-right":c="slide-left",l=Ni,d=Ni;break;case Pi.SlideVertical:g?c="slide-down":c="slide-up",l=Ni,d=Ni;break;default:ct(e)}}const u=f.useCallback(()=>{var g,b,x;s(),(g=r.state)!=null&&g.skipAnimation&&(r.state.skipAnimation=!1),n.action==="PUSH"&&((b=n.entries[n.index-1])!=null&&b.state)&&(n.entries[n.index-1].state.backTransition=(x=r==null?void 0:r.state)==null?void 0:x.transition)},[n.action,n.entries,n.index,s,r]);return i.jsx(rp,{"data-test":"animated-page__transition",childFactory:HV(c),children:i.jsx(Ia,{timeout:{enter:l,exit:d},mountOnEnter:!0,unmountOnExit:!0,classNames:c,onEntered:u,children:i.jsx($V,{scrollingPageRef:a,enableGovidRedesign:o,timeoutEnter:l,onEntered:u,location:r})},r.key)})}function WV(e){var t;return((t=e.state)==null?void 0:t.skipAnimation)||e.pathname.match(new RegExp("/(inquiry|verify)/selfie/record"))||e.pathname.match(new RegExp("/(inquiry|verify)/government-id/.+/capture"))||e.pathname.match(new RegExp("/inquiry/government-id/.+/check$"))}function r0(e,t){return!!(t&&(e.pathname.match(new RegExp("/inquiry/government-id/.+/capture"))||e.pathname.match(new RegExp("/inquiry/government-id/.+/check$"))))}const zV=f.memo(function(){var n;const t=Ke(r=>r.inquiry.inquiryTemplateVersion);return t==null?null:i.jsx("div",{style:{display:"none"},children:(n=t.attributes.assets)==null?void 0:n.map(r=>i.jsx(Ff,{src:r.url,contentType:r["content-type"]},r.url))})}),YV=()=>{const e=Dt(),t=Ke(a=>a.inquiry.inquiry),n=Ke(a=>a.inquiry.featureFlags),[r,{enable:o}]=st(!1);return f.useEffect(()=>{var s,c;if(r||t==null||n==null||!n["inquiry:block-embedded-flow-if-not-in-iframe-report-only"]||!N.isEmbedded||Lv()||(Z(new Error("Detected embedded flow outside iframe"),"warning",{inquiry:t.id},{organization:t.relationships.organization.data.id,inquiryTemplateVersion:(c=(s=t.relationships["inquiry-template-version"])==null?void 0:s.data)==null?void 0:c.id,flowType:N.flowType}),!n["inquiry:block-embedded-flow-if-not-in-iframe"]))return;const a=setTimeout(()=>e.replace("/verify/invalid/config",{skipAnimation:!0}),0);return o(),()=>clearTimeout(a)},[t,n]),null},KV=C("div").withConfig({displayName:"ErrorPage__Container",componentId:"sc-usyifj-0"})(["margin:",";padding-top:","px;"],F.widgetPadding,F.base*2),QV=C("div").withConfig({displayName:"ErrorPage__Header",componentId:"sc-usyifj-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function ZV(){const[e]=K();return i.jsxs(i.Fragment,{children:[i.jsxs(KV,{"data-test":"error-page",children:[i.jsxs(QV,{children:[i.jsx(et,{children:e("error.title")}),i.jsx("p",{children:e("error.prompt")})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})}),i.jsx(ge,{onClick:()=>N.redirectToStart(),children:e("error.btn-try-again")})]}),i.jsx(Id,{})]})}const JV=C("div").withConfig({displayName:"SessionPhishingSignalErrorPage__Container",componentId:"sc-lrt0fu-0"})(["margin:",";padding-top:","px;"],F.widgetPadding,F.base*2),XV=C("div").withConfig({displayName:"SessionPhishingSignalErrorPage__Header",componentId:"sc-lrt0fu-1"})(["min-height:",";margin-bottom:","px;"],Me.header,F.base*4);function eB(){var r,o,a,s,c,l;const e=Ke(d=>d.inquiry.inquiry);if(!(e!=null))return null;const n=(s=(a=(o=(r=e==null?void 0:e.attributes)==null?void 0:r["next-step"])==null?void 0:o.config)==null?void 0:a.localizations)==null?void 0:s["phishing-signal-dialog"];return i.jsxs(i.Fragment,{children:[i.jsxs(JV,{"data-test":"session-phishing-signal-error-page",children:[i.jsxs(XV,{children:[i.jsx(et,{children:(c=n==null?void 0:n.title)!=null?c:""}),i.jsxs(qe,{children:[(l=n==null?void 0:n.prompt)!=null?l:""," "]})]}),i.jsx($e,{"aria-label":"pictograph showing application error",children:i.jsx(ye,{children:i.jsx(kn,{})})})]}),i.jsx(Id,{})]})}var au=(e=>(e.NONE="none",e.WARN="warn",e.BLOCK="block",e))(au||{});function tB(){var u,h,m,p,g,b,x,y,v,_,A,T,R,O,D,L,H,M,B;const[e,{enable:t,disable:n}]=st(!1),r=Ke(V=>V.inquiry.inquiry),o=r!=null,a=Ke(V=>{var q,$,Q;return(Q=($=(q=V.inquiry.currentSession)==null?void 0:q.attributes)==null?void 0:$["show-new-device-fraud-warning-dialog"])!=null?Q:!1}),s=Ke(V=>{var $,Q;const q=(Q=($=V.inquiry.currentSession)==null?void 0:$.attributes)==null?void 0:Q["detected-phishing-signal-strictness"];return q!=null&&q===au.WARN}),c=Ke(pi),l={backgroundColor:(h=(u=c==null?void 0:c["background-color"])==null?void 0:u.base)==null?void 0:h.base,padding:(p=(m=c==null?void 0:c.padding)==null?void 0:m.modal)==null?void 0:p.base,border:{radius:(b=(g=c==null?void 0:c["border-radius"])==null?void 0:g.modal)==null?void 0:b.base}};if(f.useEffect(()=>{o&&(a||s)&&setTimeout(()=>t(),250)},[o,a,s,t]),!o||!N.isHosted)return null;let d;return a?d=(_=(v=(y=(x=r==null?void 0:r.attributes)==null?void 0:x["next-step"])==null?void 0:y.config)==null?void 0:v.localizations)==null?void 0:_["new-device-fraud-warning-dialog"]:s&&(d=(O=(R=(T=(A=r==null?void 0:r.attributes)==null?void 0:A["next-step"])==null?void 0:T.config)==null?void 0:R.localizations)==null?void 0:O["phishing-signal-dialog"]),i.jsxs(_i,{isOpen:e,onClose:n,styles:l,"data-test":"session-phishing-signal-warning-dialog","aria-labelledby":"session-phishing-signal-warning-dialog__title","aria-describedby":"session-phishing-signal-warning-dialog__description",children:[i.jsx(dt,{id:"session-phishing-signal-warning-dialog__title",styles:(D=c==null?void 0:c["title-style"])==null?void 0:D.base.base,children:i.jsx(J,{children:(L=d==null?void 0:d.title)!=null?L:""})}),i.jsxs(ot,{id:"session-phishing-signal-warning-dialog__description",styles:(H=c==null?void 0:c["text-style"])==null?void 0:H.base.base,children:[i.jsx(J,{children:(M=d==null?void 0:d.prompt)!=null?M:""})," "]}),i.jsx(We,{height:2}),i.jsx(ge,{id:"session-phishing-signal-warning-dialog__button--close","data-test":"session-phishing-signal-warning-dialog__button--close",buttonType:ne.Primary,styles:(B=c==null?void 0:c["button-primary-style"])==null?void 0:B.base.base,onClick:n,children:d==null?void 0:d["btn-continue"]})]})}const nB=()=>{var c;const{pathname:e}=Vr(),t=Ke(l=>l.inquiry.inquiry),n=Ke(l=>l.inquiry.featureFlags),r=(c=t==null?void 0:t.attributes)==null?void 0:c["next-step"],o=f.useRef({width:window.innerWidth,height:window.innerHeight,prevWidth:window.innerWidth,prevHeight:window.innerHeight}),[a,s]=f.useState(!1);return f.useEffect(()=>{a||!Bt.isEnabled(n)||!(n!=null&&n["inquiry:enable-capture-initial-window-size"])||(Bt.track({event:{type:"inquiry.screen.dimensions",data:{old_width:null,old_height:null,new_width:window.innerWidth,new_height:window.innerHeight,page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n}),s(!0))},[r,t,e,n,a]),f.useEffect(()=>{if(!Bt.isEnabled(n))return;const l=m=>{var g;const p=m.target;p!=null&&Bt.track({event:{type:"inquiry.ui.click",data:{button_type:m.button,element_name:(g=iB(p))!=null?g:void 0,pointer_type:m==null?void 0:m.pointerType,position_x:m.clientX,position_y:m.clientY,pressure:m==null?void 0:m.pressure,page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n})},d=()=>{Bt.track({event:{type:"inquiry.ui.background",data:{page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n})},u=()=>{Bt.track({event:{type:"inquiry.ui.foreground",data:{page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n})},h=Jh(500,m=>{if(!((m==null?void 0:m.currentTarget)instanceof Window))return;const p=m.currentTarget.innerWidth,g=m.currentTarget.innerHeight,b=o.current.width,x=o.current.height;o.current={width:p,height:g,prevWidth:b,prevHeight:x},Bt.track({event:{type:"inquiry.screen.dimensions",data:{old_width:b,old_height:x,new_width:p,new_height:g,page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n})});return window.addEventListener("click",l),window.addEventListener("blur",d),window.addEventListener("focus",u),window.addEventListener("resize",h),m8(e,r==null?void 0:r.type)||Bt.track({event:{type:"inquiry.page.view",data:{page_name:yr(e),step_name:r==null?void 0:r.name}},featureFlags:n}),()=>{window.removeEventListener("click",l),window.removeEventListener("blur",d),window.removeEventListener("focus",u),window.removeEventListener("resize",h)}},[r,e,n]),null};function iB(e){return e.id||e.getAttribute("data-react-class")}function rB(){var d,u,h,m,p,g,b,x,y,v,_,A,T,R,O;const[e,{enable:t,disable:n}]=st(!1),r=Ke(D=>D.inquiry.inquiry),o=r!=null,a=Ke(D=>{var L,H,M;return(M=(H=(L=D.inquiry.currentSession)==null?void 0:L.attributes)==null?void 0:H["show-unsupported-browser-warning-dialog"])!=null?M:!1}),s=(m=(h=(u=(d=r==null?void 0:r.attributes)==null?void 0:d["next-step"])==null?void 0:u.config)==null?void 0:h.localizations)==null?void 0:m["unsupported-browser-warning-dialog"],c=Ke(pi),l={backgroundColor:(g=(p=c==null?void 0:c["background-color"])==null?void 0:p.base)==null?void 0:g.base,padding:(x=(b=c==null?void 0:c.padding)==null?void 0:b.modal)==null?void 0:x.base,border:{radius:(v=(y=c==null?void 0:c["border-radius"])==null?void 0:y.modal)==null?void 0:v.base}};return f.useEffect(()=>{o&&a&&setTimeout(()=>t(),250)},[o,a]),o?i.jsxs(_i,{isOpen:e,onClose:n,styles:l,"data-test":"unsupported-browser-warning-dialog","aria-labelledby":"unsupported-browser-warning-dialog__title","aria-describedby":"unsupported-browser-warning-dialog__description",children:[i.jsx(dt,{id:"unsupported-browser-warning-dialog__title",styles:(_=c==null?void 0:c["title-style"])==null?void 0:_.base.base,children:i.jsx(J,{children:(A=s==null?void 0:s.title)!=null?A:""})}),i.jsx(ot,{id:"unsupported-browser-warning-dialog__description",styles:(T=c==null?void 0:c["text-style"])==null?void 0:T.base.base,children:i.jsx(J,{children:(R=s==null?void 0:s.prompt)!=null?R:""})}),i.jsx(We,{height:2}),i.jsx(ge,{id:"unsupported-browser-warning-dialog__button--close","data-test":"unsupported-browser-warning-dialog__button--close",buttonType:ne.Primary,styles:(O=c==null?void 0:c["button-primary-style"])==null?void 0:O.base.base,onClick:n,children:s==null?void 0:s["btn-continue"]})]}):null}const oB=["/verify","/verify/intro","/verify/success","/verify/support/sent","/verify/failed","/verify/database/pending","/verify/documents/:documentNumber/pending","/verify/government-id/pending","/verify/invalid/config","/verify/invalid/inquiry","/verify/invalid/verification"],aB=["/widget","/verify","/verify/exit","/verify/success","/verify/support/sent","/verify/failed","/verify/database/pending","/verify/documents/:documentNumber/pending","/verify/government-id/pending"],sB=["/widget","/verify","/verify/intro","/verify/database/pending","/verify/documents/:documentNumber/pending","/verify/government-id/pending"],cB=["/inquiry/inactive","/verify/invalid"],lB=()=>{var y,v;const e=Ke(_=>_.inquiry.inquiry),t=Ke(_=>_.inquiry.featureFlags),n=Ke(_=>_.verification.verification),r=Ke(_=>_.inquiry.template),o=f.useContext(tt),a=Dt(),s=Vr(),[c,{enable:l,disable:d}]=st(!1);f.useEffect(()=>{l();const _=setTimeout(d,500);return()=>{clearTimeout(_)}},[s]);const u=()=>{a.goBack()},h=()=>{cB.some(_=>Sn(s.pathname,{path:_,exact:!1,strict:!1}))?m():a.push("/verify/exit")},m=()=>{vd(),N.onEvent(Oe.Exit,{inquiryId:e==null?void 0:e.id,sessionToken:te.accessToken},{inquiry:e}),t["inquiry:remove-clear-memory-history"]?a.push("/widget",{preventBackNavigation:!0}):(Vn(a),a.push("/widget"))},p=n!=null&&n.attributes.status===kt.Submitted,g=!N.isHosted&&!N.isInline&&!aB.some(_=>Sn(s.pathname,{path:_,exact:!0,strict:!1}))&&!(r!=null&&r.attributes["hide-verify-exit-button"]);let b=((y=a.index)!=null?y:0)>0&&!oB.some(_=>Sn(s.pathname,{path:_,exact:!0,strict:!1}))&&!(r!=null&&r.attributes["hide-verify-back-button"]);t["inquiry:remove-clear-memory-history"]&&((v=s.state)!=null&&v.preventBackNavigation)&&(b=!1);let x=o.navbarLogoDisplay;return sB.some(_=>Sn(s.pathname,{path:_,exact:!0,strict:!1}))&&(x=Oi.None),i.jsx(zg,{onBack:u,onClose:h,showBackButton:b,showCloseButton:g,logoDisplay:x,logoUrl:o.logoUrl,loading:p||c})},dB=()=>{const e=Ke(n=>n.inquiry.inquiry);return po(e)?i.jsx(xE,{}):i.jsx(lB,{})},uB=f.createContext({}),mB=e=>{var r,o,a,s,c,l,d,u,h;const t=f.useContext(uB),n=(r=e.inputId)!=null?r:t.inputId;return{hasError:(o=e.hasError)!=null?o:t.hasError,hasWarning:(a=e.hasWarning)!=null?a:t.hasWarning,inputId:n,helperTextId:(s=e.helperTextId)!=null?s:t.helperTextId,errorTextId:(c=e.errorTextId)!=null?c:t.errorTextId,warningTextId:(l=e.warningTextId)!=null?l:t.warningTextId,labelId:(d=e.labelId)!=null?d:t.labelId,disabled:(u=e.disabled)!=null?u:t.disabled,maxLength:(h=e.maxLength)!=null?h:t.maxLength}},ta={width:32,height:18},co={diameter:14,offset:2},hB=C.div.withConfig({displayName:"ToggleSlider__Container",componentId:"sc-1hr5fbp-0"})(["display:inline-flex;align-items:center;position:relative;"]),pB=C.div.withConfig({displayName:"ToggleSlider__Switch",componentId:"sc-1hr5fbp-1"})(["transition:box-shadow ",";position:relative;display:inline-flex;height:","px;width:","px;border-radius:1000px;cursor:pointer;&","{cursor:not-allowed;}&","","{box-shadow:0px 0px 0px 2px ",";}&:before{position:absolute;content:'';height:","px;width:","px;top:0;right:0;bottom:0;background-color:",";transition:",";border-radius:1000px;}&:after{position:absolute;content:'';height:","px;width:","px;bottom:","px;background-color:",";transition:",";border-radius:1000px;right:","px;","}"],it.Fast,ta.height,ta.width,ho,xi,bn,I.Color.BackgroundInputCheckboxFocus,ta.height,ta.width,({theme:e,checked:t,disabled:n})=>n?t?I.Color.CoreBlue300:e.color.background.disabled:t?I.Color.BackgroundInputCheckboxChecked:I.Color.BackgroundInputToggle,it.Medium,co.diameter,co.diameter,co.offset,({theme:e})=>e.color.background.primary,it.Medium,co.offset,({checked:e})=>!e&&W(["transform:translateX(-","px);"],gB())),fB=C(jR).withConfig({displayName:"ToggleSlider__ToggleLabel",componentId:"sc-1hr5fbp-2"})(["cursor:",";color:",";padding:0 ",";white-space:nowrap;",""],({disabled:e})=>e?"initial":"pointer",I.Color.TextSecondary,I.Spacing[2],({theme:e,disabled:t})=>t&&W(["color:",";"],e.color.text.disabled));function gB(){return ta.width-co.diameter-co.offset*2}const bB=C.input.withConfig({displayName:"ToggleSlider__HiddenInput",componentId:"sc-1hr5fbp-3"})(["height:0;width:0;margin:-1px;border:0;overflow:hidden;clip:rect(0,0,0,0);position:absolute;"]),CB=f.forwardRef(function({className:t,disabled:n,titleOff:r="Off",titleOn:o="On",onChange:a=()=>{},value:s,id:c,labelOn:l,labelOff:d,"data-test":u},h){const m=mB({disabled:n}),p=f.useMemo(()=>Hh("pds_toggleslider__"),[]),g=s?l:d||l,[b,{enable:x,disable:y}]=st(),v=f.useCallback(()=>{var A;a(!s),(A=_.current)==null||A.focus()},[a,s]),_=f.useRef();return i.jsxs(hB,{className:t,"data-test":u,title:s?o:r,ref:h,children:[g!=null&&i.jsx(fB,{htmlFor:p,disabled:m.disabled,children:g}),i.jsx(pB,{id:c,checked:!!s,disabled:m.disabled,focused:b,onClick:m.disabled?void 0:v}),i.jsx(bB,{id:p,ref:_,"data-test-toggle-status":s?"on":"off",disabled:m.disabled,type:"checkbox",checked:!!s,readOnly:!0,onChange:n?void 0:v,onFocus:x,onBlur:y,"aria-checked":!!s,role:"switch","aria-readonly":m.disabled,...g?{"aria-labelledby":p}:{"aria-label":s?"Toggle on":"Toggle off"}})]})}),xB=C("div").withConfig({displayName:"DebugTools__Container",componentId:"sc-ng9um5-0"})(["cursor:pointer;display:flex;align-items:center;justify-content:flex-end;margin:","px auto;transition:0.5s;user-select:none;"," @media ","{position:fixed;right:20px;bottom:64px;&:hover,&:focus-within{right:0px;}}@media ","{max-width:",";width:100%;label{","}"],F.base,({flowType:e})=>e===rt.Embedded?`position: fixed;
    right: 20px;
    bottom: 64px;

    &:hover,
    &:focus-within {
      right: 0px;
    }`:"",xt.isMobile,xt.isNotMobile,({preferredDimensions:e})=>{var t;return(t=E(e==null?void 0:e["maximum-width"]))!=null?t:Gp.small},({flowType:e,templatePreferredDimensionsEnabled:t})=>t&&e===rt.Embedded?"":`color: ${Be.white};`),Mh=C("div").withConfig({displayName:"DebugTools__Prompt",componentId:"sc-ng9um5-1"})(["width:130px;white-space:nowrap;"]);function vB(e){const{inquiry:t,isVisible:n,forcedStatus:r,flowType:o}=e;f.useEffect(()=>{n&&r==null&&e.saveForcedStatus(kt.Passed,t)});const a=Xt("inquiry:enable-template-preferred-dimensions-configuration"),s=Ur(),c=r===kt.Passed?kt.Failed:kt.Passed;return n?i.jsx(xB,{id:`debug-tools__toggle-slider--${c}`,"data-test":"debug-tools",flowType:o,preferredDimensions:s,templatePreferredDimensionsEnabled:a,children:i.jsx(CB,{id:"debug-tools__toggle-slider",value:r===kt.Passed,labelOn:i.jsx(Mh,{children:"Pass verifications"}),labelOff:i.jsx(Mh,{children:"Fail verifications"}),onChange:()=>e.saveForcedStatus(c,t)})}):i.jsx("div",{})}const yB=C("div").withConfig({displayName:"HelpTab__Positioner",componentId:"sc-ok8jr7-0"})(["position:fixed;display:",";top:calc(100%);right:0;"],({isVisible:e})=>e?"block":"none"),IB=mi(["0%{box-shadow:0 2px 5px 0 rgba(0,0,0,0.3);}50%{box-shadow:0 2px 10px 2px rgba(0,0,0,0.3);}100%{box-shadow:0 2px 5px 0 rgba(0,0,0,0.3);}"]),SB=C("div").withConfig({displayName:"HelpTab__Contents",componentId:"sc-ok8jr7-1"})(["align-items:center;display:flex;transition:0.4s cubic-bezier(0,0,0.2,1);transform:translateY(-60px);&:hover{transform:translateY(-64px);}background-color:",";animation:"," 1s;animation-iteration-count:infinite;border:1px solid ",";border-radius:","px;cursor:pointer;margin:","px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;"],Be.white,IB,Be.gray20,F.base*3,F.base,F.base*1.5,F.base*2,F.base,F.base),wB=C(Sx).withConfig({displayName:"HelpTab__IconToggle",componentId:"sc-ok8jr7-2"})(["margin-right:4px;"]);function _B(e){return i.jsx(yB,{isVisible:e.isVisible,children:i.jsxs(SB,{onClick:e.isVisible?e.handleRouteToSupport:y1,"data-test":"help-tab__button",children:[i.jsx(wB,{}),"Help"]})})}const RB=C("div").withConfig({displayName:"InquiryProgressBar__Bar",componentId:"sc-pjtzlh-0"})(["width:","%;transition:width 0.5s;height:5px;background-color:",";position:absolute;z-index:",";"],e=>e.widthPercentage,({theme:e})=>e.colorProgressBar,At.navbar),AB=({widthPercentage:e,className:t})=>i.jsx(RB,{className:t,"data-test":"header__progress-bar",widthPercentage:e});function TB(e,t){if(e==="/verify/support/sent")return 100;const n=EB(t),r=t&&t.template?t.template.attributes["steps-config-types-count"]:1,o=!!t.inquiry,a=t&&t.inquiry&&yl(t.inquiry);let s;return a?s=100:o?s=Math.min(n/r*100,100):s=0,s}function EB(e){var n;if(!e||!e.verifications||!e.inquiry)return 0;let t=I1(e.verifications).filter(r=>r.attributes.status===kt.Passed).length;return(n=e.inquiry)!=null&&n.attributes["selected-country-code"]&&(t+=1),t}const kB=C("div").withConfig({displayName:"Notification__Container",componentId:"sc-r6vf7z-0"})(["box-shadow:",";border-radius:",";background-color:",";padding:",";padding-left:","px;margin:4px;pointer-events:all;display:flex;align-items:center;justify-content:space-between;"],gi.Mid,un.rounded,({theme:e})=>e.colorModalBackground,I.Spacing[3],sn*2.5);function NB({children:e,handleClose:t}){return i.jsxs(kB,{role:"alertdialog",children:[i.jsx(qe,{children:e}),i.jsx(fo,{id:"notification__close",onClick:t,type:"button",autoFocus:!0,"aria-label":"close",children:i.jsx(S1,{height:16,width:16})})]})}const Dl=250,jB=C("div").withConfig({displayName:"Notifications__ContentPositioner",componentId:"sc-7knmmm-0"})(["position:relative;"]),PB=C("div").withConfig({displayName:"Notifications__Content",componentId:"sc-7knmmm-1"})(["position:absolute;width:100%;overflow:hidden;z-index:",";height:200px;pointer-events:none;"],At.notifications),DB=C("div").withConfig({displayName:"Notifications__Anim",componentId:"sc-7knmmm-2"})(["position:absolute;width:100%;transition:","ms;&.slide-left-enter{transform:translateY(-100%);}&.slide-left-enter-active{transform:translateY(0%);}&.slide-left-exit{transform:translateY(0%);}&.slide-left-exit-active{transform:translateY(-100%);}"],Dl);function OB(e){const t=e.messages&&e.messages[0];return i.jsx(jB,{"data-test":"notifications",children:i.jsx(PB,{children:i.jsx(rp,{children:i.jsx(Ia,{timeout:{enter:Dl,exit:Dl},mountOnEnter:!0,unmountOnExit:!0,classNames:"slide-left",children:i.jsx(DB,{children:t&&i.jsx(NB,{id:t.id,"data-test":"notification",handleClose:e.clearMessages,children:t.message},t.id)})},t&&t.id)})})})}function LB(e){return{messages:e.messages.messages}}const FB={clearMessages:Lt},MB=ke(LB,FB),VB=MB(OB),BB=1e3;class qB{constructor(){this.distractionEvents=0,this.blurHandler=()=>{this.distractionEvents++},window.addEventListener("blur",this.blurHandler)}dispose(){window.removeEventListener("blur",this.blurHandler)}}class UB{constructor(){this.times=[],this.baseline=0,this.lastTime=Date.now(),this.currentlyActive=!0,this.hesitationBaseline=()=>this.baseline,this.hesitationCount=()=>this.times.length,this.hesitationTime=()=>w1(this.times),this.setActiveState=t=>{this.currentlyActive=t},this.updateTime=()=>{const t=Date.now(),n=t-this.lastTime;this.currentlyActive&&(this.baseline+=n,n>BB&&this.times.push(n)),this.lastTime=t},window.addEventListener("keydown",this.updateTime),window.addEventListener("mousemove",this.updateTime)}dispose(){window.removeEventListener("keydown",this.updateTime),window.removeEventListener("mousemove",this.updateTime)}}class HB{constructor(){this.shortcutCopies=0,this.shortcutPastes=0,this.keyHandler=t=>{const n=t.ctrlKey||t.metaKey;t.key==="v"&&n?this.shortcutPastes++:t.key==="c"&&n&&this.shortcutCopies++},window.addEventListener("keydown",this.keyHandler)}dispose(){window.removeEventListener("keydown",this.keyHandler)}}class $B{constructor(){this.autofillStarts=0,this.autofillCancels=0,this.insertedStyles=va(["input:-webkit-autofill{animation-name:onAutoFillStart;animation-play-state:paused;}input:not(:-webkit-autofill){animation-name:onAutoFillCancel;animation-play-state:paused;}@keyframes onAutoFillStart{from{}}@keyframes onAutoFillCancel{from{}}"]),this.autoFillStart=t=>this.autofillStarts++,this.autoFillCancel=t=>this.autofillCancels++,this.onAnimationStart=({target:t,animationName:n})=>{switch(n){case"onAutoFillStart":return this.autoFillStart(t);case"onAutoFillCancel":return this.autoFillCancel(t)}},this.onInput=t=>{typeof InputEvent<"u"&&t instanceof InputEvent&&(t.inputType==="insertReplacementText"||!("data"in t)?this.autoFillStart(t.target):this.autoFillCancel(t.target))},window.addEventListener("animationstart",this.onAnimationStart),window.addEventListener("input",this.onInput)}dispose(){window.removeEventListener("animationstart",this.onAnimationStart),window.removeEventListener("input",this.onInput)}}class GB{constructor(){var t;navigator.getBattery==null&&(this.batteryLifeStatus="unavailable"),(t=navigator.getBattery)==null||t.call(navigator).then(n=>{this.__batteryManager=n,this.batteryLifeStart=n.level*100,this.batteryLifeStatus="ready"}).catch(n=>{n.name!=="NotAllowedError"&&n.name!=="SecurityError"?(this.batteryLifeStatus="errored",Z(n)):this.batteryLifeStatus="unauthorized"})}get batteryLifeCurrent(){var t;return((t=this.__batteryManager)==null?void 0:t.level)!=null?this.__batteryManager.level*100:void 0}get charging(){var t;return(t=this.__batteryManager)==null?void 0:t.charging}}class WB{constructor(){this.DEV_TOOLS_DETECT_INTERVAL_MS=1e4,this.open=!1,this.detectors=[this.detectorByLoggingDate(),this.detectorByLoggingPerformance(),this.detectorByDebugger()],this.interval=setInterval(()=>{this.detect()},this.DEV_TOOLS_DETECT_INTERVAL_MS),this.detect()}detect(){for(const t of this.detectors){const n=t();if(this.open||(this.open=n),this.open)break}return this.open&&this.dispose(),this.open}detectorByLoggingDate(){let t=0;const n=new Date;return n.toString=()=>(t+=1,""),()=>(t=0,console.log(n),t>=3)}detectorByLoggingPerformance(){function t(s){const c=Date.now();return s(),Date.now()-c}function n(){const s={};for(let c=0;c<500;c++)s[`${c}`]=`${c}`;return s}function r(){const s=n(),c=[];for(let l=0;l<50;l++)c.push(s);return c}let o=0;const a=r();return()=>{const s=t(()=>console.table(a)),c=t(()=>console.log(a));return o=Math.max(o,c),o===0&&s<5?!1:s>=5&&s>o*10}}detectorByDebugger(){return()=>{const t=new Date;return(()=>{debugger})(),new Date().valueOf()-t.valueOf()>100}}dispose(){clearInterval(this.interval)}}var o0=(e=>(e.SaveForcedStatus="test/SAVE_FORCED_STATUS",e))(o0||{});function zB(e,t){if(!(!ys.sandboxToolsDisabled||t&&t.attributes.environment==="sandbox"))throw Z(new Error("Tried to set forced result when debug tools are disabled")),new Error("Tried to set forced result when debug tools are disabled");return{payload:{forcedStatus:e},type:"test/SAVE_FORCED_STATUS"}}const YB=3e4,KB=1e3,QB=3e3,ZB=C("div").withConfig({displayName:"Application__Content",componentId:"sc-sbyni9-0"})(["@media ","{position:absolute;left:0;right:0;top:0;bottom:0;}",""],xt.isMobile,({preferredDimensions:e})=>e?`
  @media ${xt.isNotMobile} {
    overflow: auto;
    ${e!=null&&e["minimum-height"]?`min-height: ${E(e["minimum-height"])};`:""}
    ${e!=null&&e["maximum-height"]?`max-height: ${E(e["maximum-height"])};`:""}
  }
  `:"");class JB extends f.Component{constructor(){super(...arguments),this.state={hasError:!1,prevBehaviorMetrics:void 0,lastPageChangeEventKey:void 0,blockOnAsyncAssetsLoading:!0},this.handleMessage=t=>{var n;if(t.origin===N.inquiryParams["iframe-origin"])switch(t.data.action){case hl.Open:cr();break;case hl.Exit:t.data.metadata.force?(z.logAmplitude("verify-ui.exit"),N.onEvent(Oe.Exit,{inquiryId:(n=this.props.inquiry)==null?void 0:n.id,sessionToken:te.accessToken},{inquiry:this.props.inquiry}),N.redirectToStart(this.props.history.push)):this.props.history.location.pathname!=="/verify/exit"&&this.props.history.push("/verify/exit");break}},this.updateBehaviorMetrics=async()=>{var r,o,a,s,c;if(this.props.currentSession==null)return;const t={type:w.CurrentInquirySession,attributes:{"distraction-events":this.distractionTracker.distractionEvents,"hesitation-baseline":this.hesitationTracker.hesitationBaseline(),"hesitation-count":this.hesitationTracker.hesitationCount(),"hesitation-time":this.hesitationTracker.hesitationTime(),"shortcut-copies":this.shortcutTracker.shortcutCopies,"shortcut-pastes":this.shortcutTracker.shortcutPastes,"autofill-cancels":this.autofillTracker.autofillCancels,"autofill-starts":this.autofillTracker.autofillStarts,"flow-type":N.flowType,"battery-life-start":(r=this.batteryLifeTracker)==null?void 0:r.batteryLifeStart,"battery-life-current":(o=this.batteryLifeTracker)==null?void 0:o.batteryLifeCurrent,"battery-life-charging":(a=this.batteryLifeTracker)==null?void 0:a.charging,"battery-life-status":(s=this.batteryLifeTracker)==null?void 0:s.batteryLifeStatus,...this.props.featureFlags["inquiry:enable-capture-devtools-open"]?{"devtools-open":(c=this.devtoolsTracker)==null?void 0:c.open}:{}}},n=JSON.stringify(t.attributes);if(n!==this.state.prevBehaviorMetrics)try{await this.props.updateBehaviorMetrics(t),this.setState({prevBehaviorMetrics:n})}catch{}},this.handleClickTracking=t=>{let n=t.target;const{history:r}=this.props;if(n!=null){for(;!this.getElementName(n)&&n.parentElement;)n=n.parentElement;z.logAmplitude("verify-ui.click",{element:this.getElementName(n),path:r.location.pathname})}},this.handleRouteToSupport=()=>{this.props.history.push("/verify/support/prompt")},this.handleRouteChange=(t,n)=>{n!=="REPLACE"&&this.props.clearMessagesOnRouteChange(),dx(t.pathname)},this.reportPageMetadata=({pageHeight:t})=>{const{inquiry:n,location:r}=this.props,{lastPageChangeEventKey:o}=this.state;r.pathname!=="/widget"&&r.key!==o&&(this.setState({lastPageChangeEventKey:r.key}),N.onEvent(Oe.PageChange,{name:n==null?void 0:n.attributes["next-step"].name,nameDisplay:n==null?void 0:n.attributes["next-step"]["name-display"],path:r.pathname,metadata:{pageHeight:t}}))}}static getDerivedStateFromError(){return{hasError:!0}}componentDidMount(){this.props.saveLocaleInfo(jv()),this.props.checkCamera(),window.addEventListener("message",this.handleMessage),window.addEventListener("click",this.handleClickTracking,{capture:!0}),N.onEvent(Oe.Load),this.unregister=this.props.history.listen(this.handleRouteChange),this.autofillTracker=new $B,this.distractionTracker=new qB,this.hesitationTracker=new UB,this.shortcutTracker=new HB,this.batteryLifeTracker=new GB,this.behaviorUpdateInterval=setInterval(this.updateBehaviorMetrics,YB),this.disableBlockOnAsyncAssetsLoadingMaxTimeout=setTimeout(()=>this.setState({blockOnAsyncAssetsLoading:!1}),QB)}componentWillUnmount(){var t,n;window.removeEventListener("message",this.handleMessage),window.removeEventListener("click",this.handleClickTracking),(t=this.unregister)==null||t.call(this),this.autofillTracker.dispose(),this.distractionTracker.dispose(),this.hesitationTracker.dispose(),this.shortcutTracker.dispose(),(n=this.devtoolsTracker)==null||n.dispose(),clearInterval(this.behaviorUpdateInterval),clearTimeout(this.disableBlockOnAsyncAssetsLoadingTimeout),clearTimeout(this.disableBlockOnAsyncAssetsLoadingMaxTimeout)}componentDidCatch(t,n){rr({level:"error",message:"Application.componentDidCatch",data:{name:t.name,message:t.message}}),Z(t,"fatal",n,{functionName:"Application.componentDidCatch"}),Jt({status:0,code:"application_error"},t)}componentDidUpdate(t){this.props.inquiry&&this.hesitationTracker.setActiveState(!0),Object.keys(this.props.featureFlags).length>0&&this.props.featureFlags["inquiry:enable-capture-devtools-open"]&&!this.devtoolsTracker&&(this.devtoolsTracker=new WB),this.props.asyncAssetLoadingInitiated&&!t.asyncAssetLoadingInitiated&&(this.disableBlockOnAsyncAssetsLoadingTimeout=setTimeout(()=>this.setState({blockOnAsyncAssetsLoading:!1}),KB))}render(){var g,b,x,y,v;const{forcedStatus:t,inquiry:n,inquiryState:r,localeIsLoaded:o,organization:a,template:s,theme:c,uiStatus:l,verifications:d,inquiryTemplateVersion:u}=this.props,h=fg(c),m=TB(this.props.location.pathname,r),p=r.fonts;if(this.state.hasError)return i.jsx(ku,{"data-test":"application__error",themeSerialized:h,flowType:N.flowType,customFonts:p,hidden:!1,children:i.jsx(ZV,{})});if(o){const _=((g=n==null?void 0:n.attributes)==null?void 0:g.environment)==="sandbox",A=!ys.sandboxToolsDisabled&&_&&["/verify/success","/verify/failed","/verify/support/sent"].every(L=>!Sn(this.props.location.pathname,{path:L})),T=RM(a,s,n,d)&&!Sn(this.props.location.pathname,{path:"/verify/support"})&&!Sn(this.props.location.pathname,{path:"/verify/failed"}),R=(x=(b=this.props.currentSession)==null?void 0:b.attributes)==null?void 0:x["detected-phishing-signal-strictness"],O=this.state.blockOnAsyncAssetsLoading&&this.props.asyncAssetsLoading,D=(v=this.props.featureFlags["inquiry:enable-template-preferred-dimensions-configuration"]?N.flowType===rt.Embedded?(y=u==null?void 0:u.attributes)==null?void 0:y["embedded-flow-preferred-dimensions"]:N.flowType===rt.Hosted?u==null?void 0:u.attributes["hosted-flow-preferred-dimensions"]:null:null)!=null?v:null;return i.jsxs(i.Fragment,{children:[i.jsx(zV,{}),i.jsx(nB,{}),i.jsx(YV,{}),i.jsx(ku,{"data-test":"application",flowType:N.flowType,isSandbox:_,sandboxBannerDisabled:ys.sandboxBannerDisabled,customFonts:p,footerWidgets:i.jsxs(i.Fragment,{children:[i.jsx(vB,{inquiry:n,isVisible:A,forcedStatus:t,saveForcedStatus:this.props.saveForcedStatus,flowType:N.flowType}),i.jsx(_B,{isVisible:T,handleRouteToSupport:this.handleRouteToSupport})]}),themeSerialized:h,hidden:l===tn.Initializing||!!O,children:R!=null&&R===au.BLOCK?i.jsx(eB,{}):i.jsxs(i.Fragment,{children:[po(n)?null:i.jsx(AB,{widthPercentage:m}),i.jsx(VB,{}),i.jsx(dB,{}),i.jsx(tB,{}),i.jsx(rB,{}),i.jsxs(ZB,{preferredDimensions:D,children:[i.jsx(GV,{pageTransition:h.pageTransition,onPageTransition:this.reportPageMetadata}),this.autofillTracker!=null&&i.jsx(this.autofillTracker.insertedStyles,{})]})]})})]})}else return i.jsx("div",{"data-test":"application__loading"})}getElementName(t){return t.id||t.getAttribute("data-react-class")}}function XB(e){return{currentSession:e.inquiry.currentSession,featureFlags:e.inquiry.featureFlags,forcedStatus:e.test.forcedStatus,inquiry:e.inquiry.inquiry,inquiryTemplateVersion:e.inquiry.inquiryTemplateVersion,inquiryState:e.inquiry,localeIsLoaded:!!e.locale.localeInfo,organization:e.inquiry.organization,template:e.inquiry.template,theme:e.inquiry.theme,verifications:e.inquiry.verifications,uiStatus:e.ui.status,asyncAssetsLoading:Object.values(e.ui.assetLoadingMap).some(Boolean),asyncAssetLoadingInitiated:e.ui.assetLoadingInitiated}}const eq={clearMessagesOnRouteChange:zv,saveForcedStatus:zB,saveLocaleInfo:Jp,showMessage:se,checkCamera:$r,updateBehaviorMetrics:Ov},tq=ke(XB,eq),nq=tq(JB),iq=_1(nq),rq=va(["*{border:0;box-sizing:inherit;-webkit-font-smoothing:antialiased;margin:0;outline:0;padding:0;text-rendering:optimizeLegibility;}html{box-sizing:border-box;height:100%;margin:0;padding:0;overflow:hidden;}table{border-spacing:0;}textarea{resize:none;}button{font-family:inherit;font-size:1em;}select{text-rendering:auto !important}"]),oq={status:En.CtaNotShown},aq=(e=oq,t)=>{switch(t.type){case Bf.SetStatus:{const n=t.payload.status;return{...e,status:n}}default:return e}},sq={status:tn.Initializing,showConfirmCancelDialog:!1,hasCamera:void 0,cameraOptions:void 0,pollerId:0,assetLoadingMap:{},assetLoadingInitiated:!1},cq=(e=sq,t)=>{switch(t.type){case xr.SetStatus:{const n=t.payload.status;return{...e,status:n}}case xr.SetConfirmCancelDialog:return{...e,showConfirmCancelDialog:t.payload.show};case xr.SetHasCamera:return{...e,hasCamera:t.payload.hasCamera};case xr.SetCameraOptions:return{...e,cameraOptions:t.payload.cameraOptions};case xr.IncrementPollerId:return{...e,pollerId:e.pollerId+1};case xr.SetAssetLoadingState:return{...e,assetLoadingMap:{...e.assetLoadingMap,[t.payload.url]:!0},assetLoadingInitiated:!0};case xr.ClearAssetLoadingState:return e.assetLoadingMap[t.payload.url]?{...e,assetLoadingMap:{...e.assetLoadingMap,[t.payload.url]:!1}}:e;default:return e}},lq={document:void 0,documentFiles:[],uploads:[],uploadedFiles:[],pendingDeletions:[],videoConstraints:void 0,uniqueId:0};function dq(e=lq,t){switch(t.type){case $n.SetDocument:return{...e,document:t.payload.document};case $n.SetDocumentFiles:return{...e,documentFiles:t.payload.documentFiles,pendingDeletions:e.pendingDeletions.filter(n=>t.payload.documentFiles.some(r=>r.id===n))};case $n.ClearDocument:return{...e,document:void 0,documentFiles:[],uploadedFiles:[]};case $n.SetVideoConstraints:return{...e,videoConstraints:t.payload.videoConstraints};case $n.UploadFile:return{...e,uploads:e.uploads.concat({file:t.payload.file,progress:0,id:e.uniqueId}),uniqueId:e.uniqueId+1};case $n.SetUploadProgress:return{...e,uploads:e.uploads.map(n=>n.file===t.payload.file?{...n,progress:t.payload.progress}:n)};case $n.AddUploadedFile:return{...e,uploadedFiles:e.uploadedFiles.concat(t.payload.uploadedFile)};case $n.ClearUploadedFiles:return{...e,uploadedFiles:[]};case $n.ClearUpload:return{...e,uploads:e.uploads.filter(n=>n.file!==t.payload.file)};case $n.ClearAllUploads:return{...e,uploads:[]};case $n.AddPendingDeletion:return{...e,pendingDeletions:[...e.pendingDeletions,t.payload.fileId]};case $n.ClearPendingDeletion:return{...e,pendingDeletions:e.pendingDeletions.filter(n=>n!==t.payload.fileId)};default:return e}}const uq={template:void 0,inquiryTemplateVersion:void 0,currentSession:void 0,currentStep:void 0,isWebGLIncompatible:void 0,popupUrl:null,inquiry:void 0,organization:void 0,theme:void 0,fonts:[],documents:[],verifications:[],verificationsForSession:[],featureFlags:{},productFeatures:{},collectedData:[],component:void 0,cachedInquiryTransitionParams:{}};function mq(e=uq,t){switch(t.type){case rn.LoadVerifications:{const{verifications:n}=t.payload;return{...e,verifications:n}}case rn.LogCollectedData:return{...e,collectedData:e.collectedData.concat(t.payload.data)};case rn.SaveVerification:{const{verification:n}=t.payload;return{...e,verifications:[...e.verifications.filter(r=>r.id!==n.id),n],verificationsForSession:[...e.verificationsForSession.filter(r=>r.id!==n.id),n]}}case rn.SaveThemeVariableFonts:{const{fonts:n}=t.payload;return{...e,fonts:n}}case rn.LoadDocuments:{const{documents:n}=t.payload;return{...e,documents:n}}case rn.UpdateDocumentAtIndex:{const{document:n,documentNumber:r}=t.payload;return{...e,documents:R1(r,n,e.documents)}}case rn.SaveTemplate:{const{template:n}=t.payload;return{...e,template:n}}case rn.SaveInquiryTemplateVersion:{const{inquiryTemplateVersion:n}=t.payload;return{...e,inquiryTemplateVersion:n}}case rn.SaveInquiry:{const{inquiry:n}=t.payload;return{...e,inquiry:n}}case rn.SaveOrganization:{const{organization:n}=t.payload;return{...e,organization:n}}case rn.SaveTheme:{const{theme:n}=t.payload;return{...e,theme:n}}case rn.SaveIsWebGLIncompatible:{const{isWebGLIncompatible:n}=t.payload;return{...e,isWebGLIncompatible:n}}case rn.SavePopupUrl:{const{popupUrl:n}=t.payload;return{...e,popupUrl:n}}case rn.SaveFeatureFlags:return{...e,featureFlags:t.payload.featureFlags};case rn.SaveProductFeatures:return{...e,productFeatures:t.payload.productFeatures};case rn.SetCurrentSession:return{...e,currentSession:t.payload.session};case rn.SetCurrentStep:return{...e,currentStep:t.payload.step};case rn.SetComponent:return{...e,component:t.payload.component};case rn.SetCachedInquiryTransitionParams:return{...e,cachedInquiryTransitionParams:t.payload.cachedInquiryTransitionParams};default:return e}}const hq={localeInfo:void 0};function pq(e=hq,t){switch(t.type){case Zp.SaveLocaleInfo:return{...e,localeInfo:t.payload.localeInfo};default:return e}}const fq={messages:[]};function gq(e=fq,t){switch(t.type){case Yo.ShowMessage:return{messages:[t.payload,...e.messages]};case Yo.ClearMessage:return{messages:A1(n=>n.id===t.payload.id,e.messages)};case Yo.ClearMessages:return{messages:[]};case Yo.ClearMessagesOnRouteChange:return{messages:e.messages.filter(n=>n.persist).map(n=>({...n,persist:!1}))};default:return e}}const bq={phoneNumber:void 0,emailAddress:void 0};function Cq(e=bq,t){switch(t.type){case _l.SavePhoneNumber:return{...e,phoneNumber:t.payload.phoneNumber};case _l.SaveEmailAddress:return{...e,emailAddress:t.payload.emailAddress};default:return e}}const xq={forcedStatus:ys.sandboxToolsDisabled?void 0:kt.Passed};function vq(e=xq,t){switch(t.type){case o0.SaveForcedStatus:return{...e,forcedStatus:t.payload.forcedStatus};default:return e}}const Ui={verification:void 0,submittedValues:void 0,capturedSelfies:[],captureStartedAt:void 0,clientExtractions:[],clientExtractionSource:void 0,cameraInspectionData:void 0,captureMethod:void 0,uploads:{},uploadProgress:0,verificationType:void 0,governmentIdClass:void 0,audioConstraints:!1,videoConstraints:{},videoData:void 0,videoCaptureEnabled:!1,autoclassificationCountryCode:void 0,autoclassificationFailureReason:void 0,idClassesByCountries:[],didAutoclassificationIdSelection:!1};function yq(e=Ui,t){var n,r,o;switch(t.type){case Qt.SaveCaptureMethod:return{...e,captureMethod:t.payload.captureMethod};case Qt.SaveUploadProgress:return{...e,uploadProgress:t.payload.progress};case Qt.SaveActiveVerificationType:return{...e,verificationType:t.payload.verificationType};case Qt.SaveActiveVerification:return{...e,verification:t.payload.verification};case Qt.SelectGovernmentIdClass:return{...e,governmentIdClass:t.payload.governmentIdClass,clientExtractions:[],uploads:{}};case Qt.SaveSubmittedValues:return{...e,submittedValues:t.payload.submittedValues};case Qt.SaveAudioConstraints:return{...e,audioConstraints:t.payload.audioConstraints};case Qt.SaveVideoConstraints:return{...e,videoConstraints:t.payload.videoConstraints};case Qt.SaveVideoCaptureEnabled:return{...e,videoCaptureEnabled:t.payload.videoCaptureEnabled};case Qt.SaveCapturedSelfie:{const{selfieStep:a,imageDataUrl:s,captureMethod:c,capturedAt:l}=t.payload;return{...e,capturedSelfies:dd(e.capturedSelfies,a,s,c,l)}}case Qt.ClearCapturedSelfies:return{...e,capturedSelfies:[]};case Qt.SaveCaptureStartedAt:{const{captureStartedAt:a}=t.payload;return{...e,captureStartedAt:a}}case Qt.ClearCaptureStartedAt:return{...e,captureStartedAt:void 0};case Qt.ClearUploadFiles:return{...e,uploads:{}};case Qt.UpdateCameraInspectionData:{const{cameraInspectionData:a}=t.payload;return a?{...e,cameraInspectionData:a}:e}case Qt.UploadFiles:{const{uploads:a}=e,{actionStep:s,clientExtractions:c=[],files:l,clientExtractionSource:d}=t.payload,u={...a,[s]:l},h=T1(Qh(m=>m.type),$h(m=>m.reduce((p,g)=>E1(p,g),{})),k1)([...e.clientExtractions,...c]);return{...e,clientExtractions:h,clientExtractionSource:d,uploads:u}}case Qt.SaveAutoclassificationSuccessIdDetails:return{...e,autoclassificationCountryCode:t.payload.autoclassificationCountryCode,governmentIdClass:t.payload.governmentIdClass,idClassesByCountries:(n=t.payload.idClassesByCountries)!=null?n:Ui.idClassesByCountries,didAutoclassificationIdSelection:!1};case Qt.SaveAutoclassificationFailureResult:return{...e,autoclassificationFailureReason:t.payload.autoclassificationFailureReason,idClassesByCountries:(r=t.payload.idClassesByCountries)!=null?r:Ui.idClassesByCountries};case Qt.SaveAutoclassificationIdSelection:return{...e,autoclassificationCountryCode:t.payload.autoclassificationCountryCode,governmentIdClass:t.payload.governmentIdClass,didAutoclassificationIdSelection:!0};case Qt.ResetAutoclassificationState:return{...e,autoclassificationCountryCode:Ui.autoclassificationCountryCode,governmentIdClass:Ui.governmentIdClass,didAutoclassificationIdSelection:Ui.didAutoclassificationIdSelection,clientExtractions:Ui.clientExtractions,uploads:Ui.uploads};case Qt.SaveAutoclassificationIdClassesByCountries:return{...e,idClassesByCountries:(o=t.payload.idClassesByCountries)!=null?o:Ui.idClassesByCountries};default:return e}}const su=N1({initialEntries:[window.location.pathname+window.location.search]}),Iq=e=>j1({form:Te.reducer,locale:pq,messages:gq,inquiry:mq,test:vq,oneTimeLink:Cq,document:dq,verification:yq,router:D1(e),ui:cq,createPersona:aq,verifyWithPersona:gy}),Sq=Iq(su),wq=P1({reducer:Sq,middleware:e=>e({immutableCheck:!1}).concat(O1(su)),devTools:!1});Li(di,{retries:3,retryDelay:Li.exponentialDelay,retryCondition:Li.isNetworkOrIdempotentRequestError});const _q=(e,t,n)=>{const r=e[t];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},Rq={type:"backend",init:function(e,t,n){},read:async function(e,t,n){n(null,await a0(e,3))},save:function(e,t,n){},create:function(e,t,n,r){}};async function a0(e,t,n=0){try{const r=await _q(Object.assign({"../../app/assets/locales/translation.ar-EG.json":()=>Ze(()=>import("./translation.ar-EG.json-BeRMgX0d.js"),[]),"../../app/assets/locales/translation.az.json":()=>Ze(()=>import("./translation.az.json-ezKoIpk9.js"),[]),"../../app/assets/locales/translation.bg.json":()=>Ze(()=>import("./translation.bg.json-BcGhz599.js"),[]),"../../app/assets/locales/translation.bn.json":()=>Ze(()=>import("./translation.bn.json-Dua8yzvN.js"),[]),"../../app/assets/locales/translation.cs.json":()=>Ze(()=>import("./translation.cs.json-cJIvmiDM.js"),[]),"../../app/assets/locales/translation.cy.json":()=>Ze(()=>import("./translation.cy.json-C0sdYAQw.js"),[]),"../../app/assets/locales/translation.da.json":()=>Ze(()=>import("./translation.da.json-CHspebid.js"),[]),"../../app/assets/locales/translation.de.json":()=>Ze(()=>import("./translation.de.json-DwthuvUz.js"),[]),"../../app/assets/locales/translation.el-GR.json":()=>Ze(()=>import("./translation.el-GR.json-Ds2C8XhZ.js"),[]),"../../app/assets/locales/translation.en-US.json":()=>Ze(()=>import("./translation.en-US.json-CvyTMKHp.js"),[]),"../../app/assets/locales/translation.es-MX.json":()=>Ze(()=>import("./translation.es-MX.json-KzINOHeb.js"),[]),"../../app/assets/locales/translation.fi.json":()=>Ze(()=>import("./translation.fi.json-HEOK3QOI.js"),[]),"../../app/assets/locales/translation.fr.json":()=>Ze(()=>import("./translation.fr.json-B03yU5gp.js"),[]),"../../app/assets/locales/translation.he.json":()=>Ze(()=>import("./translation.he.json-C0voANw0.js"),[]),"../../app/assets/locales/translation.hi.json":()=>Ze(()=>import("./translation.hi.json-B671RAS5.js"),[]),"../../app/assets/locales/translation.hr.json":()=>Ze(()=>import("./translation.hr.json-C_YaMI9u.js"),[]),"../../app/assets/locales/translation.hu.json":()=>Ze(()=>import("./translation.hu.json-YTx2cCgr.js"),[]),"../../app/assets/locales/translation.hy.json":()=>Ze(()=>import("./translation.hy.json-Chz4vadL.js"),[]),"../../app/assets/locales/translation.id-ID.json":()=>Ze(()=>import("./translation.id-ID.json-BPZcUBI2.js"),[]),"../../app/assets/locales/translation.it.json":()=>Ze(()=>import("./translation.it.json-CwDXWAp9.js"),[]),"../../app/assets/locales/translation.ja.json":()=>Ze(()=>import("./translation.ja.json-7YG5fI9X.js"),[]),"../../app/assets/locales/translation.ko-KR.json":()=>Ze(()=>import("./translation.ko-KR.json-BcKyo61x.js"),[]),"../../app/assets/locales/translation.lt.json":()=>Ze(()=>import("./translation.lt.json-BCu-1iZU.js"),[]),"../../app/assets/locales/translation.ms.json":()=>Ze(()=>import("./translation.ms.json-D57gr5aT.js"),[]),"../../app/assets/locales/translation.nl-NL.json":()=>Ze(()=>import("./translation.nl-NL.json-DzrwoAo0.js"),[]),"../../app/assets/locales/translation.no.json":()=>Ze(()=>import("./translation.no.json-Brc91880.js"),[]),"../../app/assets/locales/translation.pl.json":()=>Ze(()=>import("./translation.pl.json-CBt6VKSX.js"),[]),"../../app/assets/locales/translation.pt-BR.json":()=>Ze(()=>import("./translation.pt-BR.json-KTMvgAIT.js"),[]),"../../app/assets/locales/translation.ro.json":()=>Ze(()=>import("./translation.ro.json-B7_FobTN.js"),[]),"../../app/assets/locales/translation.ru.json":()=>Ze(()=>import("./translation.ru.json-DgKysjLa.js"),[]),"../../app/assets/locales/translation.sk.json":()=>Ze(()=>import("./translation.sk.json-DPlxtLAW.js"),[]),"../../app/assets/locales/translation.sr.json":()=>Ze(()=>import("./translation.sr.json-CczZ027G.js"),[]),"../../app/assets/locales/translation.sv.json":()=>Ze(()=>import("./translation.sv.json-CK7zlNpJ.js"),[]),"../../app/assets/locales/translation.ta.json":()=>Ze(()=>import("./translation.ta.json-B0CgoPlk.js"),[]),"../../app/assets/locales/translation.th.json":()=>Ze(()=>import("./translation.th.json-DZ3R393W.js"),[]),"../../app/assets/locales/translation.tl.json":()=>Ze(()=>import("./translation.tl.json-CCrF3u23.js"),[]),"../../app/assets/locales/translation.tr-TR.json":()=>Ze(()=>import("./translation.tr-TR.json-C2Mm8a-j.js"),[]),"../../app/assets/locales/translation.uk-UA.json":()=>Ze(()=>import("./translation.uk-UA.json-BuCIZH66.js"),[]),"../../app/assets/locales/translation.ur.json":()=>Ze(()=>import("./translation.ur.json-CWq2Iwpg.js"),[]),"../../app/assets/locales/translation.vi.json":()=>Ze(()=>import("./translation.vi.json-CO3o2Nii.js"),[]),"../../app/assets/locales/translation.zh-CN.json":()=>Ze(()=>import("./translation.zh-CN.json-B6gmuig6.js"),[]),"../../app/assets/locales/translation.zh-TW.json":()=>Ze(()=>import("./translation.zh-TW.json-D-twEY7h.js"),[])}),`../../app/assets/locales/translation.${e}.json`,6),o=r.default||r;if(o==null)throw new Error("Failed to dynamic import resource bundle");return ls({...o})}catch{return n===t?void 0:new Promise(r=>setTimeout(()=>r(a0(e,t,n+1)),500*(n+1)))}}const os={ar:"ar-EG",el:"el-GR",en:"en-US",es:"es-MX",id:"id-ID",ko:"ko-KR",nl:"nl-NL",pt:"pt-BR",tr:"tr-TR",uk:"uk-UA",zh:"zh-CN"};function Aq(e){if(e in Nr)return e;if(e in os)return os[e];const t=e.split("-")[0];return t in Nr?t:t in os?os[t]:e}js.on("languageChanged",e=>document.documentElement.lang=e);js.use(L1).use(F1).use(Rq).init({compatibilityJSON:"v3",fallbackLng:{default:["en-US"]},resources:{"en-US":Nx},partialBundledLanguages:!0,detection:{lookupQuerystring:"language",convertDetectedLanguage:Aq},load:"currentOnly",supportedLngs:Object.keys(Nr),interpolation:{escapeValue:!1},react:{bindI18n:"languageChanged loaded",bindI18nStore:"added removed",nsMode:"default",useSuspense:!1},debug:!1});Hi.getInstance().init("8f9fcc63055c35a7ba867e38e0738939",void 0,{storage:"none",saveEvents:!1}),gx({release:"persona-web-inquiry@96406845f68",environment:/^(.+\.)?withpersona-staging\.com$/i.test(window.location.hostname)?"staging":"production",dsn:"https://233a1fa0fc38474f8743ec12dbe3f2a4@o175220.ingest.sentry.io/5579484",ignoreErrors:["TypeError: Load failed","Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.","Node.removeChild: The node to be removed is not a child of this node","Error: No error message","[IGNORED]",'Could not load "util"','Could not load "stats".',"Can't find variable: HTMLDialogElement","ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","The operation couldn’t be completed. Software caused connection abort","Unexpected end of input",/^NotAllowedError/,"NotFoundError: Requested device not found","TypeError: Cannot redefine property:","can't access dead object",/^Failed to fetch$/,"ReferenceError: Can't find variable: zaloJSV2","ReferenceError: zaloJSV2 is not defined",/LPContentScriptFeatures/,/metamask/,/Could not inject \w+ provider because it's not your default extension/,"ethereum","solana","webkit-masked-url://hidden/",/get-frame-manager-configuration/,"Not implemented on this platform","Object Not Found Matching Id:","grecaptcha","__ybHasBeenPasswordField","getReadModeRender","getReadModeExtract","getReadModeConfig","window.webkit.messageHandlers"],beforeSend:(e,t)=>{const{originalException:n}=t;return n instanceof Jl?null:Tq(e)}});function Tq(e){return e.tags={...e.tags,rate_based:"True"},e}class Eq extends f.Component{constructor(){super(...arguments),this.state={hasError:!1}}render(){return i.jsx(i.Fragment,{children:i.jsxs(f.StrictMode,{children:[i.jsx(rq,{}),i.jsx(M1,{store:this.store,children:i.jsx(V1,{history:this.history,children:i.jsx(B1,{children:i.jsx(iq,{})})})})]})})}get history(){return this.props.history||su}get store(){return this.props.store||wq}}document.getElementById("inquiry-preload-no-op")||q1.render(i.jsx(Eq,{}),document.getElementById("main-application"));export{ge as B,Ye as C,z as E,yt as F,N as H,S3 as L,J as M,ft as P,Xe as S,dt as T,Ae as U,kq as __vite_legacy_guard,ot as a,$e as b,Kt as c,ne as d,Me as e,pr as f,Py as g,hi as h,$r as i,Zq as j,Lt as k,fr as l,te as m,It as n,Et as o,of as p,st as q,Tt as r,se as s,vn as t,Xi as u};
//# sourceMappingURL=inquiry-DV1jzxxw.js.map
